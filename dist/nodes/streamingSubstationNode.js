var _0x4a15=['power','powerEMA','ema','createAggregates','aggrConfigId','postConstructor','processRecord','timestamp','toISOString','currentEMA','getFloat','rawRecord','triggerOnAddCallbacks','getAggregates','stampm','push','broadcastAggregates','log','PROBLEM:\x20SubstationNode\x20timeline\x20problem.','./streamingNode.js','fusionNodeI','processRecordCb','parent','nodeid','buffer','position','lastTimestamp','lastcurrent','createStore','nodeId','datetime','current','float','voltage','store','currentTick','rawstore','addStreamAggr','previous','voltageTick','Time','voltageEMA','powerTick','timeSeriesTick'];(function(_0x369f88,_0x2ede60){var _0x1df7c6=function(_0xd205d2){while(--_0xd205d2){_0x369f88['push'](_0x369f88['shift']());}};var _0x4f906f=function(){var _0x31765f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x12311d,_0x54d811,_0x4a9350,_0x1c8d55){_0x1c8d55=_0x1c8d55||{};var _0x4602a8=_0x54d811+'='+_0x4a9350;var _0x22cd20=0x0;for(var _0x22cd20=0x0,_0x159ec1=_0x12311d['length'];_0x22cd20<_0x159ec1;_0x22cd20++){var _0x131599=_0x12311d[_0x22cd20];_0x4602a8+=';\x20'+_0x131599;var _0x43ac69=_0x12311d[_0x131599];_0x12311d['push'](_0x43ac69);_0x159ec1=_0x12311d['length'];if(_0x43ac69!==!![]){_0x4602a8+='='+_0x43ac69;}}_0x1c8d55['cookie']=_0x4602a8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2ab4a1,_0x3a2577){_0x2ab4a1=_0x2ab4a1||function(_0x46fe3c){return _0x46fe3c;};var _0x6186d8=_0x2ab4a1(new RegExp('(?:^|;\x20)'+_0x3a2577['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x4ed16c=function(_0x4ac21c,_0x5a4163){_0x4ac21c(++_0x5a4163);};_0x4ed16c(_0x1df7c6,_0x2ede60);return _0x6186d8?decodeURIComponent(_0x6186d8[0x1]):undefined;}};var _0x4b0a57=function(){var _0x28527b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x28527b['test'](_0x31765f['removeCookie']['toString']());};_0x31765f['updateCookie']=_0x4b0a57;var _0x4834cd='';var _0x1c4360=_0x31765f['updateCookie']();if(!_0x1c4360){_0x31765f['setCookie'](['*'],'counter',0x1);}else if(_0x1c4360){_0x4834cd=_0x31765f['getCookie'](null,'counter');}else{_0x31765f['removeCookie']();}};_0x4f906f();}(_0x4a15,0x6b));var _0x5ca1=function(_0x2d6f5d,_0x3285b1){_0x2d6f5d=_0x2d6f5d-0x0;var _0x338f79=_0x4a15[_0x2d6f5d];return _0x338f79;};var _0xa5f4bf=function(){var _0x439554=!![];return function(_0x48def2,_0x5bd297){var _0x1f9d3c=_0x439554?function(){if(_0x5bd297){var _0x4399d2=_0x5bd297['apply'](_0x48def2,arguments);_0x5bd297=null;return _0x4399d2;}}:function(){};_0x439554=![];return _0x1f9d3c;};}();var _0x3c1e5a=_0xa5f4bf(this,function(){var _0xf5d084=function(){return'\x64\x65\x76';},_0x30fcf2=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0xe783e9=function(){var _0x475880=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x475880['\x74\x65\x73\x74'](_0xf5d084['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0xecfdc1=function(){var _0x2e2628=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x2e2628['\x74\x65\x73\x74'](_0x30fcf2['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3c9821=function(_0x519a43){var _0x33d6db=~-0x1>>0x1+0xff%0x0;if(_0x519a43['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x33d6db)){_0xd58f27(_0x519a43);}};var _0xd58f27=function(_0x103618){var _0x1e3ff8=~-0x4>>0x1+0xff%0x0;if(_0x103618['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1e3ff8){_0x3c9821(_0x103618);}};if(!_0xe783e9()){if(!_0xecfdc1()){_0x3c9821('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x3c9821('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x3c9821('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x3c1e5a();const streamingNode=require(_0x5ca1('0x0'));class streamingSubstationNode extends streamingNode{constructor(_0x1bf57c,_0x2e5240,_0x3bee90,_0x1f0219,_0x2de423,_0x3ea840,_0x29d172){super(_0x1bf57c,_0x2e5240,_0x3bee90,_0x1f0219,_0x2de423,_0x3ea840,_0x29d172);this[_0x5ca1('0x1')]=_0x3ea840;this[_0x5ca1('0x2')]=_0x2de423;this[_0x5ca1('0x3')]=_0x29d172;this['nodeId']=_0x3bee90[_0x5ca1('0x4')];this[_0x5ca1('0x5')]=[];this[_0x5ca1('0x6')]=0x0;this[_0x5ca1('0x7')]=Number['MIN_SAFE_INTEGER'];this[_0x5ca1('0x8')]=0x0;this['lastvoltage']=0x0;this['base'][_0x5ca1('0x9')]({'name':this[_0x5ca1('0xa')],'fields':[{'name':'Time','type':_0x5ca1('0xb')},{'name':_0x5ca1('0xc'),'type':_0x5ca1('0xd')},{'name':_0x5ca1('0xe'),'type':_0x5ca1('0xd')},{'name':'power','type':_0x5ca1('0xd')}]});this['rawstore']=this['base'][_0x5ca1('0xf')](this[_0x5ca1('0xa')]);this[_0x5ca1('0x10')]=this[_0x5ca1('0x11')][_0x5ca1('0x12')]({'type':'timeSeriesTick','timestamp':'Time','value':_0x5ca1('0xc')});this['currentEMA']=this[_0x5ca1('0x11')][_0x5ca1('0x12')]({'type':'ema','inAggr':this[_0x5ca1('0x10')],'emaType':_0x5ca1('0x13'),'interval':0xf*0x3c*0x3e8,'initWindow':0x0});this[_0x5ca1('0x14')]=this[_0x5ca1('0x11')][_0x5ca1('0x12')]({'type':'timeSeriesTick','timestamp':_0x5ca1('0x15'),'value':_0x5ca1('0xe')});this[_0x5ca1('0x16')]=this[_0x5ca1('0x11')][_0x5ca1('0x12')]({'type':'ema','inAggr':this[_0x5ca1('0x14')],'emaType':'previous','interval':0xf*0x3c*0x3e8,'initWindow':0x0});this[_0x5ca1('0x17')]=this[_0x5ca1('0x11')][_0x5ca1('0x12')]({'type':_0x5ca1('0x18'),'timestamp':_0x5ca1('0x15'),'value':_0x5ca1('0x19')});this[_0x5ca1('0x1a')]=this['rawstore'][_0x5ca1('0x12')]({'type':_0x5ca1('0x1b'),'inAggr':this[_0x5ca1('0x14')],'emaType':_0x5ca1('0x13'),'interval':0xf*0x3c*0x3e8,'initWindow':0x0});super[_0x5ca1('0x1c')](_0x1f0219[_0x3bee90[_0x5ca1('0x1d')]]);super[_0x5ca1('0x1e')]();}[_0x5ca1('0x1f')](_0x283d50){let _0x4f2bdd=_0x283d50[_0x5ca1('0x20')];if(this['lastTimestamp']<_0x4f2bdd){let _0x40f09b=new Date(_0x4f2bdd);let _0x337202;if(isNaN(_0x40f09b)==!![]){_0x337202=0x0;}else{_0x337202=_0x40f09b[_0x5ca1('0x21')]();}let _0x141a4b=!(_0x5ca1('0xc')in _0x283d50)||isNaN(_0x283d50[_0x5ca1('0xc')])||_0x283d50[_0x5ca1('0xc')]==null;let _0x27590d=!(_0x5ca1('0xe')in _0x283d50)||isNaN(_0x283d50[_0x5ca1('0xe')])||_0x283d50[_0x5ca1('0xe')]==null;let _0x144cf7=_0x141a4b?this[_0x5ca1('0x22')][_0x5ca1('0x23')]():_0x283d50[_0x5ca1('0xc')];let _0x142913=_0x27590d?this[_0x5ca1('0x16')][_0x5ca1('0x23')]():_0x283d50[_0x5ca1('0xe')];let _0x3aac23=_0x141a4b&&_0x27590d?this[_0x5ca1('0x1a')][_0x5ca1('0x23')]():_0x144cf7*_0x142913;this[_0x5ca1('0x24')]=this[_0x5ca1('0x11')]['newRecord']({'Time':_0x337202,'current':_0x144cf7,'voltage':_0x142913,'power':_0x3aac23});this[_0x5ca1('0x11')][_0x5ca1('0x25')](this[_0x5ca1('0x24')]);let _0x1a6fa5=super[_0x5ca1('0x26')]();let _0x238a12=_0x1a6fa5;_0x238a12[_0x5ca1('0x27')]=_0x4f2bdd;_0x238a12[_0x5ca1('0xc')]=this[_0x5ca1('0x8')];_0x238a12['voltage']=this['lastvoltage'];if(_0x4f2bdd%this['fusionTick']==0x0){this[_0x5ca1('0x5')][_0x5ca1('0x28')](_0x238a12);super[_0x5ca1('0x29')](_0x1a6fa5);this[_0x5ca1('0x2')](this['fusionNodeI'],this[_0x5ca1('0x3')]);};}else{console[_0x5ca1('0x2a')](_0x5ca1('0x2b'));}}}module['exports']=streamingSubstationNode;