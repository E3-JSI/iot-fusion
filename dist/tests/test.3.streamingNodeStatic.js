var _0x4cca=['pc|variance|604800000','static','timeOfDay','holiday','dayBeforeHoliday','dayOfWeek','dayOfYear','monthOfYear','weather','temperature24','humidity24','pressure24','windBearing24','cloudCover24','streamingStaticNode','removeFolder','./db2/','createFolder','nodes','close','initialization','base\x20saved','equal','base','check\x20if\x20store\x20exists','rawstore','name','check\x20store\x20structure','Time','datetime','dayAfterHoliday','float','dayOfMonth','aggregates\x20initialized\x20-\x20number','keys','length','aggregates\x20initialized\x20-\x20key\x20names','deepEqual','holiday|tick','holiday|winbuf|604800000','holiday|ma|604800000','callback\x20function\x20should\x20be\x20set','function','parent\x20saved','parent','buffer','buffer\x20position\x20is\x200','position','master\x20flag\x20set\x20correctly','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','connectToKafka','createAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','deleteObsoleteRows','checkDataAvailability','setSlaveOffset\x20function\x20exists','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','slave\x20offset\x20set\x20correctly:\x20no\x20data','setSlaveOffset','processRecord','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','weekEnd','stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion','24\x20more\x20data\x20insertions\x20-\x20check\x20buffer','timestamp','floor','correct\x20aggregate\x20values','coorect\x20partial\x20feature\x20vector','getPartialFeatureVector','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../utils/fileManager.js','qminer','assert','192.168.85.98:2181','winbuf','variance','min','max','none','energy','value','pc|ma|3600000','pc|ma|21600000','pc|ma|86400000','pc|ma|2592000000','pc|max|86400000','pc|max|604800000','pc|variance|21600000'];(function(_0x5b27e3,_0x1b7d5f){var _0x490370=function(_0x310cfe){while(--_0x310cfe){_0x5b27e3['push'](_0x5b27e3['shift']());}};var _0x39a1e8=function(){var _0x17d53a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5d5bce,_0x2e9d3a,_0x34b93f,_0x51a609){_0x51a609=_0x51a609||{};var _0x24a743=_0x2e9d3a+'='+_0x34b93f;var _0x4877f3=0x0;for(var _0x4877f3=0x0,_0x45ebd5=_0x5d5bce['length'];_0x4877f3<_0x45ebd5;_0x4877f3++){var _0x5c27ce=_0x5d5bce[_0x4877f3];_0x24a743+=';\x20'+_0x5c27ce;var _0x300c60=_0x5d5bce[_0x5c27ce];_0x5d5bce['push'](_0x300c60);_0x45ebd5=_0x5d5bce['length'];if(_0x300c60!==!![]){_0x24a743+='='+_0x300c60;}}_0x51a609['cookie']=_0x24a743;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2b622f,_0x4e8c23){_0x2b622f=_0x2b622f||function(_0x47b25e){return _0x47b25e;};var _0x23a455=_0x2b622f(new RegExp('(?:^|;\x20)'+_0x4e8c23['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x4e0521=function(_0x4927e6,_0x1a09ed){_0x4927e6(++_0x1a09ed);};_0x4e0521(_0x490370,_0x1b7d5f);return _0x23a455?decodeURIComponent(_0x23a455[0x1]):undefined;}};var _0x3ef9d8=function(){var _0x5a9661=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5a9661['test'](_0x17d53a['removeCookie']['toString']());};_0x17d53a['updateCookie']=_0x3ef9d8;var _0x2d4c78='';var _0x28e9a3=_0x17d53a['updateCookie']();if(!_0x28e9a3){_0x17d53a['setCookie'](['*'],'counter',0x1);}else if(_0x28e9a3){_0x2d4c78=_0x17d53a['getCookie'](null,'counter');}else{_0x17d53a['removeCookie']();}};_0x39a1e8();}(_0x4cca,0x1df));var _0x4d8a=function(_0x3b6870,_0x19358b){_0x3b6870=_0x3b6870-0x0;var _0xc6faf8=_0x4cca[_0x3b6870];return _0xc6faf8;};var _0x1333a1=function(){var _0xff3aef=!![];return function(_0x90c534,_0xee1cef){var _0xc4cc5b=_0xff3aef?function(){if(_0xee1cef){var _0x185b1d=_0xee1cef['apply'](_0x90c534,arguments);_0xee1cef=null;return _0x185b1d;}}:function(){};_0xff3aef=![];return _0xc4cc5b;};}();var _0x6d264b=_0x1333a1(this,function(){var _0x5da985=function(){return'\x64\x65\x76';},_0x363f9d=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x20786a=function(){var _0x95628e=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x95628e['\x74\x65\x73\x74'](_0x5da985['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x41d09f=function(){var _0x1f9a54=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x1f9a54['\x74\x65\x73\x74'](_0x363f9d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0xdc900a=function(_0x1014f7){var _0x4b910d=~-0x1>>0x1+0xff%0x0;if(_0x1014f7['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x4b910d)){_0x112536(_0x1014f7);}};var _0x112536=function(_0x3110fa){var _0x39cd8c=~-0x4>>0x1+0xff%0x0;if(_0x3110fa['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x39cd8c){_0xdc900a(_0x3110fa);}};if(!_0x20786a()){if(!_0x41d09f()){_0xdc900a('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0xdc900a('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0xdc900a('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x6d264b();const streamingNode=require(_0x4d8a('0x0'));const streamingEnergyNode=require(_0x4d8a('0x1'));const streamingWeatherNode=require(_0x4d8a('0x2'));const streamingStaticNode=require('../nodes/streamingStaticNode.js');const fileManager=require(_0x4d8a('0x3'));const qm=require(_0x4d8a('0x4'));const fs=require('fs');var assert=require(_0x4d8a('0x5'));let connectionConfig={'zookeeper':_0x4d8a('0x6')};let aggrConfigs={'energy':[{'field':'pc','tick':[{'type':_0x4d8a('0x7'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x4d8a('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':_0x4d8a('0x8')},{'type':'ma'}]},{'type':_0x4d8a('0x7'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x4d8a('0x8')},{'type':'ma'},{'type':_0x4d8a('0x9')},{'type':_0x4d8a('0xa')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x4d8a('0x8')},{'type':'ma'},{'type':'min'},{'type':'max'}]},{'type':_0x4d8a('0x7'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':'holiday','tick':[{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'connection':{'type':_0x4d8a('0xb')},'fusionModel':'test','fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x4d8a('0xc'),'nodeid':'N1','aggrConfigId':_0x4d8a('0xc'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x4d8a('0xd'),'name':'pc'},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0xe')},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0xf')},{'type':'value','name':_0x4d8a('0x10')},{'type':_0x4d8a('0xd'),'name':'pc|ma|604800000'},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x11')},{'type':_0x4d8a('0xd'),'name':'pc|min|86400000'},{'type':_0x4d8a('0xd'),'name':'pc|min|604800000'},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x12')},{'type':'value','name':_0x4d8a('0x13')},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x14')},{'type':_0x4d8a('0xd'),'name':'pc|variance|86400000'},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x15')}]},{'time':-0x18,'attributes':[{'type':_0x4d8a('0xd'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':_0x4d8a('0xd'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':_0x4d8a('0xd'),'name':'pc'}]}]},{'type':_0x4d8a('0x16'),'nodeid':_0x4d8a('0x16'),'aggrConfigId':_0x4d8a('0x16'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x17')},{'type':_0x4d8a('0xd'),'name':'weekEnd'},{'type':'value','name':_0x4d8a('0x18')},{'type':_0x4d8a('0xd'),'name':'dayAfterHoliday'},{'type':'value','name':_0x4d8a('0x19')},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x1a')},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x1b')},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x1c')}]}]},{'type':_0x4d8a('0x1d'),'nodeid':_0x4d8a('0x1d'),'aggrConfigId':_0x4d8a('0x1d'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x1e')},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x1f')},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x20')},{'type':'value','name':'windSpeed24'},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x21')},{'type':_0x4d8a('0xd'),'name':_0x4d8a('0x22')}]}]}]};function processRecordDummyCb(_0x55a4c6,_0x47f3e6){return!![];}describe(_0x4d8a('0x23'),function(){let _0x9783c7;let _0xb9405;before(function(){fileManager[_0x4d8a('0x24')](_0x4d8a('0x25'));fileManager[_0x4d8a('0x26')](_0x4d8a('0x25'));_0x9783c7=new qm['Base']({'dbPath':'./db2/','mode':'createClean'});ssn=new streamingStaticNode(_0x9783c7,connectionConfig,fusionConfig[_0x4d8a('0x27')][0x1],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x9783c7[_0x4d8a('0x28')]();});describe(_0x4d8a('0x29'),function(){it(_0x4d8a('0x2a'),function(){assert[_0x4d8a('0x2b')](_0x9783c7,ssn[_0x4d8a('0x2c')]);});it(_0x4d8a('0x2d'),function(){assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x2e')][_0x4d8a('0x2f')],_0x4d8a('0x16'));});it(_0x4d8a('0x30'),function(){assert['deepEqual'](ssn[_0x4d8a('0x2e')]['fields'],[{'id':0x0,'name':_0x4d8a('0x31'),'type':_0x4d8a('0x32'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x4d8a('0x33'),'type':_0x4d8a('0x34'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':_0x4d8a('0x19'),'type':_0x4d8a('0x34'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':_0x4d8a('0x35'),'type':_0x4d8a('0x34'),'nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':_0x4d8a('0x1a'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':_0x4d8a('0x1b'),'type':_0x4d8a('0x34'),'nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':_0x4d8a('0x18'),'type':_0x4d8a('0x34'),'nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':_0x4d8a('0x1c'),'type':_0x4d8a('0x34'),'nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':'weekEnd','type':_0x4d8a('0x34'),'nullable':![],'internal':![],'primary':![]}]);});it(_0x4d8a('0x36'),function(){assert[_0x4d8a('0x2b')](Object[_0x4d8a('0x37')](ssn['aggregate'])[_0x4d8a('0x38')],0x3);});it(_0x4d8a('0x39'),function(){assert[_0x4d8a('0x3a')](Object[_0x4d8a('0x37')](ssn['aggregate']),[_0x4d8a('0x3b'),_0x4d8a('0x3c'),_0x4d8a('0x3d')]);});it('config\x20saved',function(){assert[_0x4d8a('0x3a')](ssn['config'],fusionConfig[_0x4d8a('0x27')][0x1]);});it('fusionNodeI\x20correctly\x20saved',function(){assert[_0x4d8a('0x2b')](ssn['fusionNodeI'],0x63);});it(_0x4d8a('0x3e'),function(){assert[_0x4d8a('0x2b')](typeof ssn['processRecordCb'],_0x4d8a('0x3f'));});it(_0x4d8a('0x40'),function(){assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x41')],null);});it('buffer\x20empty',function(){assert[_0x4d8a('0x3a')](ssn[_0x4d8a('0x42')],[]);});it(_0x4d8a('0x43'),function(){assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x44')],0x0);});it(_0x4d8a('0x45'),function(){assert[_0x4d8a('0x2b')](ssn['master'],![]);});it(_0x4d8a('0x46'),function(){assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x47')](),![]);});it(_0x4d8a('0x48'),function(){assert[_0x4d8a('0x2b')](typeof ssn[_0x4d8a('0x49')],'function');});it('broadcastAggregates\x20function\x20exists',function(){assert[_0x4d8a('0x2b')](typeof ssn['broadcastAggregates'],_0x4d8a('0x3f'));});it(_0x4d8a('0x4a'),function(){assert['equal'](typeof ssn[_0x4d8a('0x4b')],_0x4d8a('0x3f'));});it(_0x4d8a('0x4c'),function(){assert[_0x4d8a('0x2b')](typeof ssn['offsetExists'],'function');});it('deleteObsoleteRows\x20function\x20exists',function(){assert[_0x4d8a('0x2b')](typeof ssn[_0x4d8a('0x4d')],_0x4d8a('0x3f'));});it('checkDataAvailability\x20function\x20exists',function(){assert['equal'](typeof ssn[_0x4d8a('0x4e')],_0x4d8a('0x3f'));});it(_0x4d8a('0x4f'),function(){assert[_0x4d8a('0x2b')](typeof ssn['setSlaveOffset'],_0x4d8a('0x3f'));});it(_0x4d8a('0x50'),function(){assert[_0x4d8a('0x2b')](typeof ssn[_0x4d8a('0x51')],_0x4d8a('0x3f'));});it(_0x4d8a('0x52'),function(){assert['equal'](typeof ssn[_0x4d8a('0x51')],_0x4d8a('0x3f'));});it('getAggregates\x20function\x20exists',function(){assert[_0x4d8a('0x2b')](typeof ssn[_0x4d8a('0x53')],_0x4d8a('0x3f'));});it(_0x4d8a('0x54'),function(){assert[_0x4d8a('0x2b')](typeof ssn['getPartialFeatureVector'],_0x4d8a('0x3f'));});it(_0x4d8a('0x55'),function(){assert['equal'](ssn['isMaster'](),![]);});it(_0x4d8a('0x56'),function(){ssn['setMasterOffset']();assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x44')],-0x1);});it(_0x4d8a('0x57'),function(){assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x58')](0x0),![]);});});describe('data\x20insertion',function(){it('data\x20record\x20record\x20saved\x20correctly',function(){ssn[_0x4d8a('0x59')](JSON[_0x4d8a('0x5a')](_0x4d8a('0x5b')));assert['equal'](ssn[_0x4d8a('0x42')][_0x4d8a('0x38')],0x1);assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x42')][0x0][_0x4d8a('0x17')],0x0);assert[_0x4d8a('0x2b')](ssn['buffer'][0x0][_0x4d8a('0x33')],0x0);assert['equal'](ssn[_0x4d8a('0x42')][0x0][_0x4d8a('0x19')],0x1);assert['equal'](ssn['buffer'][0x0]['dayOfYear'],0x1);assert[_0x4d8a('0x2b')](ssn['buffer'][0x0][_0x4d8a('0x1a')],0x2);assert['equal'](ssn[_0x4d8a('0x42')][0x0][_0x4d8a('0x35')],0x1);assert['equal'](ssn[_0x4d8a('0x42')][0x0]['holiday'],0x1);assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x42')][0x0][_0x4d8a('0x1c')],0x1);assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x42')][0x0][_0x4d8a('0x5c')],0x0);});it(_0x4d8a('0x5d'),function(){assert[_0x4d8a('0x3a')](ssn[_0x4d8a('0x42')][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});});it(_0x4d8a('0x5e'),function(){let _0x2abdf8=JSON[_0x4d8a('0x5a')]('{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}');for(let _0x5d3bd8=0x1;_0x5d3bd8<=0x18;_0x5d3bd8++){_0x2abdf8[_0x4d8a('0x5f')]=_0x5d3bd8*0x3c*0x3c*0x3e8;_0x2abdf8[_0x4d8a('0x17')]=_0x5d3bd8%0x18;_0x2abdf8[_0x4d8a('0x1b')]=Math[_0x4d8a('0x60')](_0x5d3bd8/0x18)+0x1;_0x2abdf8['dayOfWeek']=Math[_0x4d8a('0x60')](_0x5d3bd8/0x18)+0x2;_0x2abdf8[_0x4d8a('0x35')]=Math[_0x4d8a('0x60')](_0x5d3bd8/0x18)+0x1;_0x2abdf8['dayOfYear']=Math[_0x4d8a('0x60')](_0x5d3bd8/0x18)+0x1;_0x2abdf8[_0x4d8a('0x18')]=0x1-Math[_0x4d8a('0x60')](_0x5d3bd8/0x18);ssn['processRecord'](_0x2abdf8);}assert[_0x4d8a('0x2b')](ssn[_0x4d8a('0x42')][_0x4d8a('0x38')],0x19);});it(_0x4d8a('0x61'),function(){assert[_0x4d8a('0x3a')](ssn[_0x4d8a('0x53')](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});});it(_0x4d8a('0x62'),function(){ssn[_0x4d8a('0x58')](0x0);assert[_0x4d8a('0x3a')](ssn[_0x4d8a('0x63')](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});