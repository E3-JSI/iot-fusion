const a0_0x2255=['close','exit','RecLinReg','OpenRead','initiated','filename','analytics','StructuredEMA','updateStream','OpenWrite','Vector','label','save','loadModel','log','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','qminer','method','length','partialFit','fusionTick','.bin','./StructuredEMA','horizon','predictionBuffer','buffer','model','exports','options','saveModel','push','shift','PARTIAL\x20FIT\x20ERROR!','constructor'];(function(_0x1b785a,_0x2255e7){const _0x17657a=function(_0x59470b){while(--_0x59470b){_0x1b785a['push'](_0x1b785a['shift']());}},_0xddd51f=function(){const _0x186ad9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4c3ec4,_0x5da43c,_0x5cc700,_0x10f0e7){_0x10f0e7=_0x10f0e7||{};let _0x49818d=_0x5da43c+'='+_0x5cc700,_0x127ffb=0x0;for(let _0x47d0e4=0x0,_0x59107f=_0x4c3ec4['length'];_0x47d0e4<_0x59107f;_0x47d0e4++){const _0x28c32a=_0x4c3ec4[_0x47d0e4];_0x49818d+=';\x20'+_0x28c32a;const _0x54d0d8=_0x4c3ec4[_0x28c32a];_0x4c3ec4['push'](_0x54d0d8),_0x59107f=_0x4c3ec4['length'],_0x54d0d8!==!![]&&(_0x49818d+='='+_0x54d0d8);}_0x10f0e7['cookie']=_0x49818d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x29f4c2,_0x40f1c3){_0x29f4c2=_0x29f4c2||function(_0xc55593){return _0xc55593;};const _0x4f50cb=_0x29f4c2(new RegExp('(?:^|;\x20)'+_0x40f1c3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x12a6a6=function(_0x385d39,_0x5a2155){_0x385d39(++_0x5a2155);};return _0x12a6a6(_0x17657a,_0x2255e7),_0x4f50cb?decodeURIComponent(_0x4f50cb[0x1]):undefined;}},_0x1a6bf4=function(){const _0x4deae3=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4deae3['test'](_0x186ad9['removeCookie']['toString']());};_0x186ad9['updateCookie']=_0x1a6bf4;let _0x559303='';const _0x182965=_0x186ad9['updateCookie']();if(!_0x182965)_0x186ad9['setCookie'](['*'],'counter',0x1);else _0x182965?_0x559303=_0x186ad9['getCookie'](null,'counter'):_0x186ad9['removeCookie']();};_0xddd51f();}(a0_0x2255,0xd7));const a0_0x1765=function(_0x1b785a,_0x2255e7){_0x1b785a=_0x1b785a-0x0;let _0x17657a=a0_0x2255[_0x1b785a];return _0x17657a;};const a0_0x5cc700=function(){let _0x4838be=!![];return function(_0x55b79d,_0x48be87){const _0xc2a513=_0x4838be?function(){if(_0x48be87){const _0x27cd9f=_0x48be87['apply'](_0x55b79d,arguments);return _0x48be87=null,_0x27cd9f;}}:function(){};return _0x4838be=![],_0xc2a513;};}(),a0_0x5da43c=a0_0x5cc700(this,function(){const _0x57f49e=function(){const _0x32b78d=_0x57f49e[a0_0x1765('0x16')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](a0_0x1765('0x4'));return!_0x32b78d['test'](a0_0x5da43c);};return _0x57f49e();});a0_0x5da43c();const qm=require(a0_0x1765('0x5')),la=require(a0_0x1765('0x5'))['la'],fs=require('fs'),EMAIncrementalModel=require('./EMA'),StructuredEMAIncrementalModel=require(a0_0x1765('0xb'));class IncrementalLearning{constructor(_0x2791cc,_0x4b4bea){this[a0_0x1765('0xc')]=_0x2791cc[a0_0x1765('0xf')]['horizon'],this['fusionTick']=_0x2791cc[a0_0x1765('0x9')],this['label']=_0x2791cc['model'][a0_0x1765('0x0')],this[a0_0x1765('0x11')]=_0x2791cc[a0_0x1765('0xf')]['options'],this[a0_0x1765('0x1b')]=![],this[a0_0x1765('0xd')]=[],this[a0_0x1765('0xe')]=[],this['filename']='./models/'+_0x4b4bea['fusion_id']+'-'+this[a0_0x1765('0x11')][a0_0x1765('0x6')]+a0_0x1765('0xa');}[a0_0x1765('0x1f')](_0x8e2efd,_0x38bbe3){this['buffer'][a0_0x1765('0x13')](_0x8e2efd);if(this[a0_0x1765('0xe')][a0_0x1765('0x7')]>this[a0_0x1765('0xc')]){let _0x471fce=_0x8e2efd[this[a0_0x1765('0x0')]],_0xe684b=new la[(a0_0x1765('0x21'))](this['buffer'][this[a0_0x1765('0xe')][a0_0x1765('0x7')]-this[a0_0x1765('0xc')]-0x1]);try{this[a0_0x1765('0xf')][a0_0x1765('0x8')](_0xe684b,_0x471fce);}catch(_0x524d2c){console['log'](a0_0x1765('0x15'),_0x524d2c),console[a0_0x1765('0x3')](this[a0_0x1765('0xe')][this[a0_0x1765('0xe')]['length']-this[a0_0x1765('0xc')]-0x1],_0x471fce),process[a0_0x1765('0x18')]();}}if(this[a0_0x1765('0xe')]['length']>0x0){if(this[a0_0x1765('0x1b')]==![]){this[a0_0x1765('0x1b')]=!![],this['options']['dim']=_0x8e2efd[a0_0x1765('0x7')];if(this['options'][a0_0x1765('0x6')]===a0_0x1765('0x19'))this[a0_0x1765('0xf')]=new qm['analytics'][(a0_0x1765('0x19'))](this[a0_0x1765('0x11')]);else this[a0_0x1765('0x11')][a0_0x1765('0x6')]===a0_0x1765('0x1e')?this[a0_0x1765('0xf')]=new StructuredEMAIncrementalModel(this[a0_0x1765('0x11')]):this[a0_0x1765('0xf')]=new EMAIncrementalModel(this[a0_0x1765('0x11')]);}let _0x5e0d9c=new la[(a0_0x1765('0x21'))](_0x8e2efd),_0x1e2c66=this[a0_0x1765('0xf')]['predict'](_0x5e0d9c);this[a0_0x1765('0xd')]['push'](_0x1e2c66);if(this[a0_0x1765('0xd')]['length']>this[a0_0x1765('0xc')])this[a0_0x1765('0xd')]['shift']();if(this[a0_0x1765('0xe')]['length']>this[a0_0x1765('0xc')])this[a0_0x1765('0xe')][a0_0x1765('0x14')]();let _0x5aa5e9=_0x38bbe3+this[a0_0x1765('0xc')]*this[a0_0x1765('0x9')];return{'ts':_0x5aa5e9,'value':_0x1e2c66,'horizon':this['horizon']};}}[a0_0x1765('0x12')](){let _0x29a63d=fs[a0_0x1765('0x20')](this['filename']);this[a0_0x1765('0xf')][a0_0x1765('0x1')](_0x29a63d),_0x29a63d['close']();}[a0_0x1765('0x2')](){let _0x561882=fs[a0_0x1765('0x1a')](this[a0_0x1765('0x1c')]);this[a0_0x1765('0xf')]=new qm[(a0_0x1765('0x1d'))][(a0_0x1765('0x19'))](_0x561882),_0x561882[a0_0x1765('0x17')]();}}module[a0_0x1765('0x10')]=IncrementalLearning;