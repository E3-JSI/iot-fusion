const a0_0x27c1=['Vector','analytics','buffer','loadModel','./EMA','constructor','RecLinReg','push','options','predict','horizon','OpenWrite','initiated','save','shift','close','StructuredEMA','OpenRead','qminer','exports','filename','model','PARTIAL\x20FIT\x20ERROR!','method','fusionTick','saveModel','label','.bin','log','EMA','exit','updateStream','length','predictionBuffer','return\x20/\x22\x20+\x20this\x20+\x20\x22/','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}'];(function(_0x215fb1,_0x27c1ab){const _0x38b378=function(_0x467b3c){while(--_0x467b3c){_0x215fb1['push'](_0x215fb1['shift']());}},_0x4ca17f=function(){const _0x19b963={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x346459,_0x473905,_0xc2d8d6,_0x4c06df){_0x4c06df=_0x4c06df||{};let _0x522470=_0x473905+'='+_0xc2d8d6,_0x2670cf=0x0;for(let _0x2b479b=0x0,_0x460538=_0x346459['length'];_0x2b479b<_0x460538;_0x2b479b++){const _0x24ee70=_0x346459[_0x2b479b];_0x522470+=';\x20'+_0x24ee70;const _0x48b235=_0x346459[_0x24ee70];_0x346459['push'](_0x48b235),_0x460538=_0x346459['length'],_0x48b235!==!![]&&(_0x522470+='='+_0x48b235);}_0x4c06df['cookie']=_0x522470;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4b71ce,_0x4615dd){_0x4b71ce=_0x4b71ce||function(_0x284938){return _0x284938;};const _0x1a46b8=_0x4b71ce(new RegExp('(?:^|;\x20)'+_0x4615dd['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x536464=function(_0xea7946,_0x536082){_0xea7946(++_0x536082);};return _0x536464(_0x38b378,_0x27c1ab),_0x1a46b8?decodeURIComponent(_0x1a46b8[0x1]):undefined;}},_0x2dec1e=function(){const _0x5a5759=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5a5759['test'](_0x19b963['removeCookie']['toString']());};_0x19b963['updateCookie']=_0x2dec1e;let _0x4dd1db='';const _0x352945=_0x19b963['updateCookie']();if(!_0x352945)_0x19b963['setCookie'](['*'],'counter',0x1);else _0x352945?_0x4dd1db=_0x19b963['getCookie'](null,'counter'):_0x19b963['removeCookie']();};_0x4ca17f();}(a0_0x27c1,0xf0));const a0_0x38b3=function(_0x215fb1,_0x27c1ab){_0x215fb1=_0x215fb1-0x0;let _0x38b378=a0_0x27c1[_0x215fb1];return _0x38b378;};const a0_0xc2d8d6=function(){let _0x1c03f1=!![];return function(_0x1c8240,_0x40b778){const _0x42c30c=_0x1c03f1?function(){if(_0x40b778){const _0x3bbd15=_0x40b778['apply'](_0x1c8240,arguments);return _0x40b778=null,_0x3bbd15;}}:function(){};return _0x1c03f1=![],_0x42c30c;};}(),a0_0x473905=a0_0xc2d8d6(this,function(){const _0x5079c0=function(){const _0x15d627=_0x5079c0[a0_0x38b3('0x11')](a0_0x38b3('0xa'))()[a0_0x38b3('0x11')](a0_0x38b3('0xb'));return!_0x15d627['test'](a0_0x473905);};return _0x5079c0();});a0_0x473905();const qm=require('qminer'),la=require(a0_0x38b3('0x1e'))['la'],fs=require('fs'),EMAIncrementalModel=require(a0_0x38b3('0x10')),StructuredEMAIncrementalModel=require('./StructuredEMA');class IncrementalLearning{constructor(_0x491b54,_0x4c6b5c){this[a0_0x38b3('0x16')]=_0x491b54[a0_0x38b3('0x21')]['horizon'],this['fusionTick']=_0x491b54[a0_0x38b3('0x0')],this['label']=_0x491b54[a0_0x38b3('0x21')]['label'],this[a0_0x38b3('0x14')]=_0x491b54['model']['options'],this[a0_0x38b3('0x18')]=![],this[a0_0x38b3('0x9')]=[],this[a0_0x38b3('0xe')]=[],this['filename']='./models/'+_0x4c6b5c['fusion_id']+'-'+this[a0_0x38b3('0x14')][a0_0x38b3('0x23')]+a0_0x38b3('0x3');}[a0_0x38b3('0x7')](_0x5172bf,_0x4c550b){this[a0_0x38b3('0xe')][a0_0x38b3('0x13')](_0x5172bf);if(this['buffer'][a0_0x38b3('0x8')]>this[a0_0x38b3('0x16')]){let _0xdd16e8=_0x5172bf[this[a0_0x38b3('0x2')]],_0x126a26=new la['Vector'](this['buffer'][this[a0_0x38b3('0xe')][a0_0x38b3('0x8')]-this['horizon']-0x1]);try{this['model']['partialFit'](_0x126a26,_0xdd16e8);}catch(_0x50a406){console['log'](a0_0x38b3('0x22'),_0x50a406),console[a0_0x38b3('0x4')](this['buffer'][this[a0_0x38b3('0xe')][a0_0x38b3('0x8')]-this['horizon']-0x1],_0xdd16e8),process[a0_0x38b3('0x6')]();}}if(this['buffer'][a0_0x38b3('0x8')]>0x0){if(this['initiated']==![]){this['initiated']=!![],this['options']['dim']=_0x5172bf[a0_0x38b3('0x8')];if(this[a0_0x38b3('0x14')]['method']===a0_0x38b3('0x12'))this[a0_0x38b3('0x21')]=new qm['analytics'][(a0_0x38b3('0x12'))](this['options']);else{if(this['options'][a0_0x38b3('0x23')]===a0_0x38b3('0x1c'))this['model']=new StructuredEMAIncrementalModel(this['options']);else{if(this['options'][a0_0x38b3('0x23')]===a0_0x38b3('0x5'))this['model']=new EMAIncrementalModel(this[a0_0x38b3('0x14')]);else throw Error('No\x20correct\x20model\x20selected',this[a0_0x38b3('0x14')][a0_0x38b3('0x23')]);}}}let _0x317de7=new la[(a0_0x38b3('0xc'))](_0x5172bf),_0x19dc7f=this['model'][a0_0x38b3('0x15')](_0x317de7);this[a0_0x38b3('0x9')][a0_0x38b3('0x13')](_0x19dc7f);if(this[a0_0x38b3('0x9')][a0_0x38b3('0x8')]>this[a0_0x38b3('0x16')])this[a0_0x38b3('0x9')][a0_0x38b3('0x1a')]();if(this['buffer'][a0_0x38b3('0x8')]>this[a0_0x38b3('0x16')])this['buffer'][a0_0x38b3('0x1a')]();let _0x1d062b=_0x4c550b+this[a0_0x38b3('0x16')]*this[a0_0x38b3('0x0')];return{'ts':_0x1d062b,'value':_0x19dc7f,'horizon':this['horizon']};}}[a0_0x38b3('0x1')](){let _0x42de7f=fs[a0_0x38b3('0x17')](this[a0_0x38b3('0x20')]);this[a0_0x38b3('0x21')][a0_0x38b3('0x19')](_0x42de7f),_0x42de7f[a0_0x38b3('0x1b')]();}[a0_0x38b3('0xf')](){let _0x1a9408=fs[a0_0x38b3('0x1d')](this[a0_0x38b3('0x20')]);this['model']=new qm[(a0_0x38b3('0xd'))][(a0_0x38b3('0x12'))](_0x1a9408),_0x1a9408[a0_0x38b3('0x1b')]();}}module[a0_0x38b3('0x1f')]=IncrementalLearning;