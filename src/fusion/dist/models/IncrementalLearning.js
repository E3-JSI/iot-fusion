const a0_0x5eeb=['predict','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','EMA','constructor','method','OpenRead','options','.bin','return\x20/\x22\x20+\x20this\x20+\x20\x22/','initiated','./EMA','length','buffer','./StructuredEMA','Vector','analytics','StructuredEMA','RecLinReg','model','exit','OpenWrite','fusionTick','filename','./models/','test','horizon','log','loadModel','PARTIAL\x20FIT\x20ERROR!','partialFit','updateStream','label','dim','qminer','No\x20correct\x20model\x20selected','exports','predictionBuffer','saveModel','push'];(function(_0x20898c,_0x5eeb69){const _0x398d1f=function(_0x5a3b9f){while(--_0x5a3b9f){_0x20898c['push'](_0x20898c['shift']());}},_0x256d4c=function(){const _0x2b0f03={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3b9a20,_0x59b3cc,_0x1f8744,_0x3d8abc){_0x3d8abc=_0x3d8abc||{};let _0x594f43=_0x59b3cc+'='+_0x1f8744,_0x40e8c4=0x0;for(let _0xc1ce1e=0x0,_0x2836cd=_0x3b9a20['length'];_0xc1ce1e<_0x2836cd;_0xc1ce1e++){const _0x2a85f4=_0x3b9a20[_0xc1ce1e];_0x594f43+=';\x20'+_0x2a85f4;const _0x2333eb=_0x3b9a20[_0x2a85f4];_0x3b9a20['push'](_0x2333eb),_0x2836cd=_0x3b9a20['length'],_0x2333eb!==!![]&&(_0x594f43+='='+_0x2333eb);}_0x3d8abc['cookie']=_0x594f43;},'removeCookie':function(){return'dev';},'getCookie':function(_0x55cd8d,_0x2c9b27){_0x55cd8d=_0x55cd8d||function(_0x574283){return _0x574283;};const _0x211a14=_0x55cd8d(new RegExp('(?:^|;\x20)'+_0x2c9b27['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x30dfef=function(_0x2ef057,_0x3e95a3){_0x2ef057(++_0x3e95a3);};return _0x30dfef(_0x398d1f,_0x5eeb69),_0x211a14?decodeURIComponent(_0x211a14[0x1]):undefined;}},_0x13c448=function(){const _0x10928d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x10928d['test'](_0x2b0f03['removeCookie']['toString']());};_0x2b0f03['updateCookie']=_0x13c448;let _0x2c4c0f='';const _0x438858=_0x2b0f03['updateCookie']();if(!_0x438858)_0x2b0f03['setCookie'](['*'],'counter',0x1);else _0x438858?_0x2c4c0f=_0x2b0f03['getCookie'](null,'counter'):_0x2b0f03['removeCookie']();};_0x256d4c();}(a0_0x5eeb,0xec));const a0_0x398d=function(_0x20898c,_0x5eeb69){_0x20898c=_0x20898c-0x0;let _0x398d1f=a0_0x5eeb[_0x20898c];return _0x398d1f;};const a0_0x1f8744=function(){let _0x45fc25=!![];return function(_0x458b36,_0x1fcdbc){const _0x3fbbee=_0x45fc25?function(){if(_0x1fcdbc){const _0x13733c=_0x1fcdbc['apply'](_0x458b36,arguments);return _0x1fcdbc=null,_0x13733c;}}:function(){};return _0x45fc25=![],_0x3fbbee;};}(),a0_0x59b3cc=a0_0x1f8744(this,function(){const _0x286e7f=function(){const _0xd952d6=_0x286e7f[a0_0x398d('0x1')](a0_0x398d('0x6'))()[a0_0x398d('0x1')](a0_0x398d('0x26'));return!_0xd952d6[a0_0x398d('0x16')](a0_0x59b3cc);};return _0x286e7f();});a0_0x59b3cc();const qm=require('qminer'),la=require(a0_0x398d('0x1f'))['la'],fs=require('fs'),EMAIncrementalModel=require(a0_0x398d('0x8')),StructuredEMAIncrementalModel=require(a0_0x398d('0xb'));class IncrementalLearning{constructor(_0x527751,_0x467f6d){this['horizon']=_0x527751[a0_0x398d('0x10')][a0_0x398d('0x17')],this[a0_0x398d('0x13')]=_0x527751['fusionTick'],this[a0_0x398d('0x1d')]=_0x527751[a0_0x398d('0x10')]['label'],this[a0_0x398d('0x4')]=_0x527751['model'][a0_0x398d('0x4')],this[a0_0x398d('0x7')]=![],this[a0_0x398d('0x22')]=[],this[a0_0x398d('0xa')]=[],this[a0_0x398d('0x14')]=a0_0x398d('0x15')+_0x467f6d['fusion_id']+'-'+this[a0_0x398d('0x4')][a0_0x398d('0x2')]+a0_0x398d('0x5');}[a0_0x398d('0x1c')](_0x383fa0,_0x30a9e9){this[a0_0x398d('0xa')][a0_0x398d('0x24')](_0x383fa0);if(this['buffer'][a0_0x398d('0x9')]>this[a0_0x398d('0x17')]){let _0x45f527=_0x383fa0[this[a0_0x398d('0x1d')]],_0x4dec44=new la[(a0_0x398d('0xc'))](this[a0_0x398d('0xa')][this[a0_0x398d('0xa')][a0_0x398d('0x9')]-this[a0_0x398d('0x17')]-0x1]);try{this[a0_0x398d('0x10')][a0_0x398d('0x1b')](_0x4dec44,_0x45f527);}catch(_0x316056){console['log'](a0_0x398d('0x1a'),_0x316056),console[a0_0x398d('0x18')](this['buffer'][this[a0_0x398d('0xa')][a0_0x398d('0x9')]-this[a0_0x398d('0x17')]-0x1],_0x45f527),process[a0_0x398d('0x11')]();}}if(this['buffer'][a0_0x398d('0x9')]>0x0){if(this['initiated']==![]){this[a0_0x398d('0x7')]=!![],this['options'][a0_0x398d('0x1e')]=_0x383fa0['length'];if(this[a0_0x398d('0x4')][a0_0x398d('0x2')]==='RecLinReg')this[a0_0x398d('0x10')]=new qm[(a0_0x398d('0xd'))]['RecLinReg'](this['options']);else{if(this[a0_0x398d('0x4')][a0_0x398d('0x2')]===a0_0x398d('0xe'))this['model']=new StructuredEMAIncrementalModel(this[a0_0x398d('0x4')]);else{if(this[a0_0x398d('0x4')]['method']===a0_0x398d('0x0'))this[a0_0x398d('0x10')]=new EMAIncrementalModel(this[a0_0x398d('0x4')]);else throw Error(a0_0x398d('0x20'),this[a0_0x398d('0x4')][a0_0x398d('0x2')]);}}}let _0x4ddf25=new la[(a0_0x398d('0xc'))](_0x383fa0),_0x18b1ee=this[a0_0x398d('0x10')][a0_0x398d('0x25')](_0x4ddf25);this['predictionBuffer']['push'](_0x18b1ee);if(this[a0_0x398d('0x22')][a0_0x398d('0x9')]>this[a0_0x398d('0x17')])this['predictionBuffer']['shift']();if(this[a0_0x398d('0xa')][a0_0x398d('0x9')]>this[a0_0x398d('0x17')])this[a0_0x398d('0xa')]['shift']();let _0x54882c=_0x30a9e9+this[a0_0x398d('0x17')]*this[a0_0x398d('0x13')];return{'ts':_0x54882c,'value':_0x18b1ee,'horizon':this[a0_0x398d('0x17')]};}}[a0_0x398d('0x23')](){let _0x3a57fd=fs[a0_0x398d('0x12')](this['filename']);this['model']['save'](_0x3a57fd),_0x3a57fd['close']();}[a0_0x398d('0x19')](){let _0x505f5b=fs[a0_0x398d('0x3')](this[a0_0x398d('0x14')]);this[a0_0x398d('0x10')]=new qm[(a0_0x398d('0xd'))][(a0_0x398d('0xf'))](_0x505f5b),_0x505f5b['close']();}}module[a0_0x398d('0x21')]=IncrementalLearning;