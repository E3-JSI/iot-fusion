const a0_0x218a=['predictionBuffer','filename','close','buffer','partialFit','test','options','method','return\x20/\x22\x20+\x20this\x20+\x20\x22/','analytics','saveModel','log','exports','Vector','horizon','initiated','OpenRead','save','push','fusion_id','shift','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','dim','model','RecLinReg','./EMA','fusionTick','PARTIAL\x20FIT\x20ERROR!','./models/','exit','EMA','apply','label','qminer','updateStream','length'];(function(_0x45fc46,_0x218a32){const _0x3b6ee9=function(_0x3e257e){while(--_0x3e257e){_0x45fc46['push'](_0x45fc46['shift']());}},_0x5608f7=function(){const _0xb444c0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x43e08,_0x301891,_0x1db445,_0x1a4804){_0x1a4804=_0x1a4804||{};let _0xafd1c4=_0x301891+'='+_0x1db445,_0x59becd=0x0;for(let _0x3e1c3b=0x0,_0x53eb81=_0x43e08['length'];_0x3e1c3b<_0x53eb81;_0x3e1c3b++){const _0x41e037=_0x43e08[_0x3e1c3b];_0xafd1c4+=';\x20'+_0x41e037;const _0x1e72f3=_0x43e08[_0x41e037];_0x43e08['push'](_0x1e72f3),_0x53eb81=_0x43e08['length'],_0x1e72f3!==!![]&&(_0xafd1c4+='='+_0x1e72f3);}_0x1a4804['cookie']=_0xafd1c4;},'removeCookie':function(){return'dev';},'getCookie':function(_0xb8c02a,_0x2eff05){_0xb8c02a=_0xb8c02a||function(_0x1704ba){return _0x1704ba;};const _0x26e0da=_0xb8c02a(new RegExp('(?:^|;\x20)'+_0x2eff05['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4aa81a=function(_0x16d109,_0x3af599){_0x16d109(++_0x3af599);};return _0x4aa81a(_0x3b6ee9,_0x218a32),_0x26e0da?decodeURIComponent(_0x26e0da[0x1]):undefined;}},_0x395615=function(){const _0x5de239=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5de239['test'](_0xb444c0['removeCookie']['toString']());};_0xb444c0['updateCookie']=_0x395615;let _0x528f28='';const _0x46bbd2=_0xb444c0['updateCookie']();if(!_0x46bbd2)_0xb444c0['setCookie'](['*'],'counter',0x1);else _0x46bbd2?_0x528f28=_0xb444c0['getCookie'](null,'counter'):_0xb444c0['removeCookie']();};_0x5608f7();}(a0_0x218a,0x18a));const a0_0x3b6e=function(_0x45fc46,_0x218a32){_0x45fc46=_0x45fc46-0x0;let _0x3b6ee9=a0_0x218a[_0x45fc46];return _0x3b6ee9;};const a0_0x1db445=function(){let _0x45f654=!![];return function(_0x1536aa,_0x59a47a){const _0x47ac65=_0x45f654?function(){if(_0x59a47a){const _0xb3bf80=_0x59a47a[a0_0x3b6e('0x21')](_0x1536aa,arguments);return _0x59a47a=null,_0xb3bf80;}}:function(){};return _0x45f654=![],_0x47ac65;};}(),a0_0x301891=a0_0x1db445(this,function(){const _0x178a94=function(){const _0x4849a8=_0x178a94['constructor'](a0_0x3b6e('0xa'))()['constructor'](a0_0x3b6e('0x17'));return!_0x4849a8[a0_0x3b6e('0x7')](a0_0x301891);};return _0x178a94();});a0_0x301891();const qm=require(a0_0x3b6e('0x23')),la=require(a0_0x3b6e('0x23'))['la'],fs=require('fs'),EMAIncrementalModel=require(a0_0x3b6e('0x1b')),StructuredEMAIncrementalModel=require('./StructuredEMA');class IncrementalLearning{constructor(_0x49a1e5,_0x5920d8){this[a0_0x3b6e('0x10')]=_0x49a1e5[a0_0x3b6e('0x19')][a0_0x3b6e('0x10')],this['fusionTick']=_0x49a1e5[a0_0x3b6e('0x1c')],this['label']=_0x49a1e5['model'][a0_0x3b6e('0x22')],this[a0_0x3b6e('0x8')]=_0x49a1e5[a0_0x3b6e('0x19')][a0_0x3b6e('0x8')],this[a0_0x3b6e('0x11')]=![],this['predictionBuffer']=[],this[a0_0x3b6e('0x5')]=[],this[a0_0x3b6e('0x3')]=a0_0x3b6e('0x1e')+_0x5920d8[a0_0x3b6e('0x15')]+'-'+this['options'][a0_0x3b6e('0x9')]+'.bin';}[a0_0x3b6e('0x0')](_0x392c1f,_0x525040){this[a0_0x3b6e('0x5')][a0_0x3b6e('0x14')](_0x392c1f);if(this['buffer'][a0_0x3b6e('0x1')]>this[a0_0x3b6e('0x10')]){let _0x5e55e3=_0x392c1f[this[a0_0x3b6e('0x22')]],_0x31fed7=new la['Vector'](this['buffer'][this[a0_0x3b6e('0x5')]['length']-this['horizon']-0x1]);try{this[a0_0x3b6e('0x19')][a0_0x3b6e('0x6')](_0x31fed7,_0x5e55e3);}catch(_0x34abb2){console[a0_0x3b6e('0xd')](a0_0x3b6e('0x1d'),_0x34abb2),console[a0_0x3b6e('0xd')](this[a0_0x3b6e('0x5')][this[a0_0x3b6e('0x5')][a0_0x3b6e('0x1')]-this[a0_0x3b6e('0x10')]-0x1],_0x5e55e3),process[a0_0x3b6e('0x1f')]();}}if(this[a0_0x3b6e('0x5')]['length']>0x0){if(this[a0_0x3b6e('0x11')]==![]){this[a0_0x3b6e('0x11')]=!![],this[a0_0x3b6e('0x8')][a0_0x3b6e('0x18')]=_0x392c1f[a0_0x3b6e('0x1')];if(this['options']['method']==='RecLinReg')this[a0_0x3b6e('0x19')]=new qm['analytics'][(a0_0x3b6e('0x1a'))](this[a0_0x3b6e('0x8')]);else{if(this[a0_0x3b6e('0x8')][a0_0x3b6e('0x9')]==='StructuredEMA')this['model']=new StructuredEMAIncrementalModel(this[a0_0x3b6e('0x8')]);else{if(this[a0_0x3b6e('0x8')]['method']===a0_0x3b6e('0x20'))this[a0_0x3b6e('0x19')]=new EMAIncrementalModel(this[a0_0x3b6e('0x8')]);else throw Error('No\x20correct\x20model\x20selected',this[a0_0x3b6e('0x8')][a0_0x3b6e('0x9')]);}}}let _0x405677=new la[(a0_0x3b6e('0xf'))](_0x392c1f),_0xd8b938=this[a0_0x3b6e('0x19')]['predict'](_0x405677);this['predictionBuffer'][a0_0x3b6e('0x14')](_0xd8b938);if(this[a0_0x3b6e('0x2')][a0_0x3b6e('0x1')]>this[a0_0x3b6e('0x10')])this[a0_0x3b6e('0x2')][a0_0x3b6e('0x16')]();if(this[a0_0x3b6e('0x5')][a0_0x3b6e('0x1')]>this[a0_0x3b6e('0x10')])this[a0_0x3b6e('0x5')][a0_0x3b6e('0x16')]();let _0x539715=_0x525040+this[a0_0x3b6e('0x10')]*this[a0_0x3b6e('0x1c')];return{'ts':_0x539715,'value':_0xd8b938,'horizon':this[a0_0x3b6e('0x10')]};}}[a0_0x3b6e('0xc')](){let _0x5b3cb9=fs['OpenWrite'](this[a0_0x3b6e('0x3')]);this[a0_0x3b6e('0x19')][a0_0x3b6e('0x13')](_0x5b3cb9),_0x5b3cb9[a0_0x3b6e('0x4')]();}['loadModel'](){let _0x21cb65=fs[a0_0x3b6e('0x12')](this[a0_0x3b6e('0x3')]);this[a0_0x3b6e('0x19')]=new qm[(a0_0x3b6e('0xb'))]['RecLinReg'](_0x21cb65),_0x21cb65['close']();}}module[a0_0x3b6e('0xe')]=IncrementalLearning;