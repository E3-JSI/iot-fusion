const a0_0x31f1=['EMA','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','shift','close','filename','exit','StructuredEMA','apply','./StructuredEMA','exports','length','constructor','partialFit','predictionBuffer','options','loadModel','fusionTick','OpenRead','./EMA','OpenWrite','analytics','horizon','RecLinReg','push','saveModel','predict','Vector','return\x20/\x22\x20+\x20this\x20+\x20\x22/','buffer','label','.bin','save','initiated','model','updateStream','method','log'];(function(_0x567517,_0x31f11f){const _0x52f8fe=function(_0x15f499){while(--_0x15f499){_0x567517['push'](_0x567517['shift']());}},_0xf10283=function(){const _0xd58b52={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3ad1b8,_0x3e0373,_0x3339ea,_0x43d30f){_0x43d30f=_0x43d30f||{};let _0x2eeb27=_0x3e0373+'='+_0x3339ea,_0x26c2ca=0x0;for(let _0x40841f=0x0,_0x145b36=_0x3ad1b8['length'];_0x40841f<_0x145b36;_0x40841f++){const _0xfec7a1=_0x3ad1b8[_0x40841f];_0x2eeb27+=';\x20'+_0xfec7a1;const _0x5ac568=_0x3ad1b8[_0xfec7a1];_0x3ad1b8['push'](_0x5ac568),_0x145b36=_0x3ad1b8['length'],_0x5ac568!==!![]&&(_0x2eeb27+='='+_0x5ac568);}_0x43d30f['cookie']=_0x2eeb27;},'removeCookie':function(){return'dev';},'getCookie':function(_0x58ad1a,_0x53858e){_0x58ad1a=_0x58ad1a||function(_0x4bae82){return _0x4bae82;};const _0x239f44=_0x58ad1a(new RegExp('(?:^|;\x20)'+_0x53858e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x13845e=function(_0x3680ab,_0x210b1f){_0x3680ab(++_0x210b1f);};return _0x13845e(_0x52f8fe,_0x31f11f),_0x239f44?decodeURIComponent(_0x239f44[0x1]):undefined;}},_0x9f22ff=function(){const _0x25df26=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x25df26['test'](_0xd58b52['removeCookie']['toString']());};_0xd58b52['updateCookie']=_0x9f22ff;let _0x1444b8='';const _0x34bbde=_0xd58b52['updateCookie']();if(!_0x34bbde)_0xd58b52['setCookie'](['*'],'counter',0x1);else _0x34bbde?_0x1444b8=_0xd58b52['getCookie'](null,'counter'):_0xd58b52['removeCookie']();};_0xf10283();}(a0_0x31f1,0x7a));const a0_0x52f8=function(_0x567517,_0x31f11f){_0x567517=_0x567517-0x0;let _0x52f8fe=a0_0x31f1[_0x567517];return _0x52f8fe;};const a0_0x3339ea=function(){let _0x338d04=!![];return function(_0x4a0070,_0x6e97db){const _0x243829=_0x338d04?function(){if(_0x6e97db){const _0x14227c=_0x6e97db[a0_0x52f8('0x21')](_0x4a0070,arguments);return _0x6e97db=null,_0x14227c;}}:function(){};return _0x338d04=![],_0x243829;};}(),a0_0x3e0373=a0_0x3339ea(this,function(){const _0x5d498e=function(){const _0x900943=_0x5d498e[a0_0x52f8('0x0')](a0_0x52f8('0x10'))()[a0_0x52f8('0x0')](a0_0x52f8('0x1b'));return!_0x900943['test'](a0_0x3e0373);};return _0x5d498e();});a0_0x3e0373();const qm=require('qminer'),la=require('qminer')['la'],fs=require('fs'),EMAIncrementalModel=require(a0_0x52f8('0x7')),StructuredEMAIncrementalModel=require(a0_0x52f8('0x22'));class IncrementalLearning{constructor(_0x3a249a,_0x2929b1){this['horizon']=_0x3a249a[a0_0x52f8('0x16')][a0_0x52f8('0xa')],this[a0_0x52f8('0x5')]=_0x3a249a['fusionTick'],this[a0_0x52f8('0x12')]=_0x3a249a[a0_0x52f8('0x16')]['label'],this[a0_0x52f8('0x3')]=_0x3a249a['model'][a0_0x52f8('0x3')],this[a0_0x52f8('0x15')]=![],this[a0_0x52f8('0x2')]=[],this['buffer']=[],this['filename']='./models/'+_0x2929b1['fusion_id']+'-'+this[a0_0x52f8('0x3')][a0_0x52f8('0x18')]+a0_0x52f8('0x13');}[a0_0x52f8('0x17')](_0x492f25,_0x1c4916){this[a0_0x52f8('0x11')][a0_0x52f8('0xc')](_0x492f25);if(this[a0_0x52f8('0x11')]['length']>this[a0_0x52f8('0xa')]){let _0x439147=_0x492f25[this['label']],_0x12061c=new la[(a0_0x52f8('0xf'))](this[a0_0x52f8('0x11')][this[a0_0x52f8('0x11')][a0_0x52f8('0x24')]-this['horizon']-0x1]);try{this[a0_0x52f8('0x16')][a0_0x52f8('0x1')](_0x12061c,_0x439147);}catch(_0x1a6231){console[a0_0x52f8('0x19')]('PARTIAL\x20FIT\x20ERROR!',_0x1a6231),console[a0_0x52f8('0x19')](this[a0_0x52f8('0x11')][this[a0_0x52f8('0x11')][a0_0x52f8('0x24')]-this[a0_0x52f8('0xa')]-0x1],_0x439147),process[a0_0x52f8('0x1f')]();}}if(this[a0_0x52f8('0x11')][a0_0x52f8('0x24')]>0x0){if(this[a0_0x52f8('0x15')]==![]){this['initiated']=!![],this[a0_0x52f8('0x3')]['dim']=_0x492f25[a0_0x52f8('0x24')];if(this['options'][a0_0x52f8('0x18')]===a0_0x52f8('0xb'))this[a0_0x52f8('0x16')]=new qm[(a0_0x52f8('0x9'))][(a0_0x52f8('0xb'))](this[a0_0x52f8('0x3')]);else{if(this['options'][a0_0x52f8('0x18')]===a0_0x52f8('0x20'))this[a0_0x52f8('0x16')]=new StructuredEMAIncrementalModel(this[a0_0x52f8('0x3')]);else{if(this['options'][a0_0x52f8('0x18')]===a0_0x52f8('0x1a'))this[a0_0x52f8('0x16')]=new EMAIncrementalModel(this[a0_0x52f8('0x3')]);else throw Error('No\x20correct\x20model\x20selected',this[a0_0x52f8('0x3')][a0_0x52f8('0x18')]);}}}let _0x4f2228=new la['Vector'](_0x492f25),_0x3b9e8c=this[a0_0x52f8('0x16')][a0_0x52f8('0xe')](_0x4f2228);this[a0_0x52f8('0x2')]['push'](_0x3b9e8c);if(this[a0_0x52f8('0x2')][a0_0x52f8('0x24')]>this['horizon'])this[a0_0x52f8('0x2')][a0_0x52f8('0x1c')]();if(this[a0_0x52f8('0x11')]['length']>this['horizon'])this[a0_0x52f8('0x11')][a0_0x52f8('0x1c')]();let _0x4dcbff=_0x1c4916+this[a0_0x52f8('0xa')]*this[a0_0x52f8('0x5')];return{'ts':_0x4dcbff,'value':_0x3b9e8c,'horizon':this[a0_0x52f8('0xa')]};}}[a0_0x52f8('0xd')](){let _0x2990fc=fs[a0_0x52f8('0x8')](this[a0_0x52f8('0x1e')]);this[a0_0x52f8('0x16')][a0_0x52f8('0x14')](_0x2990fc),_0x2990fc['close']();}[a0_0x52f8('0x4')](){let _0x508a85=fs[a0_0x52f8('0x6')](this['filename']);this[a0_0x52f8('0x16')]=new qm[(a0_0x52f8('0x9'))][(a0_0x52f8('0xb'))](_0x508a85),_0x508a85[a0_0x52f8('0x1d')]();}}module[a0_0x52f8('0x23')]=IncrementalLearning;