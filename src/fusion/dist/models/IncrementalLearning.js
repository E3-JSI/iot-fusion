const a0_0x1816=['fusionTick','label','./StructuredEMA','initiated','model','length','save','push','Vector','test','options','StructuredEMA','buffer','log','filename','shift','qminer','apply','PARTIAL\x20FIT\x20ERROR!','No\x20correct\x20model\x20selected','./EMA','exports','RecLinReg','method','return\x20/\x22\x20+\x20this\x20+\x20\x22/','EMA','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exit','predictionBuffer','horizon','analytics','predict','close','OpenWrite','loadModel','dim'];(function(_0x2355dc,_0x181610){const _0x2b7109=function(_0x3c10b5){while(--_0x3c10b5){_0x2355dc['push'](_0x2355dc['shift']());}},_0x564ca7=function(){const _0x228900={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2c3aa5,_0xd32ea4,_0x585743,_0x3b152a){_0x3b152a=_0x3b152a||{};let _0x3e7e82=_0xd32ea4+'='+_0x585743,_0x56bd82=0x0;for(let _0x26f170=0x0,_0x52d8ea=_0x2c3aa5['length'];_0x26f170<_0x52d8ea;_0x26f170++){const _0x374ba9=_0x2c3aa5[_0x26f170];_0x3e7e82+=';\x20'+_0x374ba9;const _0x880032=_0x2c3aa5[_0x374ba9];_0x2c3aa5['push'](_0x880032),_0x52d8ea=_0x2c3aa5['length'],_0x880032!==!![]&&(_0x3e7e82+='='+_0x880032);}_0x3b152a['cookie']=_0x3e7e82;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3ff100,_0x454755){_0x3ff100=_0x3ff100||function(_0x5d8b2a){return _0x5d8b2a;};const _0x1aa6d7=_0x3ff100(new RegExp('(?:^|;\x20)'+_0x454755['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2f857e=function(_0x5e035e,_0x2a588b){_0x5e035e(++_0x2a588b);};return _0x2f857e(_0x2b7109,_0x181610),_0x1aa6d7?decodeURIComponent(_0x1aa6d7[0x1]):undefined;}},_0x1d41d4=function(){const _0x6c377d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x6c377d['test'](_0x228900['removeCookie']['toString']());};_0x228900['updateCookie']=_0x1d41d4;let _0x2f8aee='';const _0x2d6e87=_0x228900['updateCookie']();if(!_0x2d6e87)_0x228900['setCookie'](['*'],'counter',0x1);else _0x2d6e87?_0x2f8aee=_0x228900['getCookie'](null,'counter'):_0x228900['removeCookie']();};_0x564ca7();}(a0_0x1816,0xf8));const a0_0x2b71=function(_0x2355dc,_0x181610){_0x2355dc=_0x2355dc-0x0;let _0x2b7109=a0_0x1816[_0x2355dc];return _0x2b7109;};const a0_0x585743=function(){let _0x5155ec=!![];return function(_0x596dd6,_0x2e85f9){const _0x18dac6=_0x5155ec?function(){if(_0x2e85f9){const _0x4c627b=_0x2e85f9[a0_0x2b71('0x15')](_0x596dd6,arguments);return _0x2e85f9=null,_0x4c627b;}}:function(){};return _0x5155ec=![],_0x18dac6;};}(),a0_0xd32ea4=a0_0x585743(this,function(){const _0x1d50c6=function(){const _0x4f1c1a=_0x1d50c6['constructor'](a0_0x2b71('0x1c'))()['constructor'](a0_0x2b71('0x1e'));return!_0x4f1c1a[a0_0x2b71('0xd')](a0_0xd32ea4);};return _0x1d50c6();});a0_0xd32ea4();const qm=require(a0_0x2b71('0x14')),la=require(a0_0x2b71('0x14'))['la'],fs=require('fs'),EMAIncrementalModel=require(a0_0x2b71('0x18')),StructuredEMAIncrementalModel=require(a0_0x2b71('0x6'));class IncrementalLearning{constructor(_0x4c55a2,_0x4dfcae){this['horizon']=_0x4c55a2['model'][a0_0x2b71('0x21')],this[a0_0x2b71('0x4')]=_0x4c55a2[a0_0x2b71('0x4')],this[a0_0x2b71('0x5')]=_0x4c55a2[a0_0x2b71('0x8')]['label'],this[a0_0x2b71('0xe')]=_0x4c55a2[a0_0x2b71('0x8')][a0_0x2b71('0xe')],this['initiated']=![],this[a0_0x2b71('0x20')]=[],this[a0_0x2b71('0x10')]=[],this[a0_0x2b71('0x12')]='./models/'+_0x4dfcae['fusion_id']+'-'+this[a0_0x2b71('0xe')][a0_0x2b71('0x1b')]+'.bin';}['updateStream'](_0x4573ba,_0x27c671){this[a0_0x2b71('0x10')][a0_0x2b71('0xb')](_0x4573ba);if(this[a0_0x2b71('0x10')]['length']>this[a0_0x2b71('0x21')]){let _0x8f714c=_0x4573ba[this[a0_0x2b71('0x5')]],_0x30bd89=new la[(a0_0x2b71('0xc'))](this[a0_0x2b71('0x10')][this[a0_0x2b71('0x10')][a0_0x2b71('0x9')]-this['horizon']-0x1]);try{this[a0_0x2b71('0x8')]['partialFit'](_0x30bd89,_0x8f714c);}catch(_0x5ce509){console[a0_0x2b71('0x11')](a0_0x2b71('0x16'),_0x5ce509),console[a0_0x2b71('0x11')](this[a0_0x2b71('0x10')][this['buffer'][a0_0x2b71('0x9')]-this[a0_0x2b71('0x21')]-0x1],_0x8f714c),process[a0_0x2b71('0x1f')]();}}if(this['buffer'][a0_0x2b71('0x9')]>0x0){if(this['initiated']==![]){this[a0_0x2b71('0x7')]=!![],this[a0_0x2b71('0xe')][a0_0x2b71('0x3')]=_0x4573ba['length'];if(this[a0_0x2b71('0xe')]['method']===a0_0x2b71('0x1a'))this['model']=new qm[(a0_0x2b71('0x22'))][(a0_0x2b71('0x1a'))](this['options']);else{if(this[a0_0x2b71('0xe')][a0_0x2b71('0x1b')]===a0_0x2b71('0xf'))this[a0_0x2b71('0x8')]=new StructuredEMAIncrementalModel(this[a0_0x2b71('0xe')]);else{if(this['options'][a0_0x2b71('0x1b')]===a0_0x2b71('0x1d'))this[a0_0x2b71('0x8')]=new EMAIncrementalModel(this[a0_0x2b71('0xe')]);else throw Error(a0_0x2b71('0x17'),this['options']['method']);}}}let _0x37a49f=new la[(a0_0x2b71('0xc'))](_0x4573ba),_0x247dc8=this[a0_0x2b71('0x8')][a0_0x2b71('0x23')](_0x37a49f);this['predictionBuffer'][a0_0x2b71('0xb')](_0x247dc8);if(this[a0_0x2b71('0x20')]['length']>this[a0_0x2b71('0x21')])this['predictionBuffer'][a0_0x2b71('0x13')]();if(this[a0_0x2b71('0x10')]['length']>this[a0_0x2b71('0x21')])this[a0_0x2b71('0x10')][a0_0x2b71('0x13')]();let _0x2a8e71=_0x27c671+this[a0_0x2b71('0x21')]*this['fusionTick'];return{'ts':_0x2a8e71,'value':_0x247dc8,'horizon':this['horizon']};}}['saveModel'](){let _0x553b29=fs[a0_0x2b71('0x1')](this[a0_0x2b71('0x12')]);this[a0_0x2b71('0x8')][a0_0x2b71('0xa')](_0x553b29),_0x553b29['close']();}[a0_0x2b71('0x2')](){let _0x3ac013=fs['OpenRead'](this[a0_0x2b71('0x12')]);this['model']=new qm[(a0_0x2b71('0x22'))][(a0_0x2b71('0x1a'))](_0x3ac013),_0x3ac013[a0_0x2b71('0x0')]();}}module[a0_0x2b71('0x19')]=IncrementalLearning;