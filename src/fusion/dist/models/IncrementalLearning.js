const a0_0x4170=['horizon','label','shift','fusion_id','push','model','log','updateStream','fusionTick','predictionBuffer','OpenWrite','./StructuredEMA','method','analytics','.bin','Vector','predict','return\x20/\x22\x20+\x20this\x20+\x20\x22/','PARTIAL\x20FIT\x20ERROR!','RecLinReg','initiated','./models/','length','dim','save','filename','No\x20correct\x20model\x20selected','loadModel','options','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','qminer','buffer','apply','test','OpenRead','saveModel','EMA','exports','constructor','partialFit'];(function(_0x35edcf,_0x417053){const _0x319b90=function(_0x20e213){while(--_0x20e213){_0x35edcf['push'](_0x35edcf['shift']());}},_0x1a1755=function(){const _0x95f2ff={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4caaaa,_0x44431b,_0x3efb1a,_0x3fa311){_0x3fa311=_0x3fa311||{};let _0xca20d3=_0x44431b+'='+_0x3efb1a,_0x17f22d=0x0;for(let _0x3e39b4=0x0,_0x4ce806=_0x4caaaa['length'];_0x3e39b4<_0x4ce806;_0x3e39b4++){const _0x10dc94=_0x4caaaa[_0x3e39b4];_0xca20d3+=';\x20'+_0x10dc94;const _0x4050c4=_0x4caaaa[_0x10dc94];_0x4caaaa['push'](_0x4050c4),_0x4ce806=_0x4caaaa['length'],_0x4050c4!==!![]&&(_0xca20d3+='='+_0x4050c4);}_0x3fa311['cookie']=_0xca20d3;},'removeCookie':function(){return'dev';},'getCookie':function(_0x56fd54,_0x51e85d){_0x56fd54=_0x56fd54||function(_0x4d2824){return _0x4d2824;};const _0x4cc619=_0x56fd54(new RegExp('(?:^|;\x20)'+_0x51e85d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x26adad=function(_0x303646,_0xd4dff){_0x303646(++_0xd4dff);};return _0x26adad(_0x319b90,_0x417053),_0x4cc619?decodeURIComponent(_0x4cc619[0x1]):undefined;}},_0x33d5c8=function(){const _0x12c5ce=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x12c5ce['test'](_0x95f2ff['removeCookie']['toString']());};_0x95f2ff['updateCookie']=_0x33d5c8;let _0x480353='';const _0x96cd4b=_0x95f2ff['updateCookie']();if(!_0x96cd4b)_0x95f2ff['setCookie'](['*'],'counter',0x1);else _0x96cd4b?_0x480353=_0x95f2ff['getCookie'](null,'counter'):_0x95f2ff['removeCookie']();};_0x1a1755();}(a0_0x4170,0x146));const a0_0x319b=function(_0x35edcf,_0x417053){_0x35edcf=_0x35edcf-0x0;let _0x319b90=a0_0x4170[_0x35edcf];return _0x319b90;};const a0_0x3efb1a=function(){let _0x1b3e46=!![];return function(_0x338f3e,_0x3506de){const _0x2fd756=_0x1b3e46?function(){if(_0x3506de){const _0x504aa0=_0x3506de[a0_0x319b('0x1a')](_0x338f3e,arguments);return _0x3506de=null,_0x504aa0;}}:function(){};return _0x1b3e46=![],_0x2fd756;};}(),a0_0x44431b=a0_0x3efb1a(this,function(){const _0x200627=function(){const _0x2a8f43=_0x200627[a0_0x319b('0x20')](a0_0x319b('0xb'))()[a0_0x319b('0x20')](a0_0x319b('0x17'));return!_0x2a8f43[a0_0x319b('0x1b')](a0_0x44431b);};return _0x200627();});a0_0x44431b();const qm=require('qminer'),la=require(a0_0x319b('0x18'))['la'],fs=require('fs'),EMAIncrementalModel=require('./EMA'),StructuredEMAIncrementalModel=require(a0_0x319b('0x5'));class IncrementalLearning{constructor(_0x3ee4a2,_0x45fe5a){this['horizon']=_0x3ee4a2[a0_0x319b('0x27')][a0_0x319b('0x22')],this[a0_0x319b('0x2')]=_0x3ee4a2[a0_0x319b('0x2')],this['label']=_0x3ee4a2[a0_0x319b('0x27')]['label'],this[a0_0x319b('0x16')]=_0x3ee4a2['model'][a0_0x319b('0x16')],this[a0_0x319b('0xe')]=![],this[a0_0x319b('0x3')]=[],this[a0_0x319b('0x19')]=[],this[a0_0x319b('0x13')]=a0_0x319b('0xf')+_0x45fe5a[a0_0x319b('0x25')]+'-'+this['options']['method']+a0_0x319b('0x8');}[a0_0x319b('0x1')](_0x3428db,_0x3a6ef9){this['buffer'][a0_0x319b('0x26')](_0x3428db);if(this[a0_0x319b('0x19')][a0_0x319b('0x10')]>this['horizon']){let _0x440d5c=_0x3428db[this[a0_0x319b('0x23')]],_0x5208aa=new la[(a0_0x319b('0x9'))](this[a0_0x319b('0x19')][this[a0_0x319b('0x19')]['length']-this[a0_0x319b('0x22')]-0x1]);try{this[a0_0x319b('0x27')][a0_0x319b('0x21')](_0x5208aa,_0x440d5c);}catch(_0x3df71e){console[a0_0x319b('0x0')](a0_0x319b('0xc'),_0x3df71e),console['log'](this[a0_0x319b('0x19')][this['buffer']['length']-this[a0_0x319b('0x22')]-0x1],_0x440d5c),process['exit']();}}if(this[a0_0x319b('0x19')][a0_0x319b('0x10')]>0x0){if(this[a0_0x319b('0xe')]==![]){this[a0_0x319b('0xe')]=!![],this['options'][a0_0x319b('0x11')]=_0x3428db['length'];if(this['options'][a0_0x319b('0x6')]===a0_0x319b('0xd'))this[a0_0x319b('0x27')]=new qm[(a0_0x319b('0x7'))][(a0_0x319b('0xd'))](this[a0_0x319b('0x16')]);else{if(this[a0_0x319b('0x16')][a0_0x319b('0x6')]==='StructuredEMA')this[a0_0x319b('0x27')]=new StructuredEMAIncrementalModel(this[a0_0x319b('0x16')]);else{if(this[a0_0x319b('0x16')][a0_0x319b('0x6')]===a0_0x319b('0x1e'))this[a0_0x319b('0x27')]=new EMAIncrementalModel(this['options']);else throw Error(a0_0x319b('0x14'),this['options']['method']);}}}let _0x1b2245=new la['Vector'](_0x3428db),_0xf61865=this[a0_0x319b('0x27')][a0_0x319b('0xa')](_0x1b2245);this[a0_0x319b('0x3')][a0_0x319b('0x26')](_0xf61865);if(this[a0_0x319b('0x3')][a0_0x319b('0x10')]>this[a0_0x319b('0x22')])this[a0_0x319b('0x3')][a0_0x319b('0x24')]();if(this[a0_0x319b('0x19')][a0_0x319b('0x10')]>this[a0_0x319b('0x22')])this[a0_0x319b('0x19')][a0_0x319b('0x24')]();let _0x113cb2=_0x3a6ef9+this[a0_0x319b('0x22')]*this[a0_0x319b('0x2')];return{'ts':_0x113cb2,'value':_0xf61865,'horizon':this[a0_0x319b('0x22')]};}}[a0_0x319b('0x1d')](){let _0x1b2eda=fs[a0_0x319b('0x4')](this[a0_0x319b('0x13')]);this[a0_0x319b('0x27')][a0_0x319b('0x12')](_0x1b2eda),_0x1b2eda['close']();}[a0_0x319b('0x15')](){let _0x1a9cc3=fs[a0_0x319b('0x1c')](this[a0_0x319b('0x13')]);this[a0_0x319b('0x27')]=new qm[(a0_0x319b('0x7'))][(a0_0x319b('0xd'))](_0x1a9cc3),_0x1a9cc3['close']();}}module[a0_0x319b('0x1f')]=IncrementalLearning;