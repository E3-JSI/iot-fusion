const a0_0xe2bb=['mqtt','connection','identify','parse','delete','fusion','./common/utils/utils.js','client_id','stringify','broker','Received:','status','apply','./common/brokers/brokers.js','addListener','addPublisher','1.0.0','version','composeMessage','constructor','./streamFusion.js','return\x20/\x22\x20+\x20this\x20+\x20\x22/','config','command','exports','log','new','options','bind','target','type','topic','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','test','messageCb','kafka'];(function(_0x58c9b6,_0xe2bb16){const _0x23efe8=function(_0xd74d49){while(--_0xd74d49){_0x58c9b6['push'](_0x58c9b6['shift']());}},_0x5e25fc=function(){const _0x2e8902={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x281f71,_0x11f417,_0x5f5ccb,_0x33e311){_0x33e311=_0x33e311||{};let _0x1c6cef=_0x11f417+'='+_0x5f5ccb,_0x366ced=0x0;for(let _0x3efbd3=0x0,_0x304549=_0x281f71['length'];_0x3efbd3<_0x304549;_0x3efbd3++){const _0x20cf73=_0x281f71[_0x3efbd3];_0x1c6cef+=';\x20'+_0x20cf73;const _0x30b14d=_0x281f71[_0x20cf73];_0x281f71['push'](_0x30b14d),_0x304549=_0x281f71['length'],_0x30b14d!==!![]&&(_0x1c6cef+='='+_0x30b14d);}_0x33e311['cookie']=_0x1c6cef;},'removeCookie':function(){return'dev';},'getCookie':function(_0x38a43f,_0x151567){_0x38a43f=_0x38a43f||function(_0x20943b){return _0x20943b;};const _0xa0ff67=_0x38a43f(new RegExp('(?:^|;\x20)'+_0x151567['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x526b34=function(_0x24a922,_0x37147e){_0x24a922(++_0x37147e);};return _0x526b34(_0x23efe8,_0xe2bb16),_0xa0ff67?decodeURIComponent(_0xa0ff67[0x1]):undefined;}},_0x12cc1c=function(){const _0x4c3496=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4c3496['test'](_0x2e8902['removeCookie']['toString']());};_0x2e8902['updateCookie']=_0x12cc1c;let _0x247597='';const _0x52895a=_0x2e8902['updateCookie']();if(!_0x52895a)_0x2e8902['setCookie'](['*'],'counter',0x1);else _0x52895a?_0x247597=_0x2e8902['getCookie'](null,'counter'):_0x2e8902['removeCookie']();};_0x5e25fc();}(a0_0xe2bb,0x1d9));const a0_0x23ef=function(_0x58c9b6,_0xe2bb16){_0x58c9b6=_0x58c9b6-0x0;let _0x23efe8=a0_0xe2bb[_0x58c9b6];return _0x23efe8;};const a0_0x5f5ccb=function(){let _0xfb1d27=!![];return function(_0x23f7f6,_0x1c3390){const _0x25dfe5=_0xfb1d27?function(){if(_0x1c3390){const _0x56b993=_0x1c3390[a0_0x23ef('0x7')](_0x23f7f6,arguments);return _0x1c3390=null,_0x56b993;}}:function(){};return _0xfb1d27=![],_0x25dfe5;};}(),a0_0x11f417=a0_0x5f5ccb(this,function(){const _0x2dc3fa=function(){const _0x580154=_0x2dc3fa[a0_0x23ef('0xe')](a0_0x23ef('0x10'))()[a0_0x23ef('0xe')](a0_0x23ef('0x1b'));return!_0x580154[a0_0x23ef('0x1c')](a0_0x11f417);};return _0x2dc3fa();});a0_0x11f417();const {AbstractBroker,KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x23ef('0x8')),streamFusion=require(a0_0x23ef('0xf')),Utils=require(a0_0x23ef('0x1'));class streamMaster{constructor(_0x4cb1a1){let _0x2b331c=this;this['config']=JSON[a0_0x23ef('0x22')](JSON[a0_0x23ef('0x3')](_0x4cb1a1)),this[a0_0x23ef('0x0')]=[],this['topic']='fusionAdmin',this[a0_0x23ef('0xc')]=a0_0x23ef('0xb'),this[a0_0x23ef('0x2')]=Utils['uuidv4']();if(a0_0x23ef('0x20')in _0x4cb1a1){if(_0x4cb1a1[a0_0x23ef('0x20')]['type']==a0_0x23ef('0x1e'))this[a0_0x23ef('0x4')]=new KafkaNodeBroker(this[a0_0x23ef('0x11')][a0_0x23ef('0x20')][a0_0x23ef('0x16')],this[a0_0x23ef('0x1a')],this[a0_0x23ef('0x2')]),this[a0_0x23ef('0x4')][a0_0x23ef('0xa')](),this[a0_0x23ef('0x4')]['addListener'](_0x2b331c[a0_0x23ef('0x1d')][a0_0x23ef('0x17')](_0x2b331c));else _0x4cb1a1[a0_0x23ef('0x20')][a0_0x23ef('0x19')]==a0_0x23ef('0x1f')?(this['broker']=new MQTTBroker(this['config']['connection'][a0_0x23ef('0x16')],this['topic'],this['client_id']),this[a0_0x23ef('0x4')][a0_0x23ef('0xa')](),this[a0_0x23ef('0x4')][a0_0x23ef('0x9')](_0x2b331c['messageCb']['bind'](_0x2b331c))):this[a0_0x23ef('0x4')]=new AbstractBroker(this['config'][a0_0x23ef('0x20')][a0_0x23ef('0x16')],this['topic'],this[a0_0x23ef('0x2')]);}}['composeMessage'](_0x2ecdbb){let _0x25c4f8=_0x2ecdbb;return _0x25c4f8['id']=this['client_id'],_0x25c4f8[a0_0x23ef('0xc')]=this[a0_0x23ef('0xc')],JSON['stringify'](_0x25c4f8);}['messageCb'](_0x147304){let _0x472868=!![];if('target'in _0x147304){if(_0x147304[a0_0x23ef('0x18')]!=this[a0_0x23ef('0x2')])_0x472868=![];};if(_0x472868==![])return;if(a0_0x23ef('0x12')in _0x147304){if(_0x147304[a0_0x23ef('0x12')]==a0_0x23ef('0x21'))this[a0_0x23ef('0x4')]['publish'](this[a0_0x23ef('0xd')]({}));else{if(_0x147304[a0_0x23ef('0x12')]==a0_0x23ef('0x6')){}else{if(_0x147304['command']==a0_0x23ef('0x15')){}else{if(_0x147304[a0_0x23ef('0x12')]==a0_0x23ef('0x23')){}}}}}console[a0_0x23ef('0x14')](a0_0x23ef('0x5'),_0x147304);}}module[a0_0x23ef('0x13')]=streamMaster;