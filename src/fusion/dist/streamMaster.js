var _0x5d87=['log','Received:','./streamFusion.js','./common/utils/utils.js','parse','fusion','topic','fusionAdmin','version','1.0.0','client_id','uuidv4','connection','kafka','broker','config','options','addPublisher','addListener','messageCb','bind','type','composeMessage','stringify','target','command','identify','status','new'];(function(_0x380f7f,_0x42192a){var _0x30ec46=function(_0x2cd6c6){while(--_0x2cd6c6){_0x380f7f['push'](_0x380f7f['shift']());}};var _0x59e6ea=function(){var _0x269eeb={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x481ed8,_0x402569,_0x1852f6,_0xe54d62){_0xe54d62=_0xe54d62||{};var _0x3c0abe=_0x402569+'='+_0x1852f6;var _0xc33f19=0x0;for(var _0xc33f19=0x0,_0x55c44b=_0x481ed8['length'];_0xc33f19<_0x55c44b;_0xc33f19++){var _0x2acb16=_0x481ed8[_0xc33f19];_0x3c0abe+=';\x20'+_0x2acb16;var _0x4b5be7=_0x481ed8[_0x2acb16];_0x481ed8['push'](_0x4b5be7);_0x55c44b=_0x481ed8['length'];if(_0x4b5be7!==!![]){_0x3c0abe+='='+_0x4b5be7;}}_0xe54d62['cookie']=_0x3c0abe;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3c5ab2,_0x1d8394){_0x3c5ab2=_0x3c5ab2||function(_0x3a86ab){return _0x3a86ab;};var _0x5683b2=_0x3c5ab2(new RegExp('(?:^|;\x20)'+_0x1d8394['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x1c2415=function(_0x261d9d,_0x2a92bf){_0x261d9d(++_0x2a92bf);};_0x1c2415(_0x30ec46,_0x42192a);return _0x5683b2?decodeURIComponent(_0x5683b2[0x1]):undefined;}};var _0x19639a=function(){var _0x57929f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x57929f['test'](_0x269eeb['removeCookie']['toString']());};_0x269eeb['updateCookie']=_0x19639a;var _0x10f531='';var _0x11c453=_0x269eeb['updateCookie']();if(!_0x11c453){_0x269eeb['setCookie'](['*'],'counter',0x1);}else if(_0x11c453){_0x10f531=_0x269eeb['getCookie'](null,'counter');}else{_0x269eeb['removeCookie']();}};_0x59e6ea();}(_0x5d87,0x1d2));var _0x30fe=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=_0x5d87[_0x2d8f05];return _0x4d74cb;};var _0x57455e=function(){var _0x144ecd=!![];return function(_0x25d385,_0x21bf26){var _0x50b738=_0x144ecd?function(){if(_0x21bf26){var _0x1c4233=_0x21bf26['apply'](_0x25d385,arguments);_0x21bf26=null;return _0x1c4233;}}:function(){};_0x144ecd=![];return _0x50b738;};}();var _0x1bdb15=_0x57455e(this,function(){var _0x38cae0=function(){return'\x64\x65\x76';},_0x4dfabe=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x1b5e35=function(){var _0x1aad96=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1aad96['\x74\x65\x73\x74'](_0x38cae0['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x51e8f5=function(){var _0x521a63=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x521a63['\x74\x65\x73\x74'](_0x4dfabe['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x179f77=function(_0x39a7cb){var _0x134bd1=~-0x1>>0x1+0xff%0x0;if(_0x39a7cb['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x134bd1)){_0x5cc044(_0x39a7cb);}};var _0x5cc044=function(_0x516970){var _0x2bfe66=~-0x4>>0x1+0xff%0x0;if(_0x516970['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x2bfe66){_0x179f77(_0x516970);}};if(!_0x1b5e35()){if(!_0x51e8f5()){_0x179f77('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x179f77('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x179f77('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1bdb15();const {AbstractBroker,KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require('./common/brokers/brokers.js');const streamFusion=require(_0x30fe('0x0'));const Utils=require(_0x30fe('0x1'));class streamMaster{constructor(_0x5a65aa){let _0x2a76f9=this;this['config']=JSON[_0x30fe('0x2')](JSON['stringify'](_0x5a65aa));this[_0x30fe('0x3')]=[];this[_0x30fe('0x4')]=_0x30fe('0x5');this[_0x30fe('0x6')]=_0x30fe('0x7');this[_0x30fe('0x8')]=Utils[_0x30fe('0x9')]();if(_0x30fe('0xa')in _0x5a65aa){if(_0x5a65aa[_0x30fe('0xa')]['type']==_0x30fe('0xb')){this[_0x30fe('0xc')]=new KafkaNodeBroker(this[_0x30fe('0xd')][_0x30fe('0xa')][_0x30fe('0xe')],this[_0x30fe('0x4')],this['client_id']);this[_0x30fe('0xc')][_0x30fe('0xf')]();this[_0x30fe('0xc')][_0x30fe('0x10')](_0x2a76f9[_0x30fe('0x11')][_0x30fe('0x12')](_0x2a76f9));}else if(_0x5a65aa[_0x30fe('0xa')][_0x30fe('0x13')]=='mqtt'){this[_0x30fe('0xc')]=new MQTTBroker(this[_0x30fe('0xd')][_0x30fe('0xa')][_0x30fe('0xe')],this[_0x30fe('0x4')],this[_0x30fe('0x8')]);this['broker'][_0x30fe('0xf')]();this[_0x30fe('0xc')]['addListener'](_0x2a76f9[_0x30fe('0x11')][_0x30fe('0x12')](_0x2a76f9));}else{this[_0x30fe('0xc')]=new AbstractBroker(this[_0x30fe('0xd')]['connection']['options'],this[_0x30fe('0x4')],this[_0x30fe('0x8')]);}}}[_0x30fe('0x14')](_0x60415b){let _0xd2520c=_0x60415b;_0xd2520c['id']=this[_0x30fe('0x8')];_0xd2520c['version']=this[_0x30fe('0x6')];return JSON[_0x30fe('0x15')](_0xd2520c);}[_0x30fe('0x11')](_0x2796f){let _0x49bef5=!![];if('target'in _0x2796f){if(_0x2796f[_0x30fe('0x16')]!=this[_0x30fe('0x8')])_0x49bef5=![];};if(_0x49bef5==![])return;if(_0x30fe('0x17')in _0x2796f){if(_0x2796f[_0x30fe('0x17')]==_0x30fe('0x18')){this[_0x30fe('0xc')]['publish'](this['composeMessage']({}));}else if(_0x2796f['command']==_0x30fe('0x19')){}else if(_0x2796f[_0x30fe('0x17')]==_0x30fe('0x1a')){}else if(_0x2796f[_0x30fe('0x17')]=='delete'){}}console[_0x30fe('0x1b')](_0x30fe('0x1c'),_0x2796f);}}module['exports']=streamMaster;