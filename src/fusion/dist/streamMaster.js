var _0x13d2=['kafka','broker','options','topic','client_id','addPublisher','messageCb','bind','mqtt','addListener','composeMessage','target','command','identify','publish','status','delete','log','Received:','exports','./common/utils/utils.js','config','stringify','fusion','fusionAdmin','version','uuidv4','connection','type'];(function(_0x2865dd,_0x4fb9fd){var _0x3ceecb=function(_0x40eade){while(--_0x40eade){_0x2865dd['push'](_0x2865dd['shift']());}};var _0x48c8f6=function(){var _0x58bad4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x440c28,_0x1a030b,_0x451915,_0x1fe4a1){_0x1fe4a1=_0x1fe4a1||{};var _0x1bc91f=_0x1a030b+'='+_0x451915;var _0x52defc=0x0;for(var _0x52defc=0x0,_0x378c0e=_0x440c28['length'];_0x52defc<_0x378c0e;_0x52defc++){var _0x5ce206=_0x440c28[_0x52defc];_0x1bc91f+=';\x20'+_0x5ce206;var _0x281af2=_0x440c28[_0x5ce206];_0x440c28['push'](_0x281af2);_0x378c0e=_0x440c28['length'];if(_0x281af2!==!![]){_0x1bc91f+='='+_0x281af2;}}_0x1fe4a1['cookie']=_0x1bc91f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x310777,_0x1ab2b0){_0x310777=_0x310777||function(_0x37afcc){return _0x37afcc;};var _0x3c2cfe=_0x310777(new RegExp('(?:^|;\x20)'+_0x1ab2b0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x522588=function(_0x5c430e,_0x32a52a){_0x5c430e(++_0x32a52a);};_0x522588(_0x3ceecb,_0x4fb9fd);return _0x3c2cfe?decodeURIComponent(_0x3c2cfe[0x1]):undefined;}};var _0x1e7393=function(){var _0x25cf76=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x25cf76['test'](_0x58bad4['removeCookie']['toString']());};_0x58bad4['updateCookie']=_0x1e7393;var _0x4c1c62='';var _0x5ecd43=_0x58bad4['updateCookie']();if(!_0x5ecd43){_0x58bad4['setCookie'](['*'],'counter',0x1);}else if(_0x5ecd43){_0x4c1c62=_0x58bad4['getCookie'](null,'counter');}else{_0x58bad4['removeCookie']();}};_0x48c8f6();}(_0x13d2,0x6b));var _0x5ab0=function(_0x1a7fe8,_0x28ab84){_0x1a7fe8=_0x1a7fe8-0x0;var _0x43bed9=_0x13d2[_0x1a7fe8];return _0x43bed9;};var _0x85659c=function(){var _0x4e0ad1=!![];return function(_0x505dc7,_0x5712f0){var _0x5bc433=_0x4e0ad1?function(){if(_0x5712f0){var _0x4d5fb0=_0x5712f0['apply'](_0x505dc7,arguments);_0x5712f0=null;return _0x4d5fb0;}}:function(){};_0x4e0ad1=![];return _0x5bc433;};}();var _0x401493=_0x85659c(this,function(){var _0x282945=function(){return'\x64\x65\x76';},_0x33f79e=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0xceb398=function(){var _0x5414fd=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5414fd['\x74\x65\x73\x74'](_0x282945['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1eda8a=function(){var _0x2972ce=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x2972ce['\x74\x65\x73\x74'](_0x33f79e['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x145426=function(_0x2e2a3e){var _0x1b83e6=~-0x1>>0x1+0xff%0x0;if(_0x2e2a3e['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1b83e6)){_0x327d6c(_0x2e2a3e);}};var _0x327d6c=function(_0x41caed){var _0x48224b=~-0x4>>0x1+0xff%0x0;if(_0x41caed['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x48224b){_0x145426(_0x41caed);}};if(!_0xceb398()){if(!_0x1eda8a()){_0x145426('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x145426('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x145426('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x401493();const {AbstractBroker,KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require('./common/brokers/brokers.js');const streamFusion=require('./streamFusion.js');const Utils=require(_0x5ab0('0x0'));class streamMaster{constructor(_0xba4a2b){let _0x2391c3=this;this[_0x5ab0('0x1')]=JSON['parse'](JSON[_0x5ab0('0x2')](_0xba4a2b));this[_0x5ab0('0x3')]=[];this['topic']=_0x5ab0('0x4');this[_0x5ab0('0x5')]='1.0.0';this['client_id']=Utils[_0x5ab0('0x6')]();if(_0x5ab0('0x7')in _0xba4a2b){if(_0xba4a2b[_0x5ab0('0x7')][_0x5ab0('0x8')]==_0x5ab0('0x9')){this[_0x5ab0('0xa')]=new KafkaNodeBroker(this[_0x5ab0('0x1')][_0x5ab0('0x7')][_0x5ab0('0xb')],this[_0x5ab0('0xc')],this[_0x5ab0('0xd')]);this[_0x5ab0('0xa')][_0x5ab0('0xe')]();this[_0x5ab0('0xa')]['addListener'](_0x2391c3[_0x5ab0('0xf')][_0x5ab0('0x10')](_0x2391c3));}else if(_0xba4a2b[_0x5ab0('0x7')][_0x5ab0('0x8')]==_0x5ab0('0x11')){this[_0x5ab0('0xa')]=new MQTTBroker(this['config']['connection'][_0x5ab0('0xb')],this[_0x5ab0('0xc')],this['client_id']);this[_0x5ab0('0xa')]['addPublisher']();this[_0x5ab0('0xa')][_0x5ab0('0x12')](_0x2391c3[_0x5ab0('0xf')][_0x5ab0('0x10')](_0x2391c3));}else{this[_0x5ab0('0xa')]=new AbstractBroker(this[_0x5ab0('0x1')][_0x5ab0('0x7')]['options'],this[_0x5ab0('0xc')],this[_0x5ab0('0xd')]);}}}[_0x5ab0('0x13')](_0x3baa3a){let _0x3ef58a=_0x3baa3a;_0x3ef58a['id']=this[_0x5ab0('0xd')];_0x3ef58a[_0x5ab0('0x5')]=this['version'];return JSON['stringify'](_0x3ef58a);}[_0x5ab0('0xf')](_0x9d6f1e){let _0x1564c9=!![];if(_0x5ab0('0x14')in _0x9d6f1e){if(_0x9d6f1e[_0x5ab0('0x14')]!=this[_0x5ab0('0xd')])_0x1564c9=![];};if(_0x1564c9==![])return;if(_0x5ab0('0x15')in _0x9d6f1e){if(_0x9d6f1e[_0x5ab0('0x15')]==_0x5ab0('0x16')){this['broker'][_0x5ab0('0x17')](this[_0x5ab0('0x13')]({}));}else if(_0x9d6f1e[_0x5ab0('0x15')]==_0x5ab0('0x18')){}else if(_0x9d6f1e['command']=='new'){}else if(_0x9d6f1e['command']==_0x5ab0('0x19')){}}console[_0x5ab0('0x1a')](_0x5ab0('0x1b'),_0x9d6f1e);}}module[_0x5ab0('0x1c')]=streamMaster;