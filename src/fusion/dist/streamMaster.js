const a0_0x2668=['^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','fusion','composeMessage','stringify','1.0.0','addListener','addPublisher','apply','type','version','./streamFusion.js','log','broker','new','bind','mqtt','Received:','config','client_id','topic','./common/utils/utils.js','kafka','target','identify','constructor','connection','parse','command','uuidv4','return\x20/\x22\x20+\x20this\x20+\x20\x22/','messageCb','options','./common/brokers/brokers.js'];(function(_0x1069c4,_0x266893){const _0x2741f7=function(_0x290a9c){while(--_0x290a9c){_0x1069c4['push'](_0x1069c4['shift']());}},_0xcb85b4=function(){const _0x184d13={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x138d62,_0x19ee2b,_0x508347,_0x3a7687){_0x3a7687=_0x3a7687||{};let _0x46cd41=_0x19ee2b+'='+_0x508347,_0x185219=0x0;for(let _0x1374ca=0x0,_0x43ee8a=_0x138d62['length'];_0x1374ca<_0x43ee8a;_0x1374ca++){const _0x206bb6=_0x138d62[_0x1374ca];_0x46cd41+=';\x20'+_0x206bb6;const _0x490d85=_0x138d62[_0x206bb6];_0x138d62['push'](_0x490d85),_0x43ee8a=_0x138d62['length'],_0x490d85!==!![]&&(_0x46cd41+='='+_0x490d85);}_0x3a7687['cookie']=_0x46cd41;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2d1fc1,_0x1cf717){_0x2d1fc1=_0x2d1fc1||function(_0x3691c8){return _0x3691c8;};const _0x2a7644=_0x2d1fc1(new RegExp('(?:^|;\x20)'+_0x1cf717['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x266f1f=function(_0x6aba82,_0x31f837){_0x6aba82(++_0x31f837);};return _0x266f1f(_0x2741f7,_0x266893),_0x2a7644?decodeURIComponent(_0x2a7644[0x1]):undefined;}},_0x15f9e6=function(){const _0x40dae2=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x40dae2['test'](_0x184d13['removeCookie']['toString']());};_0x184d13['updateCookie']=_0x15f9e6;let _0x112ef7='';const _0x36281c=_0x184d13['updateCookie']();if(!_0x36281c)_0x184d13['setCookie'](['*'],'counter',0x1);else _0x36281c?_0x112ef7=_0x184d13['getCookie'](null,'counter'):_0x184d13['removeCookie']();};_0xcb85b4();}(a0_0x2668,0xa8));const a0_0x2741=function(_0x1069c4,_0x266893){_0x1069c4=_0x1069c4-0x0;let _0x2741f7=a0_0x2668[_0x1069c4];return _0x2741f7;};const a0_0x508347=function(){let _0x491116=!![];return function(_0x354a39,_0x32a7f0){const _0xb3014c=_0x491116?function(){if(_0x32a7f0){const _0x313346=_0x32a7f0[a0_0x2741('0x4')](_0x354a39,arguments);return _0x32a7f0=null,_0x313346;}}:function(){};return _0x491116=![],_0xb3014c;};}(),a0_0x19ee2b=a0_0x508347(this,function(){const _0x490fd7=function(){const _0x2d04f7=_0x490fd7[a0_0x2741('0x15')](a0_0x2741('0x1a'))()[a0_0x2741('0x15')](a0_0x2741('0x1e'));return!_0x2d04f7['test'](a0_0x19ee2b);};return _0x490fd7();});a0_0x19ee2b();const {AbstractBroker,KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x2741('0x1d')),streamFusion=require(a0_0x2741('0x7')),Utils=require(a0_0x2741('0x11'));class streamMaster{constructor(_0x4bf47b){let _0x327ac2=this;this[a0_0x2741('0xe')]=JSON[a0_0x2741('0x17')](JSON[a0_0x2741('0x0')](_0x4bf47b)),this[a0_0x2741('0x1f')]=[],this[a0_0x2741('0x10')]='fusionAdmin',this[a0_0x2741('0x6')]=a0_0x2741('0x1'),this[a0_0x2741('0xf')]=Utils[a0_0x2741('0x19')]();if(a0_0x2741('0x16')in _0x4bf47b){if(_0x4bf47b[a0_0x2741('0x16')][a0_0x2741('0x5')]==a0_0x2741('0x12'))this['broker']=new KafkaNodeBroker(this[a0_0x2741('0xe')][a0_0x2741('0x16')]['options'],this[a0_0x2741('0x10')],this[a0_0x2741('0xf')]),this[a0_0x2741('0x9')]['addPublisher'](),this['broker'][a0_0x2741('0x2')](_0x327ac2[a0_0x2741('0x1b')][a0_0x2741('0xb')](_0x327ac2));else _0x4bf47b[a0_0x2741('0x16')][a0_0x2741('0x5')]==a0_0x2741('0xc')?(this['broker']=new MQTTBroker(this[a0_0x2741('0xe')][a0_0x2741('0x16')][a0_0x2741('0x1c')],this[a0_0x2741('0x10')],this['client_id']),this[a0_0x2741('0x9')][a0_0x2741('0x3')](),this['broker']['addListener'](_0x327ac2[a0_0x2741('0x1b')][a0_0x2741('0xb')](_0x327ac2))):this['broker']=new AbstractBroker(this['config'][a0_0x2741('0x16')][a0_0x2741('0x1c')],this[a0_0x2741('0x10')],this[a0_0x2741('0xf')]);}}[a0_0x2741('0x20')](_0x441116){let _0x28b52c=_0x441116;return _0x28b52c['id']=this[a0_0x2741('0xf')],_0x28b52c[a0_0x2741('0x6')]=this[a0_0x2741('0x6')],JSON[a0_0x2741('0x0')](_0x28b52c);}['messageCb'](_0x290ed7){let _0x40834d=!![];if(a0_0x2741('0x13')in _0x290ed7){if(_0x290ed7[a0_0x2741('0x13')]!=this[a0_0x2741('0xf')])_0x40834d=![];};if(_0x40834d==![])return;if(a0_0x2741('0x18')in _0x290ed7){if(_0x290ed7[a0_0x2741('0x18')]==a0_0x2741('0x14'))this[a0_0x2741('0x9')]['publish'](this['composeMessage']({}));else{if(_0x290ed7[a0_0x2741('0x18')]=='status'){}else{if(_0x290ed7['command']==a0_0x2741('0xa')){}else{if(_0x290ed7['command']=='delete'){}}}}}console[a0_0x2741('0x8')](a0_0x2741('0xd'),_0x290ed7);}}module['exports']=streamMaster;