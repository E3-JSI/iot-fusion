const a0_0x4a90=['datetime','nodes','dimml|variance|21600000','buffer','name','isMaster','deleteObsoleteRows','master','9\x20more\x20data\x20insertions','equal','setMasterOffset','processRecord','pact|variance|21600000','dimml|max|21600000','apply','assert','length','broadcastAggregates','pact|ma|21600000','constructor','../nodes/streamingSmartLampNode.js','deepEqual','{\x22stampm\x22:\x201468493073000}','max','close','dimml|variance|86400000','pact|min|21600000','streamingSmartLampNode','parse','setSlaveOffset','value','broadcastAggregates\x20function\x20exists','Time','base','callback\x20function\x20should\x20be\x20set','checkDataAvailability\x20function\x20exists','{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}','../nodes/streamingStaticNode.js','dimml|ma|86400000','dimml|ma|21600000','../nodes/streamingEnergyNode.js','config\x20saved','keys','getOffsetTimestamp','pact|ma|86400000','getOffsetTimestamp\x20function\x20exists','connectToKafka\x20function\x20exists','buffer\x20position\x20is\x200','processRecordCb','removeFolder','aggregate','check\x20if\x20store\x20exists','./db4/','createAggregates\x20function\x20exists','getAggregates','dimml|ma|604800000','master\x20flag\x20set\x20correctly','dimml|min|86400000','../nodes/streamingWeatherNode.js','checkDataAvailability','pact|variance|86400000','aggregates\x20initialized\x20-\x20key\x20names','aggregates\x20initialized\x20-\x20number','qminer','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','master\x20set\x20correctly','setSlaveOffset\x20function\x20exists','getPartialFeatureVector','../nodes/streamingTimeValueNode.js','pact|max|86400000','pact|tick','dimml|tick','config','test','{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}','{\x22stampm\x22:','master\x20offset\x20set\x20correctly','pact','winbuf','isMaster\x20function','smartlamp','position','rawstore','deleteObsoleteRows\x20function\x20exists','dimml','base\x20saved','dimml|max|86400000','offsetExists','../common/utils/fileManager.js','Base','pact|winbuf|86400000','float','parent',',\x22pact\x22:\x20','parent\x20saved','variance','function','../nodes/streamingNode.js','fusionNodeI\x20correctly\x20saved','setMasterOffset\x20function\x20exists',',\x22dimml\x22:\x20','buffer\x20empty','fields','getAggregates\x20function\x20exists','min','createAggregates','dimml|min|21600000','pact|min|86400000'];(function(_0x58e9b4,_0x4a9043){const _0x364473=function(_0x4292bf){while(--_0x4292bf){_0x58e9b4['push'](_0x58e9b4['shift']());}},_0x1da29c=function(){const _0x589c81={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2055b8,_0x2d09ef,_0x511e4d,_0x141c29){_0x141c29=_0x141c29||{};let _0x22a121=_0x2d09ef+'='+_0x511e4d,_0x3d28b8=0x0;for(let _0x5ceaf3=0x0,_0x5a48f4=_0x2055b8['length'];_0x5ceaf3<_0x5a48f4;_0x5ceaf3++){const _0x4351f7=_0x2055b8[_0x5ceaf3];_0x22a121+=';\x20'+_0x4351f7;const _0x1fc2ef=_0x2055b8[_0x4351f7];_0x2055b8['push'](_0x1fc2ef),_0x5a48f4=_0x2055b8['length'],_0x1fc2ef!==!![]&&(_0x22a121+='='+_0x1fc2ef);}_0x141c29['cookie']=_0x22a121;},'removeCookie':function(){return'dev';},'getCookie':function(_0x110e11,_0x2c094a){_0x110e11=_0x110e11||function(_0xd8fcd7){return _0xd8fcd7;};const _0x2428d2=_0x110e11(new RegExp('(?:^|;\x20)'+_0x2c094a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x34f38b=function(_0x21bb05,_0x27e4a6){_0x21bb05(++_0x27e4a6);};return _0x34f38b(_0x364473,_0x4a9043),_0x2428d2?decodeURIComponent(_0x2428d2[0x1]):undefined;}},_0x4974d4=function(){const _0x15fe44=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x15fe44['test'](_0x589c81['removeCookie']['toString']());};_0x589c81['updateCookie']=_0x4974d4;let _0x3d4735='';const _0x5a9631=_0x589c81['updateCookie']();if(!_0x5a9631)_0x589c81['setCookie'](['*'],'counter',0x1);else _0x5a9631?_0x3d4735=_0x589c81['getCookie'](null,'counter'):_0x589c81['removeCookie']();};_0x1da29c();}(a0_0x4a90,0x1d9));const a0_0x3644=function(_0x58e9b4,_0x4a9043){_0x58e9b4=_0x58e9b4-0x0;let _0x364473=a0_0x4a90[_0x58e9b4];return _0x364473;};const a0_0x511e4d=function(){let _0xd53abb=!![];return function(_0x1ccb6a,_0x48608f){const _0x278fa2=_0xd53abb?function(){if(_0x48608f){const _0xdf2520=_0x48608f[a0_0x3644('0x51')](_0x1ccb6a,arguments);return _0x48608f=null,_0xdf2520;}}:function(){};return _0xd53abb=![],_0x278fa2;};}(),a0_0x2d09ef=a0_0x511e4d(this,function(){const _0x42c67c=function(){const _0x40fe59=_0x42c67c[a0_0x3644('0x56')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](a0_0x3644('0x17'));return!_0x40fe59[a0_0x3644('0x20')](a0_0x2d09ef);};return _0x42c67c();});a0_0x2d09ef();const streamingNode=require(a0_0x3644('0x38')),streamingEnergyNode=require(a0_0x3644('0x6b')),streamingWeatherNode=require(a0_0x3644('0x11')),streamingStaticNode=require(a0_0x3644('0x68')),streamingTimeValueNode=require(a0_0x3644('0x1b')),streamingSmartLampNode=require(a0_0x3644('0x57')),fileManager=require(a0_0x3644('0x2f')),qm=require(a0_0x3644('0x16')),fs=require('fs');var assert=require(a0_0x3644('0x52'));let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'smartlamp':[{'field':a0_0x3644('0x2b'),'tick':[{'type':a0_0x3644('0x25'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3644('0x3f')},{'type':'max'},{'type':a0_0x3644('0x36')}]},{'type':a0_0x3644('0x25'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x3644('0x5a')},{'type':'variance'}]},{'type':a0_0x3644('0x25'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'pact','tick':[{'type':a0_0x3644('0x25'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3644('0x3f')},{'type':a0_0x3644('0x5a')},{'type':a0_0x3644('0x36')}]},{'type':a0_0x3644('0x25'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3644('0x3f')},{'type':a0_0x3644('0x5a')},{'type':a0_0x3644('0x36')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x3644('0x27'),'connection':{'type':'mqtt'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x3644('0x27'),'nodeid':a0_0x3644('0x27'),'aggrConfigId':'smartlamp','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':a0_0x3644('0x2b')},{'type':a0_0x3644('0x61'),'name':'pact|ma|21600'},{'type':a0_0x3644('0x61'),'name':a0_0x3644('0x69')},{'type':a0_0x3644('0x61'),'name':'dimml|min|86400000'},{'type':a0_0x3644('0x61'),'name':'dimml|max|86400000'},{'type':a0_0x3644('0x61'),'name':a0_0x3644('0x5c')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x3644('0x61'),'name':a0_0x3644('0x2b')},{'type':a0_0x3644('0x61'),'name':'pact'},{'type':a0_0x3644('0x61'),'name':a0_0x3644('0x69')},{'type':a0_0x3644('0x61'),'name':a0_0x3644('0x10')},{'type':a0_0x3644('0x61'),'name':a0_0x3644('0x2d')},{'type':a0_0x3644('0x61'),'name':a0_0x3644('0x5c')}]}]}]};function processRecordDummyCb(_0x1c7edd,_0x2ea6c2){return!![];}describe(a0_0x3644('0x5e'),function(){let _0x1b36a9,_0x258eee;before(function(){fileManager[a0_0x3644('0x8')]('./db4/'),fileManager['createFolder']('./db4/'),_0x1b36a9=new qm[(a0_0x3644('0x30'))]({'dbPath':a0_0x3644('0xb'),'mode':'createClean'}),ssln=new streamingSmartLampNode(_0x1b36a9,connectionConfig,fusionConfig[a0_0x3644('0x44')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x1b36a9[a0_0x3644('0x5b')]();}),describe('initialization',function(){it(a0_0x3644('0x2c'),function(){assert['equal'](_0x1b36a9,ssln[a0_0x3644('0x64')]);}),it(a0_0x3644('0xa'),function(){assert['equal'](ssln[a0_0x3644('0x29')][a0_0x3644('0x47')],a0_0x3644('0x27'));}),it('check\x20store\x20structure',function(){assert[a0_0x3644('0x58')](ssln[a0_0x3644('0x29')][a0_0x3644('0x3d')],[{'id':0x0,'name':a0_0x3644('0x63'),'type':a0_0x3644('0x43'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x3644('0x24'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x3644('0x2b'),'type':a0_0x3644('0x32'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x3644('0x15'),function(){assert['equal'](Object[a0_0x3644('0x1')](ssln[a0_0x3644('0x9')])[a0_0x3644('0x53')],0x1a);}),it(a0_0x3644('0x14'),function(){assert[a0_0x3644('0x58')](Object[a0_0x3644('0x1')](ssln['aggregate']),[a0_0x3644('0x1e'),'dimml|winbuf|21600000',a0_0x3644('0x6a'),a0_0x3644('0x41'),a0_0x3644('0x50'),a0_0x3644('0x45'),'dimml|winbuf|86400000',a0_0x3644('0x69'),'dimml|min|86400000',a0_0x3644('0x2d'),a0_0x3644('0x5c'),'dimml|winbuf|604800000',a0_0x3644('0xe'),a0_0x3644('0x1d'),'pact|winbuf|21600000',a0_0x3644('0x55'),a0_0x3644('0x5d'),'pact|max|21600000',a0_0x3644('0x4f'),a0_0x3644('0x31'),a0_0x3644('0x3'),a0_0x3644('0x42'),a0_0x3644('0x1c'),a0_0x3644('0x13'),'pact|winbuf|604800000','pact|ma|604800000']);}),it(a0_0x3644('0x0'),function(){assert[a0_0x3644('0x58')](ssln[a0_0x3644('0x1f')],fusionConfig[a0_0x3644('0x44')][0x0]);}),it(a0_0x3644('0x39'),function(){assert[a0_0x3644('0x4c')](ssln['fusionNodeI'],0x63);}),it(a0_0x3644('0x65'),function(){assert['equal'](typeof ssln[a0_0x3644('0x7')],a0_0x3644('0x37'));}),it(a0_0x3644('0x35'),function(){assert['equal'](ssln[a0_0x3644('0x33')],null);}),it(a0_0x3644('0x3c'),function(){assert['deepEqual'](ssln['buffer'],[]);}),it(a0_0x3644('0x6'),function(){assert[a0_0x3644('0x4c')](ssln[a0_0x3644('0x28')],0x0);}),it(a0_0x3644('0xf'),function(){assert['equal'](ssln[a0_0x3644('0x4a')],!![]);}),it(a0_0x3644('0x26'),function(){assert['equal'](ssln[a0_0x3644('0x48')](),!![]);}),it(a0_0x3644('0x5'),function(){assert['equal'](typeof ssln['connectToKafka'],a0_0x3644('0x37'));}),it(a0_0x3644('0x62'),function(){assert['equal'](typeof ssln[a0_0x3644('0x54')],a0_0x3644('0x37'));}),it(a0_0x3644('0xc'),function(){assert['equal'](typeof ssln[a0_0x3644('0x40')],'function');}),it('offsetExists\x20function\x20exists',function(){assert['equal'](typeof ssln[a0_0x3644('0x2e')],a0_0x3644('0x37'));}),it(a0_0x3644('0x2a'),function(){assert[a0_0x3644('0x4c')](typeof ssln[a0_0x3644('0x49')],a0_0x3644('0x37'));}),it(a0_0x3644('0x66'),function(){assert[a0_0x3644('0x4c')](typeof ssln[a0_0x3644('0x12')],a0_0x3644('0x37'));}),it(a0_0x3644('0x19'),function(){assert[a0_0x3644('0x4c')](typeof ssln[a0_0x3644('0x60')],a0_0x3644('0x37'));}),it(a0_0x3644('0x4'),function(){assert[a0_0x3644('0x4c')](typeof ssln[a0_0x3644('0x2')],'function');}),it(a0_0x3644('0x3a'),function(){assert['equal'](typeof ssln[a0_0x3644('0x2')],a0_0x3644('0x37'));}),it(a0_0x3644('0x3e'),function(){assert[a0_0x3644('0x4c')](typeof ssln[a0_0x3644('0xd')],a0_0x3644('0x37'));}),it('getPartialFeatureVector\x20function\x20exists',function(){assert[a0_0x3644('0x4c')](typeof ssln[a0_0x3644('0x1a')],a0_0x3644('0x37'));}),it(a0_0x3644('0x18'),function(){assert[a0_0x3644('0x4c')](ssln[a0_0x3644('0x48')](),!![]);}),it(a0_0x3644('0x23'),function(){ssln[a0_0x3644('0x4d')](),assert[a0_0x3644('0x4c')](ssln[a0_0x3644('0x28')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert['equal'](ssln['setSlaveOffset'](0x0),![]);});}),describe('data\x20insertion',function(){it('data\x20record\x20saved\x20correctly',function(){ssln['processRecord'](JSON['parse'](a0_0x3644('0x67'))),ssln['processRecord'](JSON[a0_0x3644('0x5f')](a0_0x3644('0x21'))),assert[a0_0x3644('0x4c')](ssln[a0_0x3644('0x46')][a0_0x3644('0x53')],0x2),assert[a0_0x3644('0x4c')](ssln[a0_0x3644('0x46')][0x0][a0_0x3644('0x2b')],0x0),assert[a0_0x3644('0x4c')](ssln['buffer'][0x1][a0_0x3644('0x24')],0x1);}),it('Empty\x20values\x20in\x20message\x20set\x20to\x200',function(){ssln[a0_0x3644('0x4e')](JSON[a0_0x3644('0x5f')](a0_0x3644('0x59'))),assert[a0_0x3644('0x4c')](ssln['buffer']['length'],0x3),assert[a0_0x3644('0x4c')](ssln[a0_0x3644('0x46')][0x2][a0_0x3644('0x2b')],0x0);}),it('stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion',function(){assert[a0_0x3644('0x58')](ssln[a0_0x3644('0x46')][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});}),it(a0_0x3644('0x4b'),function(){for(let _0x5e5ef2=0x1;_0x5e5ef2<=0x9;_0x5e5ef2++){let _0x360dc2=0x155e9020a68+_0x5e5ef2*0x3e8,_0x569b77=_0x5e5ef2+0x1,_0x8b5c0c=_0x5e5ef2+0x1;ssln[a0_0x3644('0x4e')](JSON[a0_0x3644('0x5f')](a0_0x3644('0x22')+_0x360dc2+a0_0x3644('0x3b')+_0x569b77+a0_0x3644('0x34')+_0x8b5c0c+'}'));}assert[a0_0x3644('0x4c')](ssln[a0_0x3644('0x46')]['length'],0xc),assert[a0_0x3644('0x58')](ssln['buffer'][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});}),it('duplicate\x20insertions\x20test',function(){ssln[a0_0x3644('0x4e')](JSON['parse'](a0_0x3644('0x67'))),ssln[a0_0x3644('0x4e')](JSON[a0_0x3644('0x5f')]('{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}')),assert['equal'](ssln[a0_0x3644('0x46')]['length'],0xc);});});});