const a0_0x298a=[',\x22pact\x22:\x20','dimml|ma|604800000','dimml|winbuf|604800000','setSlaveOffset','offsetExists','parent\x20saved','setSlaveOffset\x20function\x20exists','isMaster\x20function','value','checkDataAvailability\x20function\x20exists','aggregate','parse','pact|min|86400000','config\x20saved','pact|variance|21600000','pact','dimml|min|86400000','dimml|max|21600000','pact|winbuf|604800000','test','position','offsetExists\x20function\x20exists','pact|tick','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','connectToKafka','function','constructor','data\x20insertion','Base','pact|winbuf|21600000','keys','createAggregates','getOffsetTimestamp','../nodes/streamingNode.js','fusionNodeI\x20correctly\x20saved','rawstore','deepEqual','createAggregates\x20function\x20exists','deleteObsoleteRows','pact|variance|86400000','pact|ma|604800000','length','./db4/','datetime','base\x20saved','pact|winbuf|86400000','9\x20more\x20data\x20insertions','dimml|variance|21600000','smartlamp','base','removeFolder','getPartialFeatureVector\x20function\x20exists','pact|ma|21600000','apply','getAggregates\x20function\x20exists','initialization',',\x22dimml\x22:\x20','pact|ma|86400000','dimml|tick','getOffsetTimestamp\x20function\x20exists','../common/utils/fileManager.js','winbuf','pact|max|21600000','../nodes/streamingEnergyNode.js','192.168.85.98:2181','nodes','mqtt','../nodes/streamingSmartLampNode.js','duplicate\x20insertions\x20test','getAggregates','min','dimml|winbuf|21600000','../nodes/streamingTimeValueNode.js','setMasterOffset','buffer','aggregates\x20initialized\x20-\x20key\x20names','dimml|winbuf|86400000','checkDataAvailability','fusionNodeI','pact|max|86400000','data\x20record\x20saved\x20correctly','createClean','callback\x20function\x20should\x20be\x20set','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','dimml','dimml|variance|86400000','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../nodes/streamingStaticNode.js','streamingSmartLampNode','equal','dimml|ma|21600000','max','dimml|max|86400000','slave\x20offset\x20set\x20correctly:\x20no\x20data','close','parent','../nodes/streamingWeatherNode.js','buffer\x20empty','dimml|ma|86400000','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Empty\x20values\x20in\x20message\x20set\x20to\x200','master','name','broadcastAggregates','check\x20store\x20structure','processRecord','variance','processRecordCb','pact|min|21600000','{\x22stampm\x22:\x201468493073000}','buffer\x20position\x20is\x200','broadcastAggregates\x20function\x20exists','pact|ma|21600','{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}','aggregates\x20initialized\x20-\x20number'];(function(_0x4c34b0,_0x298a56){const _0x12ba24=function(_0x4dbcc7){while(--_0x4dbcc7){_0x4c34b0['push'](_0x4c34b0['shift']());}},_0x11b8ea=function(){const _0x39c14a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5c5f52,_0x5919eb,_0x1d995e,_0x1f80ac){_0x1f80ac=_0x1f80ac||{};let _0x2a5f09=_0x5919eb+'='+_0x1d995e,_0x4da811=0x0;for(let _0x3816aa=0x0,_0x34c4f7=_0x5c5f52['length'];_0x3816aa<_0x34c4f7;_0x3816aa++){const _0x1a12e0=_0x5c5f52[_0x3816aa];_0x2a5f09+=';\x20'+_0x1a12e0;const _0x116f6d=_0x5c5f52[_0x1a12e0];_0x5c5f52['push'](_0x116f6d),_0x34c4f7=_0x5c5f52['length'],_0x116f6d!==!![]&&(_0x2a5f09+='='+_0x116f6d);}_0x1f80ac['cookie']=_0x2a5f09;},'removeCookie':function(){return'dev';},'getCookie':function(_0xb31bbd,_0xf0588){_0xb31bbd=_0xb31bbd||function(_0x2d2bc0){return _0x2d2bc0;};const _0x39ed2f=_0xb31bbd(new RegExp('(?:^|;\x20)'+_0xf0588['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x200bfc=function(_0x10d3ce,_0x3516e7){_0x10d3ce(++_0x3516e7);};return _0x200bfc(_0x12ba24,_0x298a56),_0x39ed2f?decodeURIComponent(_0x39ed2f[0x1]):undefined;}},_0x28fe6f=function(){const _0x557fe6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x557fe6['test'](_0x39c14a['removeCookie']['toString']());};_0x39c14a['updateCookie']=_0x28fe6f;let _0xf37da7='';const _0x5d5186=_0x39c14a['updateCookie']();if(!_0x5d5186)_0x39c14a['setCookie'](['*'],'counter',0x1);else _0x5d5186?_0xf37da7=_0x39c14a['getCookie'](null,'counter'):_0x39c14a['removeCookie']();};_0x11b8ea();}(a0_0x298a,0x1a4));const a0_0x12ba=function(_0x4c34b0,_0x298a56){_0x4c34b0=_0x4c34b0-0x0;let _0x12ba24=a0_0x298a[_0x4c34b0];return _0x12ba24;};const a0_0x1d995e=function(){let _0xfde5bb=!![];return function(_0x406f21,_0x255203){const _0x4e907f=_0xfde5bb?function(){if(_0x255203){const _0x2309c0=_0x255203[a0_0x12ba('0x61')](_0x406f21,arguments);return _0x255203=null,_0x2309c0;}}:function(){};return _0xfde5bb=![],_0x4e907f;};}(),a0_0x5919eb=a0_0x1d995e(this,function(){const _0x4dbc9f=function(){const _0x560a1e=_0x4dbc9f['constructor'](a0_0x12ba('0x1c'))()[a0_0x12ba('0x46')](a0_0x12ba('0xf'));return!_0x560a1e[a0_0x12ba('0x3f')](a0_0x5919eb);};return _0x4dbc9f();});a0_0x5919eb();const streamingNode=require(a0_0x12ba('0x4d')),streamingEnergyNode=require(a0_0x12ba('0x6b')),streamingWeatherNode=require(a0_0x12ba('0x19')),streamingStaticNode=require(a0_0x12ba('0x10')),streamingTimeValueNode=require(a0_0x12ba('0x0')),streamingSmartLampNode=require(a0_0x12ba('0x6f')),fileManager=require(a0_0x12ba('0x68')),qm=require('qminer'),fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':a0_0x12ba('0x6c')},aggrConfigs={'smartlamp':[{'field':a0_0x12ba('0xd'),'tick':[{'type':a0_0x12ba('0x69'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x12ba('0x72')},{'type':a0_0x12ba('0x14')},{'type':a0_0x12ba('0x23')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':'max'},{'type':'variance'}]},{'type':a0_0x12ba('0x69'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':a0_0x12ba('0x3b'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x12ba('0x72')},{'type':a0_0x12ba('0x14')},{'type':'variance'}]},{'type':a0_0x12ba('0x69'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x12ba('0x14')},{'type':'variance'}]},{'type':a0_0x12ba('0x69'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x12ba('0x5c'),'connection':{'type':a0_0x12ba('0x6e')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'smartlamp','nodeid':a0_0x12ba('0x5c'),'aggrConfigId':a0_0x12ba('0x5c'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':'dimml'},{'type':a0_0x12ba('0x34'),'name':a0_0x12ba('0x29')},{'type':a0_0x12ba('0x34'),'name':a0_0x12ba('0x1b')},{'type':a0_0x12ba('0x34'),'name':'dimml|min|86400000'},{'type':'value','name':a0_0x12ba('0x15')},{'type':a0_0x12ba('0x34'),'name':a0_0x12ba('0xe')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x12ba('0x34'),'name':a0_0x12ba('0xd')},{'type':'value','name':'pact'},{'type':'value','name':a0_0x12ba('0x1b')},{'type':a0_0x12ba('0x34'),'name':a0_0x12ba('0x3c')},{'type':'value','name':a0_0x12ba('0x15')},{'type':a0_0x12ba('0x34'),'name':a0_0x12ba('0xe')}]}]}]};function processRecordDummyCb(_0x501401,_0x4f8ef5){return!![];}describe(a0_0x12ba('0x11'),function(){let _0x5e118c,_0x58e38e;before(function(){fileManager[a0_0x12ba('0x5e')](a0_0x12ba('0x56')),fileManager['createFolder'](a0_0x12ba('0x56')),_0x5e118c=new qm[(a0_0x12ba('0x48'))]({'dbPath':a0_0x12ba('0x56'),'mode':a0_0x12ba('0x9')}),ssln=new streamingSmartLampNode(_0x5e118c,connectionConfig,fusionConfig[a0_0x12ba('0x6d')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x5e118c[a0_0x12ba('0x17')]();}),describe(a0_0x12ba('0x63'),function(){it(a0_0x12ba('0x58'),function(){assert[a0_0x12ba('0x12')](_0x5e118c,ssln[a0_0x12ba('0x5d')]);}),it('check\x20if\x20store\x20exists',function(){assert[a0_0x12ba('0x12')](ssln[a0_0x12ba('0x4f')][a0_0x12ba('0x1f')],a0_0x12ba('0x5c'));}),it(a0_0x12ba('0x21'),function(){assert['deepEqual'](ssln[a0_0x12ba('0x4f')]['fields'],[{'id':0x0,'name':'Time','type':a0_0x12ba('0x57'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x12ba('0x3b'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'dimml','type':'float','nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x12ba('0x2b'),function(){assert['equal'](Object[a0_0x12ba('0x4a')](ssln[a0_0x12ba('0x36')])[a0_0x12ba('0x55')],0x1a);}),it(a0_0x12ba('0x3'),function(){assert[a0_0x12ba('0x50')](Object[a0_0x12ba('0x4a')](ssln['aggregate']),[a0_0x12ba('0x66'),a0_0x12ba('0x73'),a0_0x12ba('0x13'),'dimml|min|21600000',a0_0x12ba('0x3d'),a0_0x12ba('0x5b'),a0_0x12ba('0x4'),a0_0x12ba('0x1b'),a0_0x12ba('0x3c'),'dimml|max|86400000',a0_0x12ba('0xe'),a0_0x12ba('0x2e'),a0_0x12ba('0x2d'),a0_0x12ba('0x42'),a0_0x12ba('0x49'),a0_0x12ba('0x60'),a0_0x12ba('0x25'),a0_0x12ba('0x6a'),a0_0x12ba('0x3a'),a0_0x12ba('0x59'),a0_0x12ba('0x65'),a0_0x12ba('0x38'),a0_0x12ba('0x7'),a0_0x12ba('0x53'),a0_0x12ba('0x3e'),a0_0x12ba('0x54')]);}),it(a0_0x12ba('0x39'),function(){assert[a0_0x12ba('0x50')](ssln['config'],fusionConfig['nodes'][0x0]);}),it(a0_0x12ba('0x4e'),function(){assert['equal'](ssln[a0_0x12ba('0x6')],0x63);}),it(a0_0x12ba('0xa'),function(){assert['equal'](typeof ssln[a0_0x12ba('0x24')],a0_0x12ba('0x45'));}),it(a0_0x12ba('0x31'),function(){assert[a0_0x12ba('0x12')](ssln[a0_0x12ba('0x18')],null);}),it(a0_0x12ba('0x1a'),function(){assert[a0_0x12ba('0x50')](ssln[a0_0x12ba('0x2')],[]);}),it(a0_0x12ba('0x27'),function(){assert[a0_0x12ba('0x12')](ssln['position'],0x0);}),it('master\x20flag\x20set\x20correctly',function(){assert['equal'](ssln[a0_0x12ba('0x1e')],!![]);}),it(a0_0x12ba('0x33'),function(){assert['equal'](ssln['isMaster'](),!![]);}),it('connectToKafka\x20function\x20exists',function(){assert[a0_0x12ba('0x12')](typeof ssln[a0_0x12ba('0x44')],a0_0x12ba('0x45'));}),it(a0_0x12ba('0x28'),function(){assert[a0_0x12ba('0x12')](typeof ssln[a0_0x12ba('0x20')],a0_0x12ba('0x45'));}),it(a0_0x12ba('0x51'),function(){assert[a0_0x12ba('0x12')](typeof ssln[a0_0x12ba('0x4b')],a0_0x12ba('0x45'));}),it(a0_0x12ba('0x41'),function(){assert[a0_0x12ba('0x12')](typeof ssln[a0_0x12ba('0x30')],a0_0x12ba('0x45'));}),it('deleteObsoleteRows\x20function\x20exists',function(){assert[a0_0x12ba('0x12')](typeof ssln[a0_0x12ba('0x52')],a0_0x12ba('0x45'));}),it(a0_0x12ba('0x35'),function(){assert[a0_0x12ba('0x12')](typeof ssln[a0_0x12ba('0x5')],a0_0x12ba('0x45'));}),it(a0_0x12ba('0x32'),function(){assert['equal'](typeof ssln[a0_0x12ba('0x2f')],a0_0x12ba('0x45'));}),it(a0_0x12ba('0x67'),function(){assert['equal'](typeof ssln[a0_0x12ba('0x4c')],a0_0x12ba('0x45'));}),it('setMasterOffset\x20function\x20exists',function(){assert[a0_0x12ba('0x12')](typeof ssln[a0_0x12ba('0x4c')],a0_0x12ba('0x45'));}),it(a0_0x12ba('0x62'),function(){assert[a0_0x12ba('0x12')](typeof ssln[a0_0x12ba('0x71')],'function');}),it(a0_0x12ba('0x5f'),function(){assert['equal'](typeof ssln['getPartialFeatureVector'],a0_0x12ba('0x45'));}),it(a0_0x12ba('0xb'),function(){assert[a0_0x12ba('0x12')](ssln['isMaster'](),!![]);}),it(a0_0x12ba('0xc'),function(){ssln[a0_0x12ba('0x1')](),assert[a0_0x12ba('0x12')](ssln[a0_0x12ba('0x40')],-0x1);}),it(a0_0x12ba('0x16'),function(){assert['equal'](ssln[a0_0x12ba('0x2f')](0x0),![]);});}),describe(a0_0x12ba('0x47'),function(){it(a0_0x12ba('0x8'),function(){ssln['processRecord'](JSON['parse']('{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}')),ssln[a0_0x12ba('0x22')](JSON[a0_0x12ba('0x37')]('{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}')),assert[a0_0x12ba('0x12')](ssln[a0_0x12ba('0x2')][a0_0x12ba('0x55')],0x2),assert[a0_0x12ba('0x12')](ssln[a0_0x12ba('0x2')][0x0][a0_0x12ba('0xd')],0x0),assert[a0_0x12ba('0x12')](ssln[a0_0x12ba('0x2')][0x1]['pact'],0x1);}),it(a0_0x12ba('0x1d'),function(){ssln[a0_0x12ba('0x22')](JSON[a0_0x12ba('0x37')](a0_0x12ba('0x26'))),assert['equal'](ssln['buffer'][a0_0x12ba('0x55')],0x3),assert[a0_0x12ba('0x12')](ssln[a0_0x12ba('0x2')][0x2]['dimml'],0x0);}),it(a0_0x12ba('0x43'),function(){assert[a0_0x12ba('0x50')](ssln[a0_0x12ba('0x2')][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});}),it(a0_0x12ba('0x5a'),function(){for(let _0x425f83=0x1;_0x425f83<=0x9;_0x425f83++){let _0x179ed1=0x155e9020a68+_0x425f83*0x3e8,_0x283bf0=_0x425f83+0x1,_0x5a8fa0=_0x425f83+0x1;ssln['processRecord'](JSON[a0_0x12ba('0x37')]('{\x22stampm\x22:'+_0x179ed1+a0_0x12ba('0x64')+_0x283bf0+a0_0x12ba('0x2c')+_0x5a8fa0+'}'));}assert[a0_0x12ba('0x12')](ssln[a0_0x12ba('0x2')][a0_0x12ba('0x55')],0xc),assert[a0_0x12ba('0x50')](ssln[a0_0x12ba('0x2')][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});}),it(a0_0x12ba('0x70'),function(){ssln[a0_0x12ba('0x22')](JSON[a0_0x12ba('0x37')](a0_0x12ba('0x2a'))),ssln[a0_0x12ba('0x22')](JSON[a0_0x12ba('0x37')]('{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}')),assert[a0_0x12ba('0x12')](ssln[a0_0x12ba('0x2')][a0_0x12ba('0x55')],0xc);});});});