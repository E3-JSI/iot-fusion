const a0_0x5c70=['checkDataAvailability\x20function\x20exists','setMasterOffset\x20function\x20exists','processRecord','position','Empty\x20values\x20in\x20message\x20set\x20to\x200','winbuf','dimml|winbuf|604800000','deleteObsoleteRows\x20function\x20exists',',\x22dimml\x22:\x20','data\x20record\x20saved\x20correctly','config','dimml|max|21600000','fusionNodeI\x20correctly\x20saved','connectToKafka','name','equal','{\x22stampm\x22:','getOffsetTimestamp\x20function\x20exists','setMasterOffset','datetime','pact|min|86400000','createFolder','qminer','mqtt','parent\x20saved','broadcastAggregates','callback\x20function\x20should\x20be\x20set','pact|ma|86400000','isMaster','setSlaveOffset\x20function\x20exists','assert','../nodes/streamingNode.js','broadcastAggregates\x20function\x20exists','apply','master','constructor','pact|ma|21600','smartlamp','pact|max|21600000','master\x20flag\x20set\x20correctly','float','createAggregates','getOffsetTimestamp','deepEqual','config\x20saved','check\x20if\x20store\x20exists','pact|min|21600000','getPartialFeatureVector','pact|variance|86400000','pact|variance|21600000','pact|winbuf|86400000','dimml|max|86400000','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Time','Base','value','parse','fusionNodeI','./db4/','pact',',\x22pact\x22:\x20','../common/utils/fileManager.js','../nodes/streamingSmartLampNode.js','processRecordCb','offsetExists\x20function\x20exists','9\x20more\x20data\x20insertions','length','dimml|variance|21600000','pact|ma|21600000','streamingSmartLampNode','dimml|ma|86400000','master\x20offset\x20set\x20correctly','dimml|ma|604800000','pact|tick','../nodes/streamingStaticNode.js','slave\x20offset\x20set\x20correctly:\x20no\x20data','isMaster\x20function','rawstore','dimml|min|86400000','variance','getAggregates','buffer\x20empty','aggregate','keys','check\x20store\x20structure','dimml|min|21600000','createAggregates\x20function\x20exists','fields','../nodes/streamingTimeValueNode.js','checkDataAvailability','dimml|ma|21600000','nodes','dimml','function','pact|winbuf|21600000','return\x20/\x22\x20+\x20this\x20+\x20\x22/','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','max','removeFolder','192.168.85.98:2181','base','{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}','close','buffer\x20position\x20is\x200','pact|ma|604800000','connectToKafka\x20function\x20exists','getPartialFeatureVector\x20function\x20exists','../nodes/streamingEnergyNode.js','dimml|variance|86400000','min','createClean','parent','buffer'];(function(_0x37f74f,_0x5c7065){const _0x3122d0=function(_0x47565f){while(--_0x47565f){_0x37f74f['push'](_0x37f74f['shift']());}},_0x2714fe=function(){const _0xb3b094={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x49950e,_0x5a8461,_0x4f5788,_0x52f82b){_0x52f82b=_0x52f82b||{};let _0x2c6403=_0x5a8461+'='+_0x4f5788,_0x2fb4a0=0x0;for(let _0x595364=0x0,_0x5dd4d7=_0x49950e['length'];_0x595364<_0x5dd4d7;_0x595364++){const _0x3bbb63=_0x49950e[_0x595364];_0x2c6403+=';\x20'+_0x3bbb63;const _0x5e8df0=_0x49950e[_0x3bbb63];_0x49950e['push'](_0x5e8df0),_0x5dd4d7=_0x49950e['length'],_0x5e8df0!==!![]&&(_0x2c6403+='='+_0x5e8df0);}_0x52f82b['cookie']=_0x2c6403;},'removeCookie':function(){return'dev';},'getCookie':function(_0xc2477,_0x3adb9c){_0xc2477=_0xc2477||function(_0x2bc20a){return _0x2bc20a;};const _0x53e81d=_0xc2477(new RegExp('(?:^|;\x20)'+_0x3adb9c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x29d822=function(_0x7d81f3,_0x2e3680){_0x7d81f3(++_0x2e3680);};return _0x29d822(_0x3122d0,_0x5c7065),_0x53e81d?decodeURIComponent(_0x53e81d[0x1]):undefined;}},_0x41c6bc=function(){const _0x200c7a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x200c7a['test'](_0xb3b094['removeCookie']['toString']());};_0xb3b094['updateCookie']=_0x41c6bc;let _0x431637='';const _0x493847=_0xb3b094['updateCookie']();if(!_0x493847)_0xb3b094['setCookie'](['*'],'counter',0x1);else _0x493847?_0x431637=_0xb3b094['getCookie'](null,'counter'):_0xb3b094['removeCookie']();};_0x2714fe();}(a0_0x5c70,0x14f));const a0_0x3122=function(_0x37f74f,_0x5c7065){_0x37f74f=_0x37f74f-0x0;let _0x3122d0=a0_0x5c70[_0x37f74f];return _0x3122d0;};const a0_0x4f5788=function(){let _0x31eed4=!![];return function(_0x304d11,_0x28e038){const _0x22e845=_0x31eed4?function(){if(_0x28e038){const _0x6db586=_0x28e038[a0_0x3122('0x25')](_0x304d11,arguments);return _0x28e038=null,_0x6db586;}}:function(){};return _0x31eed4=![],_0x22e845;};}(),a0_0x5a8461=a0_0x4f5788(this,function(){const _0x4385e5=function(){const _0x53eccb=_0x4385e5[a0_0x3122('0x27')](a0_0x3122('0x63'))()['constructor'](a0_0x3122('0x38'));return!_0x53eccb['test'](a0_0x5a8461);};return _0x4385e5();});a0_0x5a8461();const streamingNode=require(a0_0x3122('0x23')),streamingEnergyNode=require(a0_0x3122('0x6f')),streamingWeatherNode=require('../nodes/streamingWeatherNode.js'),streamingStaticNode=require(a0_0x3122('0x4e')),streamingTimeValueNode=require(a0_0x3122('0x5c')),streamingSmartLampNode=require(a0_0x3122('0x42')),fileManager=require(a0_0x3122('0x41')),qm=require(a0_0x3122('0x1a')),fs=require('fs');var assert=require(a0_0x3122('0x22'));let connectionConfig={'zookeeper':a0_0x3122('0x67')},aggrConfigs={'smartlamp':[{'field':a0_0x3122('0x60'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3122('0x0')},{'type':a0_0x3122('0x65')},{'type':a0_0x3122('0x53')}]},{'type':a0_0x3122('0x9'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3122('0x0')},{'type':'max'},{'type':a0_0x3122('0x53')}]},{'type':a0_0x3122('0x9'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'pact','tick':[{'type':a0_0x3122('0x9'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3122('0x0')},{'type':'max'},{'type':a0_0x3122('0x53')}]},{'type':a0_0x3122('0x9'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3122('0x0')},{'type':a0_0x3122('0x65')},{'type':a0_0x3122('0x53')}]},{'type':a0_0x3122('0x9'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x3122('0x29'),'connection':{'type':a0_0x3122('0x1b')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x3122('0x29'),'nodeid':'smartlamp','aggrConfigId':a0_0x3122('0x29'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x3122('0x3b'),'name':a0_0x3122('0x60')},{'type':'value','name':a0_0x3122('0x28')},{'type':a0_0x3122('0x3b'),'name':a0_0x3122('0x4a')},{'type':a0_0x3122('0x3b'),'name':a0_0x3122('0x52')},{'type':a0_0x3122('0x3b'),'name':a0_0x3122('0x37')},{'type':a0_0x3122('0x3b'),'name':a0_0x3122('0x70')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x3122('0x3b'),'name':'dimml'},{'type':a0_0x3122('0x3b'),'name':a0_0x3122('0x3f')},{'type':'value','name':a0_0x3122('0x4a')},{'type':a0_0x3122('0x3b'),'name':a0_0x3122('0x52')},{'type':a0_0x3122('0x3b'),'name':a0_0x3122('0x37')},{'type':a0_0x3122('0x3b'),'name':a0_0x3122('0x70')}]}]}]};function processRecordDummyCb(_0x201937,_0x3528ef){return!![];}describe(a0_0x3122('0x49'),function(){let _0x42f7ee,_0x47331d;before(function(){fileManager[a0_0x3122('0x66')](a0_0x3122('0x3e')),fileManager[a0_0x3122('0x19')](a0_0x3122('0x3e')),_0x42f7ee=new qm[(a0_0x3122('0x3a'))]({'dbPath':a0_0x3122('0x3e'),'mode':a0_0x3122('0x1')}),ssln=new streamingSmartLampNode(_0x42f7ee,connectionConfig,fusionConfig[a0_0x3122('0x5f')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x42f7ee[a0_0x3122('0x6a')]();}),describe('initialization',function(){it('base\x20saved',function(){assert[a0_0x3122('0x13')](_0x42f7ee,ssln[a0_0x3122('0x68')]);}),it(a0_0x3122('0x31'),function(){assert[a0_0x3122('0x13')](ssln[a0_0x3122('0x51')][a0_0x3122('0x12')],a0_0x3122('0x29'));}),it(a0_0x3122('0x58'),function(){assert[a0_0x3122('0x2f')](ssln['rawstore'][a0_0x3122('0x5b')],[{'id':0x0,'name':a0_0x3122('0x39'),'type':a0_0x3122('0x17'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x3122('0x3f'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'dimml','type':a0_0x3122('0x2c'),'nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x3122('0x13')](Object[a0_0x3122('0x57')](ssln['aggregate'])[a0_0x3122('0x46')],0x1a);}),it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert['deepEqual'](Object[a0_0x3122('0x57')](ssln[a0_0x3122('0x56')]),['dimml|tick','dimml|winbuf|21600000',a0_0x3122('0x5e'),a0_0x3122('0x59'),a0_0x3122('0xf'),a0_0x3122('0x47'),'dimml|winbuf|86400000',a0_0x3122('0x4a'),a0_0x3122('0x52'),a0_0x3122('0x37'),a0_0x3122('0x70'),a0_0x3122('0xa'),a0_0x3122('0x4c'),a0_0x3122('0x4d'),a0_0x3122('0x62'),a0_0x3122('0x48'),a0_0x3122('0x32'),a0_0x3122('0x2a'),a0_0x3122('0x35'),a0_0x3122('0x36'),a0_0x3122('0x1f'),a0_0x3122('0x18'),'pact|max|86400000',a0_0x3122('0x34'),'pact|winbuf|604800000',a0_0x3122('0x6c')]);}),it(a0_0x3122('0x30'),function(){assert['deepEqual'](ssln[a0_0x3122('0xe')],fusionConfig[a0_0x3122('0x5f')][0x0]);}),it(a0_0x3122('0x10'),function(){assert['equal'](ssln[a0_0x3122('0x3d')],0x63);}),it(a0_0x3122('0x1e'),function(){assert['equal'](typeof ssln[a0_0x3122('0x43')],a0_0x3122('0x61'));}),it(a0_0x3122('0x1c'),function(){assert[a0_0x3122('0x13')](ssln[a0_0x3122('0x2')],null);}),it(a0_0x3122('0x55'),function(){assert[a0_0x3122('0x2f')](ssln['buffer'],[]);}),it(a0_0x3122('0x6b'),function(){assert[a0_0x3122('0x13')](ssln['position'],0x0);}),it(a0_0x3122('0x2b'),function(){assert['equal'](ssln[a0_0x3122('0x26')],!![]);}),it(a0_0x3122('0x50'),function(){assert[a0_0x3122('0x13')](ssln[a0_0x3122('0x20')](),!![]);}),it(a0_0x3122('0x6d'),function(){assert['equal'](typeof ssln[a0_0x3122('0x11')],a0_0x3122('0x61'));}),it(a0_0x3122('0x24'),function(){assert[a0_0x3122('0x13')](typeof ssln[a0_0x3122('0x1d')],a0_0x3122('0x61'));}),it(a0_0x3122('0x5a'),function(){assert[a0_0x3122('0x13')](typeof ssln[a0_0x3122('0x2d')],a0_0x3122('0x61'));}),it(a0_0x3122('0x44'),function(){assert[a0_0x3122('0x13')](typeof ssln['offsetExists'],a0_0x3122('0x61'));}),it(a0_0x3122('0xb'),function(){assert[a0_0x3122('0x13')](typeof ssln['deleteObsoleteRows'],a0_0x3122('0x61'));}),it(a0_0x3122('0x4'),function(){assert[a0_0x3122('0x13')](typeof ssln[a0_0x3122('0x5d')],a0_0x3122('0x61'));}),it(a0_0x3122('0x21'),function(){assert[a0_0x3122('0x13')](typeof ssln['setSlaveOffset'],a0_0x3122('0x61'));}),it(a0_0x3122('0x15'),function(){assert[a0_0x3122('0x13')](typeof ssln[a0_0x3122('0x2e')],'function');}),it(a0_0x3122('0x5'),function(){assert['equal'](typeof ssln[a0_0x3122('0x2e')],a0_0x3122('0x61'));}),it('getAggregates\x20function\x20exists',function(){assert[a0_0x3122('0x13')](typeof ssln[a0_0x3122('0x54')],a0_0x3122('0x61'));}),it(a0_0x3122('0x6e'),function(){assert[a0_0x3122('0x13')](typeof ssln[a0_0x3122('0x33')],a0_0x3122('0x61'));}),it('master\x20set\x20correctly',function(){assert[a0_0x3122('0x13')](ssln['isMaster'](),!![]);}),it(a0_0x3122('0x4b'),function(){ssln[a0_0x3122('0x16')](),assert[a0_0x3122('0x13')](ssln[a0_0x3122('0x7')],-0x1);}),it(a0_0x3122('0x4f'),function(){assert[a0_0x3122('0x13')](ssln['setSlaveOffset'](0x0),![]);});}),describe('data\x20insertion',function(){it(a0_0x3122('0xd'),function(){ssln['processRecord'](JSON[a0_0x3122('0x3c')]('{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}')),ssln[a0_0x3122('0x6')](JSON[a0_0x3122('0x3c')](a0_0x3122('0x69'))),assert[a0_0x3122('0x13')](ssln[a0_0x3122('0x3')][a0_0x3122('0x46')],0x2),assert[a0_0x3122('0x13')](ssln[a0_0x3122('0x3')][0x0]['dimml'],0x0),assert[a0_0x3122('0x13')](ssln[a0_0x3122('0x3')][0x1][a0_0x3122('0x3f')],0x1);}),it(a0_0x3122('0x8'),function(){ssln[a0_0x3122('0x6')](JSON[a0_0x3122('0x3c')]('{\x22stampm\x22:\x201468493073000}')),assert[a0_0x3122('0x13')](ssln[a0_0x3122('0x3')]['length'],0x3),assert[a0_0x3122('0x13')](ssln[a0_0x3122('0x3')][0x2]['dimml'],0x0);}),it(a0_0x3122('0x64'),function(){assert[a0_0x3122('0x2f')](ssln['buffer'][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});}),it(a0_0x3122('0x45'),function(){for(let _0x4057de=0x1;_0x4057de<=0x9;_0x4057de++){let _0x297e54=0x155e9020a68+_0x4057de*0x3e8,_0x204304=_0x4057de+0x1,_0x541ddd=_0x4057de+0x1;ssln[a0_0x3122('0x6')](JSON[a0_0x3122('0x3c')](a0_0x3122('0x14')+_0x297e54+a0_0x3122('0xc')+_0x204304+a0_0x3122('0x40')+_0x541ddd+'}'));}assert[a0_0x3122('0x13')](ssln['buffer'][a0_0x3122('0x46')],0xc),assert['deepEqual'](ssln[a0_0x3122('0x3')][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});}),it('duplicate\x20insertions\x20test',function(){ssln[a0_0x3122('0x6')](JSON[a0_0x3122('0x3c')]('{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}')),ssln[a0_0x3122('0x6')](JSON[a0_0x3122('0x3c')]('{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}')),assert['equal'](ssln[a0_0x3122('0x3')][a0_0x3122('0x46')],0xc);});});});