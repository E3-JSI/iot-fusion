var _0x4e22=['master','isMaster','connectToKafka\x20function\x20exists','createAggregates\x20function\x20exists','createAggregates','offsetExists','deleteObsoleteRows','checkDataAvailability','setSlaveOffset\x20function\x20exists','setSlaveOffset','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20offset\x20set\x20correctly','slave\x20offset\x20set\x20correctly:\x20no\x20data','data\x20insertion','data\x20record\x20saved\x20correctly','processRecord','{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}','parse','Empty\x20values\x20in\x20message\x20set\x20to\x200','{\x22stampm\x22:\x201468493073000}','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','9\x20more\x20data\x20insertions','{\x22stampm\x22:',',\x22dimml\x22:\x20',',\x22pact\x22:\x20','duplicate\x20insertions\x20test','{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}','../nodes/streamingNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingTimeValueNode.js','../../common/utils/fileManager.js','qminer','assert','dimml','winbuf','min','variance','max','smartlamp','mqtt','value','pact|ma|21600','dimml|ma|86400000','dimml|min|86400000','dimml|max|86400000','dimml|variance|86400000','streamingSmartLampNode','./db4/','createFolder','Base','createClean','close','initialization','equal','check\x20if\x20store\x20exists','rawstore','check\x20store\x20structure','deepEqual','fields','datetime','pact','float','aggregates\x20initialized\x20-\x20number','keys','length','aggregates\x20initialized\x20-\x20key\x20names','aggregate','dimml|tick','dimml|winbuf|21600000','dimml|ma|21600000','dimml|min|21600000','dimml|max|21600000','dimml|variance|21600000','dimml|winbuf|86400000','pact|tick','pact|winbuf|21600000','pact|ma|21600000','pact|min|21600000','pact|max|21600000','pact|min|86400000','pact|max|86400000','pact|winbuf|604800000','pact|ma|604800000','config\x20saved','config','fusionNodeI\x20correctly\x20saved','processRecordCb','function','buffer\x20empty','buffer','buffer\x20position\x20is\x200','position','master\x20flag\x20set\x20correctly'];(function(_0x4f67fc,_0x238ace){var _0xd42654=function(_0x15515c){while(--_0x15515c){_0x4f67fc['push'](_0x4f67fc['shift']());}};var _0x44e37d=function(){var _0x391cea={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x13d5ee,_0x4f5a2d,_0x59b9f3,_0xba5174){_0xba5174=_0xba5174||{};var _0x5becc0=_0x4f5a2d+'='+_0x59b9f3;var _0x391f3b=0x0;for(var _0x391f3b=0x0,_0x94d2d4=_0x13d5ee['length'];_0x391f3b<_0x94d2d4;_0x391f3b++){var _0x91e324=_0x13d5ee[_0x391f3b];_0x5becc0+=';\x20'+_0x91e324;var _0x3ca9fe=_0x13d5ee[_0x91e324];_0x13d5ee['push'](_0x3ca9fe);_0x94d2d4=_0x13d5ee['length'];if(_0x3ca9fe!==!![]){_0x5becc0+='='+_0x3ca9fe;}}_0xba5174['cookie']=_0x5becc0;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3d6141,_0xcaeba3){_0x3d6141=_0x3d6141||function(_0x3a2db2){return _0x3a2db2;};var _0x1ae3ee=_0x3d6141(new RegExp('(?:^|;\x20)'+_0xcaeba3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x239ce5=function(_0x3b4c3f,_0x2597f9){_0x3b4c3f(++_0x2597f9);};_0x239ce5(_0xd42654,_0x238ace);return _0x1ae3ee?decodeURIComponent(_0x1ae3ee[0x1]):undefined;}};var _0x1994ca=function(){var _0x1108cd=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1108cd['test'](_0x391cea['removeCookie']['toString']());};_0x391cea['updateCookie']=_0x1994ca;var _0x1794ba='';var _0x5badbd=_0x391cea['updateCookie']();if(!_0x5badbd){_0x391cea['setCookie'](['*'],'counter',0x1);}else if(_0x5badbd){_0x1794ba=_0x391cea['getCookie'](null,'counter');}else{_0x391cea['removeCookie']();}};_0x44e37d();}(_0x4e22,0x1a8));var _0x4066=function(_0x1453a8,_0x51d227){_0x1453a8=_0x1453a8-0x0;var _0x25c0b9=_0x4e22[_0x1453a8];return _0x25c0b9;};var _0x3b429d=function(){var _0x578200=!![];return function(_0x3b06b2,_0x392816){var _0x190b73=_0x578200?function(){if(_0x392816){var _0xa6ab3d=_0x392816['apply'](_0x3b06b2,arguments);_0x392816=null;return _0xa6ab3d;}}:function(){};_0x578200=![];return _0x190b73;};}();var _0x1fd1e9=_0x3b429d(this,function(){var _0xcf68f8=function(){return'\x64\x65\x76';},_0x5498f3=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x42098d=function(){var _0x1c695e=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1c695e['\x74\x65\x73\x74'](_0xcf68f8['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2f6c2f=function(){var _0x16f2ea=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x16f2ea['\x74\x65\x73\x74'](_0x5498f3['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0xcbf99e=function(_0x606f42){var _0x1eeeca=~-0x1>>0x1+0xff%0x0;if(_0x606f42['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1eeeca)){_0xfbb4f5(_0x606f42);}};var _0xfbb4f5=function(_0x482804){var _0x2906e2=~-0x4>>0x1+0xff%0x0;if(_0x482804['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x2906e2){_0xcbf99e(_0x482804);}};if(!_0x42098d()){if(!_0x2f6c2f()){_0xcbf99e('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0xcbf99e('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0xcbf99e('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1fd1e9();const streamingNode=require(_0x4066('0x0'));const streamingEnergyNode=require('../nodes/streamingEnergyNode.js');const streamingWeatherNode=require(_0x4066('0x1'));const streamingStaticNode=require('../nodes/streamingStaticNode.js');const streamingTimeValueNode=require(_0x4066('0x2'));const streamingSmartLampNode=require('../nodes/streamingSmartLampNode.js');const fileManager=require(_0x4066('0x3'));const qm=require(_0x4066('0x4'));const fs=require('fs');var assert=require(_0x4066('0x5'));let connectionConfig={'zookeeper':'192.168.85.98:2181'};let aggrConfigs={'smartlamp':[{'field':_0x4066('0x6'),'tick':[{'type':_0x4066('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4066('0x8')},{'type':'max'},{'type':_0x4066('0x9')}]},{'type':_0x4066('0x7'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4066('0x8')},{'type':_0x4066('0xa')},{'type':_0x4066('0x9')}]},{'type':_0x4066('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'pact','tick':[{'type':_0x4066('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4066('0x8')},{'type':_0x4066('0xa')},{'type':_0x4066('0x9')}]},{'type':_0x4066('0x7'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4066('0x8')},{'type':_0x4066('0xa')},{'type':'variance'}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'fusionModel':_0x4066('0xb'),'connection':{'type':_0x4066('0xc')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'smartlamp','nodeid':_0x4066('0xb'),'aggrConfigId':_0x4066('0xb'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x4066('0xd'),'name':_0x4066('0x6')},{'type':_0x4066('0xd'),'name':_0x4066('0xe')},{'type':_0x4066('0xd'),'name':_0x4066('0xf')},{'type':_0x4066('0xd'),'name':_0x4066('0x10')},{'type':_0x4066('0xd'),'name':_0x4066('0x11')},{'type':'value','name':'dimml|variance|86400000'}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':_0x4066('0xd'),'name':_0x4066('0x6')},{'type':_0x4066('0xd'),'name':'pact'},{'type':_0x4066('0xd'),'name':_0x4066('0xf')},{'type':_0x4066('0xd'),'name':'dimml|min|86400000'},{'type':_0x4066('0xd'),'name':_0x4066('0x11')},{'type':_0x4066('0xd'),'name':_0x4066('0x12')}]}]}]};function processRecordDummyCb(_0x2ad212,_0x1f64eb){return!![];}describe(_0x4066('0x13'),function(){let _0x355d7e;let _0x285816;before(function(){fileManager['removeFolder'](_0x4066('0x14'));fileManager[_0x4066('0x15')](_0x4066('0x14'));_0x355d7e=new qm[(_0x4066('0x16'))]({'dbPath':_0x4066('0x14'),'mode':_0x4066('0x17')});ssln=new streamingSmartLampNode(_0x355d7e,connectionConfig,fusionConfig['nodes'][0x0],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x355d7e[_0x4066('0x18')]();});describe(_0x4066('0x19'),function(){it('base\x20saved',function(){assert[_0x4066('0x1a')](_0x355d7e,ssln['base']);});it(_0x4066('0x1b'),function(){assert[_0x4066('0x1a')](ssln[_0x4066('0x1c')]['name'],'smartlamp');});it(_0x4066('0x1d'),function(){assert[_0x4066('0x1e')](ssln['rawstore'][_0x4066('0x1f')],[{'id':0x0,'name':'Time','type':_0x4066('0x20'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x4066('0x21'),'type':_0x4066('0x22'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':_0x4066('0x6'),'type':'float','nullable':![],'internal':![],'primary':![]}]);});it(_0x4066('0x23'),function(){assert['equal'](Object[_0x4066('0x24')](ssln['aggregate'])[_0x4066('0x25')],0x1a);});it(_0x4066('0x26'),function(){assert[_0x4066('0x1e')](Object['keys'](ssln[_0x4066('0x27')]),[_0x4066('0x28'),_0x4066('0x29'),_0x4066('0x2a'),_0x4066('0x2b'),_0x4066('0x2c'),_0x4066('0x2d'),_0x4066('0x2e'),_0x4066('0xf'),'dimml|min|86400000',_0x4066('0x11'),_0x4066('0x12'),'dimml|winbuf|604800000','dimml|ma|604800000',_0x4066('0x2f'),_0x4066('0x30'),_0x4066('0x31'),_0x4066('0x32'),_0x4066('0x33'),'pact|variance|21600000','pact|winbuf|86400000','pact|ma|86400000',_0x4066('0x34'),_0x4066('0x35'),'pact|variance|86400000',_0x4066('0x36'),_0x4066('0x37')]);});it(_0x4066('0x38'),function(){assert[_0x4066('0x1e')](ssln[_0x4066('0x39')],fusionConfig['nodes'][0x0]);});it(_0x4066('0x3a'),function(){assert[_0x4066('0x1a')](ssln['fusionNodeI'],0x63);});it('callback\x20function\x20should\x20be\x20set',function(){assert['equal'](typeof ssln[_0x4066('0x3b')],_0x4066('0x3c'));});it('parent\x20saved',function(){assert[_0x4066('0x1a')](ssln['parent'],null);});it(_0x4066('0x3d'),function(){assert[_0x4066('0x1e')](ssln[_0x4066('0x3e')],[]);});it(_0x4066('0x3f'),function(){assert[_0x4066('0x1a')](ssln[_0x4066('0x40')],0x0);});it(_0x4066('0x41'),function(){assert['equal'](ssln[_0x4066('0x42')],!![]);});it('isMaster\x20function',function(){assert[_0x4066('0x1a')](ssln[_0x4066('0x43')](),!![]);});it(_0x4066('0x44'),function(){assert[_0x4066('0x1a')](typeof ssln['connectToKafka'],'function');});it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof ssln['broadcastAggregates'],'function');});it(_0x4066('0x45'),function(){assert['equal'](typeof ssln[_0x4066('0x46')],'function');});it('offsetExists\x20function\x20exists',function(){assert['equal'](typeof ssln[_0x4066('0x47')],_0x4066('0x3c'));});it('deleteObsoleteRows\x20function\x20exists',function(){assert[_0x4066('0x1a')](typeof ssln[_0x4066('0x48')],'function');});it('checkDataAvailability\x20function\x20exists',function(){assert[_0x4066('0x1a')](typeof ssln[_0x4066('0x49')],'function');});it(_0x4066('0x4a'),function(){assert['equal'](typeof ssln[_0x4066('0x4b')],_0x4066('0x3c'));});it('getOffsetTimestamp\x20function\x20exists',function(){assert[_0x4066('0x1a')](typeof ssln[_0x4066('0x4c')],'function');});it(_0x4066('0x4d'),function(){assert[_0x4066('0x1a')](typeof ssln[_0x4066('0x4c')],_0x4066('0x3c'));});it(_0x4066('0x4e'),function(){assert[_0x4066('0x1a')](typeof ssln[_0x4066('0x4f')],_0x4066('0x3c'));});it(_0x4066('0x50'),function(){assert[_0x4066('0x1a')](typeof ssln[_0x4066('0x51')],_0x4066('0x3c'));});it('master\x20set\x20correctly',function(){assert[_0x4066('0x1a')](ssln[_0x4066('0x43')](),!![]);});it(_0x4066('0x52'),function(){ssln['setMasterOffset']();assert['equal'](ssln['position'],-0x1);});it(_0x4066('0x53'),function(){assert[_0x4066('0x1a')](ssln[_0x4066('0x4b')](0x0),![]);});});describe(_0x4066('0x54'),function(){it(_0x4066('0x55'),function(){ssln[_0x4066('0x56')](JSON['parse'](_0x4066('0x57')));ssln[_0x4066('0x56')](JSON[_0x4066('0x58')]('{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}'));assert[_0x4066('0x1a')](ssln[_0x4066('0x3e')][_0x4066('0x25')],0x2);assert[_0x4066('0x1a')](ssln[_0x4066('0x3e')][0x0][_0x4066('0x6')],0x0);assert['equal'](ssln[_0x4066('0x3e')][0x1]['pact'],0x1);});it(_0x4066('0x59'),function(){ssln[_0x4066('0x56')](JSON['parse'](_0x4066('0x5a')));assert[_0x4066('0x1a')](ssln['buffer']['length'],0x3);assert[_0x4066('0x1a')](ssln[_0x4066('0x3e')][0x2][_0x4066('0x6')],0x0);});it(_0x4066('0x5b'),function(){assert[_0x4066('0x1e')](ssln[_0x4066('0x3e')][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});});it(_0x4066('0x5c'),function(){for(let _0x2dcf36=0x1;_0x2dcf36<=0x9;_0x2dcf36++){let _0x211416=0x155e9020a68+_0x2dcf36*0x3e8;let _0x8c107f=_0x2dcf36+0x1;let _0x29d516=_0x2dcf36+0x1;ssln[_0x4066('0x56')](JSON[_0x4066('0x58')](_0x4066('0x5d')+_0x211416+_0x4066('0x5e')+_0x8c107f+_0x4066('0x5f')+_0x29d516+'}'));}assert[_0x4066('0x1a')](ssln[_0x4066('0x3e')][_0x4066('0x25')],0xc);assert[_0x4066('0x1e')](ssln[_0x4066('0x3e')][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});});it(_0x4066('0x60'),function(){ssln[_0x4066('0x56')](JSON[_0x4066('0x58')](_0x4066('0x57')));ssln[_0x4066('0x56')](JSON[_0x4066('0x58')](_0x4066('0x61')));assert[_0x4066('0x1a')](ssln['buffer']['length'],0xc);});});});