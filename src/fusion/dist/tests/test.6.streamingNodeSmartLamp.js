const a0_0x53e6=['dimml|tick','check\x20store\x20structure','offsetExists\x20function\x20exists','master\x20offset\x20set\x20correctly','max','dimml|min|21600000','Empty\x20values\x20in\x20message\x20set\x20to\x200','min','dimml|variance|21600000','removeFolder','name','fusionNodeI','dimml','pact|winbuf|86400000','parse','getOffsetTimestamp','pact|min|86400000','keys','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}','rawstore','createAggregates','../nodes/streamingNode.js','processRecordCb','test','value','pact|max|86400000','check\x20if\x20store\x20exists','nodes','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','data\x20insertion','./db4/','connectToKafka\x20function\x20exists','position','close','{\x22stampm\x22:','getPartialFeatureVector','setMasterOffset\x20function\x20exists','../nodes/streamingWeatherNode.js','9\x20more\x20data\x20insertions','connectToKafka','getAggregates','deleteObsoleteRows','aggregates\x20initialized\x20-\x20number','callback\x20function\x20should\x20be\x20set','pact|ma|21600','streamingSmartLampNode','constructor','dimml|ma|86400000','checkDataAvailability\x20function\x20exists','dimml|winbuf|21600000','return\x20/\x22\x20+\x20this\x20+\x20\x22/','assert','parent','dimml|max|21600000','variance','base','qminer','setSlaveOffset\x20function\x20exists','pact|ma|604800000','pact|variance|86400000','setSlaveOffset','deepEqual','length','setMasterOffset','isMaster','smartlamp','apply',',\x22pact\x22:\x20','equal','dimml|min|86400000','dimml|variance|86400000','../nodes/streamingStaticNode.js','pact|max|21600000','data\x20record\x20saved\x20correctly','offsetExists','base\x20saved','fusionNodeI\x20correctly\x20saved','dimml|ma|21600000','192.168.85.98:2181','pact|ma|21600000','pact','pact|winbuf|21600000','{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}','dimml|winbuf|604800000','processRecord','config\x20saved','config','isMaster\x20function','duplicate\x20insertions\x20test','Time','broadcastAggregates','function','dimml|max|86400000','dimml|ma|604800000','../nodes/streamingEnergyNode.js','float','winbuf','buffer','buffer\x20position\x20is\x200','fields','pact|tick','broadcastAggregates\x20function\x20exists','pact|variance|21600000','mqtt',',\x22dimml\x22:\x20','pact|winbuf|604800000','aggregate','../nodes/streamingTimeValueNode.js','pact|ma|86400000'];(function(_0x198d39,_0x53e645){const _0x425b9a=function(_0x1fd95c){while(--_0x1fd95c){_0x198d39['push'](_0x198d39['shift']());}},_0x20ba90=function(){const _0x2571d7={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x49e3d1,_0x2f19dc,_0x5edcb,_0x48e78d){_0x48e78d=_0x48e78d||{};let _0x46d5da=_0x2f19dc+'='+_0x5edcb,_0x102045=0x0;for(let _0x2a9497=0x0,_0x404206=_0x49e3d1['length'];_0x2a9497<_0x404206;_0x2a9497++){const _0x1f96e1=_0x49e3d1[_0x2a9497];_0x46d5da+=';\x20'+_0x1f96e1;const _0x5bdfb7=_0x49e3d1[_0x1f96e1];_0x49e3d1['push'](_0x5bdfb7),_0x404206=_0x49e3d1['length'],_0x5bdfb7!==!![]&&(_0x46d5da+='='+_0x5bdfb7);}_0x48e78d['cookie']=_0x46d5da;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4e386e,_0x1d54c3){_0x4e386e=_0x4e386e||function(_0x36d24f){return _0x36d24f;};const _0x45a111=_0x4e386e(new RegExp('(?:^|;\x20)'+_0x1d54c3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1832da=function(_0x59d07b,_0x4a8a4a){_0x59d07b(++_0x4a8a4a);};return _0x1832da(_0x425b9a,_0x53e645),_0x45a111?decodeURIComponent(_0x45a111[0x1]):undefined;}},_0x332c5e=function(){const _0xd1e4a2=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xd1e4a2['test'](_0x2571d7['removeCookie']['toString']());};_0x2571d7['updateCookie']=_0x332c5e;let _0x4de56a='';const _0xa09a6b=_0x2571d7['updateCookie']();if(!_0xa09a6b)_0x2571d7['setCookie'](['*'],'counter',0x1);else _0xa09a6b?_0x4de56a=_0x2571d7['getCookie'](null,'counter'):_0x2571d7['removeCookie']();};_0x20ba90();}(a0_0x53e6,0xcf));const a0_0x425b=function(_0x198d39,_0x53e645){_0x198d39=_0x198d39-0x0;let _0x425b9a=a0_0x53e6[_0x198d39];return _0x425b9a;};const a0_0x5edcb=function(){let _0x2afdaa=!![];return function(_0x375a90,_0x4844a1){const _0x75408b=_0x2afdaa?function(){if(_0x4844a1){const _0x57e780=_0x4844a1[a0_0x425b('0x50')](_0x375a90,arguments);return _0x4844a1=null,_0x57e780;}}:function(){};return _0x2afdaa=![],_0x75408b;};}(),a0_0x2f19dc=a0_0x5edcb(this,function(){const _0x407274=function(){const _0x12f259=_0x407274[a0_0x425b('0x3c')](a0_0x425b('0x40'))()[a0_0x425b('0x3c')](a0_0x425b('0x2a'));return!_0x12f259[a0_0x425b('0x25')](a0_0x2f19dc);};return _0x407274();});a0_0x2f19dc();const streamingNode=require(a0_0x425b('0x23')),streamingEnergyNode=require(a0_0x425b('0x6c')),streamingWeatherNode=require(a0_0x425b('0x33')),streamingStaticNode=require(a0_0x425b('0x55')),streamingTimeValueNode=require(a0_0x425b('0xb')),streamingSmartLampNode=require('../nodes/streamingSmartLampNode.js'),fileManager=require('../common/utils/fileManager.js'),qm=require(a0_0x425b('0x46')),fs=require('fs');var assert=require(a0_0x425b('0x41'));let connectionConfig={'zookeeper':a0_0x425b('0x5c')},aggrConfigs={'smartlamp':[{'field':a0_0x425b('0x19'),'tick':[{'type':a0_0x425b('0x0'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x425b('0x14')},{'type':a0_0x425b('0x11')},{'type':a0_0x425b('0x44')}]},{'type':a0_0x425b('0x0'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':'max'},{'type':a0_0x425b('0x44')}]},{'type':a0_0x425b('0x0'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':a0_0x425b('0x5e'),'tick':[{'type':a0_0x425b('0x0'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x425b('0x11')},{'type':'variance'}]},{'type':a0_0x425b('0x0'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x425b('0x14')},{'type':a0_0x425b('0x11')},{'type':a0_0x425b('0x44')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':'smartlamp','connection':{'type':a0_0x425b('0x7')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x425b('0x4f'),'nodeid':a0_0x425b('0x4f'),'aggrConfigId':a0_0x425b('0x4f'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x425b('0x26'),'name':a0_0x425b('0x19')},{'type':a0_0x425b('0x26'),'name':a0_0x425b('0x3a')},{'type':'value','name':a0_0x425b('0x3d')},{'type':a0_0x425b('0x26'),'name':'dimml|min|86400000'},{'type':'value','name':a0_0x425b('0x6a')},{'type':a0_0x425b('0x26'),'name':a0_0x425b('0x54')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x425b('0x26'),'name':a0_0x425b('0x19')},{'type':a0_0x425b('0x26'),'name':a0_0x425b('0x5e')},{'type':a0_0x425b('0x26'),'name':a0_0x425b('0x3d')},{'type':a0_0x425b('0x26'),'name':a0_0x425b('0x53')},{'type':'value','name':a0_0x425b('0x6a')},{'type':a0_0x425b('0x26'),'name':a0_0x425b('0x54')}]}]}]};function processRecordDummyCb(_0x5ba2c4,_0x78fbd2){return!![];}describe(a0_0x425b('0x3b'),function(){let _0x234dc8,_0x4990e8;before(function(){fileManager[a0_0x425b('0x16')]('./db4/'),fileManager['createFolder'](a0_0x425b('0x2c')),_0x234dc8=new qm['Base']({'dbPath':a0_0x425b('0x2c'),'mode':'createClean'}),ssln=new streamingSmartLampNode(_0x234dc8,connectionConfig,fusionConfig[a0_0x425b('0x29')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x234dc8[a0_0x425b('0x2f')]();}),describe('initialization',function(){it(a0_0x425b('0x59'),function(){assert[a0_0x425b('0x52')](_0x234dc8,ssln[a0_0x425b('0x45')]);}),it(a0_0x425b('0x28'),function(){assert[a0_0x425b('0x52')](ssln[a0_0x425b('0x21')][a0_0x425b('0x17')],'smartlamp');}),it(a0_0x425b('0xe'),function(){assert['deepEqual'](ssln[a0_0x425b('0x21')][a0_0x425b('0x3')],[{'id':0x0,'name':a0_0x425b('0x67'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':'pact','type':a0_0x425b('0x6d'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x425b('0x19'),'type':a0_0x425b('0x6d'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x425b('0x38'),function(){assert['equal'](Object[a0_0x425b('0x1e')](ssln['aggregate'])[a0_0x425b('0x4c')],0x1a);}),it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert[a0_0x425b('0x4b')](Object['keys'](ssln[a0_0x425b('0xa')]),[a0_0x425b('0xd'),a0_0x425b('0x3f'),a0_0x425b('0x5b'),a0_0x425b('0x12'),a0_0x425b('0x43'),a0_0x425b('0x15'),'dimml|winbuf|86400000',a0_0x425b('0x3d'),a0_0x425b('0x53'),a0_0x425b('0x6a'),a0_0x425b('0x54'),a0_0x425b('0x61'),a0_0x425b('0x6b'),a0_0x425b('0x4'),a0_0x425b('0x5f'),a0_0x425b('0x5d'),'pact|min|21600000',a0_0x425b('0x56'),a0_0x425b('0x6'),a0_0x425b('0x1a'),a0_0x425b('0xc'),a0_0x425b('0x1d'),a0_0x425b('0x27'),a0_0x425b('0x49'),a0_0x425b('0x9'),a0_0x425b('0x48')]);}),it(a0_0x425b('0x63'),function(){assert[a0_0x425b('0x4b')](ssln[a0_0x425b('0x64')],fusionConfig[a0_0x425b('0x29')][0x0]);}),it(a0_0x425b('0x5a'),function(){assert[a0_0x425b('0x52')](ssln[a0_0x425b('0x18')],0x63);}),it(a0_0x425b('0x39'),function(){assert[a0_0x425b('0x52')](typeof ssln[a0_0x425b('0x24')],a0_0x425b('0x69'));}),it('parent\x20saved',function(){assert[a0_0x425b('0x52')](ssln[a0_0x425b('0x42')],null);}),it('buffer\x20empty',function(){assert[a0_0x425b('0x4b')](ssln[a0_0x425b('0x1')],[]);}),it(a0_0x425b('0x2'),function(){assert[a0_0x425b('0x52')](ssln[a0_0x425b('0x2e')],0x0);}),it('master\x20flag\x20set\x20correctly',function(){assert[a0_0x425b('0x52')](ssln['master'],!![]);}),it(a0_0x425b('0x65'),function(){assert[a0_0x425b('0x52')](ssln['isMaster'](),!![]);}),it(a0_0x425b('0x2d'),function(){assert[a0_0x425b('0x52')](typeof ssln[a0_0x425b('0x35')],'function');}),it(a0_0x425b('0x5'),function(){assert[a0_0x425b('0x52')](typeof ssln[a0_0x425b('0x68')],a0_0x425b('0x69'));}),it('createAggregates\x20function\x20exists',function(){assert[a0_0x425b('0x52')](typeof ssln[a0_0x425b('0x22')],a0_0x425b('0x69'));}),it(a0_0x425b('0xf'),function(){assert[a0_0x425b('0x52')](typeof ssln[a0_0x425b('0x58')],a0_0x425b('0x69'));}),it('deleteObsoleteRows\x20function\x20exists',function(){assert[a0_0x425b('0x52')](typeof ssln[a0_0x425b('0x37')],a0_0x425b('0x69'));}),it(a0_0x425b('0x3e'),function(){assert[a0_0x425b('0x52')](typeof ssln['checkDataAvailability'],'function');}),it(a0_0x425b('0x47'),function(){assert[a0_0x425b('0x52')](typeof ssln[a0_0x425b('0x4a')],'function');}),it('getOffsetTimestamp\x20function\x20exists',function(){assert[a0_0x425b('0x52')](typeof ssln[a0_0x425b('0x1c')],a0_0x425b('0x69'));}),it(a0_0x425b('0x32'),function(){assert['equal'](typeof ssln[a0_0x425b('0x1c')],a0_0x425b('0x69'));}),it('getAggregates\x20function\x20exists',function(){assert['equal'](typeof ssln[a0_0x425b('0x36')],a0_0x425b('0x69'));}),it('getPartialFeatureVector\x20function\x20exists',function(){assert[a0_0x425b('0x52')](typeof ssln[a0_0x425b('0x31')],a0_0x425b('0x69'));}),it('master\x20set\x20correctly',function(){assert[a0_0x425b('0x52')](ssln[a0_0x425b('0x4e')](),!![]);}),it(a0_0x425b('0x10'),function(){ssln[a0_0x425b('0x4d')](),assert[a0_0x425b('0x52')](ssln[a0_0x425b('0x2e')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x425b('0x52')](ssln['setSlaveOffset'](0x0),![]);});}),describe(a0_0x425b('0x2b'),function(){it(a0_0x425b('0x57'),function(){ssln[a0_0x425b('0x62')](JSON[a0_0x425b('0x1b')](a0_0x425b('0x60'))),ssln[a0_0x425b('0x62')](JSON[a0_0x425b('0x1b')](a0_0x425b('0x20'))),assert[a0_0x425b('0x52')](ssln[a0_0x425b('0x1')][a0_0x425b('0x4c')],0x2),assert[a0_0x425b('0x52')](ssln[a0_0x425b('0x1')][0x0][a0_0x425b('0x19')],0x0),assert['equal'](ssln[a0_0x425b('0x1')][0x1]['pact'],0x1);}),it(a0_0x425b('0x13'),function(){ssln[a0_0x425b('0x62')](JSON[a0_0x425b('0x1b')]('{\x22stampm\x22:\x201468493073000}')),assert[a0_0x425b('0x52')](ssln[a0_0x425b('0x1')][a0_0x425b('0x4c')],0x3),assert['equal'](ssln['buffer'][0x2]['dimml'],0x0);}),it(a0_0x425b('0x1f'),function(){assert[a0_0x425b('0x4b')](ssln[a0_0x425b('0x1')][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});}),it(a0_0x425b('0x34'),function(){for(let _0x3a4bc6=0x1;_0x3a4bc6<=0x9;_0x3a4bc6++){let _0x28daad=0x155e9020a68+_0x3a4bc6*0x3e8,_0x414baa=_0x3a4bc6+0x1,_0x42911d=_0x3a4bc6+0x1;ssln[a0_0x425b('0x62')](JSON[a0_0x425b('0x1b')](a0_0x425b('0x30')+_0x28daad+a0_0x425b('0x8')+_0x414baa+a0_0x425b('0x51')+_0x42911d+'}'));}assert['equal'](ssln['buffer'][a0_0x425b('0x4c')],0xc),assert[a0_0x425b('0x4b')](ssln[a0_0x425b('0x1')][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});}),it(a0_0x425b('0x66'),function(){ssln[a0_0x425b('0x62')](JSON['parse'](a0_0x425b('0x60'))),ssln[a0_0x425b('0x62')](JSON[a0_0x425b('0x1b')](a0_0x425b('0x20'))),assert['equal'](ssln[a0_0x425b('0x1')][a0_0x425b('0x4c')],0xc);});});});