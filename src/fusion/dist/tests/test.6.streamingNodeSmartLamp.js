var _0xc05d=['pact|ma|21600','dimml|ma|86400000','dimml|min|86400000','dimml|max|86400000','dimml|variance|86400000','pact','streamingSmartLampNode','./db4/','createFolder','Base','createClean','nodes','close','initialization','base\x20saved','equal','base','check\x20if\x20store\x20exists','rawstore','check\x20store\x20structure','deepEqual','fields','Time','float','aggregates\x20initialized\x20-\x20number','keys','aggregate','length','aggregates\x20initialized\x20-\x20key\x20names','dimml|tick','dimml|winbuf|21600000','dimml|ma|21600000','dimml|min|21600000','dimml|max|21600000','dimml|winbuf|86400000','dimml|winbuf|604800000','dimml|ma|604800000','pact|tick','pact|winbuf|21600000','pact|ma|21600000','pact|min|21600000','pact|max|21600000','pact|variance|21600000','pact|winbuf|86400000','pact|ma|86400000','pact|min|86400000','pact|max|86400000','pact|variance|86400000','pact|ma|604800000','fusionNodeI\x20correctly\x20saved','callback\x20function\x20should\x20be\x20set','processRecordCb','function','parent','buffer\x20empty','buffer','buffer\x20position\x20is\x200','position','master\x20flag\x20set\x20correctly','master','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','broadcastAggregates','offsetExists\x20function\x20exists','offsetExists','checkDataAvailability\x20function\x20exists','setSlaveOffset','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','data\x20record\x20saved\x20correctly','processRecord','parse','{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}','{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}','Empty\x20values\x20in\x20message\x20set\x20to\x200','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','9\x20more\x20data\x20insertions','duplicate\x20insertions\x20test','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingTimeValueNode.js','../nodes/streamingSmartLampNode.js','../common/utils/fileManager.js','qminer','assert','192.168.85.98:2181','dimml','winbuf','min','max','variance','mqtt','smartlamp','value'];(function(_0x5f00b3,_0x17487d){var _0x4ae7ba=function(_0x286bd3){while(--_0x286bd3){_0x5f00b3['push'](_0x5f00b3['shift']());}};var _0x8a0e02=function(){var _0x5170d0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xda0a78,_0x457ef7,_0x2806f1,_0x36c8ba){_0x36c8ba=_0x36c8ba||{};var _0x309bce=_0x457ef7+'='+_0x2806f1;var _0x37307d=0x0;for(var _0x37307d=0x0,_0x1bcc0d=_0xda0a78['length'];_0x37307d<_0x1bcc0d;_0x37307d++){var _0x3bb5dc=_0xda0a78[_0x37307d];_0x309bce+=';\x20'+_0x3bb5dc;var _0x354a5d=_0xda0a78[_0x3bb5dc];_0xda0a78['push'](_0x354a5d);_0x1bcc0d=_0xda0a78['length'];if(_0x354a5d!==!![]){_0x309bce+='='+_0x354a5d;}}_0x36c8ba['cookie']=_0x309bce;},'removeCookie':function(){return'dev';},'getCookie':function(_0x164fd4,_0x1a7575){_0x164fd4=_0x164fd4||function(_0x492d33){return _0x492d33;};var _0x45ec56=_0x164fd4(new RegExp('(?:^|;\x20)'+_0x1a7575['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x101bfe=function(_0x1f8659,_0x1e44fa){_0x1f8659(++_0x1e44fa);};_0x101bfe(_0x4ae7ba,_0x17487d);return _0x45ec56?decodeURIComponent(_0x45ec56[0x1]):undefined;}};var _0x9b2f2=function(){var _0x54ea88=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x54ea88['test'](_0x5170d0['removeCookie']['toString']());};_0x5170d0['updateCookie']=_0x9b2f2;var _0x2a34b2='';var _0x82f26c=_0x5170d0['updateCookie']();if(!_0x82f26c){_0x5170d0['setCookie'](['*'],'counter',0x1);}else if(_0x82f26c){_0x2a34b2=_0x5170d0['getCookie'](null,'counter');}else{_0x5170d0['removeCookie']();}};_0x8a0e02();}(_0xc05d,0x11f));var _0x4a01=function(_0x55281b,_0x1e9f14){_0x55281b=_0x55281b-0x0;var _0x3f029a=_0xc05d[_0x55281b];return _0x3f029a;};var _0x6689c0=function(){var _0x375f88=!![];return function(_0xa89671,_0xba1030){var _0x163c08=_0x375f88?function(){if(_0xba1030){var _0x251590=_0xba1030['apply'](_0xa89671,arguments);_0xba1030=null;return _0x251590;}}:function(){};_0x375f88=![];return _0x163c08;};}();var _0x358832=_0x6689c0(this,function(){var _0xc033a1=function(){return'\x64\x65\x76';},_0x3e47ab=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x47a0e3=function(){var _0x4e7a79=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x4e7a79['\x74\x65\x73\x74'](_0xc033a1['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x29c4ec=function(){var _0x8c30ad=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x8c30ad['\x74\x65\x73\x74'](_0x3e47ab['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1e16ea=function(_0x425cba){var _0x2a6370=~-0x1>>0x1+0xff%0x0;if(_0x425cba['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x2a6370)){_0x212324(_0x425cba);}};var _0x212324=function(_0x2be635){var _0x5db857=~-0x4>>0x1+0xff%0x0;if(_0x2be635['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x5db857){_0x1e16ea(_0x2be635);}};if(!_0x47a0e3()){if(!_0x29c4ec()){_0x1e16ea('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1e16ea('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1e16ea('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x358832();const streamingNode=require('../nodes/streamingNode.js');const streamingEnergyNode=require(_0x4a01('0x0'));const streamingWeatherNode=require(_0x4a01('0x1'));const streamingStaticNode=require('../nodes/streamingStaticNode.js');const streamingTimeValueNode=require(_0x4a01('0x2'));const streamingSmartLampNode=require(_0x4a01('0x3'));const fileManager=require(_0x4a01('0x4'));const qm=require(_0x4a01('0x5'));const fs=require('fs');var assert=require(_0x4a01('0x6'));let connectionConfig={'zookeeper':_0x4a01('0x7')};let aggrConfigs={'smartlamp':[{'field':_0x4a01('0x8'),'tick':[{'type':_0x4a01('0x9'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4a01('0xa')},{'type':_0x4a01('0xb')},{'type':_0x4a01('0xc')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4a01('0xa')},{'type':_0x4a01('0xb')},{'type':'variance'}]},{'type':_0x4a01('0x9'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'pact','tick':[{'type':_0x4a01('0x9'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4a01('0xa')},{'type':_0x4a01('0xb')},{'type':_0x4a01('0xc')}]},{'type':_0x4a01('0x9'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4a01('0xa')},{'type':_0x4a01('0xb')},{'type':'variance'}]},{'type':_0x4a01('0x9'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'fusionModel':'smartlamp','connection':{'type':_0x4a01('0xd')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x4a01('0xe'),'nodeid':_0x4a01('0xe'),'aggrConfigId':_0x4a01('0xe'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x4a01('0xf'),'name':_0x4a01('0x8')},{'type':_0x4a01('0xf'),'name':_0x4a01('0x10')},{'type':_0x4a01('0xf'),'name':_0x4a01('0x11')},{'type':_0x4a01('0xf'),'name':_0x4a01('0x12')},{'type':_0x4a01('0xf'),'name':_0x4a01('0x13')},{'type':'value','name':_0x4a01('0x14')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':_0x4a01('0xf'),'name':'dimml'},{'type':_0x4a01('0xf'),'name':_0x4a01('0x15')},{'type':_0x4a01('0xf'),'name':_0x4a01('0x11')},{'type':_0x4a01('0xf'),'name':'dimml|min|86400000'},{'type':_0x4a01('0xf'),'name':_0x4a01('0x13')},{'type':_0x4a01('0xf'),'name':_0x4a01('0x14')}]}]}]};function processRecordDummyCb(_0x4d5b5c,_0x50fa2e){return!![];}describe(_0x4a01('0x16'),function(){let _0x5a7571;let _0x4f1b2f;before(function(){fileManager['removeFolder'](_0x4a01('0x17'));fileManager[_0x4a01('0x18')](_0x4a01('0x17'));_0x5a7571=new qm[(_0x4a01('0x19'))]({'dbPath':_0x4a01('0x17'),'mode':_0x4a01('0x1a')});ssln=new streamingSmartLampNode(_0x5a7571,connectionConfig,fusionConfig[_0x4a01('0x1b')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x5a7571[_0x4a01('0x1c')]();});describe(_0x4a01('0x1d'),function(){it(_0x4a01('0x1e'),function(){assert[_0x4a01('0x1f')](_0x5a7571,ssln[_0x4a01('0x20')]);});it(_0x4a01('0x21'),function(){assert[_0x4a01('0x1f')](ssln[_0x4a01('0x22')]['name'],_0x4a01('0xe'));});it(_0x4a01('0x23'),function(){assert[_0x4a01('0x24')](ssln[_0x4a01('0x22')][_0x4a01('0x25')],[{'id':0x0,'name':_0x4a01('0x26'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':'pact','type':_0x4a01('0x27'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'dimml','type':'float','nullable':![],'internal':![],'primary':![]}]);});it(_0x4a01('0x28'),function(){assert[_0x4a01('0x1f')](Object[_0x4a01('0x29')](ssln[_0x4a01('0x2a')])[_0x4a01('0x2b')],0x1a);});it(_0x4a01('0x2c'),function(){assert[_0x4a01('0x24')](Object[_0x4a01('0x29')](ssln[_0x4a01('0x2a')]),[_0x4a01('0x2d'),_0x4a01('0x2e'),_0x4a01('0x2f'),_0x4a01('0x30'),_0x4a01('0x31'),'dimml|variance|21600000',_0x4a01('0x32'),'dimml|ma|86400000',_0x4a01('0x12'),'dimml|max|86400000',_0x4a01('0x14'),_0x4a01('0x33'),_0x4a01('0x34'),_0x4a01('0x35'),_0x4a01('0x36'),_0x4a01('0x37'),_0x4a01('0x38'),_0x4a01('0x39'),_0x4a01('0x3a'),_0x4a01('0x3b'),_0x4a01('0x3c'),_0x4a01('0x3d'),_0x4a01('0x3e'),_0x4a01('0x3f'),'pact|winbuf|604800000',_0x4a01('0x40')]);});it('config\x20saved',function(){assert[_0x4a01('0x24')](ssln['config'],fusionConfig[_0x4a01('0x1b')][0x0]);});it(_0x4a01('0x41'),function(){assert[_0x4a01('0x1f')](ssln['fusionNodeI'],0x63);});it(_0x4a01('0x42'),function(){assert[_0x4a01('0x1f')](typeof ssln[_0x4a01('0x43')],_0x4a01('0x44'));});it('parent\x20saved',function(){assert['equal'](ssln[_0x4a01('0x45')],null);});it(_0x4a01('0x46'),function(){assert['deepEqual'](ssln[_0x4a01('0x47')],[]);});it(_0x4a01('0x48'),function(){assert['equal'](ssln[_0x4a01('0x49')],0x0);});it(_0x4a01('0x4a'),function(){assert[_0x4a01('0x1f')](ssln[_0x4a01('0x4b')],!![]);});it(_0x4a01('0x4c'),function(){assert[_0x4a01('0x1f')](ssln[_0x4a01('0x4d')](),!![]);});it(_0x4a01('0x4e'),function(){assert['equal'](typeof ssln['connectToKafka'],_0x4a01('0x44'));});it('broadcastAggregates\x20function\x20exists',function(){assert[_0x4a01('0x1f')](typeof ssln[_0x4a01('0x4f')],_0x4a01('0x44'));});it('createAggregates\x20function\x20exists',function(){assert[_0x4a01('0x1f')](typeof ssln['createAggregates'],'function');});it(_0x4a01('0x50'),function(){assert[_0x4a01('0x1f')](typeof ssln[_0x4a01('0x51')],_0x4a01('0x44'));});it('deleteObsoleteRows\x20function\x20exists',function(){assert[_0x4a01('0x1f')](typeof ssln['deleteObsoleteRows'],_0x4a01('0x44'));});it(_0x4a01('0x52'),function(){assert['equal'](typeof ssln['checkDataAvailability'],_0x4a01('0x44'));});it('setSlaveOffset\x20function\x20exists',function(){assert['equal'](typeof ssln[_0x4a01('0x53')],_0x4a01('0x44'));});it(_0x4a01('0x54'),function(){assert[_0x4a01('0x1f')](typeof ssln[_0x4a01('0x55')],_0x4a01('0x44'));});it(_0x4a01('0x56'),function(){assert[_0x4a01('0x1f')](typeof ssln['getOffsetTimestamp'],_0x4a01('0x44'));});it('getAggregates\x20function\x20exists',function(){assert[_0x4a01('0x1f')](typeof ssln[_0x4a01('0x57')],_0x4a01('0x44'));});it(_0x4a01('0x58'),function(){assert[_0x4a01('0x1f')](typeof ssln[_0x4a01('0x59')],_0x4a01('0x44'));});it(_0x4a01('0x5a'),function(){assert[_0x4a01('0x1f')](ssln['isMaster'](),!![]);});it(_0x4a01('0x5b'),function(){ssln['setMasterOffset']();assert[_0x4a01('0x1f')](ssln[_0x4a01('0x49')],-0x1);});it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[_0x4a01('0x1f')](ssln['setSlaveOffset'](0x0),![]);});});describe('data\x20insertion',function(){it(_0x4a01('0x5c'),function(){ssln[_0x4a01('0x5d')](JSON[_0x4a01('0x5e')](_0x4a01('0x5f')));ssln[_0x4a01('0x5d')](JSON[_0x4a01('0x5e')](_0x4a01('0x60')));assert[_0x4a01('0x1f')](ssln[_0x4a01('0x47')][_0x4a01('0x2b')],0x2);assert[_0x4a01('0x1f')](ssln[_0x4a01('0x47')][0x0]['dimml'],0x0);assert[_0x4a01('0x1f')](ssln[_0x4a01('0x47')][0x1][_0x4a01('0x15')],0x1);});it(_0x4a01('0x61'),function(){ssln['processRecord'](JSON[_0x4a01('0x5e')]('{\x22stampm\x22:\x201468493073000}'));assert[_0x4a01('0x1f')](ssln[_0x4a01('0x47')]['length'],0x3);assert[_0x4a01('0x1f')](ssln[_0x4a01('0x47')][0x2][_0x4a01('0x8')],0x0);});it(_0x4a01('0x62'),function(){assert['deepEqual'](ssln['buffer'][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});});it(_0x4a01('0x63'),function(){for(let _0x52289d=0x1;_0x52289d<=0x9;_0x52289d++){let _0x53e412=0x155e9020a68+_0x52289d*0x3e8;let _0x56981a=_0x52289d+0x1;let _0x201f32=_0x52289d+0x1;ssln[_0x4a01('0x5d')](JSON[_0x4a01('0x5e')]('{\x22stampm\x22:'+_0x53e412+',\x22dimml\x22:\x20'+_0x56981a+',\x22pact\x22:\x20'+_0x201f32+'}'));}assert[_0x4a01('0x1f')](ssln[_0x4a01('0x47')][_0x4a01('0x2b')],0xc);assert['deepEqual'](ssln[_0x4a01('0x47')][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});});it(_0x4a01('0x64'),function(){ssln[_0x4a01('0x5d')](JSON[_0x4a01('0x5e')](_0x4a01('0x5f')));ssln[_0x4a01('0x5d')](JSON[_0x4a01('0x5e')](_0x4a01('0x60')));assert[_0x4a01('0x1f')](ssln[_0x4a01('0x47')][_0x4a01('0x2b')],0xc);});});});