const a0_0x1de1=['EMA\x20model','ilSEMA\x20instantiated','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','RecLinReg','object','imSEMA\x20instantiated','constructor','update\x20many\x20different\x20models','update\x20incremental\x20model\x20-\x20first\x20time','qminer','ilEMA\x20instantiated','incremental\x20learning\x20component\x20-\x20EMA','ilRecLinReg\x20instantiated','imEMA\x20instantiated','update\x20model\x20-\x209\x20more\x20times','deepEqual','update\x20model\x20-\x20with\x20value\x2040','../models/IncrementalLearning','options','incremental\x20model','test','model','../models/EMA','assert','EMA','fakeFusion','updateStream','update\x20model\x20-\x20first\x20time','initial\x20prediction','predict','incremental\x20learning\x20component\x20-\x20StructuredEMA','partialFit','equal','../models/StructuredEMA'];(function(_0x488990,_0x1de11b){const _0x5ada57=function(_0x1d5adf){while(--_0x1d5adf){_0x488990['push'](_0x488990['shift']());}},_0xf9c78d=function(){const _0x4cf821={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x648545,_0x55284e,_0x59477e,_0x2d4a65){_0x2d4a65=_0x2d4a65||{};let _0x4ebb0c=_0x55284e+'='+_0x59477e,_0x18967c=0x0;for(let _0x597c8a=0x0,_0xa3854c=_0x648545['length'];_0x597c8a<_0xa3854c;_0x597c8a++){const _0xbcce0c=_0x648545[_0x597c8a];_0x4ebb0c+=';\x20'+_0xbcce0c;const _0x10311f=_0x648545[_0xbcce0c];_0x648545['push'](_0x10311f),_0xa3854c=_0x648545['length'],_0x10311f!==!![]&&(_0x4ebb0c+='='+_0x10311f);}_0x2d4a65['cookie']=_0x4ebb0c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x455108,_0x396b79){_0x455108=_0x455108||function(_0x25a05c){return _0x25a05c;};const _0xfd83a5=_0x455108(new RegExp('(?:^|;\x20)'+_0x396b79['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x489764=function(_0x140ddc,_0x26024a){_0x140ddc(++_0x26024a);};return _0x489764(_0x5ada57,_0x1de11b),_0xfd83a5?decodeURIComponent(_0xfd83a5[0x1]):undefined;}},_0x452d62=function(){const _0x354433=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x354433['test'](_0x4cf821['removeCookie']['toString']());};_0x4cf821['updateCookie']=_0x452d62;let _0x462a87='';const _0x249e6d=_0x4cf821['updateCookie']();if(!_0x249e6d)_0x4cf821['setCookie'](['*'],'counter',0x1);else _0x249e6d?_0x462a87=_0x4cf821['getCookie'](null,'counter'):_0x4cf821['removeCookie']();};_0xf9c78d();}(a0_0x1de1,0x194));const a0_0x5ada=function(_0x488990,_0x1de11b){_0x488990=_0x488990-0x0;let _0x5ada57=a0_0x1de1[_0x488990];return _0x5ada57;};const a0_0x59477e=function(){let _0x257a62=!![];return function(_0x31c60a,_0x42607a){const _0x3d073d=_0x257a62?function(){if(_0x42607a){const _0x471b44=_0x42607a['apply'](_0x31c60a,arguments);return _0x42607a=null,_0x471b44;}}:function(){};return _0x257a62=![],_0x3d073d;};}(),a0_0x55284e=a0_0x59477e(this,function(){const _0x27d056=function(){const _0x3aafd4=_0x27d056[a0_0x5ada('0xa')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a0_0x5ada('0xa')](a0_0x5ada('0x6'));return!_0x3aafd4[a0_0x5ada('0x18')](a0_0x55284e);};return _0x27d056();});a0_0x55284e();const IncrementalLearning=require(a0_0x5ada('0x15')),EMAIncrementalModel=require(a0_0x5ada('0x1a')),StructuredEMAIncrementalModel=require(a0_0x5ada('0x3')),fileManager=require('../common/utils/fileManager.js'),qm=require(a0_0x5ada('0xd')),fs=require('fs');var assert=require(a0_0x5ada('0x1b'));const modelConfigEMA={'fusionTick':0x36ee80,'model':{'horizon':0x3,'label':0x0,'options':{'method':a0_0x5ada('0x1c')}}},modelConfigRecLinReg={'fusionTick':0x36ee80,'model':{'horizon':0x3,'label':0x0,'options':{'method':a0_0x5ada('0x7')}}},modelConfigSEMA={'fusionTick':0x36ee80,'model':{'horizon':0x3,'label':0x0,'options':{'structuralFactorPosition':0x1,'method':'StructuredEMA'}}},fakeFusion={'fusion_id':a0_0x5ada('0x1d')};describe(a0_0x5ada('0x17'),function(){let _0x28d313;before(function(){ilEMA=new IncrementalLearning(modelConfigEMA,fakeFusion),ilRecLinReg=new IncrementalLearning(modelConfigRecLinReg,fakeFusion),ilSEMA=new IncrementalLearning(modelConfigSEMA,fakeFusion),imEMA=new EMAIncrementalModel(modelConfigEMA[a0_0x5ada('0x19')][a0_0x5ada('0x16')],fakeFusion),imSEMA=new StructuredEMAIncrementalModel(modelConfigSEMA['model'][a0_0x5ada('0x16')],fakeFusion);}),after(function(){}),describe(a0_0x5ada('0x4'),function(){it(a0_0x5ada('0x11'),function(){assert['equal'](typeof imEMA,a0_0x5ada('0x8'));}),it(a0_0x5ada('0x20'),function(){assert[a0_0x5ada('0x2')](imEMA[a0_0x5ada('0x21')](),null);}),it(a0_0x5ada('0x1f'),function(){imEMA[a0_0x5ada('0x1')]([],0x2a),assert['equal'](imEMA[a0_0x5ada('0x21')](),0x2a);}),it(a0_0x5ada('0x12'),function(){for(let _0x268ef0=0x0;_0x268ef0<0x9;_0x268ef0++){imEMA[a0_0x5ada('0x1')]([],0x2a);};assert[a0_0x5ada('0x2')](imEMA[a0_0x5ada('0x21')](),0x2a);}),it(a0_0x5ada('0x14'),function(){imEMA['partialFit']([],0x28),assert[a0_0x5ada('0x2')](imEMA[a0_0x5ada('0x21')](),41.333333333333336);});}),describe('SEMA\x20model',function(){it(a0_0x5ada('0x9'),function(){assert['equal'](typeof imSEMA,a0_0x5ada('0x8'));}),it(a0_0x5ada('0x20'),function(){assert[a0_0x5ada('0x2')](imSEMA[a0_0x5ada('0x21')]([0x0,0x0]),null);}),it(a0_0x5ada('0x1f'),function(){imSEMA['partialFit']([0x0,0x0],0x2a),assert['equal'](imSEMA[a0_0x5ada('0x21')]([0x0,0x0]),0x2a);}),it(a0_0x5ada('0x12'),function(){for(let _0x525e4e=0x0;_0x525e4e<0x9;_0x525e4e++){imSEMA[a0_0x5ada('0x1')]([0x0,0x0],0x2a);};assert[a0_0x5ada('0x2')](imSEMA['predict']([0x0,0x0]),0x2a);}),it(a0_0x5ada('0x14'),function(){imSEMA['partialFit']([0x0,0x0],0x28),assert[a0_0x5ada('0x2')](imSEMA[a0_0x5ada('0x21')]([0x0,0x0]),41.333333333333336);}),it(a0_0x5ada('0xb'),function(){for(let _0x18a88f=0x0;_0x18a88f<0x3;_0x18a88f++){for(let _0x52c592=0x0;_0x52c592<0x18;_0x52c592++){imSEMA[a0_0x5ada('0x1')]([0x0,_0x52c592],_0x52c592+_0x18a88f);}}for(let _0x52f0c2=0x1;_0x52f0c2<0x18;_0x52f0c2++){assert['equal'](imSEMA[a0_0x5ada('0x21')]([0x0,_0x52f0c2])['toFixed'](0x5),_0x52f0c2+0.88889);}});}),describe(a0_0x5ada('0xf'),function(){it(a0_0x5ada('0xe'),function(){assert[a0_0x5ada('0x2')](typeof ilEMA,a0_0x5ada('0x8'));}),it(a0_0x5ada('0xc'),function(){assert[a0_0x5ada('0x13')](ilEMA['updateStream']([0x2a,0x0],0x0),{'ts':0xa4cb80,'value':null,'horizon':0x3}),ilEMA[a0_0x5ada('0x1e')]([0x2a,0x1],0x1*0x36ee80),ilEMA[a0_0x5ada('0x1e')]([0x2a,0x2],0x2*0x36ee80),ilEMA['updateStream']([0x2a,0x3],0x3*0x36ee80),ilEMA[a0_0x5ada('0x1e')]([0x2a,0x4],0x4*0x36ee80),assert[a0_0x5ada('0x13')](ilEMA['updateStream']([0x2a,0x5],0x5*0x36ee80),{'ts':0x1b77400,'value':0x2a,'horizon':0x3});}),it('update\x20incremental\x20mode\x20-\x20with\x20value\x2040',function(){assert[a0_0x5ada('0x13')](ilEMA[a0_0x5ada('0x1e')]([0x28,0x6],0x6*0x36ee80),{'ts':0x1ee6280,'value':41.333333333333336,'horizon':0x3});});}),describe('incremental\x20learning\x20component\x20-\x20RecLinReg',function(){it(a0_0x5ada('0x10'),function(){assert[a0_0x5ada('0x2')](typeof ilRecLinReg,a0_0x5ada('0x8'));}),it(a0_0x5ada('0xc'),function(){assert[a0_0x5ada('0x13')](ilRecLinReg['updateStream']([0x2a,0x0],0x0),{'ts':0xa4cb80,'value':0x0,'horizon':0x3});for(let _0x5ef635=0x1;_0x5ef635<0x28;_0x5ef635++){ilRecLinReg[a0_0x5ada('0x1e')]([0x2a+_0x5ef635,_0x5ef635],_0x5ef635*0x36ee80);}i=0x28,assert['deepEqual'](ilRecLinReg[a0_0x5ada('0x1e')]([0x2a+i,i],i*0x36ee80),{'ts':0x93a0f80,'value':85.0736902918679,'horizon':0x3});});}),describe(a0_0x5ada('0x0'),function(){it(a0_0x5ada('0x5'),function(){assert[a0_0x5ada('0x2')](typeof ilSEMA,'object');}),it(a0_0x5ada('0xc'),function(){assert[a0_0x5ada('0x13')](ilSEMA[a0_0x5ada('0x1e')]([0x2a,0x0],0x0),{'ts':0xa4cb80,'value':null,'horizon':0x3});for(let _0x176ec7=0x1;_0x176ec7<0x48;_0x176ec7++){ilSEMA[a0_0x5ada('0x1e')]([0x2a+_0x176ec7,_0x176ec7%0x18],_0x176ec7*0x36ee80);}i=0x49,assert[a0_0x5ada('0x13')](ilSEMA[a0_0x5ada('0x1e')]([0x2a+i,i%0x18],i*0x36ee80),{'ts':0x104ece00,'value':67.33333333333334,'horizon':0x3});});});});