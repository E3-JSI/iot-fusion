var _0x443d=['feature\x20vector\x20ok','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x200,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','processRecord','floor','dayOfMonth','setMasterOffset','setSlaveOffset','getOffsetTimestamp','buildFeatureVector','../../common/utils/fileManager.js','../streamFusion.js','192.168.85.98:2181','value','winbuf','min','max','variance','holiday','none','timevalue','value|ma|21600000','value|min|21600000','value|max|21600000','value|variance|21600000','value|max|86400000','value|variance|86400000','static','timeOfDay','dayAfterHoliday','dayBeforeHoliday','dayOfWeek','dayOfYear','monthOfYear','streamFusion','removeFolder','./db-1/','createFolder','fusion','aggr','base\x20saved','equal','base','object','check\x20number\x20of\x20fusion\x20objects','nodes','length','getStats','stores','check\x20fusion\x20model\x20name','N1_24h','check\x20features\x20topic\x20name','topic','features_N1_24h','constructor','name','streamingTimeValueNode','streamingStaticNode','global\x20config\x20correct','deepEqual','config'];(function(_0xac8b80,_0x136e5f){var _0x56a4aa=function(_0x2d4b01){while(--_0x2d4b01){_0xac8b80['push'](_0xac8b80['shift']());}};var _0x310b99=function(){var _0x3692a3={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x30f283,_0x595a2a,_0x1807c1,_0x224c5e){_0x224c5e=_0x224c5e||{};var _0x46d01a=_0x595a2a+'='+_0x1807c1;var _0x2a385b=0x0;for(var _0x2a385b=0x0,_0x309cbe=_0x30f283['length'];_0x2a385b<_0x309cbe;_0x2a385b++){var _0x293311=_0x30f283[_0x2a385b];_0x46d01a+=';\x20'+_0x293311;var _0x195d44=_0x30f283[_0x293311];_0x30f283['push'](_0x195d44);_0x309cbe=_0x30f283['length'];if(_0x195d44!==!![]){_0x46d01a+='='+_0x195d44;}}_0x224c5e['cookie']=_0x46d01a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1bb598,_0x517677){_0x1bb598=_0x1bb598||function(_0x2361e6){return _0x2361e6;};var _0x9566aa=_0x1bb598(new RegExp('(?:^|;\x20)'+_0x517677['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0xe0a170=function(_0x4539ba,_0x26beb0){_0x4539ba(++_0x26beb0);};_0xe0a170(_0x56a4aa,_0x136e5f);return _0x9566aa?decodeURIComponent(_0x9566aa[0x1]):undefined;}};var _0x5ecbad=function(){var _0x2ae0d6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2ae0d6['test'](_0x3692a3['removeCookie']['toString']());};_0x3692a3['updateCookie']=_0x5ecbad;var _0x459e28='';var _0x1019fa=_0x3692a3['updateCookie']();if(!_0x1019fa){_0x3692a3['setCookie'](['*'],'counter',0x1);}else if(_0x1019fa){_0x459e28=_0x3692a3['getCookie'](null,'counter');}else{_0x3692a3['removeCookie']();}};_0x310b99();}(_0x443d,0x13b));var _0x1026=function(_0x36b289,_0x172fb2){_0x36b289=_0x36b289-0x0;var _0x80e3ff=_0x443d[_0x36b289];return _0x80e3ff;};var _0x52059b=function(){var _0x2cc1f8=!![];return function(_0x12fcaa,_0x14658d){var _0x5a7553=_0x2cc1f8?function(){if(_0x14658d){var _0x1485a7=_0x14658d['apply'](_0x12fcaa,arguments);_0x14658d=null;return _0x1485a7;}}:function(){};_0x2cc1f8=![];return _0x5a7553;};}();var _0x151cbb=_0x52059b(this,function(){var _0x2d8f05=function(){return'\x64\x65\x76';},_0x4b81bb=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x34a12b=function(){var _0x36c6a6=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x36c6a6['\x74\x65\x73\x74'](_0x2d8f05['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x33748d=function(){var _0x3e4c21=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3e4c21['\x74\x65\x73\x74'](_0x4b81bb['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5c685e=function(_0x3e3156){var _0x1e9e81=~-0x1>>0x1+0xff%0x0;if(_0x3e3156['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1e9e81)){_0x292610(_0x3e3156);}};var _0x292610=function(_0x151bd2){var _0x558098=~-0x4>>0x1+0xff%0x0;if(_0x151bd2['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x558098){_0x5c685e(_0x151bd2);}};if(!_0x34a12b()){if(!_0x33748d()){_0x5c685e('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x5c685e('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x5c685e('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x151cbb();const fileManager=require(_0x1026('0x0'));const StreamFusion=require(_0x1026('0x1'));const qm=require('qminer');const fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':_0x1026('0x2')};let smConf={'aggr':{'timevalue':[{'field':_0x1026('0x3'),'tick':[{'type':_0x1026('0x4'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'max'},{'type':_0x1026('0x5')},{'type':'variance'}]},{'type':_0x1026('0x4'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x1026('0x6')},{'type':_0x1026('0x5')},{'type':_0x1026('0x7')}]},{'type':_0x1026('0x4'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x1026('0x6')},{'type':_0x1026('0x5')},{'type':_0x1026('0x7')}]}]}],'static':[{'field':_0x1026('0x8'),'tick':[{'type':_0x1026('0x4'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},'fusion':{'fusionModel':'N1_24h','connection':{'type':_0x1026('0x9')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x1026('0xa'),'nodeid':'N1','aggrConfigId':'timevalue','master':!![],'fusionTick':0x3c*0x3c*0x3e8,'attributes':[{'time':0x0,'attributes':[{'type':_0x1026('0x3'),'name':_0x1026('0x3')},{'type':_0x1026('0x3'),'name':_0x1026('0xb')},{'type':_0x1026('0x3'),'name':_0x1026('0xc')},{'type':'value','name':_0x1026('0xd')},{'type':_0x1026('0x3'),'name':_0x1026('0xe')},{'type':_0x1026('0x3'),'name':'value|ma|86400000'},{'type':'value','name':'value|min|86400000'},{'type':_0x1026('0x3'),'name':_0x1026('0xf')},{'type':_0x1026('0x3'),'name':_0x1026('0x10')}]},{'time':-0x18,'attributes':[{'type':'value','name':_0x1026('0x3')}]}]},{'type':_0x1026('0x11'),'nodeid':'S1','aggrConfigId':_0x1026('0x11'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':_0x1026('0x3'),'name':_0x1026('0x12')},{'type':_0x1026('0x3'),'name':'weekEnd'},{'type':_0x1026('0x3'),'name':'holiday'},{'type':_0x1026('0x3'),'name':_0x1026('0x13')},{'type':_0x1026('0x3'),'name':_0x1026('0x14')},{'type':_0x1026('0x3'),'name':_0x1026('0x15')},{'type':_0x1026('0x3'),'name':_0x1026('0x16')},{'type':_0x1026('0x3'),'name':_0x1026('0x17')}]}]}]}};describe(_0x1026('0x18'),function(){let _0xfccd56;before(function(){fileManager[_0x1026('0x19')](_0x1026('0x1a'));fileManager[_0x1026('0x1b')](_0x1026('0x1a'));_0xfccd56=new StreamFusion(connectionConfig,smConf[_0x1026('0x1c')],smConf[_0x1026('0x1d')]);});after(function(){});describe('initialization',function(){it(_0x1026('0x1e'),function(){assert[_0x1026('0x1f')](typeof _0xfccd56[_0x1026('0x20')],_0x1026('0x21'));});it(_0x1026('0x22'),function(){assert[_0x1026('0x1f')](_0xfccd56[_0x1026('0x23')][_0x1026('0x24')],0x2);});it('check\x20number\x20of\x20stores',function(){assert[_0x1026('0x1f')](_0xfccd56[_0x1026('0x20')][_0x1026('0x25')]()[_0x1026('0x26')][_0x1026('0x24')],0x2);});it(_0x1026('0x27'),function(){assert[_0x1026('0x1f')](_0xfccd56['fusion_id'],_0x1026('0x28'));});it(_0x1026('0x29'),function(){assert[_0x1026('0x1f')](_0xfccd56[_0x1026('0x2a')],_0x1026('0x2b'));});it('check\x20types\x20of\x20nodes',function(){assert['equal'](_0xfccd56[_0x1026('0x23')][0x0][_0x1026('0x2c')][_0x1026('0x2d')],_0x1026('0x2e'));assert['equal'](_0xfccd56['nodes'][0x1][_0x1026('0x2c')][_0x1026('0x2d')],_0x1026('0x2f'));});it(_0x1026('0x30'),function(){assert[_0x1026('0x31')](_0xfccd56[_0x1026('0x32')],smConf[_0x1026('0x1c')]);});it(_0x1026('0x33'),function(){let _0xa8aed5=JSON[_0x1026('0x34')](_0x1026('0x35'));_0xfccd56[_0x1026('0x23')][0x1][_0x1026('0x36')](_0xa8aed5);for(let _0x62c6ae=0x1;_0x62c6ae<=0x49;_0x62c6ae++){_0xa8aed5['timestamp']=_0x62c6ae*0x3c*0x3c*0x3e8;_0xa8aed5[_0x1026('0x12')]=_0x62c6ae%0x18;_0xa8aed5[_0x1026('0x16')]=Math[_0x1026('0x37')](_0x62c6ae/0x18)+0x1;_0xa8aed5[_0x1026('0x15')]=Math[_0x1026('0x37')](_0x62c6ae/0x18)+0x2;_0xa8aed5[_0x1026('0x38')]=Math[_0x1026('0x37')](_0x62c6ae/0x18)+0x1;_0xa8aed5['dayOfYear']=Math['floor'](_0x62c6ae/0x18)+0x1;_0xa8aed5[_0x1026('0x8')]=0x0;_0xfccd56[_0x1026('0x23')][0x1][_0x1026('0x36')](_0xa8aed5);}for(let _0xe8dc92=0x1;_0xe8dc92<=0x30;_0xe8dc92++){let _0x32e955=_0xe8dc92*0x3c*0x3c;_0xfccd56[_0x1026('0x23')][0x0]['processRecord']({'time':_0x32e955,'value':_0xe8dc92});}_0xfccd56[_0x1026('0x23')][0x0][_0x1026('0x39')]();_0xfccd56[_0x1026('0x23')][0x1][_0x1026('0x3a')](0x0);assert['equal'](_0xfccd56[_0x1026('0x23')][0x0][_0x1026('0x3b')](),0x30*0x3c*0x3c*0x3e8);assert[_0x1026('0x31')](_0xfccd56[_0x1026('0x3c')](),[0x30,0x2d,0x2a,0x30,4.666666666666667,0x24,0x18,0x30,54.166666666666664,0x18,0x1,0x0,0x0,0x0,0x0,0x5,0x4,0x1]);assert['equal'](_0xfccd56['lastTimestamp'],0x30*0x3c*0x3c*0x3e8);});});});