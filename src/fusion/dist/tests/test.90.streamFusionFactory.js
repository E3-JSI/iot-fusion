var _0x3019=['base','object','check\x20number\x20of\x20fusion\x20objects','nodes','check\x20number\x20of\x20stores','getStats','stores','length','check\x20fusion\x20model\x20name','fusion_id','check\x20features\x20topic\x20name','topic','features_N1_24h','check\x20types\x20of\x20nodes','constructor','streamingTimeValueNode','name','streamingStaticNode','global\x20config\x20correct','deepEqual','config','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x200,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','timeOfDay','floor','dayOfMonth','processRecord','setMasterOffset','getOffsetTimestamp','buildFeatureVector','../../common/utils/fileManager.js','../streamFusion.js','assert','value','winbuf','min','variance','max','holiday','N1_24h','timevalue','value|min|21600000','value|max|21600000','value|variance|21600000','value|min|86400000','value|max|86400000','value|variance|86400000','static','weekEnd','dayBeforeHoliday','dayOfWeek','dayOfYear','monthOfYear','streamFusion','removeFolder','./db-1/','createFolder','fusion','aggr','initialization','base\x20saved','equal'];(function(_0x3110a6,_0x3a2a2c){var _0x3de687=function(_0x541240){while(--_0x541240){_0x3110a6['push'](_0x3110a6['shift']());}};var _0x396962=function(){var _0x57ef58={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x16cd25,_0x53c4b9,_0x4aee47,_0x7cad0a){_0x7cad0a=_0x7cad0a||{};var _0x27274a=_0x53c4b9+'='+_0x4aee47;var _0x4665f3=0x0;for(var _0x4665f3=0x0,_0x5a1f8b=_0x16cd25['length'];_0x4665f3<_0x5a1f8b;_0x4665f3++){var _0x93c87d=_0x16cd25[_0x4665f3];_0x27274a+=';\x20'+_0x93c87d;var _0x391ba2=_0x16cd25[_0x93c87d];_0x16cd25['push'](_0x391ba2);_0x5a1f8b=_0x16cd25['length'];if(_0x391ba2!==!![]){_0x27274a+='='+_0x391ba2;}}_0x7cad0a['cookie']=_0x27274a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5a5136,_0x42174b){_0x5a5136=_0x5a5136||function(_0x5ad451){return _0x5ad451;};var _0x5f56d4=_0x5a5136(new RegExp('(?:^|;\x20)'+_0x42174b['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x954dbb=function(_0x13b5c5,_0x2a9a0b){_0x13b5c5(++_0x2a9a0b);};_0x954dbb(_0x3de687,_0x3a2a2c);return _0x5f56d4?decodeURIComponent(_0x5f56d4[0x1]):undefined;}};var _0x3ebf2c=function(){var _0x581c29=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x581c29['test'](_0x57ef58['removeCookie']['toString']());};_0x57ef58['updateCookie']=_0x3ebf2c;var _0x231e43='';var _0x1fcf84=_0x57ef58['updateCookie']();if(!_0x1fcf84){_0x57ef58['setCookie'](['*'],'counter',0x1);}else if(_0x1fcf84){_0x231e43=_0x57ef58['getCookie'](null,'counter');}else{_0x57ef58['removeCookie']();}};_0x396962();}(_0x3019,0xd8));var _0x1d91=function(_0x516ba9,_0x56f651){_0x516ba9=_0x516ba9-0x0;var _0x3ca262=_0x3019[_0x516ba9];return _0x3ca262;};var _0x42bd34=function(){var _0x10a632=!![];return function(_0xb2f9e7,_0x126b4e){var _0x1f4ba0=_0x10a632?function(){if(_0x126b4e){var _0x4cc98a=_0x126b4e['apply'](_0xb2f9e7,arguments);_0x126b4e=null;return _0x4cc98a;}}:function(){};_0x10a632=![];return _0x1f4ba0;};}();var _0x58cd22=_0x42bd34(this,function(){var _0x32c714=function(){return'\x64\x65\x76';},_0x2591b2=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x3ca2a1=function(){var _0x1fc71b=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1fc71b['\x74\x65\x73\x74'](_0x32c714['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x286b7a=function(){var _0xed268f=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0xed268f['\x74\x65\x73\x74'](_0x2591b2['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x39f994=function(_0x548607){var _0x4a8ccf=~-0x1>>0x1+0xff%0x0;if(_0x548607['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x4a8ccf)){_0x2db5dd(_0x548607);}};var _0x2db5dd=function(_0x458fd0){var _0xd64a86=~-0x4>>0x1+0xff%0x0;if(_0x458fd0['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0xd64a86){_0x39f994(_0x458fd0);}};if(!_0x3ca2a1()){if(!_0x286b7a()){_0x39f994('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x39f994('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x39f994('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x58cd22();const fileManager=require(_0x1d91('0x0'));const StreamFusion=require(_0x1d91('0x1'));const qm=require('qminer');const fs=require('fs');var assert=require(_0x1d91('0x2'));let connectionConfig={'zookeeper':'192.168.85.98:2181'};let smConf={'aggr':{'timevalue':[{'field':_0x1d91('0x3'),'tick':[{'type':_0x1d91('0x4'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'max'},{'type':_0x1d91('0x5')},{'type':_0x1d91('0x6')}]},{'type':_0x1d91('0x4'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x1d91('0x7')},{'type':'min'},{'type':_0x1d91('0x6')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x1d91('0x7')},{'type':_0x1d91('0x5')},{'type':'variance'}]}]}],'static':[{'field':_0x1d91('0x8'),'tick':[{'type':_0x1d91('0x4'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},'fusion':{'fusionModel':_0x1d91('0x9'),'connection':{'type':'none'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'timevalue','nodeid':'N1','aggrConfigId':_0x1d91('0xa'),'master':!![],'fusionTick':0x3c*0x3c*0x3e8,'attributes':[{'time':0x0,'attributes':[{'type':_0x1d91('0x3'),'name':_0x1d91('0x3')},{'type':'value','name':'value|ma|21600000'},{'type':_0x1d91('0x3'),'name':_0x1d91('0xb')},{'type':'value','name':_0x1d91('0xc')},{'type':'value','name':_0x1d91('0xd')},{'type':'value','name':'value|ma|86400000'},{'type':_0x1d91('0x3'),'name':_0x1d91('0xe')},{'type':_0x1d91('0x3'),'name':_0x1d91('0xf')},{'type':_0x1d91('0x3'),'name':_0x1d91('0x10')}]},{'time':-0x18,'attributes':[{'type':'value','name':_0x1d91('0x3')}]}]},{'type':_0x1d91('0x11'),'nodeid':'S1','aggrConfigId':'static','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':_0x1d91('0x3'),'name':'timeOfDay'},{'type':_0x1d91('0x3'),'name':_0x1d91('0x12')},{'type':_0x1d91('0x3'),'name':'holiday'},{'type':_0x1d91('0x3'),'name':'dayAfterHoliday'},{'type':'value','name':_0x1d91('0x13')},{'type':_0x1d91('0x3'),'name':_0x1d91('0x14')},{'type':_0x1d91('0x3'),'name':_0x1d91('0x15')},{'type':_0x1d91('0x3'),'name':_0x1d91('0x16')}]}]}]}};describe(_0x1d91('0x17'),function(){let _0x349592;before(function(){fileManager[_0x1d91('0x18')](_0x1d91('0x19'));fileManager[_0x1d91('0x1a')](_0x1d91('0x19'));_0x349592=new StreamFusion(connectionConfig,smConf[_0x1d91('0x1b')],smConf[_0x1d91('0x1c')]);});after(function(){});describe(_0x1d91('0x1d'),function(){it(_0x1d91('0x1e'),function(){assert[_0x1d91('0x1f')](typeof _0x349592[_0x1d91('0x20')],_0x1d91('0x21'));});it(_0x1d91('0x22'),function(){assert['equal'](_0x349592[_0x1d91('0x23')]['length'],0x2);});it(_0x1d91('0x24'),function(){assert['equal'](_0x349592[_0x1d91('0x20')][_0x1d91('0x25')]()[_0x1d91('0x26')][_0x1d91('0x27')],0x2);});it(_0x1d91('0x28'),function(){assert[_0x1d91('0x1f')](_0x349592[_0x1d91('0x29')],_0x1d91('0x9'));});it(_0x1d91('0x2a'),function(){assert[_0x1d91('0x1f')](_0x349592[_0x1d91('0x2b')],_0x1d91('0x2c'));});it(_0x1d91('0x2d'),function(){assert[_0x1d91('0x1f')](_0x349592[_0x1d91('0x23')][0x0][_0x1d91('0x2e')]['name'],_0x1d91('0x2f'));assert[_0x1d91('0x1f')](_0x349592[_0x1d91('0x23')][0x1][_0x1d91('0x2e')][_0x1d91('0x30')],_0x1d91('0x31'));});it(_0x1d91('0x32'),function(){assert[_0x1d91('0x33')](_0x349592[_0x1d91('0x34')],smConf[_0x1d91('0x1b')]);});it('feature\x20vector\x20ok',function(){let _0x4f0d73=JSON[_0x1d91('0x35')](_0x1d91('0x36'));_0x349592[_0x1d91('0x23')][0x1]['processRecord'](_0x4f0d73);for(let _0x3a96b3=0x1;_0x3a96b3<=0x49;_0x3a96b3++){_0x4f0d73['timestamp']=_0x3a96b3*0x3c*0x3c*0x3e8;_0x4f0d73[_0x1d91('0x37')]=_0x3a96b3%0x18;_0x4f0d73[_0x1d91('0x15')]=Math['floor'](_0x3a96b3/0x18)+0x1;_0x4f0d73[_0x1d91('0x14')]=Math[_0x1d91('0x38')](_0x3a96b3/0x18)+0x2;_0x4f0d73[_0x1d91('0x39')]=Math[_0x1d91('0x38')](_0x3a96b3/0x18)+0x1;_0x4f0d73['dayOfYear']=Math[_0x1d91('0x38')](_0x3a96b3/0x18)+0x1;_0x4f0d73[_0x1d91('0x8')]=0x0;_0x349592['nodes'][0x1]['processRecord'](_0x4f0d73);}for(let _0x16bc89=0x1;_0x16bc89<=0x30;_0x16bc89++){let _0x56bc71=_0x16bc89*0x3c*0x3c;_0x349592[_0x1d91('0x23')][0x0][_0x1d91('0x3a')]({'time':_0x56bc71,'value':_0x16bc89});}_0x349592[_0x1d91('0x23')][0x0][_0x1d91('0x3b')]();_0x349592[_0x1d91('0x23')][0x1]['setSlaveOffset'](0x0);assert[_0x1d91('0x1f')](_0x349592[_0x1d91('0x23')][0x0][_0x1d91('0x3c')](),0x30*0x3c*0x3c*0x3e8);assert['deepEqual'](_0x349592[_0x1d91('0x3d')](),[0x30,0x2d,0x2a,0x30,4.666666666666667,0x24,0x18,0x30,54.166666666666664,0x18,0x1,0x0,0x0,0x0,0x0,0x5,0x4,0x1]);assert[_0x1d91('0x1f')](_0x349592['lastTimestamp'],0x30*0x3c*0x3c*0x3e8);});});});