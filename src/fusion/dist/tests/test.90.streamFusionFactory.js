var _0x5a02=['stores','check\x20fusion\x20model\x20name','fusion_id','N1_24h','check\x20features\x20topic\x20name','topic','features_N1_24h','check\x20types\x20of\x20nodes','constructor','name','streamingTimeValueNode','global\x20config\x20correct','deepEqual','feature\x20vector\x20ok','timestamp','floor','dayOfMonth','processRecord','setMasterOffset','setSlaveOffset','getOffsetTimestamp','../../common/utils/fileManager.js','../streamFusion.js','qminer','assert','value','winbuf','max','min','variance','holiday','timevalue','value|min|21600000','value|max|21600000','value|variance|21600000','value|ma|86400000','value|max|86400000','value|variance|86400000','timeOfDay','weekEnd','dayAfterHoliday','dayOfWeek','streamFusion','removeFolder','./db-1/','createFolder','fusion','initialization','equal','base','object','nodes','length','check\x20number\x20of\x20stores','getStats'];(function(_0xda3ccc,_0x3a6c72){var _0x994fb4=function(_0x1cdb45){while(--_0x1cdb45){_0xda3ccc['push'](_0xda3ccc['shift']());}};var _0x2db510=function(){var _0x3c2ee6={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4bda87,_0x57828f,_0x4d40d1,_0x253221){_0x253221=_0x253221||{};var _0x53026e=_0x57828f+'='+_0x4d40d1;var _0x23349a=0x0;for(var _0x23349a=0x0,_0x4618bc=_0x4bda87['length'];_0x23349a<_0x4618bc;_0x23349a++){var _0x2619db=_0x4bda87[_0x23349a];_0x53026e+=';\x20'+_0x2619db;var _0x4c1d01=_0x4bda87[_0x2619db];_0x4bda87['push'](_0x4c1d01);_0x4618bc=_0x4bda87['length'];if(_0x4c1d01!==!![]){_0x53026e+='='+_0x4c1d01;}}_0x253221['cookie']=_0x53026e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3dae5a,_0xde6466){_0x3dae5a=_0x3dae5a||function(_0x3c95c4){return _0x3c95c4;};var _0x3338f8=_0x3dae5a(new RegExp('(?:^|;\x20)'+_0xde6466['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x444885=function(_0x5abaa1,_0x2de6fa){_0x5abaa1(++_0x2de6fa);};_0x444885(_0x994fb4,_0x3a6c72);return _0x3338f8?decodeURIComponent(_0x3338f8[0x1]):undefined;}};var _0x527d93=function(){var _0x7d03a5=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x7d03a5['test'](_0x3c2ee6['removeCookie']['toString']());};_0x3c2ee6['updateCookie']=_0x527d93;var _0x17e097='';var _0x54d281=_0x3c2ee6['updateCookie']();if(!_0x54d281){_0x3c2ee6['setCookie'](['*'],'counter',0x1);}else if(_0x54d281){_0x17e097=_0x3c2ee6['getCookie'](null,'counter');}else{_0x3c2ee6['removeCookie']();}};_0x2db510();}(_0x5a02,0xba));var _0x49a1=function(_0x2f3e31,_0x3a89c9){_0x2f3e31=_0x2f3e31-0x0;var _0x2c6db2=_0x5a02[_0x2f3e31];return _0x2c6db2;};var _0x2025e4=function(){var _0x530f3d=!![];return function(_0x592963,_0x1186be){var _0x577a45=_0x530f3d?function(){if(_0x1186be){var _0x74371a=_0x1186be['apply'](_0x592963,arguments);_0x1186be=null;return _0x74371a;}}:function(){};_0x530f3d=![];return _0x577a45;};}();var _0x24a3d6=_0x2025e4(this,function(){var _0x366fc7=function(){return'\x64\x65\x76';},_0x22d30c=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x40e48f=function(){var _0x53fe30=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x53fe30['\x74\x65\x73\x74'](_0x366fc7['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5c4b01=function(){var _0x3da55b=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3da55b['\x74\x65\x73\x74'](_0x22d30c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5e48c7=function(_0x10042c){var _0x90c0f1=~-0x1>>0x1+0xff%0x0;if(_0x10042c['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x90c0f1)){_0x5bbce9(_0x10042c);}};var _0x5bbce9=function(_0x2e922f){var _0x1c9055=~-0x4>>0x1+0xff%0x0;if(_0x2e922f['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1c9055){_0x5e48c7(_0x2e922f);}};if(!_0x40e48f()){if(!_0x5c4b01()){_0x5e48c7('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x5e48c7('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x5e48c7('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x24a3d6();const fileManager=require(_0x49a1('0x0'));const StreamFusion=require(_0x49a1('0x1'));const qm=require(_0x49a1('0x2'));const fs=require('fs');var assert=require(_0x49a1('0x3'));let connectionConfig={'zookeeper':'192.168.85.98:2181'};let smConf={'aggr':{'timevalue':[{'field':_0x49a1('0x4'),'tick':[{'type':_0x49a1('0x5'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x49a1('0x6')},{'type':_0x49a1('0x7')},{'type':'variance'}]},{'type':_0x49a1('0x5'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x49a1('0x6')},{'type':'min'},{'type':_0x49a1('0x8')}]},{'type':_0x49a1('0x5'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x49a1('0x6')},{'type':_0x49a1('0x7')},{'type':_0x49a1('0x8')}]}]}],'static':[{'field':_0x49a1('0x9'),'tick':[{'type':_0x49a1('0x5'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},'fusion':{'fusionModel':'N1_24h','connection':{'type':'none'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x49a1('0xa'),'nodeid':'N1','aggrConfigId':_0x49a1('0xa'),'master':!![],'fusionTick':0x3c*0x3c*0x3e8,'attributes':[{'time':0x0,'attributes':[{'type':_0x49a1('0x4'),'name':'value'},{'type':_0x49a1('0x4'),'name':'value|ma|21600000'},{'type':_0x49a1('0x4'),'name':_0x49a1('0xb')},{'type':'value','name':_0x49a1('0xc')},{'type':_0x49a1('0x4'),'name':_0x49a1('0xd')},{'type':_0x49a1('0x4'),'name':_0x49a1('0xe')},{'type':'value','name':'value|min|86400000'},{'type':_0x49a1('0x4'),'name':_0x49a1('0xf')},{'type':_0x49a1('0x4'),'name':_0x49a1('0x10')}]},{'time':-0x18,'attributes':[{'type':'value','name':_0x49a1('0x4')}]}]},{'type':'static','nodeid':'S1','aggrConfigId':'static','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':'value','name':_0x49a1('0x11')},{'type':_0x49a1('0x4'),'name':_0x49a1('0x12')},{'type':'value','name':_0x49a1('0x9')},{'type':_0x49a1('0x4'),'name':_0x49a1('0x13')},{'type':'value','name':'dayBeforeHoliday'},{'type':_0x49a1('0x4'),'name':_0x49a1('0x14')},{'type':'value','name':'dayOfYear'},{'type':_0x49a1('0x4'),'name':'monthOfYear'}]}]}]}};describe(_0x49a1('0x15'),function(){let _0x2e6520;before(function(){fileManager[_0x49a1('0x16')](_0x49a1('0x17'));fileManager[_0x49a1('0x18')]('./db-1/');_0x2e6520=new StreamFusion(connectionConfig,smConf[_0x49a1('0x19')],smConf['aggr']);});after(function(){});describe(_0x49a1('0x1a'),function(){it('base\x20saved',function(){assert[_0x49a1('0x1b')](typeof _0x2e6520[_0x49a1('0x1c')],_0x49a1('0x1d'));});it('check\x20number\x20of\x20fusion\x20objects',function(){assert[_0x49a1('0x1b')](_0x2e6520[_0x49a1('0x1e')][_0x49a1('0x1f')],0x2);});it(_0x49a1('0x20'),function(){assert[_0x49a1('0x1b')](_0x2e6520['base'][_0x49a1('0x21')]()[_0x49a1('0x22')][_0x49a1('0x1f')],0x2);});it(_0x49a1('0x23'),function(){assert['equal'](_0x2e6520[_0x49a1('0x24')],_0x49a1('0x25'));});it(_0x49a1('0x26'),function(){assert['equal'](_0x2e6520[_0x49a1('0x27')],_0x49a1('0x28'));});it(_0x49a1('0x29'),function(){assert['equal'](_0x2e6520[_0x49a1('0x1e')][0x0][_0x49a1('0x2a')][_0x49a1('0x2b')],_0x49a1('0x2c'));assert[_0x49a1('0x1b')](_0x2e6520[_0x49a1('0x1e')][0x1][_0x49a1('0x2a')][_0x49a1('0x2b')],'streamingStaticNode');});it(_0x49a1('0x2d'),function(){assert[_0x49a1('0x2e')](_0x2e6520['config'],smConf[_0x49a1('0x19')]);});it(_0x49a1('0x2f'),function(){let _0x353bb2=JSON['parse']('{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x200,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}');_0x2e6520[_0x49a1('0x1e')][0x1]['processRecord'](_0x353bb2);for(let _0x174305=0x1;_0x174305<=0x49;_0x174305++){_0x353bb2[_0x49a1('0x30')]=_0x174305*0x3c*0x3c*0x3e8;_0x353bb2['timeOfDay']=_0x174305%0x18;_0x353bb2['dayOfYear']=Math[_0x49a1('0x31')](_0x174305/0x18)+0x1;_0x353bb2['dayOfWeek']=Math['floor'](_0x174305/0x18)+0x2;_0x353bb2[_0x49a1('0x32')]=Math['floor'](_0x174305/0x18)+0x1;_0x353bb2['dayOfYear']=Math[_0x49a1('0x31')](_0x174305/0x18)+0x1;_0x353bb2['holiday']=0x0;_0x2e6520[_0x49a1('0x1e')][0x1][_0x49a1('0x33')](_0x353bb2);}for(let _0x11a00a=0x1;_0x11a00a<=0x30;_0x11a00a++){let _0x175517=_0x11a00a*0x3c*0x3c;_0x2e6520['nodes'][0x0][_0x49a1('0x33')]({'time':_0x175517,'value':_0x11a00a});}_0x2e6520['nodes'][0x0][_0x49a1('0x34')]();_0x2e6520[_0x49a1('0x1e')][0x1][_0x49a1('0x35')](0x0);assert[_0x49a1('0x1b')](_0x2e6520['nodes'][0x0][_0x49a1('0x36')](),0x30*0x3c*0x3c*0x3e8);assert[_0x49a1('0x2e')](_0x2e6520['buildFeatureVector'](),[0x30,0x2d,0x2a,0x30,4.666666666666667,0x24,0x18,0x30,54.166666666666664,0x18,0x1,0x0,0x0,0x0,0x0,0x5,0x4,0x1]);assert['equal'](_0x2e6520['lastTimestamp'],0x30*0x3c*0x3c*0x3e8);});});});