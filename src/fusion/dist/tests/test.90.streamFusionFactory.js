var _0x457d=['timestamp','floor','dayOfMonth','processRecord','setMasterOffset','getOffsetTimestamp','buildFeatureVector','lastTimestamp','../../common/utils/fileManager.js','../streamFusion.js','assert','192.168.85.98:2181','value','max','winbuf','min','variance','holiday','N1_24h','none','timevalue','value|ma|21600000','value|min|21600000','value|variance|21600000','value|ma|86400000','value|min|86400000','static','weekEnd','dayAfterHoliday','dayBeforeHoliday','dayOfWeek','dayOfYear','monthOfYear','streamFusion','removeFolder','./db-1/','fusion','initialization','base\x20saved','equal','object','check\x20number\x20of\x20fusion\x20objects','length','check\x20number\x20of\x20stores','base','getStats','check\x20fusion\x20model\x20name','check\x20features\x20topic\x20name','topic','features_N1_24h','check\x20types\x20of\x20nodes','nodes','constructor','name','streamingTimeValueNode','streamingStaticNode','global\x20config\x20correct','deepEqual','config','feature\x20vector\x20ok','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x200,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}'];(function(_0x63add4,_0x384791){var _0x919162=function(_0x77e2c0){while(--_0x77e2c0){_0x63add4['push'](_0x63add4['shift']());}};var _0x4cce0c=function(){var _0x4a8593={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x68f73,_0x1ea11c,_0x26dd9c,_0xa4d7a3){_0xa4d7a3=_0xa4d7a3||{};var _0x29b006=_0x1ea11c+'='+_0x26dd9c;var _0x54d7bd=0x0;for(var _0x54d7bd=0x0,_0x5313c2=_0x68f73['length'];_0x54d7bd<_0x5313c2;_0x54d7bd++){var _0x5521c0=_0x68f73[_0x54d7bd];_0x29b006+=';\x20'+_0x5521c0;var _0x37a436=_0x68f73[_0x5521c0];_0x68f73['push'](_0x37a436);_0x5313c2=_0x68f73['length'];if(_0x37a436!==!![]){_0x29b006+='='+_0x37a436;}}_0xa4d7a3['cookie']=_0x29b006;},'removeCookie':function(){return'dev';},'getCookie':function(_0x439624,_0x36b52c){_0x439624=_0x439624||function(_0x232719){return _0x232719;};var _0x563b81=_0x439624(new RegExp('(?:^|;\x20)'+_0x36b52c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x52512d=function(_0xc8d17b,_0xedcda1){_0xc8d17b(++_0xedcda1);};_0x52512d(_0x919162,_0x384791);return _0x563b81?decodeURIComponent(_0x563b81[0x1]):undefined;}};var _0x26cf4e=function(){var _0x1fed4f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1fed4f['test'](_0x4a8593['removeCookie']['toString']());};_0x4a8593['updateCookie']=_0x26cf4e;var _0x2c6fbb='';var _0x212064=_0x4a8593['updateCookie']();if(!_0x212064){_0x4a8593['setCookie'](['*'],'counter',0x1);}else if(_0x212064){_0x2c6fbb=_0x4a8593['getCookie'](null,'counter');}else{_0x4a8593['removeCookie']();}};_0x4cce0c();}(_0x457d,0x1ba));var _0x507a=function(_0x2a3dec,_0x3951ae){_0x2a3dec=_0x2a3dec-0x0;var _0x4661c4=_0x457d[_0x2a3dec];return _0x4661c4;};var _0xec2d11=function(){var _0x2e9bd5=!![];return function(_0x15564c,_0x330594){var _0x4d702f=_0x2e9bd5?function(){if(_0x330594){var _0x215f9c=_0x330594['apply'](_0x15564c,arguments);_0x330594=null;return _0x215f9c;}}:function(){};_0x2e9bd5=![];return _0x4d702f;};}();var _0x1a2550=_0xec2d11(this,function(){var _0x1196c6=function(){return'\x64\x65\x76';},_0x44e6fa=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x2490e8=function(){var _0x527750=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x527750['\x74\x65\x73\x74'](_0x1196c6['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x264467=function(){var _0x256e58=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x256e58['\x74\x65\x73\x74'](_0x44e6fa['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4cab0c=function(_0x14f178){var _0x1eba85=~-0x1>>0x1+0xff%0x0;if(_0x14f178['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1eba85)){_0x1039ed(_0x14f178);}};var _0x1039ed=function(_0x39b447){var _0xcd84=~-0x4>>0x1+0xff%0x0;if(_0x39b447['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0xcd84){_0x4cab0c(_0x39b447);}};if(!_0x2490e8()){if(!_0x264467()){_0x4cab0c('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x4cab0c('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x4cab0c('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1a2550();const fileManager=require(_0x507a('0x0'));const StreamFusion=require(_0x507a('0x1'));const qm=require('qminer');const fs=require('fs');var assert=require(_0x507a('0x2'));let connectionConfig={'zookeeper':_0x507a('0x3')};let smConf={'aggr':{'timevalue':[{'field':_0x507a('0x4'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x507a('0x5')},{'type':'min'},{'type':'variance'}]},{'type':_0x507a('0x6'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x507a('0x5')},{'type':_0x507a('0x7')},{'type':_0x507a('0x8')}]},{'type':_0x507a('0x6'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'max'},{'type':_0x507a('0x7')},{'type':_0x507a('0x8')}]}]}],'static':[{'field':_0x507a('0x9'),'tick':[{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},'fusion':{'fusionModel':_0x507a('0xa'),'connection':{'type':_0x507a('0xb')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x507a('0xc'),'nodeid':'N1','aggrConfigId':'timevalue','master':!![],'fusionTick':0x3c*0x3c*0x3e8,'attributes':[{'time':0x0,'attributes':[{'type':_0x507a('0x4'),'name':_0x507a('0x4')},{'type':'value','name':_0x507a('0xd')},{'type':_0x507a('0x4'),'name':_0x507a('0xe')},{'type':_0x507a('0x4'),'name':'value|max|21600000'},{'type':_0x507a('0x4'),'name':_0x507a('0xf')},{'type':_0x507a('0x4'),'name':_0x507a('0x10')},{'type':_0x507a('0x4'),'name':_0x507a('0x11')},{'type':_0x507a('0x4'),'name':'value|max|86400000'},{'type':_0x507a('0x4'),'name':'value|variance|86400000'}]},{'time':-0x18,'attributes':[{'type':_0x507a('0x4'),'name':_0x507a('0x4')}]}]},{'type':_0x507a('0x12'),'nodeid':'S1','aggrConfigId':'static','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':'value','name':'timeOfDay'},{'type':_0x507a('0x4'),'name':_0x507a('0x13')},{'type':'value','name':_0x507a('0x9')},{'type':_0x507a('0x4'),'name':_0x507a('0x14')},{'type':'value','name':_0x507a('0x15')},{'type':'value','name':_0x507a('0x16')},{'type':'value','name':_0x507a('0x17')},{'type':_0x507a('0x4'),'name':_0x507a('0x18')}]}]}]}};describe(_0x507a('0x19'),function(){let _0xd1da3;before(function(){fileManager[_0x507a('0x1a')](_0x507a('0x1b'));fileManager['createFolder'](_0x507a('0x1b'));_0xd1da3=new StreamFusion(connectionConfig,smConf[_0x507a('0x1c')],smConf['aggr']);});after(function(){});describe(_0x507a('0x1d'),function(){it(_0x507a('0x1e'),function(){assert[_0x507a('0x1f')](typeof _0xd1da3['base'],_0x507a('0x20'));});it(_0x507a('0x21'),function(){assert[_0x507a('0x1f')](_0xd1da3['nodes'][_0x507a('0x22')],0x2);});it(_0x507a('0x23'),function(){assert['equal'](_0xd1da3[_0x507a('0x24')][_0x507a('0x25')]()['stores'][_0x507a('0x22')],0x2);});it(_0x507a('0x26'),function(){assert['equal'](_0xd1da3['fusion_id'],_0x507a('0xa'));});it(_0x507a('0x27'),function(){assert[_0x507a('0x1f')](_0xd1da3[_0x507a('0x28')],_0x507a('0x29'));});it(_0x507a('0x2a'),function(){assert[_0x507a('0x1f')](_0xd1da3[_0x507a('0x2b')][0x0][_0x507a('0x2c')][_0x507a('0x2d')],_0x507a('0x2e'));assert[_0x507a('0x1f')](_0xd1da3[_0x507a('0x2b')][0x1][_0x507a('0x2c')]['name'],_0x507a('0x2f'));});it(_0x507a('0x30'),function(){assert[_0x507a('0x31')](_0xd1da3[_0x507a('0x32')],smConf[_0x507a('0x1c')]);});it(_0x507a('0x33'),function(){let _0x1e65db=JSON[_0x507a('0x34')](_0x507a('0x35'));_0xd1da3[_0x507a('0x2b')][0x1]['processRecord'](_0x1e65db);for(let _0x3d5346=0x1;_0x3d5346<=0x49;_0x3d5346++){_0x1e65db[_0x507a('0x36')]=_0x3d5346*0x3c*0x3c*0x3e8;_0x1e65db['timeOfDay']=_0x3d5346%0x18;_0x1e65db[_0x507a('0x17')]=Math[_0x507a('0x37')](_0x3d5346/0x18)+0x1;_0x1e65db[_0x507a('0x16')]=Math[_0x507a('0x37')](_0x3d5346/0x18)+0x2;_0x1e65db[_0x507a('0x38')]=Math[_0x507a('0x37')](_0x3d5346/0x18)+0x1;_0x1e65db['dayOfYear']=Math[_0x507a('0x37')](_0x3d5346/0x18)+0x1;_0x1e65db[_0x507a('0x9')]=0x0;_0xd1da3[_0x507a('0x2b')][0x1][_0x507a('0x39')](_0x1e65db);}for(let _0x554b44=0x1;_0x554b44<=0x30;_0x554b44++){let _0x43f785=_0x554b44*0x3c*0x3c;_0xd1da3['nodes'][0x0][_0x507a('0x39')]({'time':_0x43f785,'value':_0x554b44});}_0xd1da3['nodes'][0x0][_0x507a('0x3a')]();_0xd1da3['nodes'][0x1]['setSlaveOffset'](0x0);assert[_0x507a('0x1f')](_0xd1da3[_0x507a('0x2b')][0x0][_0x507a('0x3b')](),0x30*0x3c*0x3c*0x3e8);assert[_0x507a('0x31')](_0xd1da3[_0x507a('0x3c')](),[0x30,0x2d,0x2a,0x30,4.666666666666667,0x24,0x18,0x30,54.166666666666664,0x18,0x1,0x0,0x0,0x0,0x0,0x5,0x4,0x1]);assert[_0x507a('0x1f')](_0xd1da3[_0x507a('0x3d')],0x30*0x3c*0x3c*0x3e8);});});});