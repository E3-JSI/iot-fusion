const a0_0x3be5=['../nodes/streamingNode.js','createClean','aggregates\x20initialized\x20-\x20key\x20names','{\x22stampm\x22:\x201468493073000}','close','carno|variance|21600000','deepEqual','parse','function','{\x22stampm\x22:','initialization','carno|min|86400000','data\x20insertion','return\x20/\x22\x20+\x20this\x20+\x20\x22/','offsetExists','{\x22stampm\x22:\x201468493072000,\x20\x22carno\x22:\x201.0,\x20\x22v\x22:\x202\x20}','nodes','master\x20set\x20correctly','isMaster\x20function','checkDataAvailability','aggregate','../nodes/streamingTrafficCounterNode.js','broadcastAggregates\x20function\x20exists','v|winbuf|21600000','v|min|86400000','callback\x20function\x20should\x20be\x20set','Time','master','trafficcounter','value','min','master\x20offset\x20set\x20correctly','v|tick','processRecord','checkDataAvailability\x20function\x20exists','length','assert','parent','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','duplicate\x20insertions\x20test','keys','fields','name','check\x20if\x20store\x20exists','fusionNodeI\x20correctly\x20saved','equal','v|ma|21600','Base','getAggregates\x20function\x20exists','buffer\x20position\x20is\x200','parent\x20saved','v|max|21600000','getOffsetTimestamp\x20function\x20exists','isMaster','float','{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}','carno|ma|86400000',',\x22v\x22:\x20','../nodes/streamingStaticNode.js','offsetExists\x20function\x20exists','buffer','v|winbuf|86400000','createAggregates\x20function\x20exists','constructor','getPartialFeatureVector','../nodes/streamingSmartLampNode.js','v|max|86400000','carno|ma|21600000','position','base\x20saved','carno','carno|ma|604800000','connectToKafka\x20function\x20exists','setSlaveOffset\x20function\x20exists','rawstore','master\x20flag\x20set\x20correctly','v|ma|21600000','Empty\x20values\x20in\x20message\x20set\x20to\x200','carno|variance|86400000','v|ma|604800000','winbuf','../nodes/streamingEnergyNode.js','processRecordCb','data\x20record\x20saved\x20correctly','datetime','aggregates\x20initialized\x20-\x20number','variance','setMasterOffset\x20function\x20exists','v|variance|86400000','setMasterOffset','getOffsetTimestamp','v|ma|86400000','setSlaveOffset','../nodes/streamingWeatherNode.js','carno|winbuf|21600000','v|variance|21600000','apply','buffer\x20empty','v|winbuf|604800000','deleteObsoleteRows','qminer','carno|min|21600000','./db4/','max','test'];(function(_0x379950,_0x3be5a9){const _0x5a1128=function(_0x2728eb){while(--_0x2728eb){_0x379950['push'](_0x379950['shift']());}},_0x2270f3=function(){const _0x4ee246={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3d7173,_0x1e280e,_0x5b1eb0,_0x245e6f){_0x245e6f=_0x245e6f||{};let _0x194da8=_0x1e280e+'='+_0x5b1eb0,_0x2f40ea=0x0;for(let _0x136cc6=0x0,_0x2677f8=_0x3d7173['length'];_0x136cc6<_0x2677f8;_0x136cc6++){const _0x7cdf21=_0x3d7173[_0x136cc6];_0x194da8+=';\x20'+_0x7cdf21;const _0x3bae6d=_0x3d7173[_0x7cdf21];_0x3d7173['push'](_0x3bae6d),_0x2677f8=_0x3d7173['length'],_0x3bae6d!==!![]&&(_0x194da8+='='+_0x3bae6d);}_0x245e6f['cookie']=_0x194da8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x26d06e,_0x44ccb9){_0x26d06e=_0x26d06e||function(_0x5deb8c){return _0x5deb8c;};const _0x113eb6=_0x26d06e(new RegExp('(?:^|;\x20)'+_0x44ccb9['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x89eba4=function(_0x2d4365,_0x418a1a){_0x2d4365(++_0x418a1a);};return _0x89eba4(_0x5a1128,_0x3be5a9),_0x113eb6?decodeURIComponent(_0x113eb6[0x1]):undefined;}},_0x28ff9a=function(){const _0x5988db=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5988db['test'](_0x4ee246['removeCookie']['toString']());};_0x4ee246['updateCookie']=_0x28ff9a;let _0x438b85='';const _0x315d32=_0x4ee246['updateCookie']();if(!_0x315d32)_0x4ee246['setCookie'](['*'],'counter',0x1);else _0x315d32?_0x438b85=_0x4ee246['getCookie'](null,'counter'):_0x4ee246['removeCookie']();};_0x2270f3();}(a0_0x3be5,0x14d));const a0_0x5a11=function(_0x379950,_0x3be5a9){_0x379950=_0x379950-0x0;let _0x5a1128=a0_0x3be5[_0x379950];return _0x5a1128;};const a0_0x5b1eb0=function(){let _0x4b0745=!![];return function(_0x59211c,_0x293bb0){const _0x587e69=_0x4b0745?function(){if(_0x293bb0){const _0x31caf3=_0x293bb0[a0_0x5a11('0x4e')](_0x59211c,arguments);return _0x293bb0=null,_0x31caf3;}}:function(){};return _0x4b0745=![],_0x587e69;};}(),a0_0x1e280e=a0_0x5b1eb0(this,function(){const _0x4f57e7=function(){const _0x33053b=_0x4f57e7[a0_0x5a11('0x2d')](a0_0x5a11('0x64'))()[a0_0x5a11('0x2d')](a0_0x5a11('0x14'));return!_0x33053b[a0_0x5a11('0x56')](a0_0x1e280e);};return _0x4f57e7();});a0_0x1e280e();const streamingNode=require(a0_0x5a11('0x57')),streamingEnergyNode=require(a0_0x5a11('0x3f')),streamingWeatherNode=require(a0_0x5a11('0x4b')),streamingStaticNode=require(a0_0x5a11('0x28')),streamingTimeValueNode=require('../nodes/streamingTimeValueNode.js'),streamingSmartLampNode=require(a0_0x5a11('0x2f')),streamingTrafficCounterNode=require(a0_0x5a11('0x3')),fileManager=require('../common/utils/fileManager.js'),qm=require(a0_0x5a11('0x52')),fs=require('fs');var assert=require(a0_0x5a11('0x12'));let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'trafficcounter':[{'field':a0_0x5a11('0x34'),'tick':[{'type':a0_0x5a11('0x3e'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x5a11('0xc')},{'type':a0_0x5a11('0x55')},{'type':a0_0x5a11('0x44')}]},{'type':a0_0x5a11('0x3e'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x5a11('0x55')},{'type':a0_0x5a11('0x44')}]},{'type':a0_0x5a11('0x3e'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'v','tick':[{'type':a0_0x5a11('0x3e'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x5a11('0x55')},{'type':a0_0x5a11('0x44')}]},{'type':a0_0x5a11('0x3e'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x5a11('0xc')},{'type':a0_0x5a11('0x55')},{'type':'variance'}]},{'type':a0_0x5a11('0x3e'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':'trafficcounter','connection':{'type':'mqtt'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x5a11('0xa'),'nodeid':a0_0x5a11('0xa'),'aggrConfigId':'trafficcounter','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x5a11('0xb'),'name':a0_0x5a11('0x34')},{'type':a0_0x5a11('0xb'),'name':a0_0x5a11('0x1c')},{'type':a0_0x5a11('0xb'),'name':'carno|ma|86400000'},{'type':a0_0x5a11('0xb'),'name':a0_0x5a11('0x62')},{'type':'value','name':'carno|max|86400000'},{'type':a0_0x5a11('0xb'),'name':a0_0x5a11('0x3c')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x5a11('0xb'),'name':'carno'},{'type':a0_0x5a11('0xb'),'name':'v'},{'type':a0_0x5a11('0xb'),'name':a0_0x5a11('0x26')},{'type':a0_0x5a11('0xb'),'name':a0_0x5a11('0x62')},{'type':a0_0x5a11('0xb'),'name':'carno|max|86400000'},{'type':a0_0x5a11('0xb'),'name':a0_0x5a11('0x3c')}]}]}]};function processRecordDummyCb(_0x19b879,_0x5f4727){return!![];}describe('streamingTrafficCounterNode',function(){let _0xf8a766,_0x6f575e;before(function(){fileManager['removeFolder'](a0_0x5a11('0x54')),fileManager['createFolder'](a0_0x5a11('0x54')),_0xf8a766=new qm[(a0_0x5a11('0x1d'))]({'dbPath':a0_0x5a11('0x54'),'mode':a0_0x5a11('0x58')}),stcn=new streamingTrafficCounterNode(_0xf8a766,connectionConfig,fusionConfig[a0_0x5a11('0x67')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0xf8a766[a0_0x5a11('0x5b')]();}),describe(a0_0x5a11('0x61'),function(){it(a0_0x5a11('0x33'),function(){assert['equal'](_0xf8a766,stcn['base']);}),it(a0_0x5a11('0x19'),function(){assert['equal'](stcn[a0_0x5a11('0x38')][a0_0x5a11('0x18')],a0_0x5a11('0xa'));}),it('check\x20store\x20structure',function(){assert[a0_0x5a11('0x5d')](stcn[a0_0x5a11('0x38')][a0_0x5a11('0x17')],[{'id':0x0,'name':a0_0x5a11('0x8'),'type':a0_0x5a11('0x42'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x5a11('0x34'),'type':a0_0x5a11('0x24'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'v','type':a0_0x5a11('0x24'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x5a11('0x43'),function(){assert['equal'](Object[a0_0x5a11('0x16')](stcn[a0_0x5a11('0x2')])[a0_0x5a11('0x11')],0x1a);}),it(a0_0x5a11('0x59'),function(){assert[a0_0x5a11('0x5d')](Object['keys'](stcn[a0_0x5a11('0x2')]),['carno|tick',a0_0x5a11('0x4c'),a0_0x5a11('0x31'),a0_0x5a11('0x53'),'carno|max|21600000',a0_0x5a11('0x5c'),'carno|winbuf|86400000',a0_0x5a11('0x26'),a0_0x5a11('0x62'),'carno|max|86400000',a0_0x5a11('0x3c'),'carno|winbuf|604800000',a0_0x5a11('0x35'),a0_0x5a11('0xe'),a0_0x5a11('0x5'),a0_0x5a11('0x3a'),'v|min|21600000',a0_0x5a11('0x21'),a0_0x5a11('0x4d'),a0_0x5a11('0x2b'),a0_0x5a11('0x49'),a0_0x5a11('0x6'),a0_0x5a11('0x30'),a0_0x5a11('0x46'),a0_0x5a11('0x50'),a0_0x5a11('0x3d')]);}),it('config\x20saved',function(){assert[a0_0x5a11('0x5d')](stcn['config'],fusionConfig[a0_0x5a11('0x67')][0x0]);}),it(a0_0x5a11('0x1a'),function(){assert[a0_0x5a11('0x1b')](stcn['fusionNodeI'],0x63);}),it(a0_0x5a11('0x7'),function(){assert[a0_0x5a11('0x1b')](typeof stcn[a0_0x5a11('0x40')],'function');}),it(a0_0x5a11('0x20'),function(){assert[a0_0x5a11('0x1b')](stcn[a0_0x5a11('0x13')],null);}),it(a0_0x5a11('0x4f'),function(){assert['deepEqual'](stcn['buffer'],[]);}),it(a0_0x5a11('0x1f'),function(){assert[a0_0x5a11('0x1b')](stcn['position'],0x0);}),it(a0_0x5a11('0x39'),function(){assert[a0_0x5a11('0x1b')](stcn[a0_0x5a11('0x9')],!![]);}),it(a0_0x5a11('0x0'),function(){assert[a0_0x5a11('0x1b')](stcn[a0_0x5a11('0x23')](),!![]);}),it(a0_0x5a11('0x36'),function(){assert[a0_0x5a11('0x1b')](typeof stcn['connectToKafka'],a0_0x5a11('0x5f'));}),it(a0_0x5a11('0x4'),function(){assert[a0_0x5a11('0x1b')](typeof stcn['broadcastAggregates'],a0_0x5a11('0x5f'));}),it(a0_0x5a11('0x2c'),function(){assert[a0_0x5a11('0x1b')](typeof stcn['createAggregates'],'function');}),it(a0_0x5a11('0x29'),function(){assert[a0_0x5a11('0x1b')](typeof stcn[a0_0x5a11('0x65')],a0_0x5a11('0x5f'));}),it('deleteObsoleteRows\x20function\x20exists',function(){assert['equal'](typeof stcn[a0_0x5a11('0x51')],a0_0x5a11('0x5f'));}),it(a0_0x5a11('0x10'),function(){assert['equal'](typeof stcn[a0_0x5a11('0x1')],'function');}),it(a0_0x5a11('0x37'),function(){assert[a0_0x5a11('0x1b')](typeof stcn[a0_0x5a11('0x4a')],a0_0x5a11('0x5f'));}),it(a0_0x5a11('0x22'),function(){assert['equal'](typeof stcn[a0_0x5a11('0x48')],a0_0x5a11('0x5f'));}),it(a0_0x5a11('0x45'),function(){assert['equal'](typeof stcn[a0_0x5a11('0x48')],a0_0x5a11('0x5f'));}),it(a0_0x5a11('0x1e'),function(){assert['equal'](typeof stcn['getAggregates'],'function');}),it('getPartialFeatureVector\x20function\x20exists',function(){assert[a0_0x5a11('0x1b')](typeof stcn[a0_0x5a11('0x2e')],a0_0x5a11('0x5f'));}),it(a0_0x5a11('0x68'),function(){assert[a0_0x5a11('0x1b')](stcn['isMaster'](),!![]);}),it(a0_0x5a11('0xd'),function(){stcn[a0_0x5a11('0x47')](),assert[a0_0x5a11('0x1b')](stcn[a0_0x5a11('0x32')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x5a11('0x1b')](stcn[a0_0x5a11('0x4a')](0x0),![]);});}),describe(a0_0x5a11('0x63'),function(){it(a0_0x5a11('0x41'),function(){stcn[a0_0x5a11('0xf')](JSON['parse'](a0_0x5a11('0x25'))),stcn['processRecord'](JSON['parse'](a0_0x5a11('0x66'))),assert[a0_0x5a11('0x1b')](stcn['buffer'][a0_0x5a11('0x11')],0x2),assert[a0_0x5a11('0x1b')](stcn[a0_0x5a11('0x2a')][0x0][a0_0x5a11('0x34')],0x0),assert['equal'](stcn['buffer'][0x1][a0_0x5a11('0x34')],0x1),assert['equal'](stcn[a0_0x5a11('0x2a')][0x1]['v'],0x2);}),it(a0_0x5a11('0x3b'),function(){stcn[a0_0x5a11('0xf')](JSON['parse'](a0_0x5a11('0x5a'))),assert[a0_0x5a11('0x1b')](stcn['buffer']['length'],0x3),assert[a0_0x5a11('0x1b')](stcn['buffer'][0x2]['carno'],0x0),assert[a0_0x5a11('0x1b')](stcn[a0_0x5a11('0x2a')][0x2]['v'],0x0);}),it('stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion',function(){assert[a0_0x5a11('0x5d')](stcn[a0_0x5a11('0x2a')][0x1],{'stampm':0x155e9020680,'carno':0x1,'carno|max|21600000':0x1,'carno|max|86400000':0x1,'carno|ma|21600000':0.5,'carno|ma|604800000':0.5,'carno|ma|86400000':0.5,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':0.5,'carno|variance|86400000':0.5,'v':0x2,'v|max|21600000':0x2,'v|max|86400000':0x2,'v|ma|21600000':1.5,'v|ma|604800000':1.5,'v|ma|86400000':1.5,'v|min|21600000':0x1,'v|min|86400000':0x1,'v|variance|21600000':0.5,'v|variance|86400000':0.5});}),it('9\x20more\x20data\x20insertions',function(){for(let _0x2e0b96=0x1;_0x2e0b96<=0x9;_0x2e0b96++){let _0x9054b4=0x155e9020a68+_0x2e0b96*0x3e8,_0x4c374b=_0x2e0b96+0x1,_0x5ccc42=_0x2e0b96+0x2;stcn[a0_0x5a11('0xf')](JSON[a0_0x5a11('0x5e')](a0_0x5a11('0x60')+_0x9054b4+',\x22carno\x22:\x20'+_0x4c374b+a0_0x5a11('0x27')+_0x5ccc42+'}'));}assert[a0_0x5a11('0x1b')](stcn[a0_0x5a11('0x2a')][a0_0x5a11('0x11')],0xc),assert[a0_0x5a11('0x5d')](stcn['buffer'][0xb],{'stampm':0x155e9022d90,'carno':0xa,'carno|max|21600000':0xa,'carno|max|86400000':0xa,'carno|ma|21600000':4.583333333333333,'carno|ma|604800000':4.583333333333333,'carno|ma|86400000':4.583333333333333,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':12.083333333333336,'carno|variance|86400000':12.083333333333336,'v':0xb,'v|max|21600000':0xb,'v|max|86400000':0xb,'v|ma|21600000':5.5,'v|ma|604800000':5.5,'v|ma|86400000':5.5,'v|min|21600000':0x0,'v|min|86400000':0x0,'v|variance|21600000':0xd,'v|variance|86400000':0xd});}),it(a0_0x5a11('0x15'),function(){stcn[a0_0x5a11('0xf')](JSON[a0_0x5a11('0x5e')]('{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}')),stcn[a0_0x5a11('0xf')](JSON['parse'](a0_0x5a11('0x66'))),assert[a0_0x5a11('0x1b')](stcn[a0_0x5a11('0x2a')][a0_0x5a11('0x11')],0xc);});});});