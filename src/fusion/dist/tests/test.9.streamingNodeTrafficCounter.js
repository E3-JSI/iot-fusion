const a0_0xb110=[',\x22v\x22:\x20','getPartialFeatureVector','createClean','duplicate\x20insertions\x20test','v|variance|21600000','keys','parent','createAggregates','192.168.85.98:2181','createFolder','Base','streamingTrafficCounterNode','deepEqual','carno|ma|21600000','../nodes/streamingWeatherNode.js','connectToKafka\x20function\x20exists','carno|winbuf|21600000','checkDataAvailability','carno','deleteObsoleteRows','carno|variance|86400000','{\x22stampm\x22:\x201468493073000}','../nodes/streamingStaticNode.js','min','data\x20record\x20saved\x20correctly','setSlaveOffset','../nodes/streamingTrafficCounterNode.js','deleteObsoleteRows\x20function\x20exists','getOffsetTimestamp','v|winbuf|21600000','../nodes/streamingEnergyNode.js','v|ma|604800000','check\x20store\x20structure','../nodes/streamingSmartLampNode.js','carno|variance|21600000','getPartialFeatureVector\x20function\x20exists','createAggregates\x20function\x20exists','max','v|max|86400000','v|winbuf|86400000','checkDataAvailability\x20function\x20exists','Time','v|variance|86400000','Empty\x20values\x20in\x20message\x20set\x20to\x200','close','isMaster\x20function','v|min|21600000','mqtt','fusionNodeI','buffer','value','position','v|tick','winbuf','return\x20/\x22\x20+\x20this\x20+\x20\x22/','v|ma|21600','master\x20offset\x20set\x20correctly','length','../common/utils/fileManager.js','base','trafficcounter','carno|max|86400000','carno|min|86400000','parent\x20saved','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','broadcastAggregates','broadcastAggregates\x20function\x20exists','aggregate','master','function','removeFolder','aggregates\x20initialized\x20-\x20key\x20names','carno|ma|604800000','v|ma|21600000','name','rawstore','../nodes/streamingNode.js','initialization','master\x20flag\x20set\x20correctly','{\x22stampm\x22:\x201468493072000,\x20\x22carno\x22:\x201.0,\x20\x22v\x22:\x202\x20}','variance','apply','base\x20saved','offsetExists\x20function\x20exists','callback\x20function\x20should\x20be\x20set','carno|ma|86400000','isMaster','parse','setMasterOffset\x20function\x20exists','assert','master\x20set\x20correctly','qminer','../nodes/streamingTimeValueNode.js','constructor','nodes','equal','processRecordCb','processRecord','./db4/'];(function(_0x196499,_0xb110){const _0x4909ca=function(_0x517df7){while(--_0x517df7){_0x196499['push'](_0x196499['shift']());}},_0x109f0c=function(){const _0x542d6b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x53f35d,_0x5efb75,_0x149656,_0x233188){_0x233188=_0x233188||{};let _0x2f7173=_0x5efb75+'='+_0x149656,_0x20ab77=0x0;for(let _0x9556ef=0x0,_0xe5b139=_0x53f35d['length'];_0x9556ef<_0xe5b139;_0x9556ef++){const _0x46d4fc=_0x53f35d[_0x9556ef];_0x2f7173+=';\x20'+_0x46d4fc;const _0x4f48a6=_0x53f35d[_0x46d4fc];_0x53f35d['push'](_0x4f48a6),_0xe5b139=_0x53f35d['length'],_0x4f48a6!==!![]&&(_0x2f7173+='='+_0x4f48a6);}_0x233188['cookie']=_0x2f7173;},'removeCookie':function(){return'dev';},'getCookie':function(_0x34d3f6,_0x2b60aa){_0x34d3f6=_0x34d3f6||function(_0x3ab074){return _0x3ab074;};const _0x4504bf=_0x34d3f6(new RegExp('(?:^|;\x20)'+_0x2b60aa['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x28c58d=function(_0x18d7af,_0x14971b){_0x18d7af(++_0x14971b);};return _0x28c58d(_0x4909ca,_0xb110),_0x4504bf?decodeURIComponent(_0x4504bf[0x1]):undefined;}},_0x1bacf9=function(){const _0x266ee6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x266ee6['test'](_0x542d6b['removeCookie']['toString']());};_0x542d6b['updateCookie']=_0x1bacf9;let _0xbfd61='';const _0x8840bc=_0x542d6b['updateCookie']();if(!_0x8840bc)_0x542d6b['setCookie'](['*'],'counter',0x1);else _0x8840bc?_0xbfd61=_0x542d6b['getCookie'](null,'counter'):_0x542d6b['removeCookie']();};_0x109f0c();}(a0_0xb110,0xce));const a0_0x4909=function(_0x196499,_0xb110){_0x196499=_0x196499-0x0;let _0x4909ca=a0_0xb110[_0x196499];return _0x4909ca;};const a0_0x149656=function(){let _0x56e7ff=!![];return function(_0x2582ae,_0x2ac123){const _0x4bf8f6=_0x56e7ff?function(){if(_0x2ac123){const _0x43e6ac=_0x2ac123[a0_0x4909('0x4c')](_0x2582ae,arguments);return _0x2ac123=null,_0x43e6ac;}}:function(){};return _0x56e7ff=![],_0x4bf8f6;};}(),a0_0x5efb75=a0_0x149656(this,function(){const _0x27e2f9=function(){const _0x47b1cf=_0x27e2f9[a0_0x4909('0x58')](a0_0x4909('0x30'))()[a0_0x4909('0x58')](a0_0x4909('0x3a'));return!_0x47b1cf['test'](a0_0x5efb75);};return _0x27e2f9();});a0_0x5efb75();const streamingNode=require(a0_0x4909('0x47')),streamingEnergyNode=require(a0_0x4909('0x18')),streamingWeatherNode=require(a0_0x4909('0x8')),streamingStaticNode=require(a0_0x4909('0x10')),streamingTimeValueNode=require(a0_0x4909('0x57')),streamingSmartLampNode=require(a0_0x4909('0x1b')),streamingTrafficCounterNode=require(a0_0x4909('0x14')),fileManager=require(a0_0x4909('0x34')),qm=require(a0_0x4909('0x56')),fs=require('fs');var assert=require(a0_0x4909('0x54'));let connectionConfig={'zookeeper':a0_0x4909('0x2')},aggrConfigs={'trafficcounter':[{'field':'carno','tick':[{'type':a0_0x4909('0x2f'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x4909('0x11')},{'type':a0_0x4909('0x1f')},{'type':a0_0x4909('0x4b')}]},{'type':a0_0x4909('0x2f'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':'max'},{'type':a0_0x4909('0x4b')}]},{'type':a0_0x4909('0x2f'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'v','tick':[{'type':a0_0x4909('0x2f'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x4909('0x1f')},{'type':'variance'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x4909('0x11')},{'type':a0_0x4909('0x1f')},{'type':a0_0x4909('0x4b')}]},{'type':a0_0x4909('0x2f'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x4909('0x36'),'connection':{'type':a0_0x4909('0x29')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'trafficcounter','nodeid':a0_0x4909('0x36'),'aggrConfigId':'trafficcounter','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x4909('0x2c'),'name':a0_0x4909('0xc')},{'type':a0_0x4909('0x2c'),'name':a0_0x4909('0x31')},{'type':a0_0x4909('0x2c'),'name':'carno|ma|86400000'},{'type':'value','name':a0_0x4909('0x38')},{'type':'value','name':a0_0x4909('0x37')},{'type':'value','name':a0_0x4909('0xe')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x4909('0x2c'),'name':a0_0x4909('0xc')},{'type':'value','name':'v'},{'type':a0_0x4909('0x2c'),'name':a0_0x4909('0x50')},{'type':'value','name':a0_0x4909('0x38')},{'type':a0_0x4909('0x2c'),'name':a0_0x4909('0x37')},{'type':a0_0x4909('0x2c'),'name':'carno|variance|86400000'}]}]}]};function processRecordDummyCb(_0x984b56,_0x2a8575){return!![];}describe(a0_0x4909('0x5'),function(){let _0x3a106a,_0x391e95;before(function(){fileManager[a0_0x4909('0x41')](a0_0x4909('0x5d')),fileManager[a0_0x4909('0x3')](a0_0x4909('0x5d')),_0x3a106a=new qm[(a0_0x4909('0x4'))]({'dbPath':'./db4/','mode':a0_0x4909('0x60')}),stcn=new streamingTrafficCounterNode(_0x3a106a,connectionConfig,fusionConfig[a0_0x4909('0x59')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x3a106a[a0_0x4909('0x26')]();}),describe(a0_0x4909('0x48'),function(){it(a0_0x4909('0x4d'),function(){assert[a0_0x4909('0x5a')](_0x3a106a,stcn[a0_0x4909('0x35')]);}),it('check\x20if\x20store\x20exists',function(){assert[a0_0x4909('0x5a')](stcn[a0_0x4909('0x46')][a0_0x4909('0x45')],a0_0x4909('0x36'));}),it(a0_0x4909('0x1a'),function(){assert[a0_0x4909('0x6')](stcn[a0_0x4909('0x46')]['fields'],[{'id':0x0,'name':a0_0x4909('0x23'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x4909('0xc'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'v','type':'float','nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x4909('0x5a')](Object['keys'](stcn[a0_0x4909('0x3e')])['length'],0x1a);}),it(a0_0x4909('0x42'),function(){assert['deepEqual'](Object[a0_0x4909('0x63')](stcn['aggregate']),['carno|tick',a0_0x4909('0xa'),a0_0x4909('0x7'),'carno|min|21600000','carno|max|21600000',a0_0x4909('0x1c'),'carno|winbuf|86400000',a0_0x4909('0x50'),a0_0x4909('0x38'),a0_0x4909('0x37'),a0_0x4909('0xe'),'carno|winbuf|604800000',a0_0x4909('0x43'),a0_0x4909('0x2e'),a0_0x4909('0x17'),a0_0x4909('0x44'),a0_0x4909('0x28'),'v|max|21600000',a0_0x4909('0x62'),a0_0x4909('0x21'),'v|ma|86400000','v|min|86400000',a0_0x4909('0x20'),a0_0x4909('0x24'),'v|winbuf|604800000',a0_0x4909('0x19')]);}),it('config\x20saved',function(){assert[a0_0x4909('0x6')](stcn['config'],fusionConfig['nodes'][0x0]);}),it('fusionNodeI\x20correctly\x20saved',function(){assert[a0_0x4909('0x5a')](stcn[a0_0x4909('0x2a')],0x63);}),it(a0_0x4909('0x4f'),function(){assert[a0_0x4909('0x5a')](typeof stcn[a0_0x4909('0x5b')],'function');}),it(a0_0x4909('0x39'),function(){assert[a0_0x4909('0x5a')](stcn[a0_0x4909('0x0')],null);}),it('buffer\x20empty',function(){assert[a0_0x4909('0x6')](stcn[a0_0x4909('0x2b')],[]);}),it('buffer\x20position\x20is\x200',function(){assert[a0_0x4909('0x5a')](stcn[a0_0x4909('0x2d')],0x0);}),it(a0_0x4909('0x49'),function(){assert['equal'](stcn[a0_0x4909('0x3f')],!![]);}),it(a0_0x4909('0x27'),function(){assert['equal'](stcn[a0_0x4909('0x51')](),!![]);}),it(a0_0x4909('0x9'),function(){assert['equal'](typeof stcn['connectToKafka'],a0_0x4909('0x40'));}),it(a0_0x4909('0x3d'),function(){assert[a0_0x4909('0x5a')](typeof stcn[a0_0x4909('0x3c')],'function');}),it(a0_0x4909('0x1e'),function(){assert[a0_0x4909('0x5a')](typeof stcn[a0_0x4909('0x1')],'function');}),it(a0_0x4909('0x4e'),function(){assert[a0_0x4909('0x5a')](typeof stcn['offsetExists'],a0_0x4909('0x40'));}),it(a0_0x4909('0x15'),function(){assert[a0_0x4909('0x5a')](typeof stcn[a0_0x4909('0xd')],'function');}),it(a0_0x4909('0x22'),function(){assert[a0_0x4909('0x5a')](typeof stcn[a0_0x4909('0xb')],a0_0x4909('0x40'));}),it('setSlaveOffset\x20function\x20exists',function(){assert[a0_0x4909('0x5a')](typeof stcn[a0_0x4909('0x13')],a0_0x4909('0x40'));}),it('getOffsetTimestamp\x20function\x20exists',function(){assert[a0_0x4909('0x5a')](typeof stcn[a0_0x4909('0x16')],a0_0x4909('0x40'));}),it(a0_0x4909('0x53'),function(){assert['equal'](typeof stcn['getOffsetTimestamp'],a0_0x4909('0x40'));}),it('getAggregates\x20function\x20exists',function(){assert[a0_0x4909('0x5a')](typeof stcn['getAggregates'],a0_0x4909('0x40'));}),it(a0_0x4909('0x1d'),function(){assert[a0_0x4909('0x5a')](typeof stcn[a0_0x4909('0x5f')],a0_0x4909('0x40'));}),it(a0_0x4909('0x55'),function(){assert[a0_0x4909('0x5a')](stcn[a0_0x4909('0x51')](),!![]);}),it(a0_0x4909('0x32'),function(){stcn['setMasterOffset'](),assert[a0_0x4909('0x5a')](stcn['position'],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x4909('0x5a')](stcn[a0_0x4909('0x13')](0x0),![]);});}),describe('data\x20insertion',function(){it(a0_0x4909('0x12'),function(){stcn[a0_0x4909('0x5c')](JSON[a0_0x4909('0x52')]('{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}')),stcn[a0_0x4909('0x5c')](JSON['parse'](a0_0x4909('0x4a'))),assert['equal'](stcn[a0_0x4909('0x2b')][a0_0x4909('0x33')],0x2),assert[a0_0x4909('0x5a')](stcn[a0_0x4909('0x2b')][0x0][a0_0x4909('0xc')],0x0),assert[a0_0x4909('0x5a')](stcn[a0_0x4909('0x2b')][0x1][a0_0x4909('0xc')],0x1),assert[a0_0x4909('0x5a')](stcn[a0_0x4909('0x2b')][0x1]['v'],0x2);}),it(a0_0x4909('0x25'),function(){stcn[a0_0x4909('0x5c')](JSON['parse'](a0_0x4909('0xf'))),assert['equal'](stcn['buffer']['length'],0x3),assert['equal'](stcn['buffer'][0x2][a0_0x4909('0xc')],0x0),assert['equal'](stcn['buffer'][0x2]['v'],0x0);}),it(a0_0x4909('0x3b'),function(){assert['deepEqual'](stcn['buffer'][0x1],{'stampm':0x155e9020680,'carno':0x1,'carno|max|21600000':0x1,'carno|max|86400000':0x1,'carno|ma|21600000':0.5,'carno|ma|604800000':0.5,'carno|ma|86400000':0.5,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':0.5,'carno|variance|86400000':0.5,'v':0x2,'v|max|21600000':0x2,'v|max|86400000':0x2,'v|ma|21600000':1.5,'v|ma|604800000':1.5,'v|ma|86400000':1.5,'v|min|21600000':0x1,'v|min|86400000':0x1,'v|variance|21600000':0.5,'v|variance|86400000':0.5});}),it('9\x20more\x20data\x20insertions',function(){for(let _0x55193f=0x1;_0x55193f<=0x9;_0x55193f++){let _0x5e009b=0x155e9020a68+_0x55193f*0x3e8,_0x2e3171=_0x55193f+0x1,_0x4db8e9=_0x55193f+0x2;stcn[a0_0x4909('0x5c')](JSON[a0_0x4909('0x52')]('{\x22stampm\x22:'+_0x5e009b+',\x22carno\x22:\x20'+_0x2e3171+a0_0x4909('0x5e')+_0x4db8e9+'}'));}assert[a0_0x4909('0x5a')](stcn['buffer'][a0_0x4909('0x33')],0xc),assert[a0_0x4909('0x6')](stcn[a0_0x4909('0x2b')][0xb],{'stampm':0x155e9022d90,'carno':0xa,'carno|max|21600000':0xa,'carno|max|86400000':0xa,'carno|ma|21600000':4.583333333333333,'carno|ma|604800000':4.583333333333333,'carno|ma|86400000':4.583333333333333,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':12.083333333333336,'carno|variance|86400000':12.083333333333336,'v':0xb,'v|max|21600000':0xb,'v|max|86400000':0xb,'v|ma|21600000':5.5,'v|ma|604800000':5.5,'v|ma|86400000':5.5,'v|min|21600000':0x0,'v|min|86400000':0x0,'v|variance|21600000':0xd,'v|variance|86400000':0xd});}),it(a0_0x4909('0x61'),function(){stcn[a0_0x4909('0x5c')](JSON[a0_0x4909('0x52')]('{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}')),stcn[a0_0x4909('0x5c')](JSON[a0_0x4909('0x52')]('{\x22stampm\x22:\x201468493072000,\x20\x22carno\x22:\x201.0,\x20\x22v\x22:\x202\x20}')),assert['equal'](stcn[a0_0x4909('0x2b')][a0_0x4909('0x33')],0xc);});});});