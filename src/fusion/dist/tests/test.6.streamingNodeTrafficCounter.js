const a0_0x589f=['test','qminer','carno|variance|86400000','check\x20if\x20store\x20exists','isMaster','master\x20offset\x20set\x20correctly','{\x22stampm\x22:\x201468493072000,\x20\x22carno\x22:\x201.0,\x20\x22v\x22:\x202\x20}','removeFolder','carno|min|21600000','parent','carno|max|86400000','setMasterOffset','offsetExists\x20function\x20exists','mqtt','config\x20saved','carno|ma|604800000','getPartialFeatureVector\x20function\x20exists','trafficcounter','position','v|winbuf|21600000','carno|winbuf|86400000','v|variance|21600000','../nodes/streamingTrafficCounterNode.js','Time','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','checkDataAvailability','return\x20/\x22\x20+\x20this\x20+\x20\x22/','assert','connectToKafka','v|max|86400000','{\x22stampm\x22:','buffer\x20position\x20is\x200','winbuf','isMaster\x20function','buffer\x20empty','rawstore','9\x20more\x20data\x20insertions','v|tick','connectToKafka\x20function\x20exists','equal','offsetExists','../nodes/streamingTimeValueNode.js','carno|ma|21600000','aggregates\x20initialized\x20-\x20number','./db4/','192.168.85.98:2181','getOffsetTimestamp\x20function\x20exists','buffer','parse','processRecordCb','getPartialFeatureVector','Base','fusionNodeI\x20correctly\x20saved','Empty\x20values\x20in\x20message\x20set\x20to\x200','getOffsetTimestamp','max','keys',',\x22v\x22:\x20','carno','function','initialization','v|ma|21600000','parent\x20saved','value','setSlaveOffset\x20function\x20exists','../nodes/streamingStaticNode.js','carno|min|86400000','carno|ma|86400000','master','min','v|max|21600000','fusionNodeI','getAggregates','constructor','v|min|21600000','../common/utils/fileManager.js','config','createAggregates\x20function\x20exists','name','base','../nodes/streamingWeatherNode.js','carno|winbuf|604800000','processRecord','setMasterOffset\x20function\x20exists','length','carno|variance|21600000','aggregate','{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}','apply','variance','base\x20saved','v|winbuf|604800000','deepEqual','createClean','v|variance|86400000'];(function(_0x29f3f9,_0x589fe5){const _0x3cc4a4=function(_0x5e643a){while(--_0x5e643a){_0x29f3f9['push'](_0x29f3f9['shift']());}},_0xe9c6c4=function(){const _0xa66c5b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x148c57,_0x336aef,_0x1ecb13,_0x402db5){_0x402db5=_0x402db5||{};let _0x14efdb=_0x336aef+'='+_0x1ecb13,_0x449e77=0x0;for(let _0x7ddc6=0x0,_0x6e38e4=_0x148c57['length'];_0x7ddc6<_0x6e38e4;_0x7ddc6++){const _0x162206=_0x148c57[_0x7ddc6];_0x14efdb+=';\x20'+_0x162206;const _0x129c47=_0x148c57[_0x162206];_0x148c57['push'](_0x129c47),_0x6e38e4=_0x148c57['length'],_0x129c47!==!![]&&(_0x14efdb+='='+_0x129c47);}_0x402db5['cookie']=_0x14efdb;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4f07c0,_0x4fdf3c){_0x4f07c0=_0x4f07c0||function(_0x1591da){return _0x1591da;};const _0x163fdf=_0x4f07c0(new RegExp('(?:^|;\x20)'+_0x4fdf3c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x40d052=function(_0x4d1326,_0x1ed851){_0x4d1326(++_0x1ed851);};return _0x40d052(_0x3cc4a4,_0x589fe5),_0x163fdf?decodeURIComponent(_0x163fdf[0x1]):undefined;}},_0x2a7309=function(){const _0x2539d0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2539d0['test'](_0xa66c5b['removeCookie']['toString']());};_0xa66c5b['updateCookie']=_0x2a7309;let _0x229ad2='';const _0x3c7b46=_0xa66c5b['updateCookie']();if(!_0x3c7b46)_0xa66c5b['setCookie'](['*'],'counter',0x1);else _0x3c7b46?_0x229ad2=_0xa66c5b['getCookie'](null,'counter'):_0xa66c5b['removeCookie']();};_0xe9c6c4();}(a0_0x589f,0x114));const a0_0x3cc4=function(_0x29f3f9,_0x589fe5){_0x29f3f9=_0x29f3f9-0x0;let _0x3cc4a4=a0_0x589f[_0x29f3f9];return _0x3cc4a4;};const a0_0x1ecb13=function(){let _0x184054=!![];return function(_0x61525c,_0x2a9505){const _0x143912=_0x184054?function(){if(_0x2a9505){const _0x45adab=_0x2a9505[a0_0x3cc4('0x2')](_0x61525c,arguments);return _0x2a9505=null,_0x45adab;}}:function(){};return _0x184054=![],_0x143912;};}(),a0_0x336aef=a0_0x1ecb13(this,function(){const _0x1ff9dd=function(){const _0xbc0f72=_0x1ff9dd[a0_0x3cc4('0x52')](a0_0x3cc4('0x23'))()[a0_0x3cc4('0x52')](a0_0x3cc4('0x21'));return!_0xbc0f72[a0_0x3cc4('0x9')](a0_0x336aef);};return _0x1ff9dd();});a0_0x336aef();const streamingNode=require('../nodes/streamingNode.js'),streamingEnergyNode=require('../nodes/streamingEnergyNode.js'),streamingWeatherNode=require(a0_0x3cc4('0x59')),streamingStaticNode=require(a0_0x3cc4('0x4a')),streamingTimeValueNode=require(a0_0x3cc4('0x32')),streamingSmartLampNode=require('../nodes/streamingSmartLampNode.js'),streamingTrafficCounterNode=require(a0_0x3cc4('0x1f')),fileManager=require(a0_0x3cc4('0x54')),qm=require(a0_0x3cc4('0xa')),fs=require('fs');var assert=require(a0_0x3cc4('0x24'));let connectionConfig={'zookeeper':a0_0x3cc4('0x36')},aggrConfigs={'trafficcounter':[{'field':a0_0x3cc4('0x43'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3cc4('0x4e')},{'type':a0_0x3cc4('0x40')},{'type':'variance'}]},{'type':a0_0x3cc4('0x29'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3cc4('0x4e')},{'type':a0_0x3cc4('0x40')},{'type':a0_0x3cc4('0x3')}]},{'type':a0_0x3cc4('0x29'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'v','tick':[{'type':a0_0x3cc4('0x29'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3cc4('0x4e')},{'type':a0_0x3cc4('0x40')},{'type':'variance'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x3cc4('0x4e')},{'type':a0_0x3cc4('0x40')},{'type':a0_0x3cc4('0x3')}]},{'type':a0_0x3cc4('0x29'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x3cc4('0x1a'),'connection':{'type':a0_0x3cc4('0x16')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x3cc4('0x1a'),'nodeid':a0_0x3cc4('0x1a'),'aggrConfigId':a0_0x3cc4('0x1a'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x3cc4('0x48'),'name':a0_0x3cc4('0x43')},{'type':a0_0x3cc4('0x48'),'name':'v|ma|21600'},{'type':'value','name':a0_0x3cc4('0x4c')},{'type':a0_0x3cc4('0x48'),'name':a0_0x3cc4('0x4b')},{'type':'value','name':a0_0x3cc4('0x13')},{'type':a0_0x3cc4('0x48'),'name':'carno|variance|86400000'}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x3cc4('0x48'),'name':a0_0x3cc4('0x43')},{'type':a0_0x3cc4('0x48'),'name':'v'},{'type':'value','name':a0_0x3cc4('0x4c')},{'type':a0_0x3cc4('0x48'),'name':'carno|min|86400000'},{'type':a0_0x3cc4('0x48'),'name':a0_0x3cc4('0x13')},{'type':a0_0x3cc4('0x48'),'name':a0_0x3cc4('0xb')}]}]}]};function processRecordDummyCb(_0x320c1d,_0x2bb80e){return!![];}describe('streamingTrafficCounterNode',function(){let _0x512eaf,_0x2d2267;before(function(){fileManager[a0_0x3cc4('0x10')](a0_0x3cc4('0x35')),fileManager['createFolder'](a0_0x3cc4('0x35')),_0x512eaf=new qm[(a0_0x3cc4('0x3c'))]({'dbPath':a0_0x3cc4('0x35'),'mode':a0_0x3cc4('0x7')}),stcn=new streamingTrafficCounterNode(_0x512eaf,connectionConfig,fusionConfig['nodes'][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x512eaf['close']();}),describe(a0_0x3cc4('0x45'),function(){it(a0_0x3cc4('0x4'),function(){assert[a0_0x3cc4('0x30')](_0x512eaf,stcn[a0_0x3cc4('0x58')]);}),it(a0_0x3cc4('0xc'),function(){assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x2c')][a0_0x3cc4('0x57')],'trafficcounter');}),it('check\x20store\x20structure',function(){assert[a0_0x3cc4('0x6')](stcn[a0_0x3cc4('0x2c')]['fields'],[{'id':0x0,'name':a0_0x3cc4('0x20'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x3cc4('0x43'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'v','type':'float','nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x3cc4('0x34'),function(){assert['equal'](Object[a0_0x3cc4('0x41')](stcn['aggregate'])[a0_0x3cc4('0x5d')],0x1a);}),it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert[a0_0x3cc4('0x6')](Object[a0_0x3cc4('0x41')](stcn[a0_0x3cc4('0x0')]),['carno|tick','carno|winbuf|21600000',a0_0x3cc4('0x33'),a0_0x3cc4('0x11'),'carno|max|21600000',a0_0x3cc4('0x5e'),a0_0x3cc4('0x1d'),'carno|ma|86400000',a0_0x3cc4('0x4b'),a0_0x3cc4('0x13'),a0_0x3cc4('0xb'),a0_0x3cc4('0x5a'),a0_0x3cc4('0x18'),a0_0x3cc4('0x2e'),a0_0x3cc4('0x1c'),a0_0x3cc4('0x46'),a0_0x3cc4('0x53'),a0_0x3cc4('0x4f'),a0_0x3cc4('0x1e'),'v|winbuf|86400000','v|ma|86400000','v|min|86400000',a0_0x3cc4('0x26'),a0_0x3cc4('0x8'),a0_0x3cc4('0x5'),'v|ma|604800000']);}),it(a0_0x3cc4('0x17'),function(){assert['deepEqual'](stcn[a0_0x3cc4('0x55')],fusionConfig['nodes'][0x0]);}),it(a0_0x3cc4('0x3d'),function(){assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x50')],0x63);}),it('callback\x20function\x20should\x20be\x20set',function(){assert[a0_0x3cc4('0x30')](typeof stcn[a0_0x3cc4('0x3a')],'function');}),it(a0_0x3cc4('0x47'),function(){assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x12')],null);}),it(a0_0x3cc4('0x2b'),function(){assert[a0_0x3cc4('0x6')](stcn[a0_0x3cc4('0x38')],[]);}),it(a0_0x3cc4('0x28'),function(){assert['equal'](stcn['position'],0x0);}),it('master\x20flag\x20set\x20correctly',function(){assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x4d')],!![]);}),it(a0_0x3cc4('0x2a'),function(){assert['equal'](stcn[a0_0x3cc4('0xd')](),!![]);}),it(a0_0x3cc4('0x2f'),function(){assert[a0_0x3cc4('0x30')](typeof stcn[a0_0x3cc4('0x25')],'function');}),it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof stcn['broadcastAggregates'],'function');}),it(a0_0x3cc4('0x56'),function(){assert['equal'](typeof stcn['createAggregates'],'function');}),it(a0_0x3cc4('0x15'),function(){assert[a0_0x3cc4('0x30')](typeof stcn[a0_0x3cc4('0x31')],'function');}),it('deleteObsoleteRows\x20function\x20exists',function(){assert[a0_0x3cc4('0x30')](typeof stcn['deleteObsoleteRows'],a0_0x3cc4('0x44'));}),it('checkDataAvailability\x20function\x20exists',function(){assert['equal'](typeof stcn[a0_0x3cc4('0x22')],a0_0x3cc4('0x44'));}),it(a0_0x3cc4('0x49'),function(){assert[a0_0x3cc4('0x30')](typeof stcn['setSlaveOffset'],a0_0x3cc4('0x44'));}),it(a0_0x3cc4('0x37'),function(){assert[a0_0x3cc4('0x30')](typeof stcn[a0_0x3cc4('0x3f')],'function');}),it(a0_0x3cc4('0x5c'),function(){assert[a0_0x3cc4('0x30')](typeof stcn[a0_0x3cc4('0x3f')],'function');}),it('getAggregates\x20function\x20exists',function(){assert[a0_0x3cc4('0x30')](typeof stcn[a0_0x3cc4('0x51')],a0_0x3cc4('0x44'));}),it(a0_0x3cc4('0x19'),function(){assert[a0_0x3cc4('0x30')](typeof stcn[a0_0x3cc4('0x3b')],a0_0x3cc4('0x44'));}),it('master\x20set\x20correctly',function(){assert['equal'](stcn[a0_0x3cc4('0xd')](),!![]);}),it(a0_0x3cc4('0xe'),function(){stcn[a0_0x3cc4('0x14')](),assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x1b')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert['equal'](stcn['setSlaveOffset'](0x0),![]);});}),describe('data\x20insertion',function(){it('data\x20record\x20saved\x20correctly',function(){stcn[a0_0x3cc4('0x5b')](JSON[a0_0x3cc4('0x39')](a0_0x3cc4('0x1'))),stcn[a0_0x3cc4('0x5b')](JSON[a0_0x3cc4('0x39')]('{\x22stampm\x22:\x201468493072000,\x20\x22carno\x22:\x201.0,\x20\x22v\x22:\x202\x20}')),assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x38')][a0_0x3cc4('0x5d')],0x2),assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x38')][0x0][a0_0x3cc4('0x43')],0x0),assert[a0_0x3cc4('0x30')](stcn['buffer'][0x1][a0_0x3cc4('0x43')],0x1),assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x38')][0x1]['v'],0x2);}),it(a0_0x3cc4('0x3e'),function(){stcn[a0_0x3cc4('0x5b')](JSON[a0_0x3cc4('0x39')]('{\x22stampm\x22:\x201468493073000}')),assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x38')][a0_0x3cc4('0x5d')],0x3),assert['equal'](stcn['buffer'][0x2]['carno'],0x0);}),it('stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion',function(){assert[a0_0x3cc4('0x6')](stcn[a0_0x3cc4('0x38')][0x1],{'stampm':0x155e9020680,'carno':0x1,'carno|max|21600000':0x1,'carno|max|86400000':0x1,'carno|ma|21600000':0.5,'carno|ma|604800000':0.5,'carno|ma|86400000':0.5,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':0.5,'carno|variance|86400000':0.5,'v':0x2,'v|max|21600000':0x2,'v|max|86400000':0x2,'v|ma|21600000':1.5,'v|ma|604800000':1.5,'v|ma|86400000':1.5,'v|min|21600000':0x1,'v|min|86400000':0x1,'v|variance|21600000':0.5,'v|variance|86400000':0.5});}),it(a0_0x3cc4('0x2d'),function(){for(let _0x5102f1=0x1;_0x5102f1<=0x9;_0x5102f1++){let _0x20218a=0x155e9020a68+_0x5102f1*0x3e8,_0x3778f9=_0x5102f1+0x1,_0x83b64e=_0x5102f1+0x2;stcn['processRecord'](JSON[a0_0x3cc4('0x39')](a0_0x3cc4('0x27')+_0x20218a+',\x22carno\x22:\x20'+_0x3778f9+a0_0x3cc4('0x42')+_0x83b64e+'}'));}assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x38')]['length'],0xc),assert[a0_0x3cc4('0x6')](stcn['buffer'][0xb],{'stampm':0x155e9022d90,'carno':0xa,'carno|max|21600000':0xa,'carno|max|86400000':0xa,'carno|ma|21600000':4.583333333333333,'carno|ma|604800000':4.583333333333333,'carno|ma|86400000':4.583333333333333,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':12.083333333333336,'carno|variance|86400000':12.083333333333336,'v':0xb,'v|max|21600000':0xb,'v|max|86400000':0xb,'v|ma|21600000':5.5,'v|ma|604800000':5.5,'v|ma|86400000':5.5,'v|min|21600000':0x0,'v|min|86400000':0x0,'v|variance|21600000':0xd,'v|variance|86400000':0xd});}),it('duplicate\x20insertions\x20test',function(){stcn[a0_0x3cc4('0x5b')](JSON[a0_0x3cc4('0x39')]('{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}')),stcn[a0_0x3cc4('0x5b')](JSON[a0_0x3cc4('0x39')](a0_0x3cc4('0xf'))),assert[a0_0x3cc4('0x30')](stcn[a0_0x3cc4('0x38')][a0_0x3cc4('0x5d')],0xc);});});});