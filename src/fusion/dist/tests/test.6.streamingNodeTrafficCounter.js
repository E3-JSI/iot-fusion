const a0_0x4c4b=['streamingTrafficCounterNode','data\x20record\x20saved\x20correctly','getPartialFeatureVector\x20function\x20exists','slave\x20offset\x20set\x20correctly:\x20no\x20data','trafficcounter','duplicate\x20insertions\x20test','createAggregates\x20function\x20exists','length','carno|ma|86400000','float','min','variance','v|min|21600000','getPartialFeatureVector','carno|variance|21600000','config\x20saved','processRecordCb','v|variance|86400000','v|winbuf|86400000','carno|max|86400000','carno','test','offsetExists\x20function\x20exists','{\x22stampm\x22:\x201468493073000}','v|variance|21600000','../common/utils/fileManager.js','offsetExists','9\x20more\x20data\x20insertions','getAggregates\x20function\x20exists','createFolder','v|winbuf|604800000','v|max|21600000','fusionNodeI\x20correctly\x20saved','checkDataAvailability','parse','deepEqual','carno|ma|604800000','processRecord','getOffsetTimestamp','check\x20if\x20store\x20exists','../nodes/streamingStaticNode.js','v|ma|86400000','setMasterOffset\x20function\x20exists','apply','close','../nodes/streamingTrafficCounterNode.js','192.168.85.98:2181','config','buffer','../nodes/streamingTimeValueNode.js','aggregates\x20initialized\x20-\x20key\x20names','parent\x20saved','../nodes/streamingWeatherNode.js','isMaster','createAggregates','createClean','../nodes/streamingEnergyNode.js','winbuf','{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}','../nodes/streamingSmartLampNode.js','master\x20set\x20correctly','../nodes/streamingNode.js','name','v|ma|604800000','carno|winbuf|86400000',',\x22carno\x22:\x20','keys','{\x22stampm\x22:\x201468493072000,\x20\x22carno\x22:\x201.0,\x20\x22v\x22:\x202\x20}','fusionNodeI','carno|tick','v|ma|21600000','carno|ma|21600000','v|max|86400000','equal','./db4/','setSlaveOffset','value','carno|variance|86400000','aggregate','getAggregates','function','data\x20insertion','carno|winbuf|604800000','nodes','fields','setMasterOffset','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','parent','carno|winbuf|21600000','master\x20flag\x20set\x20correctly','removeFolder','rawstore','constructor','max','broadcastAggregates\x20function\x20exists','v|ma|21600','checkDataAvailability\x20function\x20exists','callback\x20function\x20should\x20be\x20set','buffer\x20empty','connectToKafka'];(function(_0x392b87,_0x4c4bd7){const _0x53fe89=function(_0x5a75c3){while(--_0x5a75c3){_0x392b87['push'](_0x392b87['shift']());}},_0x1037f8=function(){const _0x85d5a5={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3c9085,_0x4867bb,_0x3fc7a7,_0x568122){_0x568122=_0x568122||{};let _0x34e802=_0x4867bb+'='+_0x3fc7a7,_0xbb33a3=0x0;for(let _0x4e3079=0x0,_0x51d797=_0x3c9085['length'];_0x4e3079<_0x51d797;_0x4e3079++){const _0x5debba=_0x3c9085[_0x4e3079];_0x34e802+=';\x20'+_0x5debba;const _0x161172=_0x3c9085[_0x5debba];_0x3c9085['push'](_0x161172),_0x51d797=_0x3c9085['length'],_0x161172!==!![]&&(_0x34e802+='='+_0x161172);}_0x568122['cookie']=_0x34e802;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2f116f,_0x377ac3){_0x2f116f=_0x2f116f||function(_0x1fb92b){return _0x1fb92b;};const _0x3b303b=_0x2f116f(new RegExp('(?:^|;\x20)'+_0x377ac3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x27bc37=function(_0x1a841b,_0x3005fc){_0x1a841b(++_0x3005fc);};return _0x27bc37(_0x53fe89,_0x4c4bd7),_0x3b303b?decodeURIComponent(_0x3b303b[0x1]):undefined;}},_0x16949b=function(){const _0x3a43df=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3a43df['test'](_0x85d5a5['removeCookie']['toString']());};_0x85d5a5['updateCookie']=_0x16949b;let _0x197e31='';const _0x5369ea=_0x85d5a5['updateCookie']();if(!_0x5369ea)_0x85d5a5['setCookie'](['*'],'counter',0x1);else _0x5369ea?_0x197e31=_0x85d5a5['getCookie'](null,'counter'):_0x85d5a5['removeCookie']();};_0x1037f8();}(a0_0x4c4b,0x154));const a0_0x53fe=function(_0x392b87,_0x4c4bd7){_0x392b87=_0x392b87-0x0;let _0x53fe89=a0_0x4c4b[_0x392b87];return _0x53fe89;};const a0_0x3fc7a7=function(){let _0x1d6e23=!![];return function(_0x632c70,_0x241ffe){const _0x1acfb3=_0x1d6e23?function(){if(_0x241ffe){const _0x84e15a=_0x241ffe[a0_0x53fe('0x3')](_0x632c70,arguments);return _0x241ffe=null,_0x84e15a;}}:function(){};return _0x1d6e23=![],_0x1acfb3;};}(),a0_0x4867bb=a0_0x3fc7a7(this,function(){const _0x2235a2=function(){const _0x4ad735=_0x2235a2[a0_0x53fe('0x34')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x4ad735[a0_0x53fe('0x51')](a0_0x4867bb);};return _0x2235a2();});a0_0x4867bb();const streamingNode=require(a0_0x53fe('0x15')),streamingEnergyNode=require(a0_0x53fe('0x10')),streamingWeatherNode=require(a0_0x53fe('0xc')),streamingStaticNode=require(a0_0x53fe('0x0')),streamingTimeValueNode=require(a0_0x53fe('0x9')),streamingSmartLampNode=require(a0_0x53fe('0x13')),streamingTrafficCounterNode=require(a0_0x53fe('0x5')),fileManager=require(a0_0x53fe('0x55')),qm=require('qminer'),fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':a0_0x53fe('0x6')},aggrConfigs={'trafficcounter':[{'field':a0_0x53fe('0x50'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x53fe('0x46')},{'type':'max'},{'type':'variance'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x53fe('0x46')},{'type':a0_0x53fe('0x35')},{'type':'variance'}]},{'type':a0_0x53fe('0x11'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'v','tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x53fe('0x46')},{'type':a0_0x53fe('0x35')},{'type':a0_0x53fe('0x47')}]},{'type':a0_0x53fe('0x11'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x53fe('0x46')},{'type':a0_0x53fe('0x35')},{'type':a0_0x53fe('0x47')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x53fe('0x40'),'connection':{'type':'mqtt'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'trafficcounter','nodeid':a0_0x53fe('0x40'),'aggrConfigId':a0_0x53fe('0x40'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x53fe('0x24'),'name':'carno'},{'type':'value','name':a0_0x53fe('0x37')},{'type':'value','name':a0_0x53fe('0x44')},{'type':a0_0x53fe('0x24'),'name':'carno|min|86400000'},{'type':a0_0x53fe('0x24'),'name':a0_0x53fe('0x4f')},{'type':a0_0x53fe('0x24'),'name':a0_0x53fe('0x25')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x53fe('0x24'),'name':a0_0x53fe('0x50')},{'type':a0_0x53fe('0x24'),'name':'v'},{'type':'value','name':a0_0x53fe('0x44')},{'type':'value','name':'carno|min|86400000'},{'type':a0_0x53fe('0x24'),'name':'carno|max|86400000'},{'type':'value','name':a0_0x53fe('0x25')}]}]}]};function processRecordDummyCb(_0x1d5b75,_0x361ecd){return!![];}describe(a0_0x53fe('0x3c'),function(){let _0x1d57e9,_0x258306;before(function(){fileManager[a0_0x53fe('0x32')](a0_0x53fe('0x22')),fileManager[a0_0x53fe('0x59')]('./db4/'),_0x1d57e9=new qm['Base']({'dbPath':a0_0x53fe('0x22'),'mode':a0_0x53fe('0xf')}),stcn=new streamingTrafficCounterNode(_0x1d57e9,connectionConfig,fusionConfig[a0_0x53fe('0x2b')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x1d57e9[a0_0x53fe('0x4')]();}),describe('initialization',function(){it('base\x20saved',function(){assert[a0_0x53fe('0x21')](_0x1d57e9,stcn['base']);}),it(a0_0x53fe('0x63'),function(){assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0x33')][a0_0x53fe('0x16')],a0_0x53fe('0x40'));}),it('check\x20store\x20structure',function(){assert[a0_0x53fe('0x5f')](stcn[a0_0x53fe('0x33')][a0_0x53fe('0x2c')],[{'id':0x0,'name':'Time','type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x53fe('0x50'),'type':a0_0x53fe('0x45'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'v','type':a0_0x53fe('0x45'),'nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x53fe('0x21')](Object['keys'](stcn['aggregate'])[a0_0x53fe('0x43')],0x1a);}),it(a0_0x53fe('0xa'),function(){assert[a0_0x53fe('0x5f')](Object[a0_0x53fe('0x1a')](stcn[a0_0x53fe('0x26')]),[a0_0x53fe('0x1d'),a0_0x53fe('0x30'),a0_0x53fe('0x1f'),'carno|min|21600000','carno|max|21600000',a0_0x53fe('0x4a'),a0_0x53fe('0x18'),a0_0x53fe('0x44'),'carno|min|86400000','carno|max|86400000',a0_0x53fe('0x25'),a0_0x53fe('0x2a'),a0_0x53fe('0x60'),'v|tick','v|winbuf|21600000',a0_0x53fe('0x1e'),a0_0x53fe('0x48'),a0_0x53fe('0x5b'),a0_0x53fe('0x54'),a0_0x53fe('0x4e'),a0_0x53fe('0x1'),'v|min|86400000',a0_0x53fe('0x20'),a0_0x53fe('0x4d'),a0_0x53fe('0x5a'),a0_0x53fe('0x17')]);}),it(a0_0x53fe('0x4b'),function(){assert[a0_0x53fe('0x5f')](stcn[a0_0x53fe('0x7')],fusionConfig[a0_0x53fe('0x2b')][0x0]);}),it(a0_0x53fe('0x5c'),function(){assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0x1c')],0x63);}),it(a0_0x53fe('0x39'),function(){assert[a0_0x53fe('0x21')](typeof stcn[a0_0x53fe('0x4c')],'function');}),it(a0_0x53fe('0xb'),function(){assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0x2f')],null);}),it(a0_0x53fe('0x3a'),function(){assert['deepEqual'](stcn[a0_0x53fe('0x8')],[]);}),it('buffer\x20position\x20is\x200',function(){assert['equal'](stcn['position'],0x0);}),it(a0_0x53fe('0x31'),function(){assert[a0_0x53fe('0x21')](stcn['master'],!![]);}),it('isMaster\x20function',function(){assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0xd')](),!![]);}),it('connectToKafka\x20function\x20exists',function(){assert[a0_0x53fe('0x21')](typeof stcn[a0_0x53fe('0x3b')],a0_0x53fe('0x28'));}),it(a0_0x53fe('0x36'),function(){assert['equal'](typeof stcn['broadcastAggregates'],a0_0x53fe('0x28'));}),it(a0_0x53fe('0x42'),function(){assert[a0_0x53fe('0x21')](typeof stcn[a0_0x53fe('0xe')],'function');}),it(a0_0x53fe('0x52'),function(){assert[a0_0x53fe('0x21')](typeof stcn[a0_0x53fe('0x56')],a0_0x53fe('0x28'));}),it('deleteObsoleteRows\x20function\x20exists',function(){assert[a0_0x53fe('0x21')](typeof stcn['deleteObsoleteRows'],a0_0x53fe('0x28'));}),it(a0_0x53fe('0x38'),function(){assert[a0_0x53fe('0x21')](typeof stcn[a0_0x53fe('0x5d')],'function');}),it('setSlaveOffset\x20function\x20exists',function(){assert[a0_0x53fe('0x21')](typeof stcn[a0_0x53fe('0x23')],a0_0x53fe('0x28'));}),it('getOffsetTimestamp\x20function\x20exists',function(){assert['equal'](typeof stcn[a0_0x53fe('0x62')],a0_0x53fe('0x28'));}),it(a0_0x53fe('0x2'),function(){assert[a0_0x53fe('0x21')](typeof stcn[a0_0x53fe('0x62')],a0_0x53fe('0x28'));}),it(a0_0x53fe('0x58'),function(){assert['equal'](typeof stcn[a0_0x53fe('0x27')],a0_0x53fe('0x28'));}),it(a0_0x53fe('0x3e'),function(){assert[a0_0x53fe('0x21')](typeof stcn[a0_0x53fe('0x49')],a0_0x53fe('0x28'));}),it(a0_0x53fe('0x14'),function(){assert['equal'](stcn[a0_0x53fe('0xd')](),!![]);}),it('master\x20offset\x20set\x20correctly',function(){stcn[a0_0x53fe('0x2d')](),assert[a0_0x53fe('0x21')](stcn['position'],-0x1);}),it(a0_0x53fe('0x3f'),function(){assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0x23')](0x0),![]);});}),describe(a0_0x53fe('0x29'),function(){it(a0_0x53fe('0x3d'),function(){stcn[a0_0x53fe('0x61')](JSON['parse']('{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}')),stcn['processRecord'](JSON[a0_0x53fe('0x5e')](a0_0x53fe('0x1b'))),assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0x8')][a0_0x53fe('0x43')],0x2),assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0x8')][0x0]['carno'],0x0),assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0x8')][0x1][a0_0x53fe('0x50')],0x1),assert['equal'](stcn[a0_0x53fe('0x8')][0x1]['v'],0x2);}),it('Empty\x20values\x20in\x20message\x20set\x20to\x200',function(){stcn[a0_0x53fe('0x61')](JSON['parse'](a0_0x53fe('0x53'))),assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0x8')][a0_0x53fe('0x43')],0x3),assert['equal'](stcn[a0_0x53fe('0x8')][0x2][a0_0x53fe('0x50')],0x0);}),it(a0_0x53fe('0x2e'),function(){assert[a0_0x53fe('0x5f')](stcn[a0_0x53fe('0x8')][0x1],{'stampm':0x155e9020680,'carno':0x1,'carno|max|21600000':0x1,'carno|max|86400000':0x1,'carno|ma|21600000':0.5,'carno|ma|604800000':0.5,'carno|ma|86400000':0.5,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':0.5,'carno|variance|86400000':0.5,'v':0x2,'v|max|21600000':0x2,'v|max|86400000':0x2,'v|ma|21600000':1.5,'v|ma|604800000':1.5,'v|ma|86400000':1.5,'v|min|21600000':0x1,'v|min|86400000':0x1,'v|variance|21600000':0.5,'v|variance|86400000':0.5});}),it(a0_0x53fe('0x57'),function(){for(let _0x57c485=0x1;_0x57c485<=0x9;_0x57c485++){let _0x2f4d87=0x155e9020a68+_0x57c485*0x3e8,_0x441dd6=_0x57c485+0x1,_0x2172a5=_0x57c485+0x2;stcn['processRecord'](JSON['parse']('{\x22stampm\x22:'+_0x2f4d87+a0_0x53fe('0x19')+_0x441dd6+',\x22v\x22:\x20'+_0x2172a5+'}'));}assert['equal'](stcn[a0_0x53fe('0x8')]['length'],0xc),assert[a0_0x53fe('0x5f')](stcn[a0_0x53fe('0x8')][0xb],{'stampm':0x155e9022d90,'carno':0xa,'carno|max|21600000':0xa,'carno|max|86400000':0xa,'carno|ma|21600000':4.583333333333333,'carno|ma|604800000':4.583333333333333,'carno|ma|86400000':4.583333333333333,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':12.083333333333336,'carno|variance|86400000':12.083333333333336,'v':0xb,'v|max|21600000':0xb,'v|max|86400000':0xb,'v|ma|21600000':5.5,'v|ma|604800000':5.5,'v|ma|86400000':5.5,'v|min|21600000':0x0,'v|min|86400000':0x0,'v|variance|21600000':0xd,'v|variance|86400000':0xd});}),it(a0_0x53fe('0x41'),function(){stcn[a0_0x53fe('0x61')](JSON[a0_0x53fe('0x5e')](a0_0x53fe('0x12'))),stcn['processRecord'](JSON['parse'](a0_0x53fe('0x1b'))),assert[a0_0x53fe('0x21')](stcn[a0_0x53fe('0x8')][a0_0x53fe('0x43')],0xc);});});});