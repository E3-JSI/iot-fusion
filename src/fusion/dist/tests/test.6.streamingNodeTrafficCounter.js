const a0_0x1bdc=['carno|max|21600000','processRecord','carno|ma|604800000','v|ma|86400000','carno|ma|21600000','aggregate','variance','max','v|max|86400000','slave\x20offset\x20set\x20correctly:\x20no\x20data','getAggregates','fusionNodeI\x20correctly\x20saved','v|max|21600000','master\x20flag\x20set\x20correctly','float','deleteObsoleteRows','../common/utils/fileManager.js','trafficcounter','buffer\x20empty','deepEqual','streamingTrafficCounterNode','getOffsetTimestamp','data\x20insertion','min','nodes','v|variance|86400000','createAggregates\x20function\x20exists','rawstore','function','config\x20saved','parent','carno|min|21600000','v|winbuf|604800000','../nodes/streamingTimeValueNode.js','master\x20offset\x20set\x20correctly','buffer\x20position\x20is\x200','winbuf','v|ma|604800000','broadcastAggregates','v|min|86400000','isMaster\x20function','offsetExists\x20function\x20exists','./db4/','../nodes/streamingNode.js','{\x22stampm\x22:','connectToKafka','deleteObsoleteRows\x20function\x20exists','v|variance|21600000','../nodes/streamingEnergyNode.js','aggregates\x20initialized\x20-\x20key\x20names','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../nodes/streamingTrafficCounterNode.js','isMaster','buffer','v|ma|21600000','parent\x20saved','broadcastAggregates\x20function\x20exists','constructor','value','callback\x20function\x20should\x20be\x20set','carno|min|86400000','Empty\x20values\x20in\x20message\x20set\x20to\x200','carno|winbuf|86400000','connectToKafka\x20function\x20exists','{\x22stampm\x22:\x201468493072000,\x20\x22carno\x22:\x201.0,\x20\x22v\x22:\x202\x20}','Time','getPartialFeatureVector\x20function\x20exists','aggregates\x20initialized\x20-\x20number','position','carno','duplicate\x20insertions\x20test','carno|winbuf|21600000','length','equal','getOffsetTimestamp\x20function\x20exists','carno|max|86400000','master','setSlaveOffset','../nodes/streamingWeatherNode.js',',\x22carno\x22:\x20','parse','createFolder','datetime','v|winbuf|21600000','check\x20store\x20structure','base\x20saved','carno|variance|86400000','keys','qminer','removeFolder','carno|ma|86400000','{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}','setMasterOffset\x20function\x20exists','assert','master\x20set\x20correctly','setMasterOffset','test','data\x20record\x20saved\x20correctly','v|winbuf|86400000','v|tick','setSlaveOffset\x20function\x20exists','name','carno|winbuf|604800000'];(function(_0x501536,_0x1bdc22){const _0x2e6393=function(_0x32f558){while(--_0x32f558){_0x501536['push'](_0x501536['shift']());}},_0x33516a=function(){const _0x1ecb0b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x438e7f,_0x83b3a9,_0x4c3788,_0x390438){_0x390438=_0x390438||{};let _0x5a34c5=_0x83b3a9+'='+_0x4c3788,_0x23431b=0x0;for(let _0x578007=0x0,_0x5c2d90=_0x438e7f['length'];_0x578007<_0x5c2d90;_0x578007++){const _0x3950a3=_0x438e7f[_0x578007];_0x5a34c5+=';\x20'+_0x3950a3;const _0x3cf2da=_0x438e7f[_0x3950a3];_0x438e7f['push'](_0x3cf2da),_0x5c2d90=_0x438e7f['length'],_0x3cf2da!==!![]&&(_0x5a34c5+='='+_0x3cf2da);}_0x390438['cookie']=_0x5a34c5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2c2c4a,_0xfc92c2){_0x2c2c4a=_0x2c2c4a||function(_0xd3ad9b){return _0xd3ad9b;};const _0x2400c6=_0x2c2c4a(new RegExp('(?:^|;\x20)'+_0xfc92c2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5e99e2=function(_0x4ed63a,_0x362726){_0x4ed63a(++_0x362726);};return _0x5e99e2(_0x2e6393,_0x1bdc22),_0x2400c6?decodeURIComponent(_0x2400c6[0x1]):undefined;}},_0x2d55de=function(){const _0x20ed39=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x20ed39['test'](_0x1ecb0b['removeCookie']['toString']());};_0x1ecb0b['updateCookie']=_0x2d55de;let _0x1ac34f='';const _0x45e9c8=_0x1ecb0b['updateCookie']();if(!_0x45e9c8)_0x1ecb0b['setCookie'](['*'],'counter',0x1);else _0x45e9c8?_0x1ac34f=_0x1ecb0b['getCookie'](null,'counter'):_0x1ecb0b['removeCookie']();};_0x33516a();}(a0_0x1bdc,0x1b4));const a0_0x2e63=function(_0x501536,_0x1bdc22){_0x501536=_0x501536-0x0;let _0x2e6393=a0_0x1bdc[_0x501536];return _0x2e6393;};const a0_0x4c3788=function(){let _0x560ceb=!![];return function(_0x3ee396,_0x17b2f9){const _0x60de48=_0x560ceb?function(){if(_0x17b2f9){const _0x35cd71=_0x17b2f9['apply'](_0x3ee396,arguments);return _0x17b2f9=null,_0x35cd71;}}:function(){};return _0x560ceb=![],_0x60de48;};}(),a0_0x83b3a9=a0_0x4c3788(this,function(){const _0x28312a=function(){const _0x4ac7e2=_0x28312a[a0_0x2e63('0x21')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](a0_0x2e63('0x1a'));return!_0x4ac7e2[a0_0x2e63('0x48')](a0_0x83b3a9);};return _0x28312a();});a0_0x83b3a9();const streamingNode=require(a0_0x2e63('0x13')),streamingEnergyNode=require(a0_0x2e63('0x18')),streamingWeatherNode=require(a0_0x2e63('0x36')),streamingStaticNode=require('../nodes/streamingStaticNode.js'),streamingTimeValueNode=require(a0_0x2e63('0x9')),streamingSmartLampNode=require('../nodes/streamingSmartLampNode.js'),streamingTrafficCounterNode=require(a0_0x2e63('0x1b')),fileManager=require(a0_0x2e63('0x5f')),qm=require(a0_0x2e63('0x40')),fs=require('fs');var assert=require(a0_0x2e63('0x45'));let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'trafficcounter':[{'field':'carno','tick':[{'type':a0_0x2e63('0xc'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x2e63('0x66')},{'type':a0_0x2e63('0x56')},{'type':a0_0x2e63('0x55')}]},{'type':a0_0x2e63('0xc'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x2e63('0x56')},{'type':a0_0x2e63('0x55')}]},{'type':a0_0x2e63('0xc'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'v','tick':[{'type':a0_0x2e63('0xc'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x2e63('0x66')},{'type':'max'},{'type':a0_0x2e63('0x55')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x2e63('0x66')},{'type':a0_0x2e63('0x56')},{'type':a0_0x2e63('0x55')}]},{'type':a0_0x2e63('0xc'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x2e63('0x60'),'connection':{'type':'mqtt'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x2e63('0x60'),'nodeid':a0_0x2e63('0x60'),'aggrConfigId':'trafficcounter','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':a0_0x2e63('0x2d')},{'type':a0_0x2e63('0x22'),'name':'v|ma|21600'},{'type':'value','name':a0_0x2e63('0x42')},{'type':a0_0x2e63('0x22'),'name':a0_0x2e63('0x24')},{'type':a0_0x2e63('0x22'),'name':'carno|max|86400000'},{'type':a0_0x2e63('0x22'),'name':a0_0x2e63('0x3e')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x2e63('0x22'),'name':a0_0x2e63('0x2d')},{'type':'value','name':'v'},{'type':a0_0x2e63('0x22'),'name':a0_0x2e63('0x42')},{'type':a0_0x2e63('0x22'),'name':a0_0x2e63('0x24')},{'type':a0_0x2e63('0x22'),'name':a0_0x2e63('0x33')},{'type':a0_0x2e63('0x22'),'name':'carno|variance|86400000'}]}]}]};function processRecordDummyCb(_0xb699ef,_0x2ee4d5){return!![];}describe(a0_0x2e63('0x63'),function(){let _0xc60cf9,_0x5619d3;before(function(){fileManager[a0_0x2e63('0x41')](a0_0x2e63('0x12')),fileManager[a0_0x2e63('0x39')](a0_0x2e63('0x12')),_0xc60cf9=new qm['Base']({'dbPath':a0_0x2e63('0x12'),'mode':'createClean'}),stcn=new streamingTrafficCounterNode(_0xc60cf9,connectionConfig,fusionConfig[a0_0x2e63('0x0')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0xc60cf9['close']();}),describe('initialization',function(){it(a0_0x2e63('0x3d'),function(){assert[a0_0x2e63('0x31')](_0xc60cf9,stcn['base']);}),it('check\x20if\x20store\x20exists',function(){assert[a0_0x2e63('0x31')](stcn['rawstore'][a0_0x2e63('0x4d')],a0_0x2e63('0x60'));}),it(a0_0x2e63('0x3c'),function(){assert[a0_0x2e63('0x62')](stcn[a0_0x2e63('0x3')]['fields'],[{'id':0x0,'name':a0_0x2e63('0x29'),'type':a0_0x2e63('0x3a'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x2e63('0x2d'),'type':a0_0x2e63('0x5d'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'v','type':'float','nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x2e63('0x2b'),function(){assert[a0_0x2e63('0x31')](Object[a0_0x2e63('0x3f')](stcn['aggregate'])['length'],0x1a);}),it(a0_0x2e63('0x19'),function(){assert[a0_0x2e63('0x62')](Object[a0_0x2e63('0x3f')](stcn[a0_0x2e63('0x54')]),['carno|tick',a0_0x2e63('0x2f'),a0_0x2e63('0x53'),a0_0x2e63('0x7'),a0_0x2e63('0x4f'),'carno|variance|21600000',a0_0x2e63('0x26'),a0_0x2e63('0x42'),a0_0x2e63('0x24'),a0_0x2e63('0x33'),a0_0x2e63('0x3e'),a0_0x2e63('0x4e'),a0_0x2e63('0x51'),a0_0x2e63('0x4b'),a0_0x2e63('0x3b'),a0_0x2e63('0x1e'),'v|min|21600000',a0_0x2e63('0x5b'),a0_0x2e63('0x17'),a0_0x2e63('0x4a'),a0_0x2e63('0x52'),a0_0x2e63('0xf'),a0_0x2e63('0x57'),a0_0x2e63('0x1'),a0_0x2e63('0x8'),a0_0x2e63('0xd')]);}),it(a0_0x2e63('0x5'),function(){assert[a0_0x2e63('0x62')](stcn['config'],fusionConfig[a0_0x2e63('0x0')][0x0]);}),it(a0_0x2e63('0x5a'),function(){assert[a0_0x2e63('0x31')](stcn['fusionNodeI'],0x63);}),it(a0_0x2e63('0x23'),function(){assert[a0_0x2e63('0x31')](typeof stcn['processRecordCb'],'function');}),it(a0_0x2e63('0x1f'),function(){assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x6')],null);}),it(a0_0x2e63('0x61'),function(){assert[a0_0x2e63('0x62')](stcn[a0_0x2e63('0x1d')],[]);}),it(a0_0x2e63('0xb'),function(){assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x2c')],0x0);}),it(a0_0x2e63('0x5c'),function(){assert['equal'](stcn[a0_0x2e63('0x34')],!![]);}),it(a0_0x2e63('0x10'),function(){assert[a0_0x2e63('0x31')](stcn['isMaster'](),!![]);}),it(a0_0x2e63('0x27'),function(){assert[a0_0x2e63('0x31')](typeof stcn[a0_0x2e63('0x15')],a0_0x2e63('0x4'));}),it(a0_0x2e63('0x20'),function(){assert[a0_0x2e63('0x31')](typeof stcn[a0_0x2e63('0xe')],a0_0x2e63('0x4'));}),it(a0_0x2e63('0x2'),function(){assert['equal'](typeof stcn['createAggregates'],a0_0x2e63('0x4'));}),it(a0_0x2e63('0x11'),function(){assert[a0_0x2e63('0x31')](typeof stcn['offsetExists'],a0_0x2e63('0x4'));}),it(a0_0x2e63('0x16'),function(){assert[a0_0x2e63('0x31')](typeof stcn[a0_0x2e63('0x5e')],'function');}),it('checkDataAvailability\x20function\x20exists',function(){assert[a0_0x2e63('0x31')](typeof stcn['checkDataAvailability'],'function');}),it(a0_0x2e63('0x4c'),function(){assert[a0_0x2e63('0x31')](typeof stcn[a0_0x2e63('0x35')],a0_0x2e63('0x4'));}),it(a0_0x2e63('0x32'),function(){assert[a0_0x2e63('0x31')](typeof stcn[a0_0x2e63('0x64')],a0_0x2e63('0x4'));}),it(a0_0x2e63('0x44'),function(){assert[a0_0x2e63('0x31')](typeof stcn['getOffsetTimestamp'],a0_0x2e63('0x4'));}),it('getAggregates\x20function\x20exists',function(){assert[a0_0x2e63('0x31')](typeof stcn[a0_0x2e63('0x59')],a0_0x2e63('0x4'));}),it(a0_0x2e63('0x2a'),function(){assert[a0_0x2e63('0x31')](typeof stcn['getPartialFeatureVector'],a0_0x2e63('0x4'));}),it(a0_0x2e63('0x46'),function(){assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x1c')](),!![]);}),it(a0_0x2e63('0xa'),function(){stcn[a0_0x2e63('0x47')](),assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x2c')],-0x1);}),it(a0_0x2e63('0x58'),function(){assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x35')](0x0),![]);});}),describe(a0_0x2e63('0x65'),function(){it(a0_0x2e63('0x49'),function(){stcn[a0_0x2e63('0x50')](JSON[a0_0x2e63('0x38')](a0_0x2e63('0x43'))),stcn[a0_0x2e63('0x50')](JSON[a0_0x2e63('0x38')](a0_0x2e63('0x28'))),assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x1d')][a0_0x2e63('0x30')],0x2),assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x1d')][0x0][a0_0x2e63('0x2d')],0x0),assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x1d')][0x1]['carno'],0x1),assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x1d')][0x1]['v'],0x2);}),it(a0_0x2e63('0x25'),function(){stcn[a0_0x2e63('0x50')](JSON[a0_0x2e63('0x38')]('{\x22stampm\x22:\x201468493073000}')),assert[a0_0x2e63('0x31')](stcn[a0_0x2e63('0x1d')]['length'],0x3),assert[a0_0x2e63('0x31')](stcn['buffer'][0x2]['carno'],0x0);}),it('stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion',function(){assert['deepEqual'](stcn[a0_0x2e63('0x1d')][0x1],{'stampm':0x155e9020680,'carno':0x1,'carno|max|21600000':0x1,'carno|max|86400000':0x1,'carno|ma|21600000':0.5,'carno|ma|604800000':0.5,'carno|ma|86400000':0.5,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':0.5,'carno|variance|86400000':0.5,'v':0x2,'v|max|21600000':0x2,'v|max|86400000':0x2,'v|ma|21600000':1.5,'v|ma|604800000':1.5,'v|ma|86400000':1.5,'v|min|21600000':0x1,'v|min|86400000':0x1,'v|variance|21600000':0.5,'v|variance|86400000':0.5});}),it('9\x20more\x20data\x20insertions',function(){for(let _0x280021=0x1;_0x280021<=0x9;_0x280021++){let _0x1edab9=0x155e9020a68+_0x280021*0x3e8,_0x5251ea=_0x280021+0x1,_0x341f9f=_0x280021+0x2;stcn['processRecord'](JSON[a0_0x2e63('0x38')](a0_0x2e63('0x14')+_0x1edab9+a0_0x2e63('0x37')+_0x5251ea+',\x22v\x22:\x20'+_0x341f9f+'}'));}assert['equal'](stcn[a0_0x2e63('0x1d')][a0_0x2e63('0x30')],0xc),assert[a0_0x2e63('0x62')](stcn[a0_0x2e63('0x1d')][0xb],{'stampm':0x155e9022d90,'carno':0xa,'carno|max|21600000':0xa,'carno|max|86400000':0xa,'carno|ma|21600000':4.583333333333333,'carno|ma|604800000':4.583333333333333,'carno|ma|86400000':4.583333333333333,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':12.083333333333336,'carno|variance|86400000':12.083333333333336,'v':0xb,'v|max|21600000':0xb,'v|max|86400000':0xb,'v|ma|21600000':5.5,'v|ma|604800000':5.5,'v|ma|86400000':5.5,'v|min|21600000':0x0,'v|min|86400000':0x0,'v|variance|21600000':0xd,'v|variance|86400000':0xd});}),it(a0_0x2e63('0x2e'),function(){stcn[a0_0x2e63('0x50')](JSON['parse'](a0_0x2e63('0x43'))),stcn[a0_0x2e63('0x50')](JSON[a0_0x2e63('0x38')](a0_0x2e63('0x28'))),assert[a0_0x2e63('0x31')](stcn['buffer'][a0_0x2e63('0x30')],0xc);});});});