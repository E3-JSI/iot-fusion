const a0_0x11fc=['function','deleteObsoleteRows\x20function\x20exists','v|ma|21600000','variance','../nodes/streamingWeatherNode.js','max','buffer\x20position\x20is\x200','getPartialFeatureVector\x20function\x20exists','{\x22stampm\x22:\x201468493073000}','master\x20offset\x20set\x20correctly','position','v|winbuf|604800000','aggregate','apply','v|min|21600000','Base','min','carno|winbuf|21600000','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','aggregates\x20initialized\x20-\x20number','v|max|21600000','processRecordCb','../nodes/streamingEnergyNode.js','createAggregates','carno|winbuf|86400000','callback\x20function\x20should\x20be\x20set','removeFolder','trafficcounter','carno','name','carno|max|86400000','parent','{\x22stampm\x22:\x201468493072000,\x20\x22carno\x22:\x201.0,\x20\x22v\x22:\x202\x20}','master\x20flag\x20set\x20correctly','carno|ma|86400000','streamingTrafficCounterNode','v|ma|86400000','v|winbuf|86400000','../nodes/streamingTrafficCounterNode.js','fusionNodeI\x20correctly\x20saved','offsetExists','fusionNodeI','float','./db4/','Time','{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}','broadcastAggregates\x20function\x20exists','{\x22stampm\x22:','config','data\x20record\x20saved\x20correctly','carno|variance|21600000','parse','../nodes/streamingNode.js','v|tick','v|winbuf|21600000','isMaster\x20function','deleteObsoleteRows','winbuf','v|ma|604800000','setSlaveOffset','master','createAggregates\x20function\x20exists','carno|variance|86400000','checkDataAvailability','getAggregates\x20function\x20exists',',\x22v\x22:\x20','slave\x20offset\x20set\x20correctly:\x20no\x20data','initialization','assert','processRecord','master\x20set\x20correctly','carno|min|86400000','getOffsetTimestamp\x20function\x20exists','data\x20insertion','carno|tick','connectToKafka\x20function\x20exists','length','broadcastAggregates','mqtt','carno|winbuf|604800000','close','value','equal','test','checkDataAvailability\x20function\x20exists','check\x20if\x20store\x20exists','v|ma|21600','../nodes/streamingSmartLampNode.js','setSlaveOffset\x20function\x20exists','setMasterOffset','carno|max|21600000','v|max|86400000','offsetExists\x20function\x20exists','nodes','../nodes/streamingStaticNode.js','../common/utils/fileManager.js','aggregates\x20initialized\x20-\x20key\x20names','return\x20/\x22\x20+\x20this\x20+\x20\x22/','check\x20store\x20structure','buffer','rawstore','isMaster','createFolder','deepEqual','setMasterOffset\x20function\x20exists','duplicate\x20insertions\x20test','createClean','fields','carno|ma|21600000','../nodes/streamingTimeValueNode.js','keys','getAggregates'];(function(_0x378d9b,_0x11fc81){const _0x4ef65c=function(_0x3fc7bd){while(--_0x3fc7bd){_0x378d9b['push'](_0x378d9b['shift']());}},_0x4756ef=function(){const _0x3163d8={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x169c99,_0x513ff3,_0xabae67,_0x53b395){_0x53b395=_0x53b395||{};let _0x3d081d=_0x513ff3+'='+_0xabae67,_0x56e13a=0x0;for(let _0x2f017a=0x0,_0x5a9a3b=_0x169c99['length'];_0x2f017a<_0x5a9a3b;_0x2f017a++){const _0x16308f=_0x169c99[_0x2f017a];_0x3d081d+=';\x20'+_0x16308f;const _0x45417b=_0x169c99[_0x16308f];_0x169c99['push'](_0x45417b),_0x5a9a3b=_0x169c99['length'],_0x45417b!==!![]&&(_0x3d081d+='='+_0x45417b);}_0x53b395['cookie']=_0x3d081d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2af3f0,_0xc36ec3){_0x2af3f0=_0x2af3f0||function(_0x37f834){return _0x37f834;};const _0x76c797=_0x2af3f0(new RegExp('(?:^|;\x20)'+_0xc36ec3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x380caf=function(_0x6a0b88,_0x3b0dfc){_0x6a0b88(++_0x3b0dfc);};return _0x380caf(_0x4ef65c,_0x11fc81),_0x76c797?decodeURIComponent(_0x76c797[0x1]):undefined;}},_0x2f79f6=function(){const _0x42c54b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x42c54b['test'](_0x3163d8['removeCookie']['toString']());};_0x3163d8['updateCookie']=_0x2f79f6;let _0x4bea03='';const _0x2fbc71=_0x3163d8['updateCookie']();if(!_0x2fbc71)_0x3163d8['setCookie'](['*'],'counter',0x1);else _0x2fbc71?_0x4bea03=_0x3163d8['getCookie'](null,'counter'):_0x3163d8['removeCookie']();};_0x4756ef();}(a0_0x11fc,0x14d));const a0_0x4ef6=function(_0x378d9b,_0x11fc81){_0x378d9b=_0x378d9b-0x0;let _0x4ef65c=a0_0x11fc[_0x378d9b];return _0x4ef65c;};const a0_0xabae67=function(){let _0x4ac698=!![];return function(_0xc266b8,_0x1976af){const _0x93ded8=_0x4ac698?function(){if(_0x1976af){const _0x829211=_0x1976af[a0_0x4ef6('0x10')](_0xc266b8,arguments);return _0x1976af=null,_0x829211;}}:function(){};return _0x4ac698=![],_0x93ded8;};}(),a0_0x513ff3=a0_0xabae67(this,function(){const _0x30eb5f=function(){const _0x56815d=_0x30eb5f['constructor'](a0_0x4ef6('0x64'))()['constructor'](a0_0x4ef6('0x15'));return!_0x56815d[a0_0x4ef6('0x56')](a0_0x513ff3);};return _0x30eb5f();});a0_0x513ff3();const streamingNode=require(a0_0x4ef6('0x37')),streamingEnergyNode=require(a0_0x4ef6('0x19')),streamingWeatherNode=require(a0_0x4ef6('0x7')),streamingStaticNode=require(a0_0x4ef6('0x61')),streamingTimeValueNode=require(a0_0x4ef6('0x0')),streamingSmartLampNode=require(a0_0x4ef6('0x5a')),streamingTrafficCounterNode=require(a0_0x4ef6('0x29')),fileManager=require(a0_0x4ef6('0x62')),qm=require('qminer'),fs=require('fs');var assert=require(a0_0x4ef6('0x47'));let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'trafficcounter':[{'field':a0_0x4ef6('0x1f'),'tick':[{'type':a0_0x4ef6('0x3c'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':'max'},{'type':a0_0x4ef6('0x6')}]},{'type':a0_0x4ef6('0x3c'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x4ef6('0x13')},{'type':a0_0x4ef6('0x8')},{'type':a0_0x4ef6('0x6')}]},{'type':a0_0x4ef6('0x3c'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'v','tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x4ef6('0x13')},{'type':'max'},{'type':a0_0x4ef6('0x6')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x4ef6('0x13')},{'type':a0_0x4ef6('0x8')},{'type':'variance'}]},{'type':a0_0x4ef6('0x3c'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x4ef6('0x1e'),'connection':{'type':a0_0x4ef6('0x51')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x4ef6('0x1e'),'nodeid':a0_0x4ef6('0x1e'),'aggrConfigId':a0_0x4ef6('0x1e'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x4ef6('0x54'),'name':a0_0x4ef6('0x1f')},{'type':'value','name':a0_0x4ef6('0x59')},{'type':a0_0x4ef6('0x54'),'name':a0_0x4ef6('0x25')},{'type':'value','name':'carno|min|86400000'},{'type':a0_0x4ef6('0x54'),'name':a0_0x4ef6('0x21')},{'type':a0_0x4ef6('0x54'),'name':'carno|variance|86400000'}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':'value','name':a0_0x4ef6('0x1f')},{'type':a0_0x4ef6('0x54'),'name':'v'},{'type':'value','name':'carno|ma|86400000'},{'type':a0_0x4ef6('0x54'),'name':'carno|min|86400000'},{'type':a0_0x4ef6('0x54'),'name':a0_0x4ef6('0x21')},{'type':'value','name':a0_0x4ef6('0x41')}]}]}]};function processRecordDummyCb(_0x48e19e,_0x23683e){return!![];}describe(a0_0x4ef6('0x26'),function(){let _0x598497,_0x33525f;before(function(){fileManager[a0_0x4ef6('0x1d')](a0_0x4ef6('0x2e')),fileManager[a0_0x4ef6('0x69')](a0_0x4ef6('0x2e')),_0x598497=new qm[(a0_0x4ef6('0x12'))]({'dbPath':'./db4/','mode':a0_0x4ef6('0x6d')}),stcn=new streamingTrafficCounterNode(_0x598497,connectionConfig,fusionConfig[a0_0x4ef6('0x60')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x598497[a0_0x4ef6('0x53')]();}),describe(a0_0x4ef6('0x46'),function(){it('base\x20saved',function(){assert[a0_0x4ef6('0x55')](_0x598497,stcn['base']);}),it(a0_0x4ef6('0x58'),function(){assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x67')][a0_0x4ef6('0x20')],a0_0x4ef6('0x1e'));}),it(a0_0x4ef6('0x65'),function(){assert[a0_0x4ef6('0x6a')](stcn[a0_0x4ef6('0x67')][a0_0x4ef6('0x6e')],[{'id':0x0,'name':a0_0x4ef6('0x2f'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x4ef6('0x1f'),'type':a0_0x4ef6('0x2d'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'v','type':'float','nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x4ef6('0x16'),function(){assert[a0_0x4ef6('0x55')](Object[a0_0x4ef6('0x1')](stcn[a0_0x4ef6('0xf')])['length'],0x1a);}),it(a0_0x4ef6('0x63'),function(){assert['deepEqual'](Object[a0_0x4ef6('0x1')](stcn[a0_0x4ef6('0xf')]),[a0_0x4ef6('0x4d'),a0_0x4ef6('0x14'),a0_0x4ef6('0x6f'),'carno|min|21600000',a0_0x4ef6('0x5d'),a0_0x4ef6('0x35'),a0_0x4ef6('0x1b'),a0_0x4ef6('0x25'),a0_0x4ef6('0x4a'),a0_0x4ef6('0x21'),'carno|variance|86400000',a0_0x4ef6('0x52'),'carno|ma|604800000',a0_0x4ef6('0x38'),a0_0x4ef6('0x39'),a0_0x4ef6('0x5'),a0_0x4ef6('0x11'),a0_0x4ef6('0x17'),'v|variance|21600000',a0_0x4ef6('0x28'),a0_0x4ef6('0x27'),'v|min|86400000',a0_0x4ef6('0x5e'),'v|variance|86400000',a0_0x4ef6('0xe'),a0_0x4ef6('0x3d')]);}),it('config\x20saved',function(){assert['deepEqual'](stcn[a0_0x4ef6('0x33')],fusionConfig[a0_0x4ef6('0x60')][0x0]);}),it(a0_0x4ef6('0x2a'),function(){assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x2c')],0x63);}),it(a0_0x4ef6('0x1c'),function(){assert[a0_0x4ef6('0x55')](typeof stcn[a0_0x4ef6('0x18')],a0_0x4ef6('0x3'));}),it('parent\x20saved',function(){assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x22')],null);}),it('buffer\x20empty',function(){assert[a0_0x4ef6('0x6a')](stcn[a0_0x4ef6('0x66')],[]);}),it(a0_0x4ef6('0x9'),function(){assert['equal'](stcn[a0_0x4ef6('0xd')],0x0);}),it(a0_0x4ef6('0x24'),function(){assert['equal'](stcn[a0_0x4ef6('0x3f')],!![]);}),it(a0_0x4ef6('0x3a'),function(){assert[a0_0x4ef6('0x55')](stcn['isMaster'](),!![]);}),it(a0_0x4ef6('0x4e'),function(){assert[a0_0x4ef6('0x55')](typeof stcn['connectToKafka'],a0_0x4ef6('0x3'));}),it(a0_0x4ef6('0x31'),function(){assert[a0_0x4ef6('0x55')](typeof stcn[a0_0x4ef6('0x50')],'function');}),it(a0_0x4ef6('0x40'),function(){assert[a0_0x4ef6('0x55')](typeof stcn[a0_0x4ef6('0x1a')],'function');}),it(a0_0x4ef6('0x5f'),function(){assert[a0_0x4ef6('0x55')](typeof stcn[a0_0x4ef6('0x2b')],'function');}),it(a0_0x4ef6('0x4'),function(){assert[a0_0x4ef6('0x55')](typeof stcn[a0_0x4ef6('0x3b')],a0_0x4ef6('0x3'));}),it(a0_0x4ef6('0x57'),function(){assert[a0_0x4ef6('0x55')](typeof stcn[a0_0x4ef6('0x42')],'function');}),it(a0_0x4ef6('0x5b'),function(){assert[a0_0x4ef6('0x55')](typeof stcn[a0_0x4ef6('0x3e')],a0_0x4ef6('0x3'));}),it(a0_0x4ef6('0x4b'),function(){assert[a0_0x4ef6('0x55')](typeof stcn['getOffsetTimestamp'],a0_0x4ef6('0x3'));}),it(a0_0x4ef6('0x6b'),function(){assert[a0_0x4ef6('0x55')](typeof stcn['getOffsetTimestamp'],'function');}),it(a0_0x4ef6('0x43'),function(){assert['equal'](typeof stcn[a0_0x4ef6('0x2')],'function');}),it(a0_0x4ef6('0xa'),function(){assert[a0_0x4ef6('0x55')](typeof stcn['getPartialFeatureVector'],a0_0x4ef6('0x3'));}),it(a0_0x4ef6('0x49'),function(){assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x68')](),!![]);}),it(a0_0x4ef6('0xc'),function(){stcn[a0_0x4ef6('0x5c')](),assert['equal'](stcn[a0_0x4ef6('0xd')],-0x1);}),it(a0_0x4ef6('0x45'),function(){assert['equal'](stcn['setSlaveOffset'](0x0),![]);});}),describe(a0_0x4ef6('0x4c'),function(){it(a0_0x4ef6('0x34'),function(){stcn['processRecord'](JSON['parse'](a0_0x4ef6('0x30'))),stcn['processRecord'](JSON[a0_0x4ef6('0x36')]('{\x22stampm\x22:\x201468493072000,\x20\x22carno\x22:\x201.0,\x20\x22v\x22:\x202\x20}')),assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x66')][a0_0x4ef6('0x4f')],0x2),assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x66')][0x0][a0_0x4ef6('0x1f')],0x0),assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x66')][0x1][a0_0x4ef6('0x1f')],0x1),assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x66')][0x1]['v'],0x2);}),it('Empty\x20values\x20in\x20message\x20set\x20to\x200',function(){stcn[a0_0x4ef6('0x48')](JSON[a0_0x4ef6('0x36')](a0_0x4ef6('0xb'))),assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x66')][a0_0x4ef6('0x4f')],0x3),assert[a0_0x4ef6('0x55')](stcn[a0_0x4ef6('0x66')][0x2][a0_0x4ef6('0x1f')],0x0);}),it('stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion',function(){assert[a0_0x4ef6('0x6a')](stcn['buffer'][0x1],{'stampm':0x155e9020680,'carno':0x1,'carno|max|21600000':0x1,'carno|max|86400000':0x1,'carno|ma|21600000':0.5,'carno|ma|604800000':0.5,'carno|ma|86400000':0.5,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':0.5,'carno|variance|86400000':0.5,'v':0x2,'v|max|21600000':0x2,'v|max|86400000':0x2,'v|ma|21600000':1.5,'v|ma|604800000':1.5,'v|ma|86400000':1.5,'v|min|21600000':0x1,'v|min|86400000':0x1,'v|variance|21600000':0.5,'v|variance|86400000':0.5});}),it('9\x20more\x20data\x20insertions',function(){for(let _0xa52d60=0x1;_0xa52d60<=0x9;_0xa52d60++){let _0x18e54d=0x155e9020a68+_0xa52d60*0x3e8,_0x37469e=_0xa52d60+0x1,_0x43f1af=_0xa52d60+0x2;stcn[a0_0x4ef6('0x48')](JSON[a0_0x4ef6('0x36')](a0_0x4ef6('0x32')+_0x18e54d+',\x22carno\x22:\x20'+_0x37469e+a0_0x4ef6('0x44')+_0x43f1af+'}'));}assert[a0_0x4ef6('0x55')](stcn['buffer']['length'],0xc),assert[a0_0x4ef6('0x6a')](stcn[a0_0x4ef6('0x66')][0xb],{'stampm':0x155e9022d90,'carno':0xa,'carno|max|21600000':0xa,'carno|max|86400000':0xa,'carno|ma|21600000':4.583333333333333,'carno|ma|604800000':4.583333333333333,'carno|ma|86400000':4.583333333333333,'carno|min|21600000':0x0,'carno|min|86400000':0x0,'carno|variance|21600000':12.083333333333336,'carno|variance|86400000':12.083333333333336,'v':0xb,'v|max|21600000':0xb,'v|max|86400000':0xb,'v|ma|21600000':5.5,'v|ma|604800000':5.5,'v|ma|86400000':5.5,'v|min|21600000':0x0,'v|min|86400000':0x0,'v|variance|21600000':0xd,'v|variance|86400000':0xd});}),it(a0_0x4ef6('0x6c'),function(){stcn[a0_0x4ef6('0x48')](JSON[a0_0x4ef6('0x36')]('{\x22stampm\x22:\x201468493071000,\x20\x22carno\x22:\x200.0,\x20\x22v\x22:\x201\x20}')),stcn['processRecord'](JSON['parse'](a0_0x4ef6('0x23'))),assert[a0_0x4ef6('0x55')](stcn['buffer'][a0_0x4ef6('0x4f')],0xc);});});});