var _0x3132=['connectToKafka','broadcastAggregates\x20function\x20exists','broadcastAggregates','createAggregates','offsetExists','deleteObsoleteRows\x20function\x20exists','deleteObsoleteRows','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20offset\x20set\x20correctly','setMasterOffset','slave\x20offset\x20set\x20correctly:\x20no\x20data','setSlaveOffset','data\x20insertion','processRecord','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion','24\x20more\x20data\x20insertions\x20-\x20check\x20buffer','timestamp','floor','coorect\x20partial\x20feature\x20vector','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','../common/utils/fileManager.js','qminer','assert','192.168.85.98:2181','winbuf','variance','min','max','holiday','none','test','energy','value','pc|ma|21600000','pc|ma|86400000','pc|ma|604800000','pc|ma|2592000000','pc|min|86400000','pc|min|604800000','pc|max|86400000','pc|max|604800000','pc|variance|21600000','pc|variance|86400000','static','timeOfDay','dayBeforeHoliday','dayOfWeek','monthOfYear','weather','temperature24','pressure24','windSpeed24','windBearing24','cloudCover24','streamingStaticNode','removeFolder','./db2/','Base','createClean','nodes','initialization','equal','base','check\x20if\x20store\x20exists','rawstore','name','deepEqual','Time','datetime','dayAfterHoliday','float','dayOfMonth','dayOfYear','weekEnd','aggregates\x20initialized\x20-\x20number','keys','aggregate','length','aggregates\x20initialized\x20-\x20key\x20names','holiday|winbuf|604800000','config\x20saved','config','fusionNodeI\x20correctly\x20saved','fusionNodeI','callback\x20function\x20should\x20be\x20set','processRecordCb','function','parent\x20saved','parent','buffer\x20empty','buffer','buffer\x20position\x20is\x200','position','master','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists'];(function(_0x7ba1f6,_0x49b003){var _0x435cc7=function(_0x15c5ba){while(--_0x15c5ba){_0x7ba1f6['push'](_0x7ba1f6['shift']());}};var _0x583c83=function(){var _0x2692c0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4d2fab,_0x1bd56a,_0x6d2119,_0x4afad9){_0x4afad9=_0x4afad9||{};var _0x4484a1=_0x1bd56a+'='+_0x6d2119;var _0x3a4555=0x0;for(var _0x3a4555=0x0,_0x39e961=_0x4d2fab['length'];_0x3a4555<_0x39e961;_0x3a4555++){var _0xd39a52=_0x4d2fab[_0x3a4555];_0x4484a1+=';\x20'+_0xd39a52;var _0x1494e1=_0x4d2fab[_0xd39a52];_0x4d2fab['push'](_0x1494e1);_0x39e961=_0x4d2fab['length'];if(_0x1494e1!==!![]){_0x4484a1+='='+_0x1494e1;}}_0x4afad9['cookie']=_0x4484a1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x173d6a,_0x57991d){_0x173d6a=_0x173d6a||function(_0x314750){return _0x314750;};var _0x3b94b4=_0x173d6a(new RegExp('(?:^|;\x20)'+_0x57991d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x1ddec0=function(_0x1a4372,_0x15a3b1){_0x1a4372(++_0x15a3b1);};_0x1ddec0(_0x435cc7,_0x49b003);return _0x3b94b4?decodeURIComponent(_0x3b94b4[0x1]):undefined;}};var _0x66eee8=function(){var _0x375fea=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x375fea['test'](_0x2692c0['removeCookie']['toString']());};_0x2692c0['updateCookie']=_0x66eee8;var _0x521b6c='';var _0x21c43f=_0x2692c0['updateCookie']();if(!_0x21c43f){_0x2692c0['setCookie'](['*'],'counter',0x1);}else if(_0x21c43f){_0x521b6c=_0x2692c0['getCookie'](null,'counter');}else{_0x2692c0['removeCookie']();}};_0x583c83();}(_0x3132,0x1d6));var _0x5d4b=function(_0x4bd503,_0x21e052){_0x4bd503=_0x4bd503-0x0;var _0x26f361=_0x3132[_0x4bd503];return _0x26f361;};var _0x42645c=function(){var _0x15a235=!![];return function(_0x487d82,_0x2f0ef1){var _0x10ad47=_0x15a235?function(){if(_0x2f0ef1){var _0x18221a=_0x2f0ef1['apply'](_0x487d82,arguments);_0x2f0ef1=null;return _0x18221a;}}:function(){};_0x15a235=![];return _0x10ad47;};}();var _0x436f47=_0x42645c(this,function(){var _0x249b11=function(){return'\x64\x65\x76';},_0x40779e=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x3fefe1=function(){var _0x51de2c=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x51de2c['\x74\x65\x73\x74'](_0x249b11['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5dbf82=function(){var _0x50fe44=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x50fe44['\x74\x65\x73\x74'](_0x40779e['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x574fbc=function(_0x1eba38){var _0x351859=~-0x1>>0x1+0xff%0x0;if(_0x1eba38['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x351859)){_0x3dea34(_0x1eba38);}};var _0x3dea34=function(_0x23eebb){var _0x5b5501=~-0x4>>0x1+0xff%0x0;if(_0x23eebb['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x5b5501){_0x574fbc(_0x23eebb);}};if(!_0x3fefe1()){if(!_0x5dbf82()){_0x574fbc('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x574fbc('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x574fbc('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x436f47();const streamingNode=require('../nodes/streamingNode.js');const streamingEnergyNode=require(_0x5d4b('0x0'));const streamingWeatherNode=require(_0x5d4b('0x1'));const streamingStaticNode=require(_0x5d4b('0x2'));const fileManager=require(_0x5d4b('0x3'));const qm=require(_0x5d4b('0x4'));const fs=require('fs');var assert=require(_0x5d4b('0x5'));let connectionConfig={'zookeeper':_0x5d4b('0x6')};let aggrConfigs={'energy':[{'field':'pc','tick':[{'type':_0x5d4b('0x7'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x5d4b('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':_0x5d4b('0x8')},{'type':'ma'}]},{'type':_0x5d4b('0x7'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x5d4b('0x8')},{'type':'ma'},{'type':_0x5d4b('0x9')},{'type':_0x5d4b('0xa')}]},{'type':_0x5d4b('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x5d4b('0x8')},{'type':'ma'},{'type':'min'},{'type':_0x5d4b('0xa')}]},{'type':_0x5d4b('0x7'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':_0x5d4b('0xb'),'tick':[{'type':_0x5d4b('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'connection':{'type':_0x5d4b('0xc')},'fusionModel':_0x5d4b('0xd'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x5d4b('0xe'),'nodeid':'N1','aggrConfigId':_0x5d4b('0xe'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x5d4b('0xf'),'name':'pc'},{'type':_0x5d4b('0xf'),'name':'pc|ma|3600000'},{'type':'value','name':_0x5d4b('0x10')},{'type':'value','name':_0x5d4b('0x11')},{'type':'value','name':_0x5d4b('0x12')},{'type':'value','name':_0x5d4b('0x13')},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x14')},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x15')},{'type':'value','name':_0x5d4b('0x16')},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x17')},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x18')},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x19')},{'type':_0x5d4b('0xf'),'name':'pc|variance|604800000'}]},{'time':-0x18,'attributes':[{'type':_0x5d4b('0xf'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':_0x5d4b('0xf'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':'value','name':'pc'}]}]},{'type':'static','nodeid':_0x5d4b('0x1a'),'aggrConfigId':_0x5d4b('0x1a'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':'value','name':_0x5d4b('0x1b')},{'type':'value','name':'weekEnd'},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0xb')},{'type':'value','name':'dayAfterHoliday'},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x1c')},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x1d')},{'type':_0x5d4b('0xf'),'name':'dayOfYear'},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x1e')}]}]},{'type':_0x5d4b('0x1f'),'nodeid':'weather','aggrConfigId':_0x5d4b('0x1f'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':_0x5d4b('0x20')},{'type':'value','name':'humidity24'},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x21')},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x22')},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x23')},{'type':_0x5d4b('0xf'),'name':_0x5d4b('0x24')}]}]}]};function processRecordDummyCb(_0x330763,_0x2aa514){return!![];}describe(_0x5d4b('0x25'),function(){let _0xd58ae1;let _0x119242;before(function(){fileManager[_0x5d4b('0x26')](_0x5d4b('0x27'));fileManager['createFolder']('./db2/');_0xd58ae1=new qm[(_0x5d4b('0x28'))]({'dbPath':_0x5d4b('0x27'),'mode':_0x5d4b('0x29')});ssn=new streamingStaticNode(_0xd58ae1,connectionConfig,fusionConfig[_0x5d4b('0x2a')][0x1],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0xd58ae1['close']();});describe(_0x5d4b('0x2b'),function(){it('base\x20saved',function(){assert[_0x5d4b('0x2c')](_0xd58ae1,ssn[_0x5d4b('0x2d')]);});it(_0x5d4b('0x2e'),function(){assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x2f')][_0x5d4b('0x30')],_0x5d4b('0x1a'));});it('check\x20store\x20structure',function(){assert[_0x5d4b('0x31')](ssn['rawstore']['fields'],[{'id':0x0,'name':_0x5d4b('0x32'),'type':_0x5d4b('0x33'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x5d4b('0x34'),'type':_0x5d4b('0x35'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':_0x5d4b('0x1c'),'type':_0x5d4b('0x35'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':_0x5d4b('0x36'),'type':_0x5d4b('0x35'),'nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':'dayOfWeek','type':_0x5d4b('0x35'),'nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':_0x5d4b('0x37'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':_0x5d4b('0xb'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':_0x5d4b('0x1e'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':_0x5d4b('0x38'),'type':'float','nullable':![],'internal':![],'primary':![]}]);});it(_0x5d4b('0x39'),function(){assert[_0x5d4b('0x2c')](Object[_0x5d4b('0x3a')](ssn[_0x5d4b('0x3b')])[_0x5d4b('0x3c')],0x3);});it(_0x5d4b('0x3d'),function(){assert[_0x5d4b('0x31')](Object[_0x5d4b('0x3a')](ssn[_0x5d4b('0x3b')]),['holiday|tick',_0x5d4b('0x3e'),'holiday|ma|604800000']);});it(_0x5d4b('0x3f'),function(){assert['deepEqual'](ssn[_0x5d4b('0x40')],fusionConfig[_0x5d4b('0x2a')][0x1]);});it(_0x5d4b('0x41'),function(){assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x42')],0x63);});it(_0x5d4b('0x43'),function(){assert[_0x5d4b('0x2c')](typeof ssn[_0x5d4b('0x44')],_0x5d4b('0x45'));});it(_0x5d4b('0x46'),function(){assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x47')],null);});it(_0x5d4b('0x48'),function(){assert['deepEqual'](ssn[_0x5d4b('0x49')],[]);});it(_0x5d4b('0x4a'),function(){assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x4b')],0x0);});it('master\x20flag\x20set\x20correctly',function(){assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x4c')],![]);});it(_0x5d4b('0x4d'),function(){assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x4e')](),![]);});it(_0x5d4b('0x4f'),function(){assert[_0x5d4b('0x2c')](typeof ssn[_0x5d4b('0x50')],_0x5d4b('0x45'));});it(_0x5d4b('0x51'),function(){assert[_0x5d4b('0x2c')](typeof ssn[_0x5d4b('0x52')],_0x5d4b('0x45'));});it('createAggregates\x20function\x20exists',function(){assert[_0x5d4b('0x2c')](typeof ssn[_0x5d4b('0x53')],'function');});it('offsetExists\x20function\x20exists',function(){assert[_0x5d4b('0x2c')](typeof ssn[_0x5d4b('0x54')],_0x5d4b('0x45'));});it(_0x5d4b('0x55'),function(){assert[_0x5d4b('0x2c')](typeof ssn[_0x5d4b('0x56')],_0x5d4b('0x45'));});it(_0x5d4b('0x57'),function(){assert[_0x5d4b('0x2c')](typeof ssn[_0x5d4b('0x58')],_0x5d4b('0x45'));});it(_0x5d4b('0x59'),function(){assert[_0x5d4b('0x2c')](typeof ssn['setSlaveOffset'],_0x5d4b('0x45'));});it(_0x5d4b('0x5a'),function(){assert[_0x5d4b('0x2c')](typeof ssn[_0x5d4b('0x5b')],'function');});it(_0x5d4b('0x5c'),function(){assert['equal'](typeof ssn['getOffsetTimestamp'],_0x5d4b('0x45'));});it(_0x5d4b('0x5d'),function(){assert[_0x5d4b('0x2c')](typeof ssn[_0x5d4b('0x5e')],_0x5d4b('0x45'));});it(_0x5d4b('0x5f'),function(){assert['equal'](typeof ssn[_0x5d4b('0x60')],'function');});it('master\x20set\x20correctly',function(){assert[_0x5d4b('0x2c')](ssn['isMaster'](),![]);});it(_0x5d4b('0x61'),function(){ssn[_0x5d4b('0x62')]();assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x4b')],-0x1);});it(_0x5d4b('0x63'),function(){assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x64')](0x0),![]);});});describe(_0x5d4b('0x65'),function(){it('data\x20record\x20record\x20saved\x20correctly',function(){ssn[_0x5d4b('0x66')](JSON[_0x5d4b('0x67')](_0x5d4b('0x68')));assert[_0x5d4b('0x2c')](ssn['buffer'][_0x5d4b('0x3c')],0x1);assert[_0x5d4b('0x2c')](ssn['buffer'][0x0][_0x5d4b('0x1b')],0x0);assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x49')][0x0][_0x5d4b('0x34')],0x0);assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x49')][0x0]['dayBeforeHoliday'],0x1);assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x49')][0x0][_0x5d4b('0x37')],0x1);assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x49')][0x0][_0x5d4b('0x1d')],0x2);assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x49')][0x0][_0x5d4b('0x36')],0x1);assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x49')][0x0][_0x5d4b('0xb')],0x1);assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x49')][0x0][_0x5d4b('0x1e')],0x1);assert[_0x5d4b('0x2c')](ssn[_0x5d4b('0x49')][0x0]['weekEnd'],0x0);});it(_0x5d4b('0x69'),function(){assert['deepEqual'](ssn[_0x5d4b('0x49')][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});});it(_0x5d4b('0x6a'),function(){let _0x1db8b1=JSON['parse']('{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}');for(let _0x39cc25=0x1;_0x39cc25<=0x18;_0x39cc25++){_0x1db8b1[_0x5d4b('0x6b')]=_0x39cc25*0x3c*0x3c*0x3e8;_0x1db8b1[_0x5d4b('0x1b')]=_0x39cc25%0x18;_0x1db8b1['dayOfYear']=Math['floor'](_0x39cc25/0x18)+0x1;_0x1db8b1[_0x5d4b('0x1d')]=Math[_0x5d4b('0x6c')](_0x39cc25/0x18)+0x2;_0x1db8b1[_0x5d4b('0x36')]=Math[_0x5d4b('0x6c')](_0x39cc25/0x18)+0x1;_0x1db8b1[_0x5d4b('0x37')]=Math[_0x5d4b('0x6c')](_0x39cc25/0x18)+0x1;_0x1db8b1[_0x5d4b('0xb')]=0x1-Math[_0x5d4b('0x6c')](_0x39cc25/0x18);ssn[_0x5d4b('0x66')](_0x1db8b1);}assert['equal'](ssn[_0x5d4b('0x49')][_0x5d4b('0x3c')],0x19);});it('correct\x20aggregate\x20values',function(){assert[_0x5d4b('0x31')](ssn[_0x5d4b('0x5e')](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});});it(_0x5d4b('0x6d'),function(){ssn[_0x5d4b('0x64')](0x0);assert[_0x5d4b('0x31')](ssn[_0x5d4b('0x60')](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});