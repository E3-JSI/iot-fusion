const a0_0x2e57=['pc|min|86400000','isMaster','base\x20saved','pc|ma|86400000','deleteObsoleteRows\x20function\x20exists','slave\x20offset\x20set\x20correctly:\x20no\x20data','offsetExists','buffer','length','broadcastAggregates\x20function\x20exists','parent','../common/utils/fileManager.js','correct\x20aggregate\x20values','qminer','setSlaveOffset','max','pc|ma|21600000','removeFolder','static','fusionNodeI\x20correctly\x20saved','connectToKafka','pressure24','dayOfMonth','./db2/','timestamp','constructor','pc|ma|604800000','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','rawstore','check\x20store\x20structure','variance','position','connectToKafka\x20function\x20exists','winbuf','buffer\x20position\x20is\x200','setMasterOffset','base','equal','holiday|tick','nodes','close','humidity24','floor','pc|variance|21600000','dayAfterHoliday','checkDataAvailability\x20function\x20exists','streamingStaticNode','holiday|ma|604800000','function','parse','fusionNodeI','Base','getPartialFeatureVector','weekEnd','isMaster\x20function','energy','dayBeforeHoliday','aggregate','../nodes/streamingStaticNode.js','getPartialFeatureVector\x20function\x20exists','pc|variance|604800000','createClean','float','config','timeOfDay','pc|max|86400000','dayOfYear','master','pc|ma|3600000','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','temperature24','checkDataAvailability','aggregates\x20initialized\x20-\x20key\x20names','createAggregates\x20function\x20exists','fields','getAggregates','getAggregates\x20function\x20exists','weather','holiday','master\x20offset\x20set\x20correctly','none','datetime','data\x20record\x20record\x20saved\x20correctly','Time','192.168.85.98:2181','getOffsetTimestamp','apply','min','parent\x20saved','callback\x20function\x20should\x20be\x20set','processRecord','buffer\x20empty','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','assert','value','keys','deleteObsoleteRows','pc|max|604800000','windBearing24','createAggregates','master\x20flag\x20set\x20correctly','deepEqual','monthOfYear','broadcastAggregates','pc|variance|86400000','holiday|winbuf|604800000','dayOfWeek','check\x20if\x20store\x20exists','name'];(function(_0x374d5e,_0x2e5715){const _0x594131=function(_0x4aabf7){while(--_0x4aabf7){_0x374d5e['push'](_0x374d5e['shift']());}},_0x181eff=function(){const _0xc98c1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3eb5a2,_0x26732f,_0x5358c6,_0x3db3e3){_0x3db3e3=_0x3db3e3||{};let _0x3bd38f=_0x26732f+'='+_0x5358c6,_0x453332=0x0;for(let _0x1ad0c4=0x0,_0x5901c2=_0x3eb5a2['length'];_0x1ad0c4<_0x5901c2;_0x1ad0c4++){const _0x24d82e=_0x3eb5a2[_0x1ad0c4];_0x3bd38f+=';\x20'+_0x24d82e;const _0x4b7460=_0x3eb5a2[_0x24d82e];_0x3eb5a2['push'](_0x4b7460),_0x5901c2=_0x3eb5a2['length'],_0x4b7460!==!![]&&(_0x3bd38f+='='+_0x4b7460);}_0x3db3e3['cookie']=_0x3bd38f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4c1573,_0x5a92c2){_0x4c1573=_0x4c1573||function(_0x378d0f){return _0x378d0f;};const _0x54798a=_0x4c1573(new RegExp('(?:^|;\x20)'+_0x5a92c2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x234956=function(_0x1517ea,_0x417d43){_0x1517ea(++_0x417d43);};return _0x234956(_0x594131,_0x2e5715),_0x54798a?decodeURIComponent(_0x54798a[0x1]):undefined;}},_0x2e33b0=function(){const _0x156c47=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x156c47['test'](_0xc98c1['removeCookie']['toString']());};_0xc98c1['updateCookie']=_0x2e33b0;let _0x5e4ff5='';const _0x583856=_0xc98c1['updateCookie']();if(!_0x583856)_0xc98c1['setCookie'](['*'],'counter',0x1);else _0x583856?_0x5e4ff5=_0xc98c1['getCookie'](null,'counter'):_0xc98c1['removeCookie']();};_0x181eff();}(a0_0x2e57,0x14c));const a0_0x5941=function(_0x374d5e,_0x2e5715){_0x374d5e=_0x374d5e-0x0;let _0x594131=a0_0x2e57[_0x374d5e];return _0x594131;};const a0_0x5358c6=function(){let _0x57e41e=!![];return function(_0x580c8b,_0x452b6e){const _0x48a070=_0x57e41e?function(){if(_0x452b6e){const _0x1de893=_0x452b6e[a0_0x5941('0x54')](_0x580c8b,arguments);return _0x452b6e=null,_0x1de893;}}:function(){};return _0x57e41e=![],_0x48a070;};}(),a0_0x26732f=a0_0x5358c6(this,function(){const _0x4ce277=function(){const _0x4488ec=_0x4ce277[a0_0x5941('0x17')](a0_0x5941('0x5b'))()['constructor'](a0_0x5941('0x43'));return!_0x4488ec['test'](a0_0x26732f);};return _0x4ce277();});a0_0x26732f();const streamingNode=require('../nodes/streamingNode.js'),streamingEnergyNode=require('../nodes/streamingEnergyNode.js'),streamingWeatherNode=require('../nodes/streamingWeatherNode.js'),streamingStaticNode=require(a0_0x5941('0x38')),fileManager=require(a0_0x5941('0x9')),qm=require(a0_0x5941('0xb')),fs=require('fs');var assert=require(a0_0x5941('0x5c'));let connectionConfig={'zookeeper':a0_0x5941('0x52')},aggrConfigs={'energy':[{'field':'pc','tick':[{'type':a0_0x5941('0x1f'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x5941('0x1f'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x5941('0x1c')},{'type':'ma'}]},{'type':a0_0x5941('0x1f'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x5941('0x1c')},{'type':'ma'},{'type':'min'},{'type':a0_0x5941('0xd')}]},{'type':a0_0x5941('0x1f'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x5941('0x1c')},{'type':'ma'},{'type':a0_0x5941('0x55')},{'type':a0_0x5941('0xd')}]},{'type':a0_0x5941('0x1f'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':a0_0x5941('0x4c'),'tick':[{'type':a0_0x5941('0x1f'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'connection':{'type':a0_0x5941('0x4e')},'fusionModel':a0_0x5941('0x5a'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'energy','nodeid':'N1','aggrConfigId':a0_0x5941('0x35'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x5941('0x5d'),'name':'pc'},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x42')},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0xe')},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x1')},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x18')},{'type':a0_0x5941('0x5d'),'name':'pc|ma|2592000000'},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x6c')},{'type':a0_0x5941('0x5d'),'name':'pc|min|604800000'},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x3f')},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x60')},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x29')},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x67')},{'type':'value','name':a0_0x5941('0x3a')}]},{'time':-0x18,'attributes':[{'type':a0_0x5941('0x5d'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':a0_0x5941('0x5d'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':a0_0x5941('0x5d'),'name':'pc'}]}]},{'type':a0_0x5941('0x10'),'nodeid':a0_0x5941('0x10'),'aggrConfigId':a0_0x5941('0x10'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':a0_0x5941('0x5d'),'name':'timeOfDay'},{'type':a0_0x5941('0x5d'),'name':'weekEnd'},{'type':a0_0x5941('0x5d'),'name':'holiday'},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x2a')},{'type':'value','name':a0_0x5941('0x36')},{'type':'value','name':a0_0x5941('0x69')},{'type':a0_0x5941('0x5d'),'name':'dayOfYear'},{'type':'value','name':a0_0x5941('0x65')}]}]},{'type':a0_0x5941('0x4b'),'nodeid':a0_0x5941('0x4b'),'aggrConfigId':a0_0x5941('0x4b'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x44')},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x27')},{'type':a0_0x5941('0x5d'),'name':a0_0x5941('0x13')},{'type':a0_0x5941('0x5d'),'name':'windSpeed24'},{'type':'value','name':a0_0x5941('0x61')},{'type':a0_0x5941('0x5d'),'name':'cloudCover24'}]}]}]};function processRecordDummyCb(_0xbf9c02,_0x347d2f){return!![];}describe(a0_0x5941('0x2c'),function(){let _0x438ac3,_0x1fbf10;before(function(){fileManager[a0_0x5941('0xf')](a0_0x5941('0x15')),fileManager['createFolder']('./db2/'),_0x438ac3=new qm[(a0_0x5941('0x31'))]({'dbPath':'./db2/','mode':a0_0x5941('0x3b')}),ssn=new streamingStaticNode(_0x438ac3,connectionConfig,fusionConfig[a0_0x5941('0x25')][0x1],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x438ac3[a0_0x5941('0x26')]();}),describe('initialization',function(){it(a0_0x5941('0x0'),function(){assert[a0_0x5941('0x23')](_0x438ac3,ssn[a0_0x5941('0x22')]);}),it(a0_0x5941('0x6a'),function(){assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x1a')][a0_0x5941('0x6b')],a0_0x5941('0x10'));}),it(a0_0x5941('0x1b'),function(){assert[a0_0x5941('0x64')](ssn[a0_0x5941('0x1a')][a0_0x5941('0x48')],[{'id':0x0,'name':a0_0x5941('0x51'),'type':a0_0x5941('0x4f'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x5941('0x2a'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x5941('0x36'),'type':a0_0x5941('0x3c'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':'dayOfMonth','type':a0_0x5941('0x3c'),'nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':a0_0x5941('0x69'),'type':a0_0x5941('0x3c'),'nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':a0_0x5941('0x40'),'type':a0_0x5941('0x3c'),'nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':a0_0x5941('0x4c'),'type':a0_0x5941('0x3c'),'nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':a0_0x5941('0x65'),'type':a0_0x5941('0x3c'),'nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':a0_0x5941('0x33'),'type':a0_0x5941('0x3c'),'nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x5941('0x23')](Object[a0_0x5941('0x5e')](ssn[a0_0x5941('0x37')])['length'],0x3);}),it(a0_0x5941('0x46'),function(){assert['deepEqual'](Object['keys'](ssn['aggregate']),[a0_0x5941('0x24'),a0_0x5941('0x68'),a0_0x5941('0x2d')]);}),it('config\x20saved',function(){assert[a0_0x5941('0x64')](ssn[a0_0x5941('0x3d')],fusionConfig[a0_0x5941('0x25')][0x1]);}),it(a0_0x5941('0x11'),function(){assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x30')],0x63);}),it(a0_0x5941('0x57'),function(){assert['equal'](typeof ssn['processRecordCb'],a0_0x5941('0x2e'));}),it(a0_0x5941('0x56'),function(){assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x8')],null);}),it(a0_0x5941('0x59'),function(){assert['deepEqual'](ssn['buffer'],[]);}),it(a0_0x5941('0x20'),function(){assert[a0_0x5941('0x23')](ssn['position'],0x0);}),it(a0_0x5941('0x63'),function(){assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x41')],![]);}),it(a0_0x5941('0x34'),function(){assert['equal'](ssn['isMaster'](),![]);}),it(a0_0x5941('0x1e'),function(){assert[a0_0x5941('0x23')](typeof ssn[a0_0x5941('0x12')],a0_0x5941('0x2e'));}),it(a0_0x5941('0x7'),function(){assert[a0_0x5941('0x23')](typeof ssn[a0_0x5941('0x66')],'function');}),it(a0_0x5941('0x47'),function(){assert[a0_0x5941('0x23')](typeof ssn[a0_0x5941('0x62')],a0_0x5941('0x2e'));}),it('offsetExists\x20function\x20exists',function(){assert[a0_0x5941('0x23')](typeof ssn[a0_0x5941('0x4')],'function');}),it(a0_0x5941('0x2'),function(){assert[a0_0x5941('0x23')](typeof ssn[a0_0x5941('0x5f')],a0_0x5941('0x2e'));}),it(a0_0x5941('0x2b'),function(){assert[a0_0x5941('0x23')](typeof ssn[a0_0x5941('0x45')],'function');}),it('setSlaveOffset\x20function\x20exists',function(){assert[a0_0x5941('0x23')](typeof ssn[a0_0x5941('0xc')],'function');}),it('getOffsetTimestamp\x20function\x20exists',function(){assert['equal'](typeof ssn[a0_0x5941('0x53')],a0_0x5941('0x2e'));}),it('setMasterOffset\x20function\x20exists',function(){assert[a0_0x5941('0x23')](typeof ssn[a0_0x5941('0x53')],a0_0x5941('0x2e'));}),it(a0_0x5941('0x4a'),function(){assert[a0_0x5941('0x23')](typeof ssn[a0_0x5941('0x49')],a0_0x5941('0x2e'));}),it(a0_0x5941('0x39'),function(){assert['equal'](typeof ssn[a0_0x5941('0x32')],a0_0x5941('0x2e'));}),it('master\x20set\x20correctly',function(){assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x6d')](),![]);}),it(a0_0x5941('0x4d'),function(){ssn[a0_0x5941('0x21')](),assert['equal'](ssn[a0_0x5941('0x1d')],-0x1);}),it(a0_0x5941('0x3'),function(){assert[a0_0x5941('0x23')](ssn[a0_0x5941('0xc')](0x0),![]);});}),describe('data\x20insertion',function(){it(a0_0x5941('0x50'),function(){ssn[a0_0x5941('0x58')](JSON[a0_0x5941('0x2f')]('{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}')),assert['equal'](ssn[a0_0x5941('0x5')][a0_0x5941('0x6')],0x1),assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x5')][0x0][a0_0x5941('0x3e')],0x0),assert[a0_0x5941('0x23')](ssn['buffer'][0x0][a0_0x5941('0x2a')],0x0),assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x5')][0x0][a0_0x5941('0x36')],0x1),assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x5')][0x0][a0_0x5941('0x40')],0x1),assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x5')][0x0]['dayOfWeek'],0x2),assert['equal'](ssn['buffer'][0x0][a0_0x5941('0x14')],0x1),assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x5')][0x0][a0_0x5941('0x4c')],0x1),assert['equal'](ssn[a0_0x5941('0x5')][0x0]['monthOfYear'],0x1),assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x5')][0x0][a0_0x5941('0x33')],0x0);}),it('stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion',function(){assert[a0_0x5941('0x64')](ssn[a0_0x5941('0x5')][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});}),it('24\x20more\x20data\x20insertions\x20-\x20check\x20buffer',function(){let _0x53b9e5=JSON[a0_0x5941('0x2f')](a0_0x5941('0x19'));for(let _0x4fee0a=0x1;_0x4fee0a<=0x18;_0x4fee0a++){_0x53b9e5[a0_0x5941('0x16')]=_0x4fee0a*0x3c*0x3c*0x3e8,_0x53b9e5['timeOfDay']=_0x4fee0a%0x18,_0x53b9e5[a0_0x5941('0x40')]=Math['floor'](_0x4fee0a/0x18)+0x1,_0x53b9e5['dayOfWeek']=Math[a0_0x5941('0x28')](_0x4fee0a/0x18)+0x2,_0x53b9e5[a0_0x5941('0x14')]=Math[a0_0x5941('0x28')](_0x4fee0a/0x18)+0x1,_0x53b9e5[a0_0x5941('0x40')]=Math[a0_0x5941('0x28')](_0x4fee0a/0x18)+0x1,_0x53b9e5[a0_0x5941('0x4c')]=0x1-Math[a0_0x5941('0x28')](_0x4fee0a/0x18),ssn['processRecord'](_0x53b9e5);}assert[a0_0x5941('0x23')](ssn[a0_0x5941('0x5')][a0_0x5941('0x6')],0x19);}),it(a0_0x5941('0xa'),function(){assert[a0_0x5941('0x64')](ssn[a0_0x5941('0x49')](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});}),it('coorect\x20partial\x20feature\x20vector',function(){ssn[a0_0x5941('0xc')](0x0),assert['deepEqual'](ssn['getPartialFeatureVector'](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});