var _0x30c7=['monthOfYear','aggregates\x20initialized\x20-\x20number','keys','aggregate','holiday|winbuf|604800000','holiday|ma|604800000','config\x20saved','config','fusionNodeI\x20correctly\x20saved','callback\x20function\x20should\x20be\x20set','processRecordCb','parent\x20saved','buffer\x20empty','buffer\x20position\x20is\x200','position','isMaster\x20function','connectToKafka\x20function\x20exists','connectToKafka','function','broadcastAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','deleteObsoleteRows\x20function\x20exists','deleteObsoleteRows','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','setMasterOffset','data\x20insertion','data\x20record\x20record\x20saved\x20correctly','processRecord','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','buffer','length','stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion','timestamp','floor','correct\x20aggregate\x20values','coorect\x20partial\x20feature\x20vector','setSlaveOffset','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','../../common/utils/fileManager.js','qminer','192.168.85.98:2181','winbuf','variance','min','max','holiday','none','test','energy','value','pc|ma|3600000','pc|ma|21600000','pc|ma|86400000','pc|ma|604800000','pc|ma|2592000000','pc|min|86400000','pc|min|604800000','pc|max|86400000','pc|max|604800000','pc|variance|21600000','pc|variance|86400000','pc|variance|604800000','static','timeOfDay','weekEnd','dayAfterHoliday','dayBeforeHoliday','dayOfWeek','dayOfYear','weather','temperature24','humidity24','pressure24','windBearing24','cloudCover24','streamingStaticNode','createFolder','./db2/','createClean','nodes','initialization','base\x20saved','equal','base','check\x20if\x20store\x20exists','rawstore','name','deepEqual','datetime','float','dayOfMonth'];(function(_0x58a4df,_0x19305e){var _0x439665=function(_0x5c768a){while(--_0x5c768a){_0x58a4df['push'](_0x58a4df['shift']());}};var _0x3478d9=function(){var _0x3a6cea={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5d3b41,_0x4d25d6,_0x27a9e3,_0x19b466){_0x19b466=_0x19b466||{};var _0x29d217=_0x4d25d6+'='+_0x27a9e3;var _0x14d4e0=0x0;for(var _0x14d4e0=0x0,_0x3f3866=_0x5d3b41['length'];_0x14d4e0<_0x3f3866;_0x14d4e0++){var _0x355559=_0x5d3b41[_0x14d4e0];_0x29d217+=';\x20'+_0x355559;var _0x26b2c8=_0x5d3b41[_0x355559];_0x5d3b41['push'](_0x26b2c8);_0x3f3866=_0x5d3b41['length'];if(_0x26b2c8!==!![]){_0x29d217+='='+_0x26b2c8;}}_0x19b466['cookie']=_0x29d217;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4eecc7,_0x2a8de4){_0x4eecc7=_0x4eecc7||function(_0x479a6b){return _0x479a6b;};var _0x3ab4af=_0x4eecc7(new RegExp('(?:^|;\x20)'+_0x2a8de4['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x329ad1=function(_0x1a9c6b,_0xaae225){_0x1a9c6b(++_0xaae225);};_0x329ad1(_0x439665,_0x19305e);return _0x3ab4af?decodeURIComponent(_0x3ab4af[0x1]):undefined;}};var _0x14cb3e=function(){var _0x580f70=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x580f70['test'](_0x3a6cea['removeCookie']['toString']());};_0x3a6cea['updateCookie']=_0x14cb3e;var _0x2cfbb8='';var _0x3267ef=_0x3a6cea['updateCookie']();if(!_0x3267ef){_0x3a6cea['setCookie'](['*'],'counter',0x1);}else if(_0x3267ef){_0x2cfbb8=_0x3a6cea['getCookie'](null,'counter');}else{_0x3a6cea['removeCookie']();}};_0x3478d9();}(_0x30c7,0x1d9));var _0x515d=function(_0x3981e8,_0x34bd50){_0x3981e8=_0x3981e8-0x0;var _0x33128b=_0x30c7[_0x3981e8];return _0x33128b;};var _0x58e60d=function(){var _0x53e0c3=!![];return function(_0x47da9c,_0x176ee9){var _0x3ea72a=_0x53e0c3?function(){if(_0x176ee9){var _0x4e2164=_0x176ee9['apply'](_0x47da9c,arguments);_0x176ee9=null;return _0x4e2164;}}:function(){};_0x53e0c3=![];return _0x3ea72a;};}();var _0x223036=_0x58e60d(this,function(){var _0x2a39ef=function(){return'\x64\x65\x76';},_0xeb18cd=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x37d457=function(){var _0x5b134e=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5b134e['\x74\x65\x73\x74'](_0x2a39ef['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2be626=function(){var _0x2c1a16=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x2c1a16['\x74\x65\x73\x74'](_0xeb18cd['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1b619c=function(_0x394aed){var _0x3fa377=~-0x1>>0x1+0xff%0x0;if(_0x394aed['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x3fa377)){_0x574a13(_0x394aed);}};var _0x574a13=function(_0x2cb373){var _0x1e3924=~-0x4>>0x1+0xff%0x0;if(_0x2cb373['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1e3924){_0x1b619c(_0x2cb373);}};if(!_0x37d457()){if(!_0x2be626()){_0x1b619c('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1b619c('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1b619c('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x223036();const streamingNode=require(_0x515d('0x0'));const streamingEnergyNode=require(_0x515d('0x1'));const streamingWeatherNode=require(_0x515d('0x2'));const streamingStaticNode=require(_0x515d('0x3'));const fileManager=require(_0x515d('0x4'));const qm=require(_0x515d('0x5'));const fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':_0x515d('0x6')};let aggrConfigs={'energy':[{'field':'pc','tick':[{'type':_0x515d('0x7'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x515d('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'variance'},{'type':'ma'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x515d('0x8')},{'type':'ma'},{'type':_0x515d('0x9')},{'type':_0x515d('0xa')}]},{'type':_0x515d('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x515d('0x8')},{'type':'ma'},{'type':_0x515d('0x9')},{'type':'max'}]},{'type':_0x515d('0x7'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':_0x515d('0xb'),'tick':[{'type':_0x515d('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'connection':{'type':_0x515d('0xc')},'fusionModel':_0x515d('0xd'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x515d('0xe'),'nodeid':'N1','aggrConfigId':_0x515d('0xe'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x515d('0xf'),'name':'pc'},{'type':_0x515d('0xf'),'name':_0x515d('0x10')},{'type':'value','name':_0x515d('0x11')},{'type':'value','name':_0x515d('0x12')},{'type':'value','name':_0x515d('0x13')},{'type':_0x515d('0xf'),'name':_0x515d('0x14')},{'type':_0x515d('0xf'),'name':_0x515d('0x15')},{'type':'value','name':_0x515d('0x16')},{'type':_0x515d('0xf'),'name':_0x515d('0x17')},{'type':_0x515d('0xf'),'name':_0x515d('0x18')},{'type':_0x515d('0xf'),'name':_0x515d('0x19')},{'type':'value','name':_0x515d('0x1a')},{'type':_0x515d('0xf'),'name':_0x515d('0x1b')}]},{'time':-0x18,'attributes':[{'type':_0x515d('0xf'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':'value','name':'pc'}]},{'time':-0xa8,'attributes':[{'type':_0x515d('0xf'),'name':'pc'}]}]},{'type':'static','nodeid':_0x515d('0x1c'),'aggrConfigId':_0x515d('0x1c'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':_0x515d('0xf'),'name':_0x515d('0x1d')},{'type':_0x515d('0xf'),'name':_0x515d('0x1e')},{'type':'value','name':'holiday'},{'type':_0x515d('0xf'),'name':_0x515d('0x1f')},{'type':'value','name':_0x515d('0x20')},{'type':_0x515d('0xf'),'name':_0x515d('0x21')},{'type':'value','name':_0x515d('0x22')},{'type':_0x515d('0xf'),'name':'monthOfYear'}]}]},{'type':_0x515d('0x23'),'nodeid':'weather','aggrConfigId':_0x515d('0x23'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':_0x515d('0x24')},{'type':_0x515d('0xf'),'name':_0x515d('0x25')},{'type':_0x515d('0xf'),'name':_0x515d('0x26')},{'type':'value','name':'windSpeed24'},{'type':_0x515d('0xf'),'name':_0x515d('0x27')},{'type':_0x515d('0xf'),'name':_0x515d('0x28')}]}]}]};function processRecordDummyCb(_0x5ba1da,_0x4d5c93){return!![];}describe(_0x515d('0x29'),function(){let _0x18cc33;let _0x40309d;before(function(){fileManager['removeFolder']('./db2/');fileManager[_0x515d('0x2a')](_0x515d('0x2b'));_0x18cc33=new qm['Base']({'dbPath':'./db2/','mode':_0x515d('0x2c')});ssn=new streamingStaticNode(_0x18cc33,connectionConfig,fusionConfig[_0x515d('0x2d')][0x1],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x18cc33['close']();});describe(_0x515d('0x2e'),function(){it(_0x515d('0x2f'),function(){assert[_0x515d('0x30')](_0x18cc33,ssn[_0x515d('0x31')]);});it(_0x515d('0x32'),function(){assert[_0x515d('0x30')](ssn[_0x515d('0x33')][_0x515d('0x34')],'static');});it('check\x20store\x20structure',function(){assert[_0x515d('0x35')](ssn[_0x515d('0x33')]['fields'],[{'id':0x0,'name':'Time','type':_0x515d('0x36'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x515d('0x1f'),'type':_0x515d('0x37'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':_0x515d('0x20'),'type':_0x515d('0x37'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':_0x515d('0x38'),'type':_0x515d('0x37'),'nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':_0x515d('0x21'),'type':_0x515d('0x37'),'nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':_0x515d('0x22'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':_0x515d('0xb'),'type':_0x515d('0x37'),'nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':_0x515d('0x39'),'type':_0x515d('0x37'),'nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':_0x515d('0x1e'),'type':_0x515d('0x37'),'nullable':![],'internal':![],'primary':![]}]);});it(_0x515d('0x3a'),function(){assert[_0x515d('0x30')](Object[_0x515d('0x3b')](ssn[_0x515d('0x3c')])['length'],0x3);});it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert['deepEqual'](Object['keys'](ssn['aggregate']),['holiday|tick',_0x515d('0x3d'),_0x515d('0x3e')]);});it(_0x515d('0x3f'),function(){assert['deepEqual'](ssn[_0x515d('0x40')],fusionConfig[_0x515d('0x2d')][0x1]);});it(_0x515d('0x41'),function(){assert[_0x515d('0x30')](ssn['fusionNodeI'],0x63);});it(_0x515d('0x42'),function(){assert['equal'](typeof ssn[_0x515d('0x43')],'function');});it(_0x515d('0x44'),function(){assert[_0x515d('0x30')](ssn['parent'],null);});it(_0x515d('0x45'),function(){assert[_0x515d('0x35')](ssn['buffer'],[]);});it(_0x515d('0x46'),function(){assert['equal'](ssn[_0x515d('0x47')],0x0);});it('master\x20flag\x20set\x20correctly',function(){assert[_0x515d('0x30')](ssn['master'],![]);});it(_0x515d('0x48'),function(){assert['equal'](ssn['isMaster'](),![]);});it(_0x515d('0x49'),function(){assert[_0x515d('0x30')](typeof ssn[_0x515d('0x4a')],_0x515d('0x4b'));});it(_0x515d('0x4c'),function(){assert['equal'](typeof ssn['broadcastAggregates'],'function');});it('createAggregates\x20function\x20exists',function(){assert[_0x515d('0x30')](typeof ssn[_0x515d('0x4d')],_0x515d('0x4b'));});it(_0x515d('0x4e'),function(){assert[_0x515d('0x30')](typeof ssn['offsetExists'],'function');});it(_0x515d('0x4f'),function(){assert[_0x515d('0x30')](typeof ssn[_0x515d('0x50')],_0x515d('0x4b'));});it(_0x515d('0x51'),function(){assert[_0x515d('0x30')](typeof ssn[_0x515d('0x52')],_0x515d('0x4b'));});it(_0x515d('0x53'),function(){assert['equal'](typeof ssn['setSlaveOffset'],_0x515d('0x4b'));});it(_0x515d('0x54'),function(){assert[_0x515d('0x30')](typeof ssn['getOffsetTimestamp'],'function');});it('setMasterOffset\x20function\x20exists',function(){assert[_0x515d('0x30')](typeof ssn[_0x515d('0x55')],_0x515d('0x4b'));});it(_0x515d('0x56'),function(){assert[_0x515d('0x30')](typeof ssn[_0x515d('0x57')],_0x515d('0x4b'));});it(_0x515d('0x58'),function(){assert['equal'](typeof ssn[_0x515d('0x59')],_0x515d('0x4b'));});it(_0x515d('0x5a'),function(){assert[_0x515d('0x30')](ssn['isMaster'](),![]);});it(_0x515d('0x5b'),function(){ssn[_0x515d('0x5c')]();assert['equal'](ssn['position'],-0x1);});it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[_0x515d('0x30')](ssn['setSlaveOffset'](0x0),![]);});});describe(_0x515d('0x5d'),function(){it(_0x515d('0x5e'),function(){ssn[_0x515d('0x5f')](JSON[_0x515d('0x60')](_0x515d('0x61')));assert[_0x515d('0x30')](ssn[_0x515d('0x62')][_0x515d('0x63')],0x1);assert['equal'](ssn['buffer'][0x0][_0x515d('0x1d')],0x0);assert[_0x515d('0x30')](ssn[_0x515d('0x62')][0x0]['dayAfterHoliday'],0x0);assert[_0x515d('0x30')](ssn[_0x515d('0x62')][0x0][_0x515d('0x20')],0x1);assert[_0x515d('0x30')](ssn[_0x515d('0x62')][0x0]['dayOfYear'],0x1);assert['equal'](ssn[_0x515d('0x62')][0x0][_0x515d('0x21')],0x2);assert['equal'](ssn[_0x515d('0x62')][0x0]['dayOfMonth'],0x1);assert[_0x515d('0x30')](ssn[_0x515d('0x62')][0x0][_0x515d('0xb')],0x1);assert[_0x515d('0x30')](ssn[_0x515d('0x62')][0x0][_0x515d('0x39')],0x1);assert[_0x515d('0x30')](ssn[_0x515d('0x62')][0x0]['weekEnd'],0x0);});it(_0x515d('0x64'),function(){assert[_0x515d('0x35')](ssn[_0x515d('0x62')][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});});it('24\x20more\x20data\x20insertions\x20-\x20check\x20buffer',function(){let _0x1693d0=JSON[_0x515d('0x60')]('{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}');for(let _0x18e55e=0x1;_0x18e55e<=0x18;_0x18e55e++){_0x1693d0[_0x515d('0x65')]=_0x18e55e*0x3c*0x3c*0x3e8;_0x1693d0[_0x515d('0x1d')]=_0x18e55e%0x18;_0x1693d0[_0x515d('0x22')]=Math[_0x515d('0x66')](_0x18e55e/0x18)+0x1;_0x1693d0[_0x515d('0x21')]=Math['floor'](_0x18e55e/0x18)+0x2;_0x1693d0['dayOfMonth']=Math[_0x515d('0x66')](_0x18e55e/0x18)+0x1;_0x1693d0[_0x515d('0x22')]=Math['floor'](_0x18e55e/0x18)+0x1;_0x1693d0[_0x515d('0xb')]=0x1-Math[_0x515d('0x66')](_0x18e55e/0x18);ssn[_0x515d('0x5f')](_0x1693d0);}assert[_0x515d('0x30')](ssn[_0x515d('0x62')][_0x515d('0x63')],0x19);});it(_0x515d('0x67'),function(){assert[_0x515d('0x35')](ssn[_0x515d('0x57')](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});});it(_0x515d('0x68'),function(){ssn[_0x515d('0x69')](0x0);assert[_0x515d('0x35')](ssn['getPartialFeatureVector'](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});