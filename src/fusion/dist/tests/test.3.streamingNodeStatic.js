var _0x19e0=['parent','buffer\x20empty','buffer','buffer\x20position\x20is\x200','position','master','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','connectToKafka','broadcastAggregates','createAggregates\x20function\x20exists','createAggregates','deleteObsoleteRows\x20function\x20exists','deleteObsoleteRows','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','setSlaveOffset','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates\x20function\x20exists','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20set\x20correctly','setMasterOffset','data\x20insertion','data\x20record\x20record\x20saved\x20correctly','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion','24\x20more\x20data\x20insertions\x20-\x20check\x20buffer','timestamp','floor','processRecord','correct\x20aggregate\x20values','getAggregates','coorect\x20partial\x20feature\x20vector','../nodes/streamingNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','../common/utils/fileManager.js','qminer','assert','192.168.85.98:2181','winbuf','variance','min','max','none','energy','value','pc|ma|3600000','pc|ma|604800000','pc|min|86400000','pc|max|604800000','pc|variance|21600000','pc|variance|86400000','pc|variance|604800000','static','timeOfDay','weekEnd','dayAfterHoliday','dayOfWeek','dayOfYear','monthOfYear','weather','temperature24','humidity24','windSpeed24','windBearing24','cloudCover24','streamingStaticNode','removeFolder','./db2/','Base','createClean','initialization','base\x20saved','equal','base','check\x20if\x20store\x20exists','rawstore','name','check\x20store\x20structure','fields','Time','datetime','float','dayBeforeHoliday','dayOfMonth','holiday','keys','aggregate','length','aggregates\x20initialized\x20-\x20key\x20names','deepEqual','holiday|tick','holiday|ma|604800000','callback\x20function\x20should\x20be\x20set','function','parent\x20saved'];(function(_0x38ab51,_0x5848a2){var _0x36bf5b=function(_0x226cad){while(--_0x226cad){_0x38ab51['push'](_0x38ab51['shift']());}};var _0x28a139=function(){var _0x20bd91={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x175327,_0x221f15,_0x58281f,_0x522732){_0x522732=_0x522732||{};var _0x209b06=_0x221f15+'='+_0x58281f;var _0x197945=0x0;for(var _0x197945=0x0,_0xc1a5a=_0x175327['length'];_0x197945<_0xc1a5a;_0x197945++){var _0x1c7ef9=_0x175327[_0x197945];_0x209b06+=';\x20'+_0x1c7ef9;var _0x1f44b4=_0x175327[_0x1c7ef9];_0x175327['push'](_0x1f44b4);_0xc1a5a=_0x175327['length'];if(_0x1f44b4!==!![]){_0x209b06+='='+_0x1f44b4;}}_0x522732['cookie']=_0x209b06;},'removeCookie':function(){return'dev';},'getCookie':function(_0x14e01e,_0x273403){_0x14e01e=_0x14e01e||function(_0x6b5ab2){return _0x6b5ab2;};var _0x2a62d6=_0x14e01e(new RegExp('(?:^|;\x20)'+_0x273403['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x3a36f9=function(_0xea1a9c,_0xb792f8){_0xea1a9c(++_0xb792f8);};_0x3a36f9(_0x36bf5b,_0x5848a2);return _0x2a62d6?decodeURIComponent(_0x2a62d6[0x1]):undefined;}};var _0x515fda=function(){var _0x1d5c83=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1d5c83['test'](_0x20bd91['removeCookie']['toString']());};_0x20bd91['updateCookie']=_0x515fda;var _0x5b6632='';var _0x19ede1=_0x20bd91['updateCookie']();if(!_0x19ede1){_0x20bd91['setCookie'](['*'],'counter',0x1);}else if(_0x19ede1){_0x5b6632=_0x20bd91['getCookie'](null,'counter');}else{_0x20bd91['removeCookie']();}};_0x28a139();}(_0x19e0,0xf5));var _0x397c=function(_0x3d6fb6,_0x24002d){_0x3d6fb6=_0x3d6fb6-0x0;var _0x151cc0=_0x19e0[_0x3d6fb6];return _0x151cc0;};var _0xc5d61b=function(){var _0x803652=!![];return function(_0x569c68,_0x2ef055){var _0x1a8eb2=_0x803652?function(){if(_0x2ef055){var _0x25c72e=_0x2ef055['apply'](_0x569c68,arguments);_0x2ef055=null;return _0x25c72e;}}:function(){};_0x803652=![];return _0x1a8eb2;};}();var _0x2bd051=_0xc5d61b(this,function(){var _0x323e40=function(){return'\x64\x65\x76';},_0x47b8a5=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x235c12=function(){var _0x5aa4ab=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5aa4ab['\x74\x65\x73\x74'](_0x323e40['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2f64bb=function(){var _0x1d554c=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x1d554c['\x74\x65\x73\x74'](_0x47b8a5['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2b92ca=function(_0x33cc4c){var _0x37a62d=~-0x1>>0x1+0xff%0x0;if(_0x33cc4c['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x37a62d)){_0x2ef0b5(_0x33cc4c);}};var _0x2ef0b5=function(_0x34e4f1){var _0x4ee45e=~-0x4>>0x1+0xff%0x0;if(_0x34e4f1['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x4ee45e){_0x2b92ca(_0x34e4f1);}};if(!_0x235c12()){if(!_0x2f64bb()){_0x2b92ca('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x2b92ca('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x2b92ca('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x2bd051();const streamingNode=require(_0x397c('0x0'));const streamingEnergyNode=require('../nodes/streamingEnergyNode.js');const streamingWeatherNode=require(_0x397c('0x1'));const streamingStaticNode=require(_0x397c('0x2'));const fileManager=require(_0x397c('0x3'));const qm=require(_0x397c('0x4'));const fs=require('fs');var assert=require(_0x397c('0x5'));let connectionConfig={'zookeeper':_0x397c('0x6')};let aggrConfigs={'energy':[{'field':'pc','tick':[{'type':_0x397c('0x7'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x397c('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':_0x397c('0x8')},{'type':'ma'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'variance'},{'type':'ma'},{'type':_0x397c('0x9')},{'type':_0x397c('0xa')}]},{'type':_0x397c('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x397c('0x8')},{'type':'ma'},{'type':_0x397c('0x9')},{'type':_0x397c('0xa')}]},{'type':_0x397c('0x7'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':'holiday','tick':[{'type':_0x397c('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'connection':{'type':_0x397c('0xb')},'fusionModel':'test','fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x397c('0xc'),'nodeid':'N1','aggrConfigId':_0x397c('0xc'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x397c('0xd'),'name':'pc'},{'type':_0x397c('0xd'),'name':_0x397c('0xe')},{'type':'value','name':'pc|ma|21600000'},{'type':_0x397c('0xd'),'name':'pc|ma|86400000'},{'type':_0x397c('0xd'),'name':_0x397c('0xf')},{'type':_0x397c('0xd'),'name':'pc|ma|2592000000'},{'type':_0x397c('0xd'),'name':_0x397c('0x10')},{'type':'value','name':'pc|min|604800000'},{'type':_0x397c('0xd'),'name':'pc|max|86400000'},{'type':'value','name':_0x397c('0x11')},{'type':_0x397c('0xd'),'name':_0x397c('0x12')},{'type':_0x397c('0xd'),'name':_0x397c('0x13')},{'type':_0x397c('0xd'),'name':_0x397c('0x14')}]},{'time':-0x18,'attributes':[{'type':_0x397c('0xd'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':_0x397c('0xd'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':_0x397c('0xd'),'name':'pc'}]}]},{'type':_0x397c('0x15'),'nodeid':'static','aggrConfigId':_0x397c('0x15'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':'value','name':_0x397c('0x16')},{'type':_0x397c('0xd'),'name':_0x397c('0x17')},{'type':'value','name':'holiday'},{'type':_0x397c('0xd'),'name':_0x397c('0x18')},{'type':_0x397c('0xd'),'name':'dayBeforeHoliday'},{'type':_0x397c('0xd'),'name':_0x397c('0x19')},{'type':_0x397c('0xd'),'name':_0x397c('0x1a')},{'type':_0x397c('0xd'),'name':_0x397c('0x1b')}]}]},{'type':_0x397c('0x1c'),'nodeid':_0x397c('0x1c'),'aggrConfigId':_0x397c('0x1c'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':_0x397c('0xd'),'name':_0x397c('0x1d')},{'type':'value','name':_0x397c('0x1e')},{'type':_0x397c('0xd'),'name':'pressure24'},{'type':_0x397c('0xd'),'name':_0x397c('0x1f')},{'type':'value','name':_0x397c('0x20')},{'type':_0x397c('0xd'),'name':_0x397c('0x21')}]}]}]};function processRecordDummyCb(_0x454555,_0x53885f){return!![];}describe(_0x397c('0x22'),function(){let _0x12e717;let _0x57e595;before(function(){fileManager[_0x397c('0x23')](_0x397c('0x24'));fileManager['createFolder'](_0x397c('0x24'));_0x12e717=new qm[(_0x397c('0x25'))]({'dbPath':_0x397c('0x24'),'mode':_0x397c('0x26')});ssn=new streamingStaticNode(_0x12e717,connectionConfig,fusionConfig['nodes'][0x1],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x12e717['close']();});describe(_0x397c('0x27'),function(){it(_0x397c('0x28'),function(){assert[_0x397c('0x29')](_0x12e717,ssn[_0x397c('0x2a')]);});it(_0x397c('0x2b'),function(){assert[_0x397c('0x29')](ssn[_0x397c('0x2c')][_0x397c('0x2d')],_0x397c('0x15'));});it(_0x397c('0x2e'),function(){assert['deepEqual'](ssn[_0x397c('0x2c')][_0x397c('0x2f')],[{'id':0x0,'name':_0x397c('0x30'),'type':_0x397c('0x31'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x397c('0x18'),'type':_0x397c('0x32'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':_0x397c('0x33'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':_0x397c('0x34'),'type':_0x397c('0x32'),'nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':_0x397c('0x19'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':_0x397c('0x1a'),'type':_0x397c('0x32'),'nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':_0x397c('0x35'),'type':_0x397c('0x32'),'nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':'monthOfYear','type':_0x397c('0x32'),'nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':_0x397c('0x17'),'type':_0x397c('0x32'),'nullable':![],'internal':![],'primary':![]}]);});it('aggregates\x20initialized\x20-\x20number',function(){assert[_0x397c('0x29')](Object[_0x397c('0x36')](ssn[_0x397c('0x37')])[_0x397c('0x38')],0x3);});it(_0x397c('0x39'),function(){assert[_0x397c('0x3a')](Object['keys'](ssn[_0x397c('0x37')]),[_0x397c('0x3b'),'holiday|winbuf|604800000',_0x397c('0x3c')]);});it('config\x20saved',function(){assert['deepEqual'](ssn['config'],fusionConfig['nodes'][0x1]);});it('fusionNodeI\x20correctly\x20saved',function(){assert['equal'](ssn['fusionNodeI'],0x63);});it(_0x397c('0x3d'),function(){assert[_0x397c('0x29')](typeof ssn['processRecordCb'],_0x397c('0x3e'));});it(_0x397c('0x3f'),function(){assert[_0x397c('0x29')](ssn[_0x397c('0x40')],null);});it(_0x397c('0x41'),function(){assert[_0x397c('0x3a')](ssn[_0x397c('0x42')],[]);});it(_0x397c('0x43'),function(){assert[_0x397c('0x29')](ssn[_0x397c('0x44')],0x0);});it('master\x20flag\x20set\x20correctly',function(){assert['equal'](ssn[_0x397c('0x45')],![]);});it(_0x397c('0x46'),function(){assert['equal'](ssn[_0x397c('0x47')](),![]);});it(_0x397c('0x48'),function(){assert[_0x397c('0x29')](typeof ssn[_0x397c('0x49')],'function');});it('broadcastAggregates\x20function\x20exists',function(){assert[_0x397c('0x29')](typeof ssn[_0x397c('0x4a')],_0x397c('0x3e'));});it(_0x397c('0x4b'),function(){assert['equal'](typeof ssn[_0x397c('0x4c')],_0x397c('0x3e'));});it('offsetExists\x20function\x20exists',function(){assert['equal'](typeof ssn['offsetExists'],'function');});it(_0x397c('0x4d'),function(){assert[_0x397c('0x29')](typeof ssn[_0x397c('0x4e')],'function');});it(_0x397c('0x4f'),function(){assert[_0x397c('0x29')](typeof ssn[_0x397c('0x50')],_0x397c('0x3e'));});it(_0x397c('0x51'),function(){assert[_0x397c('0x29')](typeof ssn[_0x397c('0x52')],_0x397c('0x3e'));});it(_0x397c('0x53'),function(){assert[_0x397c('0x29')](typeof ssn[_0x397c('0x54')],'function');});it(_0x397c('0x55'),function(){assert[_0x397c('0x29')](typeof ssn[_0x397c('0x54')],_0x397c('0x3e'));});it(_0x397c('0x56'),function(){assert['equal'](typeof ssn['getAggregates'],_0x397c('0x3e'));});it(_0x397c('0x57'),function(){assert[_0x397c('0x29')](typeof ssn[_0x397c('0x58')],_0x397c('0x3e'));});it(_0x397c('0x59'),function(){assert['equal'](ssn[_0x397c('0x47')](),![]);});it('master\x20offset\x20set\x20correctly',function(){ssn[_0x397c('0x5a')]();assert[_0x397c('0x29')](ssn['position'],-0x1);});it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[_0x397c('0x29')](ssn[_0x397c('0x52')](0x0),![]);});});describe(_0x397c('0x5b'),function(){it(_0x397c('0x5c'),function(){ssn['processRecord'](JSON[_0x397c('0x5d')](_0x397c('0x5e')));assert[_0x397c('0x29')](ssn[_0x397c('0x42')][_0x397c('0x38')],0x1);assert[_0x397c('0x29')](ssn[_0x397c('0x42')][0x0][_0x397c('0x16')],0x0);assert['equal'](ssn['buffer'][0x0][_0x397c('0x18')],0x0);assert[_0x397c('0x29')](ssn[_0x397c('0x42')][0x0][_0x397c('0x33')],0x1);assert[_0x397c('0x29')](ssn[_0x397c('0x42')][0x0][_0x397c('0x1a')],0x1);assert[_0x397c('0x29')](ssn[_0x397c('0x42')][0x0][_0x397c('0x19')],0x2);assert[_0x397c('0x29')](ssn[_0x397c('0x42')][0x0]['dayOfMonth'],0x1);assert[_0x397c('0x29')](ssn[_0x397c('0x42')][0x0][_0x397c('0x35')],0x1);assert[_0x397c('0x29')](ssn[_0x397c('0x42')][0x0][_0x397c('0x1b')],0x1);assert[_0x397c('0x29')](ssn[_0x397c('0x42')][0x0][_0x397c('0x17')],0x0);});it(_0x397c('0x5f'),function(){assert[_0x397c('0x3a')](ssn[_0x397c('0x42')][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});});it(_0x397c('0x60'),function(){let _0x2b62bc=JSON[_0x397c('0x5d')](_0x397c('0x5e'));for(let _0x534604=0x1;_0x534604<=0x18;_0x534604++){_0x2b62bc[_0x397c('0x61')]=_0x534604*0x3c*0x3c*0x3e8;_0x2b62bc[_0x397c('0x16')]=_0x534604%0x18;_0x2b62bc[_0x397c('0x1a')]=Math['floor'](_0x534604/0x18)+0x1;_0x2b62bc[_0x397c('0x19')]=Math[_0x397c('0x62')](_0x534604/0x18)+0x2;_0x2b62bc[_0x397c('0x34')]=Math[_0x397c('0x62')](_0x534604/0x18)+0x1;_0x2b62bc['dayOfYear']=Math['floor'](_0x534604/0x18)+0x1;_0x2b62bc['holiday']=0x1-Math[_0x397c('0x62')](_0x534604/0x18);ssn[_0x397c('0x63')](_0x2b62bc);}assert[_0x397c('0x29')](ssn['buffer'][_0x397c('0x38')],0x19);});it(_0x397c('0x64'),function(){assert['deepEqual'](ssn[_0x397c('0x65')](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});});it(_0x397c('0x66'),function(){ssn[_0x397c('0x52')](0x0);assert[_0x397c('0x3a')](ssn['getPartialFeatureVector'](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});