const a0_0x52ad=['./db2/','coorect\x20partial\x20feature\x20vector','checkDataAvailability\x20function\x20exists','pressure24','deleteObsoleteRows','deepEqual','min','stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion','setSlaveOffset\x20function\x20exists','constructor','fields','../nodes/streamingWeatherNode.js','createAggregates\x20function\x20exists','test','datetime','holiday','none','weather','../nodes/streamingStaticNode.js','processRecordCb','rawstore','equal','holiday|winbuf|604800000','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','keys','holiday|tick','winbuf','dayOfWeek','aggregate','getPartialFeatureVector\x20function\x20exists','value','nodes','pc|ma|2592000000','pc|ma|86400000','weekEnd','config\x20saved','getAggregates\x20function\x20exists','removeFolder','offsetExists','check\x20store\x20structure','base\x20saved','isMaster','master\x20set\x20correctly','close','broadcastAggregates','pc|variance|604800000','buffer\x20position\x20is\x200','dayOfYear','temperature24','../common/utils/fileManager.js','processRecord','function','../nodes/streamingEnergyNode.js','connectToKafka\x20function\x20exists','name','isMaster\x20function','pc|variance|21600000','createClean','Time','float','max','slave\x20offset\x20set\x20correctly:\x20no\x20data','pc|max|604800000','dayAfterHoliday','setSlaveOffset','assert','checkDataAvailability','master','parent\x20saved','master\x20flag\x20set\x20correctly','dayBeforeHoliday','static','data\x20record\x20record\x20saved\x20correctly','buffer','setMasterOffset\x20function\x20exists','connectToKafka','getPartialFeatureVector','floor','dayOfMonth','getOffsetTimestamp\x20function\x20exists','energy','aggregates\x20initialized\x20-\x20key\x20names','Base','setMasterOffset','variance','fusionNodeI\x20correctly\x20saved','humidity24','timeOfDay','monthOfYear','getOffsetTimestamp','correct\x20aggregate\x20values','pc|variance|86400000','pc|ma|3600000','192.168.85.98:2181','offsetExists\x20function\x20exists','streamingStaticNode','pc|max|86400000','windSpeed24','createAggregates','data\x20insertion'];(function(_0x43be00,_0x52adaf){const _0x1bb690=function(_0x141484){while(--_0x141484){_0x43be00['push'](_0x43be00['shift']());}},_0x2bf964=function(){const _0x5b7c23={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2e270e,_0x3e7974,_0x8bcb70,_0x4b5c50){_0x4b5c50=_0x4b5c50||{};let _0x5e76c3=_0x3e7974+'='+_0x8bcb70,_0x2f8eb5=0x0;for(let _0x51fecb=0x0,_0x1dc6ec=_0x2e270e['length'];_0x51fecb<_0x1dc6ec;_0x51fecb++){const _0x5b7e54=_0x2e270e[_0x51fecb];_0x5e76c3+=';\x20'+_0x5b7e54;const _0x58fdf3=_0x2e270e[_0x5b7e54];_0x2e270e['push'](_0x58fdf3),_0x1dc6ec=_0x2e270e['length'],_0x58fdf3!==!![]&&(_0x5e76c3+='='+_0x58fdf3);}_0x4b5c50['cookie']=_0x5e76c3;},'removeCookie':function(){return'dev';},'getCookie':function(_0x47a714,_0x26af0c){_0x47a714=_0x47a714||function(_0x20523e){return _0x20523e;};const _0x7172af=_0x47a714(new RegExp('(?:^|;\x20)'+_0x26af0c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x16f689=function(_0x4a9193,_0xaeb04b){_0x4a9193(++_0xaeb04b);};return _0x16f689(_0x1bb690,_0x52adaf),_0x7172af?decodeURIComponent(_0x7172af[0x1]):undefined;}},_0x25d005=function(){const _0x1bb43a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1bb43a['test'](_0x5b7c23['removeCookie']['toString']());};_0x5b7c23['updateCookie']=_0x25d005;let _0x2ab307='';const _0x529b10=_0x5b7c23['updateCookie']();if(!_0x529b10)_0x5b7c23['setCookie'](['*'],'counter',0x1);else _0x529b10?_0x2ab307=_0x5b7c23['getCookie'](null,'counter'):_0x5b7c23['removeCookie']();};_0x2bf964();}(a0_0x52ad,0x180));const a0_0x1bb6=function(_0x43be00,_0x52adaf){_0x43be00=_0x43be00-0x0;let _0x1bb690=a0_0x52ad[_0x43be00];return _0x1bb690;};const a0_0x8bcb70=function(){let _0x35171a=!![];return function(_0x262128,_0x4d29dd){const _0x20208e=_0x35171a?function(){if(_0x4d29dd){const _0x1798a8=_0x4d29dd['apply'](_0x262128,arguments);return _0x4d29dd=null,_0x1798a8;}}:function(){};return _0x35171a=![],_0x20208e;};}(),a0_0x3e7974=a0_0x8bcb70(this,function(){const _0x1c17e2=function(){const _0x4160f1=_0x1c17e2[a0_0x1bb6('0x1d')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a0_0x1bb6('0x1d')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x4160f1['test'](a0_0x3e7974);};return _0x1c17e2();});a0_0x3e7974();const streamingNode=require('../nodes/streamingNode.js'),streamingEnergyNode=require(a0_0x1bb6('0x49')),streamingWeatherNode=require(a0_0x1bb6('0x1f')),streamingStaticNode=require(a0_0x1bb6('0x26')),fileManager=require(a0_0x1bb6('0x46')),qm=require('qminer'),fs=require('fs');var assert=require(a0_0x1bb6('0x56'));let connectionConfig={'zookeeper':a0_0x1bb6('0xd')},aggrConfigs={'energy':[{'field':'pc','tick':[{'type':a0_0x1bb6('0x2f'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x1bb6('0x2f'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'variance'},{'type':'ma'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x1bb6('0x4')},{'type':'ma'},{'type':a0_0x1bb6('0x1a')},{'type':a0_0x1bb6('0x51')}]},{'type':a0_0x1bb6('0x2f'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x1bb6('0x4')},{'type':'ma'},{'type':'min'},{'type':a0_0x1bb6('0x51')}]},{'type':a0_0x1bb6('0x2f'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':a0_0x1bb6('0x23'),'tick':[{'type':a0_0x1bb6('0x2f'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'connection':{'type':a0_0x1bb6('0x24')},'fusionModel':a0_0x1bb6('0x21'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'energy','nodeid':'N1','aggrConfigId':a0_0x1bb6('0x0'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x1bb6('0x33'),'name':'pc'},{'type':'value','name':a0_0x1bb6('0xc')},{'type':a0_0x1bb6('0x33'),'name':'pc|ma|21600000'},{'type':'value','name':a0_0x1bb6('0x36')},{'type':'value','name':'pc|ma|604800000'},{'type':'value','name':a0_0x1bb6('0x35')},{'type':a0_0x1bb6('0x33'),'name':'pc|min|86400000'},{'type':'value','name':'pc|min|604800000'},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x10')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x53')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x4d')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0xb')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x42')}]},{'time':-0x18,'attributes':[{'type':a0_0x1bb6('0x33'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':a0_0x1bb6('0x33'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':a0_0x1bb6('0x33'),'name':'pc'}]}]},{'type':a0_0x1bb6('0x5c'),'nodeid':'static','aggrConfigId':a0_0x1bb6('0x5c'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x7')},{'type':a0_0x1bb6('0x33'),'name':'weekEnd'},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x23')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x54')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x5b')},{'type':'value','name':a0_0x1bb6('0x30')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x44')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x8')}]}]},{'type':a0_0x1bb6('0x25'),'nodeid':a0_0x1bb6('0x25'),'aggrConfigId':'weather','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x45')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x6')},{'type':a0_0x1bb6('0x33'),'name':a0_0x1bb6('0x17')},{'type':'value','name':a0_0x1bb6('0x11')},{'type':a0_0x1bb6('0x33'),'name':'windBearing24'},{'type':a0_0x1bb6('0x33'),'name':'cloudCover24'}]}]}]};function processRecordDummyCb(_0x321f49,_0x4a86b4){return!![];}describe(a0_0x1bb6('0xf'),function(){let _0x49bd9f,_0x1360a9;before(function(){fileManager[a0_0x1bb6('0x3a')](a0_0x1bb6('0x14')),fileManager['createFolder']('./db2/'),_0x49bd9f=new qm[(a0_0x1bb6('0x2'))]({'dbPath':'./db2/','mode':a0_0x1bb6('0x4e')}),ssn=new streamingStaticNode(_0x49bd9f,connectionConfig,fusionConfig[a0_0x1bb6('0x34')][0x1],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x49bd9f[a0_0x1bb6('0x40')]();}),describe('initialization',function(){it(a0_0x1bb6('0x3d'),function(){assert['equal'](_0x49bd9f,ssn['base']);}),it('check\x20if\x20store\x20exists',function(){assert['equal'](ssn[a0_0x1bb6('0x28')][a0_0x1bb6('0x4b')],'static');}),it(a0_0x1bb6('0x3c'),function(){assert['deepEqual'](ssn[a0_0x1bb6('0x28')][a0_0x1bb6('0x1e')],[{'id':0x0,'name':a0_0x1bb6('0x4f'),'type':a0_0x1bb6('0x22'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x1bb6('0x54'),'type':a0_0x1bb6('0x50'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'dayBeforeHoliday','type':a0_0x1bb6('0x50'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':a0_0x1bb6('0x63'),'type':a0_0x1bb6('0x50'),'nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':a0_0x1bb6('0x30'),'type':a0_0x1bb6('0x50'),'nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':'dayOfYear','type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':'holiday','type':a0_0x1bb6('0x50'),'nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':a0_0x1bb6('0x8'),'type':a0_0x1bb6('0x50'),'nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':a0_0x1bb6('0x37'),'type':'float','nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x1bb6('0x29')](Object[a0_0x1bb6('0x2d')](ssn[a0_0x1bb6('0x31')])['length'],0x3);}),it(a0_0x1bb6('0x1'),function(){assert[a0_0x1bb6('0x19')](Object['keys'](ssn[a0_0x1bb6('0x31')]),[a0_0x1bb6('0x2e'),a0_0x1bb6('0x2a'),'holiday|ma|604800000']);}),it(a0_0x1bb6('0x38'),function(){assert[a0_0x1bb6('0x19')](ssn['config'],fusionConfig[a0_0x1bb6('0x34')][0x1]);}),it(a0_0x1bb6('0x5'),function(){assert[a0_0x1bb6('0x29')](ssn['fusionNodeI'],0x63);}),it('callback\x20function\x20should\x20be\x20set',function(){assert[a0_0x1bb6('0x29')](typeof ssn[a0_0x1bb6('0x27')],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0x59'),function(){assert[a0_0x1bb6('0x29')](ssn['parent'],null);}),it('buffer\x20empty',function(){assert['deepEqual'](ssn['buffer'],[]);}),it(a0_0x1bb6('0x43'),function(){assert['equal'](ssn['position'],0x0);}),it(a0_0x1bb6('0x5a'),function(){assert[a0_0x1bb6('0x29')](ssn[a0_0x1bb6('0x58')],![]);}),it(a0_0x1bb6('0x4c'),function(){assert[a0_0x1bb6('0x29')](ssn[a0_0x1bb6('0x3e')](),![]);}),it(a0_0x1bb6('0x4a'),function(){assert['equal'](typeof ssn[a0_0x1bb6('0x60')],a0_0x1bb6('0x48'));}),it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof ssn[a0_0x1bb6('0x41')],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0x20'),function(){assert[a0_0x1bb6('0x29')](typeof ssn[a0_0x1bb6('0x12')],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0xe'),function(){assert[a0_0x1bb6('0x29')](typeof ssn[a0_0x1bb6('0x3b')],a0_0x1bb6('0x48'));}),it('deleteObsoleteRows\x20function\x20exists',function(){assert['equal'](typeof ssn[a0_0x1bb6('0x18')],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0x16'),function(){assert[a0_0x1bb6('0x29')](typeof ssn[a0_0x1bb6('0x57')],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0x1c'),function(){assert[a0_0x1bb6('0x29')](typeof ssn[a0_0x1bb6('0x55')],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0x64'),function(){assert[a0_0x1bb6('0x29')](typeof ssn[a0_0x1bb6('0x9')],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0x5f'),function(){assert[a0_0x1bb6('0x29')](typeof ssn[a0_0x1bb6('0x9')],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0x39'),function(){assert[a0_0x1bb6('0x29')](typeof ssn['getAggregates'],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0x32'),function(){assert[a0_0x1bb6('0x29')](typeof ssn[a0_0x1bb6('0x61')],a0_0x1bb6('0x48'));}),it(a0_0x1bb6('0x3f'),function(){assert['equal'](ssn['isMaster'](),![]);}),it('master\x20offset\x20set\x20correctly',function(){ssn[a0_0x1bb6('0x3')](),assert[a0_0x1bb6('0x29')](ssn['position'],-0x1);}),it(a0_0x1bb6('0x52'),function(){assert['equal'](ssn['setSlaveOffset'](0x0),![]);});}),describe(a0_0x1bb6('0x13'),function(){it(a0_0x1bb6('0x5d'),function(){ssn[a0_0x1bb6('0x47')](JSON[a0_0x1bb6('0x2b')](a0_0x1bb6('0x2c'))),assert['equal'](ssn[a0_0x1bb6('0x5e')]['length'],0x1),assert[a0_0x1bb6('0x29')](ssn[a0_0x1bb6('0x5e')][0x0][a0_0x1bb6('0x7')],0x0),assert[a0_0x1bb6('0x29')](ssn[a0_0x1bb6('0x5e')][0x0]['dayAfterHoliday'],0x0),assert[a0_0x1bb6('0x29')](ssn[a0_0x1bb6('0x5e')][0x0][a0_0x1bb6('0x5b')],0x1),assert[a0_0x1bb6('0x29')](ssn[a0_0x1bb6('0x5e')][0x0][a0_0x1bb6('0x44')],0x1),assert[a0_0x1bb6('0x29')](ssn[a0_0x1bb6('0x5e')][0x0][a0_0x1bb6('0x30')],0x2),assert[a0_0x1bb6('0x29')](ssn['buffer'][0x0]['dayOfMonth'],0x1),assert[a0_0x1bb6('0x29')](ssn[a0_0x1bb6('0x5e')][0x0]['holiday'],0x1),assert[a0_0x1bb6('0x29')](ssn[a0_0x1bb6('0x5e')][0x0]['monthOfYear'],0x1),assert['equal'](ssn[a0_0x1bb6('0x5e')][0x0]['weekEnd'],0x0);}),it(a0_0x1bb6('0x1b'),function(){assert[a0_0x1bb6('0x19')](ssn['buffer'][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});}),it('24\x20more\x20data\x20insertions\x20-\x20check\x20buffer',function(){let _0x328649=JSON[a0_0x1bb6('0x2b')](a0_0x1bb6('0x2c'));for(let _0x9be749=0x1;_0x9be749<=0x18;_0x9be749++){_0x328649['timestamp']=_0x9be749*0x3c*0x3c*0x3e8,_0x328649[a0_0x1bb6('0x7')]=_0x9be749%0x18,_0x328649[a0_0x1bb6('0x44')]=Math[a0_0x1bb6('0x62')](_0x9be749/0x18)+0x1,_0x328649[a0_0x1bb6('0x30')]=Math['floor'](_0x9be749/0x18)+0x2,_0x328649[a0_0x1bb6('0x63')]=Math[a0_0x1bb6('0x62')](_0x9be749/0x18)+0x1,_0x328649[a0_0x1bb6('0x44')]=Math[a0_0x1bb6('0x62')](_0x9be749/0x18)+0x1,_0x328649[a0_0x1bb6('0x23')]=0x1-Math[a0_0x1bb6('0x62')](_0x9be749/0x18),ssn['processRecord'](_0x328649);}assert['equal'](ssn[a0_0x1bb6('0x5e')]['length'],0x19);}),it(a0_0x1bb6('0xa'),function(){assert[a0_0x1bb6('0x19')](ssn['getAggregates'](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});}),it(a0_0x1bb6('0x15'),function(){ssn[a0_0x1bb6('0x55')](0x0),assert[a0_0x1bb6('0x19')](ssn['getPartialFeatureVector'](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});