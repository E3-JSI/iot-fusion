const a0_0x4a83=['getOffsetTimestamp\x20function\x20exists','pc|variance|86400000','buffer','aggregates\x20initialized\x20-\x20key\x20names','../nodes/streamingNode.js','pc|ma|21600000','pc|min|604800000','./db2/','humidity24','pc|max|86400000','../nodes/streamingEnergyNode.js','dayBeforeHoliday','timeOfDay','holiday|tick','createAggregates\x20function\x20exists','fusionNodeI\x20correctly\x20saved','buffer\x20empty','timestamp','pressure24','pc|max|604800000','holiday','value','position','192.168.85.98:2181','getOffsetTimestamp','float','checkDataAvailability\x20function\x20exists','data\x20insertion','datetime','isMaster','holiday|winbuf|604800000','name','streamingStaticNode','dayAfterHoliday','data\x20record\x20record\x20saved\x20correctly','removeFolder','getAggregates\x20function\x20exists','floor','variance','pc|min|86400000','max','buffer\x20position\x20is\x200','createClean','setSlaveOffset\x20function\x20exists','keys','min','aggregate','weather','check\x20if\x20store\x20exists','offsetExists\x20function\x20exists','windBearing24','connectToKafka','setSlaveOffset','length','rawstore','monthOfYear','none','equal','24\x20more\x20data\x20insertions\x20-\x20check\x20buffer','master\x20set\x20correctly','processRecord','config\x20saved','constructor','parent\x20saved','setMasterOffset\x20function\x20exists','pc|variance|604800000','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','pc|ma|2592000000','deepEqual','master\x20flag\x20set\x20correctly','Base','weekEnd','broadcastAggregates\x20function\x20exists','pc|ma|86400000','test','getPartialFeatureVector','stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion','processRecordCb','parse','offsetExists','qminer','getPartialFeatureVector\x20function\x20exists','windSpeed24','check\x20store\x20structure','winbuf','energy','getAggregates','dayOfYear','parent','master','correct\x20aggregate\x20values','function','deleteObsoleteRows','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','return\x20/\x22\x20+\x20this\x20+\x20\x22/','connectToKafka\x20function\x20exists','aggregates\x20initialized\x20-\x20number','fields','cloudCover24','../nodes/streamingStaticNode.js','static','dayOfWeek','../nodes/streamingWeatherNode.js'];(function(_0x13f06a,_0x4a836d){const _0x341e90=function(_0x501fd6){while(--_0x501fd6){_0x13f06a['push'](_0x13f06a['shift']());}},_0x2a3c7d=function(){const _0x1e6ca7={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x22973f,_0x450d0e,_0x14be18,_0x1a1981){_0x1a1981=_0x1a1981||{};let _0x4bccdd=_0x450d0e+'='+_0x14be18,_0x55da8b=0x0;for(let _0x224377=0x0,_0x1bc4c8=_0x22973f['length'];_0x224377<_0x1bc4c8;_0x224377++){const _0x465488=_0x22973f[_0x224377];_0x4bccdd+=';\x20'+_0x465488;const _0xfd84d=_0x22973f[_0x465488];_0x22973f['push'](_0xfd84d),_0x1bc4c8=_0x22973f['length'],_0xfd84d!==!![]&&(_0x4bccdd+='='+_0xfd84d);}_0x1a1981['cookie']=_0x4bccdd;},'removeCookie':function(){return'dev';},'getCookie':function(_0x28503c,_0x41f197){_0x28503c=_0x28503c||function(_0x4f62b0){return _0x4f62b0;};const _0x442ad7=_0x28503c(new RegExp('(?:^|;\x20)'+_0x41f197['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2a6bf0=function(_0x330a46,_0x4e7919){_0x330a46(++_0x4e7919);};return _0x2a6bf0(_0x341e90,_0x4a836d),_0x442ad7?decodeURIComponent(_0x442ad7[0x1]):undefined;}},_0x22d480=function(){const _0x2a8d00=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2a8d00['test'](_0x1e6ca7['removeCookie']['toString']());};_0x1e6ca7['updateCookie']=_0x22d480;let _0x1fb7a8='';const _0x4e964d=_0x1e6ca7['updateCookie']();if(!_0x4e964d)_0x1e6ca7['setCookie'](['*'],'counter',0x1);else _0x4e964d?_0x1fb7a8=_0x1e6ca7['getCookie'](null,'counter'):_0x1e6ca7['removeCookie']();};_0x2a3c7d();}(a0_0x4a83,0xb7));const a0_0x341e=function(_0x13f06a,_0x4a836d){_0x13f06a=_0x13f06a-0x0;let _0x341e90=a0_0x4a83[_0x13f06a];return _0x341e90;};const a0_0x14be18=function(){let _0x30e164=!![];return function(_0x44c4a7,_0x40ed5c){const _0x47dc99=_0x30e164?function(){if(_0x40ed5c){const _0x37a2ac=_0x40ed5c['apply'](_0x44c4a7,arguments);return _0x40ed5c=null,_0x37a2ac;}}:function(){};return _0x30e164=![],_0x47dc99;};}(),a0_0x450d0e=a0_0x14be18(this,function(){const _0x347c0e=function(){const _0x1329b3=_0x347c0e['constructor'](a0_0x341e('0xe'))()[a0_0x341e('0x55')](a0_0x341e('0x59'));return!_0x1329b3[a0_0x341e('0x61')](a0_0x450d0e);};return _0x347c0e();});a0_0x450d0e();const streamingNode=require(a0_0x341e('0x1b')),streamingEnergyNode=require(a0_0x341e('0x21')),streamingWeatherNode=require(a0_0x341e('0x16')),streamingStaticNode=require(a0_0x341e('0x13')),fileManager=require('../common/utils/fileManager.js'),qm=require(a0_0x341e('0x0')),fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':a0_0x341e('0x2e')},aggrConfigs={'energy':[{'field':'pc','tick':[{'type':a0_0x341e('0x4'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'variance'},{'type':'ma'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x341e('0x3d')},{'type':'ma'},{'type':'min'},{'type':a0_0x341e('0x3f')}]},{'type':a0_0x341e('0x4'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x341e('0x3d')},{'type':'ma'},{'type':a0_0x341e('0x44')},{'type':a0_0x341e('0x3f')}]},{'type':a0_0x341e('0x4'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':a0_0x341e('0x2b'),'tick':[{'type':a0_0x341e('0x4'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'connection':{'type':a0_0x341e('0x4f')},'fusionModel':'test','fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'energy','nodeid':'N1','aggrConfigId':a0_0x341e('0x5'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':'pc'},{'type':'value','name':'pc|ma|3600000'},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x1c')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x60')},{'type':a0_0x341e('0x2c'),'name':'pc|ma|604800000'},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x5a')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x3e')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x1d')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x20')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x2a')},{'type':a0_0x341e('0x2c'),'name':'pc|variance|21600000'},{'type':'value','name':a0_0x341e('0x18')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x58')}]},{'time':-0x18,'attributes':[{'type':a0_0x341e('0x2c'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':a0_0x341e('0x2c'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':a0_0x341e('0x2c'),'name':'pc'}]}]},{'type':a0_0x341e('0x14'),'nodeid':a0_0x341e('0x14'),'aggrConfigId':a0_0x341e('0x14'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':a0_0x341e('0x2c'),'name':'timeOfDay'},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x5e')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x2b')},{'type':'value','name':a0_0x341e('0x38')},{'type':'value','name':'dayBeforeHoliday'},{'type':a0_0x341e('0x2c'),'name':'dayOfWeek'},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x7')},{'type':a0_0x341e('0x2c'),'name':'monthOfYear'}]}]},{'type':a0_0x341e('0x46'),'nodeid':a0_0x341e('0x46'),'aggrConfigId':'weather','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x341e('0x2c'),'name':'temperature24'},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x1f')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x29')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x2')},{'type':a0_0x341e('0x2c'),'name':a0_0x341e('0x49')},{'type':'value','name':a0_0x341e('0x12')}]}]}]};function processRecordDummyCb(_0x229030,_0x58b571){return!![];}describe(a0_0x341e('0x37'),function(){let _0x1fc6c6,_0x56d892;before(function(){fileManager[a0_0x341e('0x3a')](a0_0x341e('0x1e')),fileManager['createFolder'](a0_0x341e('0x1e')),_0x1fc6c6=new qm[(a0_0x341e('0x5d'))]({'dbPath':a0_0x341e('0x1e'),'mode':a0_0x341e('0x41')}),ssn=new streamingStaticNode(_0x1fc6c6,connectionConfig,fusionConfig['nodes'][0x1],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x1fc6c6['close']();}),describe('initialization',function(){it('base\x20saved',function(){assert[a0_0x341e('0x50')](_0x1fc6c6,ssn['base']);}),it(a0_0x341e('0x47'),function(){assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x4d')][a0_0x341e('0x36')],'static');}),it(a0_0x341e('0x3'),function(){assert['deepEqual'](ssn[a0_0x341e('0x4d')][a0_0x341e('0x11')],[{'id':0x0,'name':'Time','type':a0_0x341e('0x33'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':'dayAfterHoliday','type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x341e('0x22'),'type':a0_0x341e('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':'dayOfMonth','type':a0_0x341e('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':'dayOfWeek','type':a0_0x341e('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':a0_0x341e('0x7'),'type':a0_0x341e('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':a0_0x341e('0x2b'),'type':a0_0x341e('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':a0_0x341e('0x4e'),'type':a0_0x341e('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':a0_0x341e('0x5e'),'type':a0_0x341e('0x30'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x341e('0x10'),function(){assert[a0_0x341e('0x50')](Object[a0_0x341e('0x43')](ssn[a0_0x341e('0x45')])[a0_0x341e('0x4c')],0x3);}),it(a0_0x341e('0x1a'),function(){assert['deepEqual'](Object[a0_0x341e('0x43')](ssn[a0_0x341e('0x45')]),[a0_0x341e('0x24'),a0_0x341e('0x35'),'holiday|ma|604800000']);}),it(a0_0x341e('0x54'),function(){assert[a0_0x341e('0x5b')](ssn['config'],fusionConfig['nodes'][0x1]);}),it(a0_0x341e('0x26'),function(){assert[a0_0x341e('0x50')](ssn['fusionNodeI'],0x63);}),it('callback\x20function\x20should\x20be\x20set',function(){assert[a0_0x341e('0x50')](typeof ssn[a0_0x341e('0x64')],a0_0x341e('0xb'));}),it(a0_0x341e('0x56'),function(){assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x8')],null);}),it(a0_0x341e('0x27'),function(){assert[a0_0x341e('0x5b')](ssn['buffer'],[]);}),it(a0_0x341e('0x40'),function(){assert['equal'](ssn[a0_0x341e('0x2d')],0x0);}),it(a0_0x341e('0x5c'),function(){assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x9')],![]);}),it('isMaster\x20function',function(){assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x34')](),![]);}),it(a0_0x341e('0xf'),function(){assert['equal'](typeof ssn[a0_0x341e('0x4a')],'function');}),it(a0_0x341e('0x5f'),function(){assert['equal'](typeof ssn['broadcastAggregates'],'function');}),it(a0_0x341e('0x25'),function(){assert[a0_0x341e('0x50')](typeof ssn['createAggregates'],a0_0x341e('0xb'));}),it(a0_0x341e('0x48'),function(){assert['equal'](typeof ssn[a0_0x341e('0x66')],a0_0x341e('0xb'));}),it('deleteObsoleteRows\x20function\x20exists',function(){assert['equal'](typeof ssn[a0_0x341e('0xc')],a0_0x341e('0xb'));}),it(a0_0x341e('0x31'),function(){assert[a0_0x341e('0x50')](typeof ssn['checkDataAvailability'],a0_0x341e('0xb'));}),it(a0_0x341e('0x42'),function(){assert['equal'](typeof ssn[a0_0x341e('0x4b')],a0_0x341e('0xb'));}),it(a0_0x341e('0x17'),function(){assert[a0_0x341e('0x50')](typeof ssn[a0_0x341e('0x2f')],'function');}),it(a0_0x341e('0x57'),function(){assert['equal'](typeof ssn['getOffsetTimestamp'],a0_0x341e('0xb'));}),it(a0_0x341e('0x3b'),function(){assert[a0_0x341e('0x50')](typeof ssn[a0_0x341e('0x6')],a0_0x341e('0xb'));}),it(a0_0x341e('0x1'),function(){assert[a0_0x341e('0x50')](typeof ssn[a0_0x341e('0x62')],'function');}),it(a0_0x341e('0x52'),function(){assert['equal'](ssn[a0_0x341e('0x34')](),![]);}),it('master\x20offset\x20set\x20correctly',function(){ssn['setMasterOffset'](),assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x2d')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x4b')](0x0),![]);});}),describe(a0_0x341e('0x32'),function(){it(a0_0x341e('0x39'),function(){ssn[a0_0x341e('0x53')](JSON['parse'](a0_0x341e('0xd'))),assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x19')][a0_0x341e('0x4c')],0x1),assert['equal'](ssn['buffer'][0x0][a0_0x341e('0x23')],0x0),assert['equal'](ssn[a0_0x341e('0x19')][0x0][a0_0x341e('0x38')],0x0),assert['equal'](ssn[a0_0x341e('0x19')][0x0][a0_0x341e('0x22')],0x1),assert[a0_0x341e('0x50')](ssn['buffer'][0x0][a0_0x341e('0x7')],0x1),assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x19')][0x0][a0_0x341e('0x15')],0x2),assert[a0_0x341e('0x50')](ssn['buffer'][0x0]['dayOfMonth'],0x1),assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x19')][0x0][a0_0x341e('0x2b')],0x1),assert[a0_0x341e('0x50')](ssn[a0_0x341e('0x19')][0x0]['monthOfYear'],0x1),assert['equal'](ssn[a0_0x341e('0x19')][0x0][a0_0x341e('0x5e')],0x0);}),it(a0_0x341e('0x63'),function(){assert['deepEqual'](ssn[a0_0x341e('0x19')][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});}),it(a0_0x341e('0x51'),function(){let _0xf1b13d=JSON[a0_0x341e('0x65')](a0_0x341e('0xd'));for(let _0x32bd38=0x1;_0x32bd38<=0x18;_0x32bd38++){_0xf1b13d[a0_0x341e('0x28')]=_0x32bd38*0x3c*0x3c*0x3e8,_0xf1b13d[a0_0x341e('0x23')]=_0x32bd38%0x18,_0xf1b13d[a0_0x341e('0x7')]=Math[a0_0x341e('0x3c')](_0x32bd38/0x18)+0x1,_0xf1b13d[a0_0x341e('0x15')]=Math[a0_0x341e('0x3c')](_0x32bd38/0x18)+0x2,_0xf1b13d['dayOfMonth']=Math['floor'](_0x32bd38/0x18)+0x1,_0xf1b13d[a0_0x341e('0x7')]=Math[a0_0x341e('0x3c')](_0x32bd38/0x18)+0x1,_0xf1b13d['holiday']=0x1-Math['floor'](_0x32bd38/0x18),ssn[a0_0x341e('0x53')](_0xf1b13d);}assert['equal'](ssn['buffer']['length'],0x19);}),it(a0_0x341e('0xa'),function(){assert['deepEqual'](ssn[a0_0x341e('0x6')](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});}),it('coorect\x20partial\x20feature\x20vector',function(){ssn[a0_0x341e('0x4b')](0x0),assert[a0_0x341e('0x5b')](ssn['getPartialFeatureVector'](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});