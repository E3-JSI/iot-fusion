const a0_0x57b6=['position','length','../common/utils/fileManager.js','../nodes/streamingWeatherNode.js','base\x20saved','initialization','createAggregates\x20function\x20exists','getOffsetTimestamp\x20function\x20exists','streamingStaticNode','monthOfYear','value','pc|ma|21600000','winbuf','isMaster','return\x20/\x22\x20+\x20this\x20+\x20\x22/','buffer\x20empty','../nodes/streamingNode.js','max','aggregates\x20initialized\x20-\x20key\x20names','192.168.85.98:2181','holiday|winbuf|604800000','windBearing24','getPartialFeatureVector','constructor','apply','name','aggregates\x20initialized\x20-\x20number','offsetExists','getAggregates','pc|ma|604800000','getOffsetTimestamp','check\x20if\x20store\x20exists','getPartialFeatureVector\x20function\x20exists','data\x20insertion','setMasterOffset\x20function\x20exists','none','deleteObsoleteRows','function','holiday|tick','dayAfterHoliday','cloudCover24','buffer','createClean','variance','energy','test','./db2/','setSlaveOffset','qminer','dayOfWeek','pc|ma|2592000000','checkDataAvailability\x20function\x20exists','checkDataAvailability','parent','offsetExists\x20function\x20exists','windSpeed24','dayOfMonth','processRecordCb','data\x20record\x20record\x20saved\x20correctly','pc|variance|21600000','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','master\x20offset\x20set\x20correctly','static','correct\x20aggregate\x20values','createAggregates','pressure24','check\x20store\x20structure','aggregate','config','master','stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion','rawstore','pc|max|86400000','keys','base','connectToKafka','callback\x20function\x20should\x20be\x20set','timeOfDay','pc|min|604800000','master\x20set\x20correctly','fields','getAggregates\x20function\x20exists','nodes','weather','master\x20flag\x20set\x20correctly','weekEnd','buffer\x20position\x20is\x200','parse','close','assert','holiday','dayOfYear','pc|max|604800000','floor','fusionNodeI\x20correctly\x20saved','slave\x20offset\x20set\x20correctly:\x20no\x20data','min','pc|ma|3600000','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','deepEqual','isMaster\x20function','float','../nodes/streamingStaticNode.js','dayBeforeHoliday','equal','24\x20more\x20data\x20insertions\x20-\x20check\x20buffer','datetime'];(function(_0x29a2da,_0x57b64d){const _0x9728d8=function(_0x1275e0){while(--_0x1275e0){_0x29a2da['push'](_0x29a2da['shift']());}},_0x1da01e=function(){const _0x3131d1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x58cb50,_0x434bf6,_0x39b5e5,_0x428500){_0x428500=_0x428500||{};let _0x36e6b7=_0x434bf6+'='+_0x39b5e5,_0x3c6180=0x0;for(let _0x2e9b68=0x0,_0x56958f=_0x58cb50['length'];_0x2e9b68<_0x56958f;_0x2e9b68++){const _0x3bc1b4=_0x58cb50[_0x2e9b68];_0x36e6b7+=';\x20'+_0x3bc1b4;const _0x250a16=_0x58cb50[_0x3bc1b4];_0x58cb50['push'](_0x250a16),_0x56958f=_0x58cb50['length'],_0x250a16!==!![]&&(_0x36e6b7+='='+_0x250a16);}_0x428500['cookie']=_0x36e6b7;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4543fe,_0x585968){_0x4543fe=_0x4543fe||function(_0x260e30){return _0x260e30;};const _0x1771c0=_0x4543fe(new RegExp('(?:^|;\x20)'+_0x585968['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xa2dcff=function(_0x22e01a,_0x1b400d){_0x22e01a(++_0x1b400d);};return _0xa2dcff(_0x9728d8,_0x57b64d),_0x1771c0?decodeURIComponent(_0x1771c0[0x1]):undefined;}},_0x3ca453=function(){const _0x43f9cf=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x43f9cf['test'](_0x3131d1['removeCookie']['toString']());};_0x3131d1['updateCookie']=_0x3ca453;let _0x1c0a31='';const _0x481cef=_0x3131d1['updateCookie']();if(!_0x481cef)_0x3131d1['setCookie'](['*'],'counter',0x1);else _0x481cef?_0x1c0a31=_0x3131d1['getCookie'](null,'counter'):_0x3131d1['removeCookie']();};_0x1da01e();}(a0_0x57b6,0x113));const a0_0x9728=function(_0x29a2da,_0x57b64d){_0x29a2da=_0x29a2da-0x0;let _0x9728d8=a0_0x57b6[_0x29a2da];return _0x9728d8;};const a0_0x39b5e5=function(){let _0x48ea44=!![];return function(_0x10446f,_0x5a268d){const _0x12f6ad=_0x48ea44?function(){if(_0x5a268d){const _0x1eb332=_0x5a268d[a0_0x9728('0x46')](_0x10446f,arguments);return _0x5a268d=null,_0x1eb332;}}:function(){};return _0x48ea44=![],_0x12f6ad;};}(),a0_0x434bf6=a0_0x39b5e5(this,function(){const _0x2d5c30=function(){const _0x535191=_0x2d5c30[a0_0x9728('0x45')](a0_0x9728('0x3c'))()['constructor'](a0_0x9728('0x6a'));return!_0x535191[a0_0x9728('0x5b')](a0_0x434bf6);};return _0x2d5c30();});a0_0x434bf6();const streamingNode=require(a0_0x9728('0x3e')),streamingEnergyNode=require('../nodes/streamingEnergyNode.js'),streamingWeatherNode=require(a0_0x9728('0x31')),streamingStaticNode=require(a0_0x9728('0x29')),fileManager=require(a0_0x9728('0x30')),qm=require(a0_0x9728('0x5e')),fs=require('fs');var assert=require(a0_0x9728('0x1c'));let connectionConfig={'zookeeper':a0_0x9728('0x41')},aggrConfigs={'energy':[{'field':'pc','tick':[{'type':'winbuf','winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x9728('0x3a'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x9728('0x59')},{'type':'ma'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x9728('0x59')},{'type':'ma'},{'type':a0_0x9728('0x23')},{'type':a0_0x9728('0x3f')}]},{'type':a0_0x9728('0x3a'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x9728('0x59')},{'type':'ma'},{'type':'min'},{'type':'max'}]},{'type':'winbuf','winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':'holiday','tick':[{'type':a0_0x9728('0x3a'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'connection':{'type':a0_0x9728('0x51')},'fusionModel':'test','fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x9728('0x5a'),'nodeid':'N1','aggrConfigId':a0_0x9728('0x5a'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':'pc'},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x24')},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x39')},{'type':a0_0x9728('0x38'),'name':'pc|ma|86400000'},{'type':'value','name':a0_0x9728('0x4b')},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x60')},{'type':'value','name':'pc|min|86400000'},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x11')},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0xb')},{'type':'value','name':a0_0x9728('0x1f')},{'type':'value','name':a0_0x9728('0x69')},{'type':a0_0x9728('0x38'),'name':'pc|variance|86400000'},{'type':'value','name':'pc|variance|604800000'}]},{'time':-0x18,'attributes':[{'type':a0_0x9728('0x38'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':a0_0x9728('0x38'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':a0_0x9728('0x38'),'name':'pc'}]}]},{'type':a0_0x9728('0x1'),'nodeid':'static','aggrConfigId':a0_0x9728('0x1'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x10')},{'type':'value','name':'weekEnd'},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x1d')},{'type':'value','name':'dayAfterHoliday'},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x2a')},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x5f')},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x1e')},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x37')}]}]},{'type':a0_0x9728('0x16'),'nodeid':a0_0x9728('0x16'),'aggrConfigId':a0_0x9728('0x16'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x9728('0x38'),'name':'temperature24'},{'type':a0_0x9728('0x38'),'name':'humidity24'},{'type':'value','name':a0_0x9728('0x4')},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x65')},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x43')},{'type':a0_0x9728('0x38'),'name':a0_0x9728('0x56')}]}]}]};function processRecordDummyCb(_0x195f7d,_0x49942f){return!![];}describe(a0_0x9728('0x36'),function(){let _0x3e2dd0,_0x563c0f;before(function(){fileManager['removeFolder'](a0_0x9728('0x5c')),fileManager['createFolder'](a0_0x9728('0x5c')),_0x3e2dd0=new qm['Base']({'dbPath':'./db2/','mode':a0_0x9728('0x58')}),ssn=new streamingStaticNode(_0x3e2dd0,connectionConfig,fusionConfig[a0_0x9728('0x15')][0x1],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x3e2dd0[a0_0x9728('0x1b')]();}),describe(a0_0x9728('0x33'),function(){it(a0_0x9728('0x32'),function(){assert[a0_0x9728('0x2b')](_0x3e2dd0,ssn[a0_0x9728('0xd')]);}),it(a0_0x9728('0x4d'),function(){assert[a0_0x9728('0x2b')](ssn['rawstore'][a0_0x9728('0x47')],a0_0x9728('0x1'));}),it(a0_0x9728('0x5'),function(){assert[a0_0x9728('0x26')](ssn[a0_0x9728('0xa')][a0_0x9728('0x13')],[{'id':0x0,'name':'Time','type':a0_0x9728('0x2d'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x9728('0x55'),'type':a0_0x9728('0x28'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x9728('0x2a'),'type':a0_0x9728('0x28'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':'dayOfMonth','type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':a0_0x9728('0x5f'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':a0_0x9728('0x1e'),'type':a0_0x9728('0x28'),'nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':a0_0x9728('0x1d'),'type':a0_0x9728('0x28'),'nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':a0_0x9728('0x37'),'type':a0_0x9728('0x28'),'nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':a0_0x9728('0x18'),'type':a0_0x9728('0x28'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x9728('0x48'),function(){assert[a0_0x9728('0x2b')](Object['keys'](ssn[a0_0x9728('0x6')])[a0_0x9728('0x2f')],0x3);}),it(a0_0x9728('0x40'),function(){assert[a0_0x9728('0x26')](Object[a0_0x9728('0xc')](ssn['aggregate']),[a0_0x9728('0x54'),a0_0x9728('0x42'),'holiday|ma|604800000']);}),it('config\x20saved',function(){assert[a0_0x9728('0x26')](ssn[a0_0x9728('0x7')],fusionConfig['nodes'][0x1]);}),it(a0_0x9728('0x21'),function(){assert[a0_0x9728('0x2b')](ssn['fusionNodeI'],0x63);}),it(a0_0x9728('0xf'),function(){assert['equal'](typeof ssn[a0_0x9728('0x67')],'function');}),it('parent\x20saved',function(){assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x63')],null);}),it(a0_0x9728('0x3d'),function(){assert[a0_0x9728('0x26')](ssn[a0_0x9728('0x57')],[]);}),it(a0_0x9728('0x19'),function(){assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x2e')],0x0);}),it(a0_0x9728('0x17'),function(){assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x8')],![]);}),it(a0_0x9728('0x27'),function(){assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x3b')](),![]);}),it('connectToKafka\x20function\x20exists',function(){assert['equal'](typeof ssn[a0_0x9728('0xe')],a0_0x9728('0x53'));}),it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof ssn['broadcastAggregates'],a0_0x9728('0x53'));}),it(a0_0x9728('0x34'),function(){assert[a0_0x9728('0x2b')](typeof ssn[a0_0x9728('0x3')],'function');}),it(a0_0x9728('0x64'),function(){assert[a0_0x9728('0x2b')](typeof ssn[a0_0x9728('0x49')],a0_0x9728('0x53'));}),it('deleteObsoleteRows\x20function\x20exists',function(){assert[a0_0x9728('0x2b')](typeof ssn[a0_0x9728('0x52')],a0_0x9728('0x53'));}),it(a0_0x9728('0x61'),function(){assert[a0_0x9728('0x2b')](typeof ssn[a0_0x9728('0x62')],a0_0x9728('0x53'));}),it('setSlaveOffset\x20function\x20exists',function(){assert[a0_0x9728('0x2b')](typeof ssn[a0_0x9728('0x5d')],a0_0x9728('0x53'));}),it(a0_0x9728('0x35'),function(){assert[a0_0x9728('0x2b')](typeof ssn[a0_0x9728('0x4c')],a0_0x9728('0x53'));}),it(a0_0x9728('0x50'),function(){assert[a0_0x9728('0x2b')](typeof ssn[a0_0x9728('0x4c')],a0_0x9728('0x53'));}),it(a0_0x9728('0x14'),function(){assert[a0_0x9728('0x2b')](typeof ssn['getAggregates'],a0_0x9728('0x53'));}),it(a0_0x9728('0x4e'),function(){assert['equal'](typeof ssn['getPartialFeatureVector'],a0_0x9728('0x53'));}),it(a0_0x9728('0x12'),function(){assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x3b')](),![]);}),it(a0_0x9728('0x0'),function(){ssn['setMasterOffset'](),assert['equal'](ssn[a0_0x9728('0x2e')],-0x1);}),it(a0_0x9728('0x22'),function(){assert[a0_0x9728('0x2b')](ssn['setSlaveOffset'](0x0),![]);});}),describe(a0_0x9728('0x4f'),function(){it(a0_0x9728('0x68'),function(){ssn['processRecord'](JSON['parse'](a0_0x9728('0x25'))),assert['equal'](ssn[a0_0x9728('0x57')][a0_0x9728('0x2f')],0x1),assert[a0_0x9728('0x2b')](ssn['buffer'][0x0][a0_0x9728('0x10')],0x0),assert['equal'](ssn[a0_0x9728('0x57')][0x0][a0_0x9728('0x55')],0x0),assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x57')][0x0][a0_0x9728('0x2a')],0x1),assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x57')][0x0][a0_0x9728('0x1e')],0x1),assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x57')][0x0]['dayOfWeek'],0x2),assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x57')][0x0][a0_0x9728('0x66')],0x1),assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x57')][0x0][a0_0x9728('0x1d')],0x1),assert['equal'](ssn[a0_0x9728('0x57')][0x0][a0_0x9728('0x37')],0x1),assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x57')][0x0][a0_0x9728('0x18')],0x0);}),it(a0_0x9728('0x9'),function(){assert[a0_0x9728('0x26')](ssn[a0_0x9728('0x57')][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});}),it(a0_0x9728('0x2c'),function(){let _0x32110f=JSON[a0_0x9728('0x1a')](a0_0x9728('0x25'));for(let _0x17c7e1=0x1;_0x17c7e1<=0x18;_0x17c7e1++){_0x32110f['timestamp']=_0x17c7e1*0x3c*0x3c*0x3e8,_0x32110f[a0_0x9728('0x10')]=_0x17c7e1%0x18,_0x32110f['dayOfYear']=Math[a0_0x9728('0x20')](_0x17c7e1/0x18)+0x1,_0x32110f[a0_0x9728('0x5f')]=Math[a0_0x9728('0x20')](_0x17c7e1/0x18)+0x2,_0x32110f['dayOfMonth']=Math[a0_0x9728('0x20')](_0x17c7e1/0x18)+0x1,_0x32110f[a0_0x9728('0x1e')]=Math[a0_0x9728('0x20')](_0x17c7e1/0x18)+0x1,_0x32110f[a0_0x9728('0x1d')]=0x1-Math[a0_0x9728('0x20')](_0x17c7e1/0x18),ssn['processRecord'](_0x32110f);}assert[a0_0x9728('0x2b')](ssn[a0_0x9728('0x57')]['length'],0x19);}),it(a0_0x9728('0x2'),function(){assert[a0_0x9728('0x26')](ssn[a0_0x9728('0x4a')](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});}),it('coorect\x20partial\x20feature\x20vector',function(){ssn[a0_0x9728('0x5d')](0x0),assert[a0_0x9728('0x26')](ssn[a0_0x9728('0x44')](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});