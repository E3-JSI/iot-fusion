var _0x12c9=['processRecordCb','function','parent\x20saved','parent','buffer\x20empty','buffer','buffer\x20position\x20is\x200','position','master','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','connectToKafka','broadcastAggregates','createAggregates\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','setSlaveOffset','getOffsetTimestamp\x20function\x20exists','setMasterOffset\x20function\x20exists','getOffsetTimestamp','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20set\x20correctly','slave\x20offset\x20set\x20correctly:\x20no\x20data','data\x20insertion','processRecord','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','dayBeforeHoliday','dayOfWeek','stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion','24\x20more\x20data\x20insertions\x20-\x20check\x20buffer','timestamp','floor','correct\x20aggregate\x20values','coorect\x20partial\x20feature\x20vector','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../../common/utils/fileManager.js','qminer','192.168.85.98:2181','winbuf','variance','max','min','holiday','none','test','energy','value','pc|ma|3600000','pc|ma|21600000','pc|ma|604800000','pc|max|604800000','pc|variance|21600000','pc|variance|86400000','pc|variance|604800000','static','timeOfDay','dayAfterHoliday','dayOfYear','weather','temperature24','pressure24','windSpeed24','windBearing24','streamingStaticNode','removeFolder','./db2/','createFolder','Base','createClean','nodes','close','base','check\x20if\x20store\x20exists','equal','rawstore','name','deepEqual','fields','Time','datetime','float','dayOfMonth','monthOfYear','aggregates\x20initialized\x20-\x20number','aggregate','length','aggregates\x20initialized\x20-\x20key\x20names','keys','holiday|tick','holiday|ma|604800000','config\x20saved','callback\x20function\x20should\x20be\x20set'];(function(_0x50b579,_0x1a4950){var _0x2267d5=function(_0x592d60){while(--_0x592d60){_0x50b579['push'](_0x50b579['shift']());}};var _0x5f5d37=function(){var _0x4534d8={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x345ca1,_0x31752b,_0x14d268,_0x5398b5){_0x5398b5=_0x5398b5||{};var _0xdbc588=_0x31752b+'='+_0x14d268;var _0x2d4af6=0x0;for(var _0x2d4af6=0x0,_0x100e54=_0x345ca1['length'];_0x2d4af6<_0x100e54;_0x2d4af6++){var _0x5a86db=_0x345ca1[_0x2d4af6];_0xdbc588+=';\x20'+_0x5a86db;var _0x40a0d0=_0x345ca1[_0x5a86db];_0x345ca1['push'](_0x40a0d0);_0x100e54=_0x345ca1['length'];if(_0x40a0d0!==!![]){_0xdbc588+='='+_0x40a0d0;}}_0x5398b5['cookie']=_0xdbc588;},'removeCookie':function(){return'dev';},'getCookie':function(_0x351dd5,_0x275161){_0x351dd5=_0x351dd5||function(_0x22469d){return _0x22469d;};var _0x58634e=_0x351dd5(new RegExp('(?:^|;\x20)'+_0x275161['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x5cda73=function(_0x47d4f6,_0x2f48ed){_0x47d4f6(++_0x2f48ed);};_0x5cda73(_0x2267d5,_0x1a4950);return _0x58634e?decodeURIComponent(_0x58634e[0x1]):undefined;}};var _0x15b967=function(){var _0x730a38=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x730a38['test'](_0x4534d8['removeCookie']['toString']());};_0x4534d8['updateCookie']=_0x15b967;var _0x215f39='';var _0x96be2b=_0x4534d8['updateCookie']();if(!_0x96be2b){_0x4534d8['setCookie'](['*'],'counter',0x1);}else if(_0x96be2b){_0x215f39=_0x4534d8['getCookie'](null,'counter');}else{_0x4534d8['removeCookie']();}};_0x5f5d37();}(_0x12c9,0xf3));var _0x1aa5=function(_0x5d6708,_0xb7fcc9){_0x5d6708=_0x5d6708-0x0;var _0x28fd8b=_0x12c9[_0x5d6708];return _0x28fd8b;};var _0x34c139=function(){var _0x45d72c=!![];return function(_0x27fb5c,_0x1bb9ae){var _0x53d407=_0x45d72c?function(){if(_0x1bb9ae){var _0x14b4c8=_0x1bb9ae['apply'](_0x27fb5c,arguments);_0x1bb9ae=null;return _0x14b4c8;}}:function(){};_0x45d72c=![];return _0x53d407;};}();var _0x101e09=_0x34c139(this,function(){var _0x5e1938=function(){return'\x64\x65\x76';},_0xf653d7=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x4cb24a=function(){var _0x344ded=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x344ded['\x74\x65\x73\x74'](_0x5e1938['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x56f93a=function(){var _0x41b8dc=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x41b8dc['\x74\x65\x73\x74'](_0xf653d7['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x188f94=function(_0xcdb516){var _0x3c696e=~-0x1>>0x1+0xff%0x0;if(_0xcdb516['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x3c696e)){_0x4ed835(_0xcdb516);}};var _0x4ed835=function(_0x4738f6){var _0x5802a0=~-0x4>>0x1+0xff%0x0;if(_0x4738f6['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x5802a0){_0x188f94(_0x4738f6);}};if(!_0x4cb24a()){if(!_0x56f93a()){_0x188f94('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x188f94('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x188f94('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x101e09();const streamingNode=require(_0x1aa5('0x0'));const streamingEnergyNode=require(_0x1aa5('0x1'));const streamingWeatherNode=require(_0x1aa5('0x2'));const streamingStaticNode=require('../nodes/streamingStaticNode.js');const fileManager=require(_0x1aa5('0x3'));const qm=require(_0x1aa5('0x4'));const fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':_0x1aa5('0x5')};let aggrConfigs={'energy':[{'field':'pc','tick':[{'type':_0x1aa5('0x6'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x1aa5('0x6'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':_0x1aa5('0x7')},{'type':'ma'}]},{'type':_0x1aa5('0x6'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'variance'},{'type':'ma'},{'type':'min'},{'type':_0x1aa5('0x8')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x1aa5('0x7')},{'type':'ma'},{'type':_0x1aa5('0x9')},{'type':_0x1aa5('0x8')}]},{'type':_0x1aa5('0x6'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':_0x1aa5('0xa'),'tick':[{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'connection':{'type':_0x1aa5('0xb')},'fusionModel':_0x1aa5('0xc'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'energy','nodeid':'N1','aggrConfigId':_0x1aa5('0xd'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x1aa5('0xe'),'name':'pc'},{'type':'value','name':_0x1aa5('0xf')},{'type':'value','name':_0x1aa5('0x10')},{'type':_0x1aa5('0xe'),'name':'pc|ma|86400000'},{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x11')},{'type':'value','name':'pc|ma|2592000000'},{'type':'value','name':'pc|min|86400000'},{'type':_0x1aa5('0xe'),'name':'pc|min|604800000'},{'type':'value','name':'pc|max|86400000'},{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x12')},{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x13')},{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x14')},{'type':'value','name':_0x1aa5('0x15')}]},{'time':-0x18,'attributes':[{'type':'value','name':'pc'}]},{'time':-0x30,'attributes':[{'type':_0x1aa5('0xe'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':_0x1aa5('0xe'),'name':'pc'}]}]},{'type':'static','nodeid':_0x1aa5('0x16'),'aggrConfigId':_0x1aa5('0x16'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x17')},{'type':_0x1aa5('0xe'),'name':'weekEnd'},{'type':_0x1aa5('0xe'),'name':'holiday'},{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x18')},{'type':'value','name':'dayBeforeHoliday'},{'type':_0x1aa5('0xe'),'name':'dayOfWeek'},{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x19')},{'type':_0x1aa5('0xe'),'name':'monthOfYear'}]}]},{'type':_0x1aa5('0x1a'),'nodeid':_0x1aa5('0x1a'),'aggrConfigId':_0x1aa5('0x1a'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x1b')},{'type':'value','name':'humidity24'},{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x1c')},{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x1d')},{'type':_0x1aa5('0xe'),'name':_0x1aa5('0x1e')},{'type':_0x1aa5('0xe'),'name':'cloudCover24'}]}]}]};function processRecordDummyCb(_0x250399,_0x2c47c5){return!![];}describe(_0x1aa5('0x1f'),function(){let _0x70e308;let _0x820101;before(function(){fileManager[_0x1aa5('0x20')](_0x1aa5('0x21'));fileManager[_0x1aa5('0x22')](_0x1aa5('0x21'));_0x70e308=new qm[(_0x1aa5('0x23'))]({'dbPath':_0x1aa5('0x21'),'mode':_0x1aa5('0x24')});ssn=new streamingStaticNode(_0x70e308,connectionConfig,fusionConfig[_0x1aa5('0x25')][0x1],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x70e308[_0x1aa5('0x26')]();});describe('initialization',function(){it('base\x20saved',function(){assert['equal'](_0x70e308,ssn[_0x1aa5('0x27')]);});it(_0x1aa5('0x28'),function(){assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x2a')][_0x1aa5('0x2b')],_0x1aa5('0x16'));});it('check\x20store\x20structure',function(){assert[_0x1aa5('0x2c')](ssn['rawstore'][_0x1aa5('0x2d')],[{'id':0x0,'name':_0x1aa5('0x2e'),'type':_0x1aa5('0x2f'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x1aa5('0x18'),'type':_0x1aa5('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'dayBeforeHoliday','type':_0x1aa5('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':_0x1aa5('0x31'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':'dayOfWeek','type':_0x1aa5('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':'dayOfYear','type':_0x1aa5('0x30'),'nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':_0x1aa5('0xa'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':_0x1aa5('0x32'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':'weekEnd','type':'float','nullable':![],'internal':![],'primary':![]}]);});it(_0x1aa5('0x33'),function(){assert[_0x1aa5('0x29')](Object['keys'](ssn[_0x1aa5('0x34')])[_0x1aa5('0x35')],0x3);});it(_0x1aa5('0x36'),function(){assert[_0x1aa5('0x2c')](Object[_0x1aa5('0x37')](ssn['aggregate']),[_0x1aa5('0x38'),'holiday|winbuf|604800000',_0x1aa5('0x39')]);});it(_0x1aa5('0x3a'),function(){assert[_0x1aa5('0x2c')](ssn['config'],fusionConfig[_0x1aa5('0x25')][0x1]);});it('fusionNodeI\x20correctly\x20saved',function(){assert[_0x1aa5('0x29')](ssn['fusionNodeI'],0x63);});it(_0x1aa5('0x3b'),function(){assert[_0x1aa5('0x29')](typeof ssn[_0x1aa5('0x3c')],_0x1aa5('0x3d'));});it(_0x1aa5('0x3e'),function(){assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x3f')],null);});it(_0x1aa5('0x40'),function(){assert[_0x1aa5('0x2c')](ssn[_0x1aa5('0x41')],[]);});it(_0x1aa5('0x42'),function(){assert['equal'](ssn[_0x1aa5('0x43')],0x0);});it('master\x20flag\x20set\x20correctly',function(){assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x44')],![]);});it(_0x1aa5('0x45'),function(){assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x46')](),![]);});it(_0x1aa5('0x47'),function(){assert[_0x1aa5('0x29')](typeof ssn[_0x1aa5('0x48')],'function');});it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof ssn[_0x1aa5('0x49')],'function');});it(_0x1aa5('0x4a'),function(){assert['equal'](typeof ssn['createAggregates'],'function');});it('offsetExists\x20function\x20exists',function(){assert[_0x1aa5('0x29')](typeof ssn[_0x1aa5('0x4b')],_0x1aa5('0x3d'));});it(_0x1aa5('0x4c'),function(){assert['equal'](typeof ssn['deleteObsoleteRows'],_0x1aa5('0x3d'));});it('checkDataAvailability\x20function\x20exists',function(){assert['equal'](typeof ssn[_0x1aa5('0x4d')],_0x1aa5('0x3d'));});it(_0x1aa5('0x4e'),function(){assert['equal'](typeof ssn[_0x1aa5('0x4f')],_0x1aa5('0x3d'));});it(_0x1aa5('0x50'),function(){assert['equal'](typeof ssn['getOffsetTimestamp'],_0x1aa5('0x3d'));});it(_0x1aa5('0x51'),function(){assert[_0x1aa5('0x29')](typeof ssn[_0x1aa5('0x52')],'function');});it(_0x1aa5('0x53'),function(){assert[_0x1aa5('0x29')](typeof ssn[_0x1aa5('0x54')],_0x1aa5('0x3d'));});it(_0x1aa5('0x55'),function(){assert[_0x1aa5('0x29')](typeof ssn[_0x1aa5('0x56')],_0x1aa5('0x3d'));});it(_0x1aa5('0x57'),function(){assert[_0x1aa5('0x29')](ssn['isMaster'](),![]);});it('master\x20offset\x20set\x20correctly',function(){ssn['setMasterOffset']();assert['equal'](ssn[_0x1aa5('0x43')],-0x1);});it(_0x1aa5('0x58'),function(){assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x4f')](0x0),![]);});});describe(_0x1aa5('0x59'),function(){it('data\x20record\x20record\x20saved\x20correctly',function(){ssn[_0x1aa5('0x5a')](JSON[_0x1aa5('0x5b')](_0x1aa5('0x5c')));assert[_0x1aa5('0x29')](ssn['buffer']['length'],0x1);assert['equal'](ssn[_0x1aa5('0x41')][0x0]['timeOfDay'],0x0);assert['equal'](ssn['buffer'][0x0]['dayAfterHoliday'],0x0);assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x41')][0x0][_0x1aa5('0x5d')],0x1);assert['equal'](ssn[_0x1aa5('0x41')][0x0]['dayOfYear'],0x1);assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x41')][0x0][_0x1aa5('0x5e')],0x2);assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x41')][0x0]['dayOfMonth'],0x1);assert['equal'](ssn[_0x1aa5('0x41')][0x0]['holiday'],0x1);assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x41')][0x0][_0x1aa5('0x32')],0x1);assert[_0x1aa5('0x29')](ssn['buffer'][0x0]['weekEnd'],0x0);});it(_0x1aa5('0x5f'),function(){assert[_0x1aa5('0x2c')](ssn[_0x1aa5('0x41')][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});});it(_0x1aa5('0x60'),function(){let _0x3acae6=JSON[_0x1aa5('0x5b')](_0x1aa5('0x5c'));for(let _0x4030c0=0x1;_0x4030c0<=0x18;_0x4030c0++){_0x3acae6[_0x1aa5('0x61')]=_0x4030c0*0x3c*0x3c*0x3e8;_0x3acae6[_0x1aa5('0x17')]=_0x4030c0%0x18;_0x3acae6[_0x1aa5('0x19')]=Math[_0x1aa5('0x62')](_0x4030c0/0x18)+0x1;_0x3acae6['dayOfWeek']=Math[_0x1aa5('0x62')](_0x4030c0/0x18)+0x2;_0x3acae6[_0x1aa5('0x31')]=Math[_0x1aa5('0x62')](_0x4030c0/0x18)+0x1;_0x3acae6[_0x1aa5('0x19')]=Math['floor'](_0x4030c0/0x18)+0x1;_0x3acae6[_0x1aa5('0xa')]=0x1-Math[_0x1aa5('0x62')](_0x4030c0/0x18);ssn[_0x1aa5('0x5a')](_0x3acae6);}assert[_0x1aa5('0x29')](ssn[_0x1aa5('0x41')]['length'],0x19);});it(_0x1aa5('0x63'),function(){assert['deepEqual'](ssn['getAggregates'](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});});it(_0x1aa5('0x64'),function(){ssn[_0x1aa5('0x4f')](0x0);assert[_0x1aa5('0x2c')](ssn[_0x1aa5('0x56')](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});