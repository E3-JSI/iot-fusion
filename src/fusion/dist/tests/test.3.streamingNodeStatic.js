const a0_0x2c56=['parent','fusionNodeI\x20correctly\x20saved','master','setSlaveOffset','broadcastAggregates\x20function\x20exists','pc|variance|86400000','data\x20insertion','connectToKafka\x20function\x20exists','keys','monthOfYear','processRecord','streamingStaticNode','createClean','qminer','../nodes/streamingNode.js','check\x20store\x20structure','fusionNodeI','pc|ma|604800000','name','getAggregates','checkDataAvailability\x20function\x20exists','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','data\x20record\x20record\x20saved\x20correctly','humidity24','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','timestamp','broadcastAggregates','energy','Base','removeFolder','position','value','winbuf','constructor','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x201,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','setMasterOffset','buffer','temperature24','function','master\x20set\x20correctly','pc|variance|21600000','config\x20saved','buffer\x20empty','getPartialFeatureVector','length','getOffsetTimestamp','pc|max|604800000','pc|ma|2592000000','connectToKafka','processRecordCb','pc|min|604800000','stream\x20aggregates\x20calculated\x20correctly\x20for\x201\x20insertion','holiday','buffer\x20position\x20is\x200','dayAfterHoliday','getPartialFeatureVector\x20function\x20exists','24\x20more\x20data\x20insertions\x20-\x20check\x20buffer','dayBeforeHoliday','weather','weekEnd','dayOfYear','pc|variance|604800000','equal','createAggregates','isMaster\x20function','pc|min|86400000','variance','parse','windBearing24','windSpeed24','timeOfDay','float','setMasterOffset\x20function\x20exists','holiday|winbuf|604800000','getOffsetTimestamp\x20function\x20exists','pressure24','fields','rawstore','isMaster','floor','dayOfWeek','assert','deepEqual','min','initialization','dayOfMonth','holiday|tick','correct\x20aggregate\x20values','test','pc|ma|86400000','./db2/','check\x20if\x20store\x20exists','pc|ma|3600000','base','static','datetime','nodes','cloudCover24','getAggregates\x20function\x20exists','setSlaveOffset\x20function\x20exists','config','deleteObsoleteRows\x20function\x20exists','master\x20offset\x20set\x20correctly','callback\x20function\x20should\x20be\x20set'];(function(_0x385494,_0x2c56fa){const _0x4eb66f=function(_0x5076d6){while(--_0x5076d6){_0x385494['push'](_0x385494['shift']());}},_0x21ee96=function(){const _0x1d6050={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4f6c09,_0x5c8cae,_0x3e89f3,_0x1c3a59){_0x1c3a59=_0x1c3a59||{};let _0x5643a8=_0x5c8cae+'='+_0x3e89f3,_0x30cb3f=0x0;for(let _0x5794e7=0x0,_0x473c5f=_0x4f6c09['length'];_0x5794e7<_0x473c5f;_0x5794e7++){const _0x3e6ff8=_0x4f6c09[_0x5794e7];_0x5643a8+=';\x20'+_0x3e6ff8;const _0x59187b=_0x4f6c09[_0x3e6ff8];_0x4f6c09['push'](_0x59187b),_0x473c5f=_0x4f6c09['length'],_0x59187b!==!![]&&(_0x5643a8+='='+_0x59187b);}_0x1c3a59['cookie']=_0x5643a8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x221512,_0x254e91){_0x221512=_0x221512||function(_0x5f3018){return _0x5f3018;};const _0x39d5c2=_0x221512(new RegExp('(?:^|;\x20)'+_0x254e91['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4f2151=function(_0x460c68,_0x15fd06){_0x460c68(++_0x15fd06);};return _0x4f2151(_0x4eb66f,_0x2c56fa),_0x39d5c2?decodeURIComponent(_0x39d5c2[0x1]):undefined;}},_0x3fa661=function(){const _0x47a1ac=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x47a1ac['test'](_0x1d6050['removeCookie']['toString']());};_0x1d6050['updateCookie']=_0x3fa661;let _0x245081='';const _0x3e6c22=_0x1d6050['updateCookie']();if(!_0x3e6c22)_0x1d6050['setCookie'](['*'],'counter',0x1);else _0x3e6c22?_0x245081=_0x1d6050['getCookie'](null,'counter'):_0x1d6050['removeCookie']();};_0x21ee96();}(a0_0x2c56,0x150));const a0_0x4eb6=function(_0x385494,_0x2c56fa){_0x385494=_0x385494-0x0;let _0x4eb66f=a0_0x2c56[_0x385494];return _0x4eb66f;};const a0_0x3e89f3=function(){let _0x590184=!![];return function(_0x337b4f,_0x337eca){const _0x1278df=_0x590184?function(){if(_0x337eca){const _0x597ce9=_0x337eca['apply'](_0x337b4f,arguments);return _0x337eca=null,_0x597ce9;}}:function(){};return _0x590184=![],_0x1278df;};}(),a0_0x5c8cae=a0_0x3e89f3(this,function(){const _0x2db36e=function(){const _0x152e46=_0x2db36e[a0_0x4eb6('0xd')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a0_0x4eb6('0xd')](a0_0x4eb6('0x0'));return!_0x152e46['test'](a0_0x5c8cae);};return _0x2db36e();});a0_0x5c8cae();const streamingNode=require(a0_0x4eb6('0x62')),streamingEnergyNode=require(a0_0x4eb6('0x3')),streamingWeatherNode=require(a0_0x4eb6('0x4')),streamingStaticNode=require('../nodes/streamingStaticNode.js'),fileManager=require('../common/utils/fileManager.js'),qm=require(a0_0x4eb6('0x61')),fs=require('fs');var assert=require(a0_0x4eb6('0x3d'));let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'energy':[{'field':'pc','tick':[{'type':a0_0x4eb6('0xc'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x4eb6('0x2e')},{'type':'ma'}]},{'type':a0_0x4eb6('0xc'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x4eb6('0x2e')},{'type':'ma'},{'type':a0_0x4eb6('0x3f')},{'type':'max'}]},{'type':a0_0x4eb6('0xc'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x4eb6('0x2e')},{'type':'ma'},{'type':a0_0x4eb6('0x3f')},{'type':'max'}]},{'type':a0_0x4eb6('0xc'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':a0_0x4eb6('0x20'),'tick':[{'type':a0_0x4eb6('0xc'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'connection':{'type':'none'},'fusionModel':a0_0x4eb6('0x44'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x4eb6('0x7'),'nodeid':'N1','aggrConfigId':'energy','fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x4eb6('0xb'),'name':'pc'},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x48')},{'type':a0_0x4eb6('0xb'),'name':'pc|ma|21600000'},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x45')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x65')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x1b')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x2d')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x1e')},{'type':a0_0x4eb6('0xb'),'name':'pc|max|86400000'},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x1a')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x14')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x59')},{'type':'value','name':a0_0x4eb6('0x29')}]},{'time':-0x18,'attributes':[{'type':a0_0x4eb6('0xb'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':a0_0x4eb6('0xb'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':'value','name':'pc'}]}]},{'type':a0_0x4eb6('0x4a'),'nodeid':'static','aggrConfigId':a0_0x4eb6('0x4a'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':a0_0x4eb6('0xb'),'name':'timeOfDay'},{'type':'value','name':a0_0x4eb6('0x27')},{'type':'value','name':a0_0x4eb6('0x20')},{'type':a0_0x4eb6('0xb'),'name':'dayAfterHoliday'},{'type':a0_0x4eb6('0xb'),'name':'dayBeforeHoliday'},{'type':'value','name':a0_0x4eb6('0x3c')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x28')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x5d')}]}]},{'type':a0_0x4eb6('0x26'),'nodeid':a0_0x4eb6('0x26'),'aggrConfigId':'weather','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x11')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x2')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x37')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x31')},{'type':'value','name':a0_0x4eb6('0x30')},{'type':a0_0x4eb6('0xb'),'name':a0_0x4eb6('0x4d')}]}]}]};function processRecordDummyCb(_0x12d5b6,_0x44b949){return!![];}describe(a0_0x4eb6('0x5f'),function(){let _0x4e724d,_0x3b6af0;before(function(){fileManager[a0_0x4eb6('0x9')](a0_0x4eb6('0x46')),fileManager['createFolder'](a0_0x4eb6('0x46')),_0x4e724d=new qm[(a0_0x4eb6('0x8'))]({'dbPath':a0_0x4eb6('0x46'),'mode':a0_0x4eb6('0x60')}),ssn=new streamingStaticNode(_0x4e724d,connectionConfig,fusionConfig[a0_0x4eb6('0x4c')][0x1],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x4e724d['close']();}),describe(a0_0x4eb6('0x40'),function(){it('base\x20saved',function(){assert[a0_0x4eb6('0x2a')](_0x4e724d,ssn[a0_0x4eb6('0x49')]);}),it(a0_0x4eb6('0x47'),function(){assert[a0_0x4eb6('0x2a')](ssn['rawstore'][a0_0x4eb6('0x66')],a0_0x4eb6('0x4a'));}),it(a0_0x4eb6('0x63'),function(){assert['deepEqual'](ssn[a0_0x4eb6('0x39')][a0_0x4eb6('0x38')],[{'id':0x0,'name':'Time','type':a0_0x4eb6('0x4b'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x4eb6('0x22'),'type':a0_0x4eb6('0x33'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x4eb6('0x25'),'type':a0_0x4eb6('0x33'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':'dayOfMonth','type':a0_0x4eb6('0x33'),'nullable':![],'internal':![],'primary':![]},{'id':0x4,'name':'dayOfWeek','type':a0_0x4eb6('0x33'),'nullable':![],'internal':![],'primary':![]},{'id':0x5,'name':a0_0x4eb6('0x28'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x6,'name':a0_0x4eb6('0x20'),'type':a0_0x4eb6('0x33'),'nullable':![],'internal':![],'primary':![]},{'id':0x7,'name':a0_0x4eb6('0x5d'),'type':a0_0x4eb6('0x33'),'nullable':![],'internal':![],'primary':![]},{'id':0x8,'name':a0_0x4eb6('0x27'),'type':a0_0x4eb6('0x33'),'nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x4eb6('0x2a')](Object[a0_0x4eb6('0x5c')](ssn['aggregate'])[a0_0x4eb6('0x18')],0x3);}),it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert[a0_0x4eb6('0x3e')](Object[a0_0x4eb6('0x5c')](ssn['aggregate']),[a0_0x4eb6('0x42'),a0_0x4eb6('0x35'),'holiday|ma|604800000']);}),it(a0_0x4eb6('0x15'),function(){assert[a0_0x4eb6('0x3e')](ssn[a0_0x4eb6('0x50')],fusionConfig[a0_0x4eb6('0x4c')][0x1]);}),it(a0_0x4eb6('0x55'),function(){assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x64')],0x63);}),it(a0_0x4eb6('0x53'),function(){assert[a0_0x4eb6('0x2a')](typeof ssn[a0_0x4eb6('0x1d')],'function');}),it('parent\x20saved',function(){assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x54')],null);}),it(a0_0x4eb6('0x16'),function(){assert[a0_0x4eb6('0x3e')](ssn[a0_0x4eb6('0x10')],[]);}),it(a0_0x4eb6('0x21'),function(){assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0xa')],0x0);}),it('master\x20flag\x20set\x20correctly',function(){assert['equal'](ssn[a0_0x4eb6('0x56')],![]);}),it(a0_0x4eb6('0x2c'),function(){assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x3a')](),![]);}),it(a0_0x4eb6('0x5b'),function(){assert[a0_0x4eb6('0x2a')](typeof ssn[a0_0x4eb6('0x1c')],'function');}),it(a0_0x4eb6('0x58'),function(){assert[a0_0x4eb6('0x2a')](typeof ssn[a0_0x4eb6('0x6')],a0_0x4eb6('0x12'));}),it('createAggregates\x20function\x20exists',function(){assert[a0_0x4eb6('0x2a')](typeof ssn[a0_0x4eb6('0x2b')],a0_0x4eb6('0x12'));}),it('offsetExists\x20function\x20exists',function(){assert[a0_0x4eb6('0x2a')](typeof ssn['offsetExists'],a0_0x4eb6('0x12'));}),it(a0_0x4eb6('0x51'),function(){assert[a0_0x4eb6('0x2a')](typeof ssn['deleteObsoleteRows'],a0_0x4eb6('0x12'));}),it(a0_0x4eb6('0x68'),function(){assert[a0_0x4eb6('0x2a')](typeof ssn['checkDataAvailability'],a0_0x4eb6('0x12'));}),it(a0_0x4eb6('0x4f'),function(){assert[a0_0x4eb6('0x2a')](typeof ssn['setSlaveOffset'],a0_0x4eb6('0x12'));}),it(a0_0x4eb6('0x36'),function(){assert[a0_0x4eb6('0x2a')](typeof ssn[a0_0x4eb6('0x19')],a0_0x4eb6('0x12'));}),it(a0_0x4eb6('0x34'),function(){assert['equal'](typeof ssn[a0_0x4eb6('0x19')],a0_0x4eb6('0x12'));}),it(a0_0x4eb6('0x4e'),function(){assert[a0_0x4eb6('0x2a')](typeof ssn['getAggregates'],a0_0x4eb6('0x12'));}),it(a0_0x4eb6('0x23'),function(){assert['equal'](typeof ssn[a0_0x4eb6('0x17')],a0_0x4eb6('0x12'));}),it(a0_0x4eb6('0x13'),function(){assert['equal'](ssn[a0_0x4eb6('0x3a')](),![]);}),it(a0_0x4eb6('0x52'),function(){ssn[a0_0x4eb6('0xf')](),assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0xa')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x57')](0x0),![]);});}),describe(a0_0x4eb6('0x5a'),function(){it(a0_0x4eb6('0x1'),function(){ssn['processRecord'](JSON[a0_0x4eb6('0x2f')](a0_0x4eb6('0xe'))),assert[a0_0x4eb6('0x2a')](ssn['buffer'][a0_0x4eb6('0x18')],0x1),assert['equal'](ssn[a0_0x4eb6('0x10')][0x0][a0_0x4eb6('0x32')],0x0),assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x10')][0x0]['dayAfterHoliday'],0x0),assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x10')][0x0][a0_0x4eb6('0x25')],0x1),assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x10')][0x0]['dayOfYear'],0x1),assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x10')][0x0][a0_0x4eb6('0x3c')],0x2),assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x10')][0x0][a0_0x4eb6('0x41')],0x1),assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x10')][0x0]['holiday'],0x1),assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x10')][0x0][a0_0x4eb6('0x5d')],0x1),assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x10')][0x0]['weekEnd'],0x0);}),it(a0_0x4eb6('0x1f'),function(){assert['deepEqual'](ssn[a0_0x4eb6('0x10')][0x0],{'dayAfterHoliday':0x0,'dayBeforeHoliday':0x1,'dayOfMonth':0x1,'dayOfWeek':0x2,'dayOfYear':0x1,'holiday':0x1,'holiday|ma|604800000':0x1,'monthOfYear':0x1,'stampm':0x0,'timeOfDay':0x0,'weekEnd':0x0});}),it(a0_0x4eb6('0x24'),function(){let _0x279398=JSON['parse'](a0_0x4eb6('0xe'));for(let _0x58c4b8=0x1;_0x58c4b8<=0x18;_0x58c4b8++){_0x279398[a0_0x4eb6('0x5')]=_0x58c4b8*0x3c*0x3c*0x3e8,_0x279398[a0_0x4eb6('0x32')]=_0x58c4b8%0x18,_0x279398[a0_0x4eb6('0x28')]=Math[a0_0x4eb6('0x3b')](_0x58c4b8/0x18)+0x1,_0x279398[a0_0x4eb6('0x3c')]=Math[a0_0x4eb6('0x3b')](_0x58c4b8/0x18)+0x2,_0x279398[a0_0x4eb6('0x41')]=Math[a0_0x4eb6('0x3b')](_0x58c4b8/0x18)+0x1,_0x279398[a0_0x4eb6('0x28')]=Math[a0_0x4eb6('0x3b')](_0x58c4b8/0x18)+0x1,_0x279398[a0_0x4eb6('0x20')]=0x1-Math[a0_0x4eb6('0x3b')](_0x58c4b8/0x18),ssn[a0_0x4eb6('0x5e')](_0x279398);}assert[a0_0x4eb6('0x2a')](ssn[a0_0x4eb6('0x10')][a0_0x4eb6('0x18')],0x19);}),it(a0_0x4eb6('0x43'),function(){assert[a0_0x4eb6('0x3e')](ssn[a0_0x4eb6('0x67')](),{'holiday|ma|604800000':0.96,'stampm':0x5265c00});}),it('coorect\x20partial\x20feature\x20vector',function(){ssn['setSlaveOffset'](0x0),assert['deepEqual'](ssn[a0_0x4eb6('0x17')](),[0x0,0x0,0x0,0x0,0x1,0x3,0x2,0x1]);});});});