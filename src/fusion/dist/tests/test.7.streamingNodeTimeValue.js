const a0_0x403f=['parent','data\x20insertion','equal','value|ma|86400000','buffer','getOffsetTimestamp\x20function\x20exists','createAggregates','slave\x20offset\x20set\x20correctly:\x20no\x20data','value|tick','apply','processRecordCb','isMaster','parent\x20saved','assert','return\x20/\x22\x20+\x20this\x20+\x20\x22/','value|winbuf|86400000','{\x22time\x22:','Time','base\x20saved','getPartialFeatureVector','checkDataAvailability','close','9\x20more\x20data\x20insertions','base','../nodes/streamingStaticNode.js','processRecord','variance','setMasterOffset','createClean','deepEqual','keys','master\x20set\x20correctly','fusionNodeI','fields','nodes','callback\x20function\x20should\x20be\x20set','value|variance|86400000','initialization','value|winbuf|43200000','value','master\x20offset\x20set\x20correctly','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','getPartialFeatureVector\x20function\x20exists','createFolder','check\x20if\x20store\x20exists','aggregates\x20initialized\x20-\x20number','value|max|43200000','../nodes/streamingNode.js','max','getOffsetTimestamp','getAggregates\x20function\x20exists','winbuf','min','aggregates\x20initialized\x20-\x20key\x20names','buffer\x20position\x20is\x200','./db3/','../nodes/streamingEnergyNode.js','duplicate\x20insertions\x20test','function','Base','setMasterOffset\x20function\x20exists','rawstore','datetime','removeFolder','value|ma|21600000','position','streamingTimeValueNode','setSlaveOffset','value|max|86400000','buffer\x20empty','parse','config\x20saved','master','Empty\x20values\x20in\x20message\x20set\x20to\x200','value|ma|604800000','check\x20store\x20structure','value|min|86400000','aggregate','mqtt','checkDataAvailability\x20function\x20exists','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','float','../nodes/streamingWeatherNode.js','test','constructor','timevalue','name','value|variance|43200000','deleteObsoleteRows\x20function\x20exists','length','deleteObsoleteRows'];(function(_0x338885,_0x403f4b){const _0x549b56=function(_0x219bd1){while(--_0x219bd1){_0x338885['push'](_0x338885['shift']());}},_0x2f407e=function(){const _0x4f108a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5efa35,_0x57e067,_0x2b8657,_0x117f46){_0x117f46=_0x117f46||{};let _0x2e148e=_0x57e067+'='+_0x2b8657,_0x47d866=0x0;for(let _0x262c48=0x0,_0x4ef825=_0x5efa35['length'];_0x262c48<_0x4ef825;_0x262c48++){const _0x5171be=_0x5efa35[_0x262c48];_0x2e148e+=';\x20'+_0x5171be;const _0x48a714=_0x5efa35[_0x5171be];_0x5efa35['push'](_0x48a714),_0x4ef825=_0x5efa35['length'],_0x48a714!==!![]&&(_0x2e148e+='='+_0x48a714);}_0x117f46['cookie']=_0x2e148e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x30676a,_0x68d30f){_0x30676a=_0x30676a||function(_0x4bc29c){return _0x4bc29c;};const _0x1cc7c3=_0x30676a(new RegExp('(?:^|;\x20)'+_0x68d30f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x13a843=function(_0x4d04d0,_0x47c53d){_0x4d04d0(++_0x47c53d);};return _0x13a843(_0x549b56,_0x403f4b),_0x1cc7c3?decodeURIComponent(_0x1cc7c3[0x1]):undefined;}},_0x2eaeea=function(){const _0x3c1496=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3c1496['test'](_0x4f108a['removeCookie']['toString']());};_0x4f108a['updateCookie']=_0x2eaeea;let _0x16d8e5='';const _0x509703=_0x4f108a['updateCookie']();if(!_0x509703)_0x4f108a['setCookie'](['*'],'counter',0x1);else _0x509703?_0x16d8e5=_0x4f108a['getCookie'](null,'counter'):_0x4f108a['removeCookie']();};_0x2f407e();}(a0_0x403f,0x13c));const a0_0x549b=function(_0x338885,_0x403f4b){_0x338885=_0x338885-0x0;let _0x549b56=a0_0x403f[_0x338885];return _0x549b56;};const a0_0x2b8657=function(){let _0x21d43b=!![];return function(_0x492b0c,_0x2dca7c){const _0x1206f6=_0x21d43b?function(){if(_0x2dca7c){const _0x49b9f6=_0x2dca7c[a0_0x549b('0x39')](_0x492b0c,arguments);return _0x2dca7c=null,_0x49b9f6;}}:function(){};return _0x21d43b=![],_0x1206f6;};}(),a0_0x57e067=a0_0x2b8657(this,function(){const _0x5b0464=function(){const _0x5327b4=_0x5b0464[a0_0x549b('0x29')](a0_0x549b('0x3e'))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x5327b4[a0_0x549b('0x28')](a0_0x57e067);};return _0x5b0464();});a0_0x57e067();const streamingNode=require(a0_0x549b('0x4')),streamingEnergyNode=require(a0_0x549b('0xd')),streamingWeatherNode=require(a0_0x549b('0x27')),streamingStaticNode=require(a0_0x549b('0x48')),streamingTimeValueNode=require('../nodes/streamingTimeValueNode.js'),fileManager=require('../common/utils/fileManager.js'),qm=require('qminer'),fs=require('fs');var assert=require(a0_0x549b('0x3d'));let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'timevalue':[{'field':a0_0x549b('0x57'),'tick':[{'type':a0_0x549b('0x8'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x549b('0x8'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x549b('0x9')},{'type':a0_0x549b('0x5')},{'type':'variance'}]},{'type':a0_0x549b('0x8'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x549b('0x9')},{'type':a0_0x549b('0x5')},{'type':a0_0x549b('0x4a')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':'timevalue','connection':{'type':a0_0x549b('0x23')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'timevalue','nodeid':'timevalue','aggrConfigId':a0_0x549b('0x2a'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':'value'},{'type':a0_0x549b('0x57'),'name':a0_0x549b('0x33')},{'type':'value','name':a0_0x549b('0x21')},{'type':a0_0x549b('0x57'),'name':a0_0x549b('0x19')},{'type':a0_0x549b('0x57'),'name':a0_0x549b('0x54')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':'value','name':a0_0x549b('0x57')},{'type':'value','name':a0_0x549b('0x33')},{'type':a0_0x549b('0x57'),'name':a0_0x549b('0x21')},{'type':a0_0x549b('0x57'),'name':a0_0x549b('0x19')},{'type':'value','name':a0_0x549b('0x54')}]}]}]};function processRecordDummyCb(_0xcafb1b,_0x33c615){return!![];}describe(a0_0x549b('0x17'),function(){let _0x636f46,_0x151a7f;before(function(){fileManager[a0_0x549b('0x14')](a0_0x549b('0xc')),fileManager[a0_0x549b('0x0')]('./db3/'),_0x636f46=new qm[(a0_0x549b('0x10'))]({'dbPath':'./db3/','mode':a0_0x549b('0x4c')}),stvn=new streamingTimeValueNode(_0x636f46,connectionConfig,fusionConfig[a0_0x549b('0x52')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x636f46[a0_0x549b('0x45')]();}),describe(a0_0x549b('0x55'),function(){it(a0_0x549b('0x42'),function(){assert[a0_0x549b('0x32')](_0x636f46,stvn[a0_0x549b('0x47')]);}),it(a0_0x549b('0x1'),function(){assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x12')][a0_0x549b('0x2b')],'timevalue');}),it(a0_0x549b('0x20'),function(){assert[a0_0x549b('0x4d')](stvn[a0_0x549b('0x12')][a0_0x549b('0x51')],[{'id':0x0,'name':a0_0x549b('0x41'),'type':a0_0x549b('0x13'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x549b('0x57'),'type':a0_0x549b('0x26'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x549b('0x2'),function(){assert[a0_0x549b('0x32')](Object[a0_0x549b('0x4e')](stvn['aggregate'])[a0_0x549b('0x2e')],0xf);}),it(a0_0x549b('0xa'),function(){assert[a0_0x549b('0x4d')](Object[a0_0x549b('0x4e')](stvn[a0_0x549b('0x22')]),[a0_0x549b('0x38'),'value|winbuf|21600000',a0_0x549b('0x15'),a0_0x549b('0x56'),'value|ma|43200000','value|min|43200000',a0_0x549b('0x3'),a0_0x549b('0x2c'),a0_0x549b('0x3f'),a0_0x549b('0x33'),a0_0x549b('0x21'),a0_0x549b('0x19'),a0_0x549b('0x54'),'value|winbuf|604800000',a0_0x549b('0x1f')]);}),it(a0_0x549b('0x1c'),function(){assert[a0_0x549b('0x4d')](stvn['config'],fusionConfig[a0_0x549b('0x52')][0x0]);}),it('fusionNodeI\x20correctly\x20saved',function(){assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x50')],0x63);}),it(a0_0x549b('0x53'),function(){assert[a0_0x549b('0x32')](typeof stvn[a0_0x549b('0x3a')],a0_0x549b('0xf'));}),it(a0_0x549b('0x3c'),function(){assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x30')],null);}),it(a0_0x549b('0x1a'),function(){assert[a0_0x549b('0x4d')](stvn[a0_0x549b('0x34')],[]);}),it(a0_0x549b('0xb'),function(){assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x16')],0x0);}),it('master\x20flag\x20set\x20correctly',function(){assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x1d')],!![]);}),it('isMaster\x20function',function(){assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x3b')](),!![]);}),it('connectToKafka\x20function\x20exists',function(){assert['equal'](typeof stvn['connectToKafka'],a0_0x549b('0xf'));}),it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof stvn['broadcastAggregates'],a0_0x549b('0xf'));}),it('createAggregates\x20function\x20exists',function(){assert['equal'](typeof stvn[a0_0x549b('0x36')],a0_0x549b('0xf'));}),it('offsetExists\x20function\x20exists',function(){assert['equal'](typeof stvn['offsetExists'],a0_0x549b('0xf'));}),it(a0_0x549b('0x2d'),function(){assert[a0_0x549b('0x32')](typeof stvn[a0_0x549b('0x2f')],a0_0x549b('0xf'));}),it(a0_0x549b('0x24'),function(){assert['equal'](typeof stvn[a0_0x549b('0x44')],'function');}),it('setSlaveOffset\x20function\x20exists',function(){assert[a0_0x549b('0x32')](typeof stvn[a0_0x549b('0x18')],a0_0x549b('0xf'));}),it(a0_0x549b('0x35'),function(){assert[a0_0x549b('0x32')](typeof stvn['getOffsetTimestamp'],a0_0x549b('0xf'));}),it(a0_0x549b('0x11'),function(){assert[a0_0x549b('0x32')](typeof stvn[a0_0x549b('0x6')],a0_0x549b('0xf'));}),it(a0_0x549b('0x7'),function(){assert[a0_0x549b('0x32')](typeof stvn['getAggregates'],a0_0x549b('0xf'));}),it(a0_0x549b('0x5a'),function(){assert[a0_0x549b('0x32')](typeof stvn[a0_0x549b('0x43')],a0_0x549b('0xf'));}),it(a0_0x549b('0x4f'),function(){assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x3b')](),!![]);}),it(a0_0x549b('0x58'),function(){stvn[a0_0x549b('0x4b')](),assert[a0_0x549b('0x32')](stvn['position'],-0x1);}),it(a0_0x549b('0x37'),function(){assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x18')](0x0),![]);});}),describe(a0_0x549b('0x31'),function(){it('data\x20record\x20saved\x20correctly',function(){stvn[a0_0x549b('0x49')](JSON[a0_0x549b('0x1b')]('{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}')),stvn[a0_0x549b('0x49')](JSON[a0_0x549b('0x1b')](a0_0x549b('0x59'))),assert['equal'](stvn[a0_0x549b('0x34')][a0_0x549b('0x2e')],0x2),assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x34')][0x0][a0_0x549b('0x57')],0xa),assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x34')][0x1]['value'],0x14);}),it(a0_0x549b('0x1e'),function(){stvn[a0_0x549b('0x49')](JSON[a0_0x549b('0x1b')]('{\x22time\x22:\x201451613600}')),assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x34')][a0_0x549b('0x2e')],0x3),assert['equal'](stvn['buffer'][0x2][a0_0x549b('0x57')],0x0);}),it(a0_0x549b('0x25'),function(){assert[a0_0x549b('0x4d')](stvn['buffer'][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});}),it(a0_0x549b('0x46'),function(){for(let _0x4b2197=0x1;_0x4b2197<=0x9;_0x4b2197++){let _0x5c7bbb=0x5685dda0+_0x4b2197*0xe10,_0x802ae4=_0x4b2197+0x3*0xa;stvn['processRecord'](JSON['parse'](a0_0x549b('0x40')+_0x5c7bbb+',\x22value\x22:\x20'+_0x802ae4+'}'));}assert[a0_0x549b('0x32')](stvn[a0_0x549b('0x34')][a0_0x549b('0x2e')],0xc),assert['deepEqual'](stvn[a0_0x549b('0x34')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});}),it(a0_0x549b('0xe'),function(){stvn['processRecord'](JSON[a0_0x549b('0x1b')]('{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}')),stvn[a0_0x549b('0x49')](JSON[a0_0x549b('0x1b')](a0_0x549b('0x59'))),assert['equal'](stvn[a0_0x549b('0x34')][a0_0x549b('0x2e')],0xc);});});});