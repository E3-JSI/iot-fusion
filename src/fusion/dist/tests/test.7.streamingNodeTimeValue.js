const a0_0x2552=['assert','createFolder','../nodes/streamingWeatherNode.js','connectToKafka','broadcastAggregates\x20function\x20exists','192.168.85.98:2181','value|ma|43200000','return\x20/\x22\x20+\x20this\x20+\x20\x22/','value|min|43200000','parent','value|min|86400000','initialization','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','buffer','float','../nodes/streamingNode.js','position','Empty\x20values\x20in\x20message\x20set\x20to\x200','value|ma|86400000','offsetExists','setMasterOffset','parent\x20saved','getAggregates\x20function\x20exists','setSlaveOffset\x20function\x20exists','getOffsetTimestamp\x20function\x20exists','winbuf','keys','processRecordCb','removeFolder','rawstore','9\x20more\x20data\x20insertions','../common/utils/fileManager.js','qminer','{\x22time\x22:','master\x20set\x20correctly','constructor','master','checkDataAvailability\x20function\x20exists','base','name','nodes','../nodes/streamingStaticNode.js',',\x22value\x22:\x20','isMaster\x20function','value|variance|86400000','value|ma|21600000','length','test','callback\x20function\x20should\x20be\x20set','check\x20if\x20store\x20exists','fields','setSlaveOffset','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','createAggregates\x20function\x20exists','max','offsetExists\x20function\x20exists','fusionNodeI\x20correctly\x20saved','master\x20flag\x20set\x20correctly','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','base\x20saved','connectToKafka\x20function\x20exists','value','data\x20record\x20saved\x20correctly','duplicate\x20insertions\x20test','check\x20store\x20structure','aggregate','./db3/','buffer\x20empty','value|max|43200000','mqtt','deepEqual','createAggregates','getAggregates','broadcastAggregates','Base','value|max|86400000','aggregates\x20initialized\x20-\x20number','data\x20insertion','equal','min','value|winbuf|604800000','getPartialFeatureVector','deleteObsoleteRows\x20function\x20exists','datetime','processRecord','apply','config','getOffsetTimestamp','variance','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','parse','timevalue','function','getPartialFeatureVector\x20function\x20exists','fusionNodeI','master\x20offset\x20set\x20correctly','buffer\x20position\x20is\x200','deleteObsoleteRows'];(function(_0xe99c98,_0x25525d){const _0x4c6a77=function(_0x1b895a){while(--_0x1b895a){_0xe99c98['push'](_0xe99c98['shift']());}},_0x394b12=function(){const _0x23e1f1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4b4958,_0x3cfcef,_0x5119de,_0x13f083){_0x13f083=_0x13f083||{};let _0x440fdd=_0x3cfcef+'='+_0x5119de,_0x466033=0x0;for(let _0x1b02c7=0x0,_0x4491ba=_0x4b4958['length'];_0x1b02c7<_0x4491ba;_0x1b02c7++){const _0xfc66ff=_0x4b4958[_0x1b02c7];_0x440fdd+=';\x20'+_0xfc66ff;const _0xa74aa4=_0x4b4958[_0xfc66ff];_0x4b4958['push'](_0xa74aa4),_0x4491ba=_0x4b4958['length'],_0xa74aa4!==!![]&&(_0x440fdd+='='+_0xa74aa4);}_0x13f083['cookie']=_0x440fdd;},'removeCookie':function(){return'dev';},'getCookie':function(_0x30ecbc,_0x566c12){_0x30ecbc=_0x30ecbc||function(_0x5ee835){return _0x5ee835;};const _0x192257=_0x30ecbc(new RegExp('(?:^|;\x20)'+_0x566c12['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x17328c=function(_0x238ecd,_0x32f987){_0x238ecd(++_0x32f987);};return _0x17328c(_0x4c6a77,_0x25525d),_0x192257?decodeURIComponent(_0x192257[0x1]):undefined;}},_0x45f360=function(){const _0x100dbf=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x100dbf['test'](_0x23e1f1['removeCookie']['toString']());};_0x23e1f1['updateCookie']=_0x45f360;let _0x5b7ad1='';const _0x50e88e=_0x23e1f1['updateCookie']();if(!_0x50e88e)_0x23e1f1['setCookie'](['*'],'counter',0x1);else _0x50e88e?_0x5b7ad1=_0x23e1f1['getCookie'](null,'counter'):_0x23e1f1['removeCookie']();};_0x394b12();}(a0_0x2552,0xa1));const a0_0x4c6a=function(_0xe99c98,_0x25525d){_0xe99c98=_0xe99c98-0x0;let _0x4c6a77=a0_0x2552[_0xe99c98];return _0x4c6a77;};const a0_0x5119de=function(){let _0x231a84=!![];return function(_0x4c2899,_0x51665d){const _0x44899e=_0x231a84?function(){if(_0x51665d){const _0x2d3556=_0x51665d[a0_0x4c6a('0x16')](_0x4c2899,arguments);return _0x51665d=null,_0x2d3556;}}:function(){};return _0x231a84=![],_0x44899e;};}(),a0_0x3cfcef=a0_0x5119de(this,function(){const _0x13d11c=function(){const _0x187a95=_0x13d11c[a0_0x4c6a('0x46')](a0_0x4c6a('0x2a'))()[a0_0x4c6a('0x46')](a0_0x4c6a('0x5d'));return!_0x187a95[a0_0x4c6a('0x52')](a0_0x3cfcef);};return _0x13d11c();});a0_0x3cfcef();const streamingNode=require(a0_0x4c6a('0x32')),streamingEnergyNode=require('../nodes/streamingEnergyNode.js'),streamingWeatherNode=require(a0_0x4c6a('0x25')),streamingStaticNode=require(a0_0x4c6a('0x4c')),streamingTimeValueNode=require('../nodes/streamingTimeValueNode.js'),fileManager=require(a0_0x4c6a('0x42')),qm=require(a0_0x4c6a('0x43')),fs=require('fs');var assert=require(a0_0x4c6a('0x23'));let connectionConfig={'zookeeper':a0_0x4c6a('0x28')},aggrConfigs={'timevalue':[{'field':a0_0x4c6a('0x60'),'tick':[{'type':a0_0x4c6a('0x3c'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x4c6a('0x3c'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x4c6a('0x10')},{'type':a0_0x4c6a('0x59')},{'type':a0_0x4c6a('0x19')}]},{'type':a0_0x4c6a('0x3c'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x4c6a('0x10')},{'type':a0_0x4c6a('0x59')},{'type':a0_0x4c6a('0x19')}]},{'type':a0_0x4c6a('0x3c'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':'timevalue','connection':{'type':a0_0x4c6a('0x6')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x4c6a('0x1c'),'nodeid':a0_0x4c6a('0x1c'),'aggrConfigId':a0_0x4c6a('0x1c'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x4c6a('0x60'),'name':a0_0x4c6a('0x60')},{'type':a0_0x4c6a('0x60'),'name':a0_0x4c6a('0x35')},{'type':'value','name':'value|min|86400000'},{'type':a0_0x4c6a('0x60'),'name':a0_0x4c6a('0xc')},{'type':a0_0x4c6a('0x60'),'name':a0_0x4c6a('0x4f')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x4c6a('0x60'),'name':a0_0x4c6a('0x60')},{'type':a0_0x4c6a('0x60'),'name':a0_0x4c6a('0x35')},{'type':a0_0x4c6a('0x60'),'name':'value|min|86400000'},{'type':a0_0x4c6a('0x60'),'name':a0_0x4c6a('0xc')},{'type':'value','name':a0_0x4c6a('0x4f')}]}]}]};function processRecordDummyCb(_0x4a0042,_0x1d7254){return!![];}describe('streamingTimeValueNode',function(){let _0x9c9f66,_0x22c554;before(function(){fileManager[a0_0x4c6a('0x3f')](a0_0x4c6a('0x3')),fileManager[a0_0x4c6a('0x24')](a0_0x4c6a('0x3')),_0x9c9f66=new qm[(a0_0x4c6a('0xb'))]({'dbPath':'./db3/','mode':'createClean'}),stvn=new streamingTimeValueNode(_0x9c9f66,connectionConfig,fusionConfig[a0_0x4c6a('0x4b')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x9c9f66['close']();}),describe(a0_0x4c6a('0x2e'),function(){it(a0_0x4c6a('0x5e'),function(){assert['equal'](_0x9c9f66,stvn[a0_0x4c6a('0x49')]);}),it(a0_0x4c6a('0x54'),function(){assert[a0_0x4c6a('0xf')](stvn['rawstore'][a0_0x4c6a('0x4a')],a0_0x4c6a('0x1c'));}),it(a0_0x4c6a('0x1'),function(){assert[a0_0x4c6a('0x7')](stvn[a0_0x4c6a('0x40')][a0_0x4c6a('0x55')],[{'id':0x0,'name':'Time','type':a0_0x4c6a('0x14'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x4c6a('0x60'),'type':a0_0x4c6a('0x31'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x4c6a('0xd'),function(){assert[a0_0x4c6a('0xf')](Object[a0_0x4c6a('0x3d')](stvn[a0_0x4c6a('0x2')])[a0_0x4c6a('0x51')],0xf);}),it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert['deepEqual'](Object[a0_0x4c6a('0x3d')](stvn[a0_0x4c6a('0x2')]),['value|tick','value|winbuf|21600000',a0_0x4c6a('0x50'),'value|winbuf|43200000',a0_0x4c6a('0x29'),a0_0x4c6a('0x2b'),a0_0x4c6a('0x5'),'value|variance|43200000','value|winbuf|86400000',a0_0x4c6a('0x35'),a0_0x4c6a('0x2d'),'value|max|86400000',a0_0x4c6a('0x4f'),a0_0x4c6a('0x11'),'value|ma|604800000']);}),it('config\x20saved',function(){assert[a0_0x4c6a('0x7')](stvn[a0_0x4c6a('0x17')],fusionConfig[a0_0x4c6a('0x4b')][0x0]);}),it(a0_0x4c6a('0x5b'),function(){assert['equal'](stvn[a0_0x4c6a('0x1f')],0x63);}),it(a0_0x4c6a('0x53'),function(){assert[a0_0x4c6a('0xf')](typeof stvn[a0_0x4c6a('0x3e')],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x38'),function(){assert['equal'](stvn[a0_0x4c6a('0x2c')],null);}),it(a0_0x4c6a('0x4'),function(){assert[a0_0x4c6a('0x7')](stvn[a0_0x4c6a('0x30')],[]);}),it(a0_0x4c6a('0x21'),function(){assert[a0_0x4c6a('0xf')](stvn[a0_0x4c6a('0x33')],0x0);}),it(a0_0x4c6a('0x5c'),function(){assert[a0_0x4c6a('0xf')](stvn[a0_0x4c6a('0x47')],!![]);}),it(a0_0x4c6a('0x4e'),function(){assert[a0_0x4c6a('0xf')](stvn['isMaster'](),!![]);}),it(a0_0x4c6a('0x5f'),function(){assert[a0_0x4c6a('0xf')](typeof stvn[a0_0x4c6a('0x26')],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x27'),function(){assert[a0_0x4c6a('0xf')](typeof stvn[a0_0x4c6a('0xa')],'function');}),it(a0_0x4c6a('0x58'),function(){assert['equal'](typeof stvn[a0_0x4c6a('0x8')],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x5a'),function(){assert['equal'](typeof stvn[a0_0x4c6a('0x36')],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x13'),function(){assert[a0_0x4c6a('0xf')](typeof stvn[a0_0x4c6a('0x22')],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x48'),function(){assert[a0_0x4c6a('0xf')](typeof stvn['checkDataAvailability'],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x3a'),function(){assert[a0_0x4c6a('0xf')](typeof stvn[a0_0x4c6a('0x56')],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x3b'),function(){assert[a0_0x4c6a('0xf')](typeof stvn[a0_0x4c6a('0x18')],a0_0x4c6a('0x1d'));}),it('setMasterOffset\x20function\x20exists',function(){assert[a0_0x4c6a('0xf')](typeof stvn[a0_0x4c6a('0x18')],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x39'),function(){assert['equal'](typeof stvn[a0_0x4c6a('0x9')],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x1e'),function(){assert[a0_0x4c6a('0xf')](typeof stvn[a0_0x4c6a('0x12')],a0_0x4c6a('0x1d'));}),it(a0_0x4c6a('0x45'),function(){assert['equal'](stvn['isMaster'](),!![]);}),it(a0_0x4c6a('0x20'),function(){stvn[a0_0x4c6a('0x37')](),assert[a0_0x4c6a('0xf')](stvn['position'],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x4c6a('0xf')](stvn[a0_0x4c6a('0x56')](0x0),![]);});}),describe(a0_0x4c6a('0xe'),function(){it(a0_0x4c6a('0x61'),function(){stvn[a0_0x4c6a('0x15')](JSON['parse'](a0_0x4c6a('0x1a'))),stvn[a0_0x4c6a('0x15')](JSON[a0_0x4c6a('0x1b')](a0_0x4c6a('0x57'))),assert['equal'](stvn['buffer']['length'],0x2),assert[a0_0x4c6a('0xf')](stvn[a0_0x4c6a('0x30')][0x0]['value'],0xa),assert[a0_0x4c6a('0xf')](stvn['buffer'][0x1][a0_0x4c6a('0x60')],0x14);}),it(a0_0x4c6a('0x34'),function(){stvn[a0_0x4c6a('0x15')](JSON[a0_0x4c6a('0x1b')]('{\x22time\x22:\x201451613600}')),assert['equal'](stvn[a0_0x4c6a('0x30')][a0_0x4c6a('0x51')],0x3),assert[a0_0x4c6a('0xf')](stvn[a0_0x4c6a('0x30')][0x2][a0_0x4c6a('0x60')],0x0);}),it(a0_0x4c6a('0x2f'),function(){assert['deepEqual'](stvn[a0_0x4c6a('0x30')][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});}),it(a0_0x4c6a('0x41'),function(){for(let _0x21f8d1=0x1;_0x21f8d1<=0x9;_0x21f8d1++){let _0x2ea2b3=0x5685dda0+_0x21f8d1*0xe10,_0x3abed4=_0x21f8d1+0x3*0xa;stvn['processRecord'](JSON[a0_0x4c6a('0x1b')](a0_0x4c6a('0x44')+_0x2ea2b3+a0_0x4c6a('0x4d')+_0x3abed4+'}'));}assert[a0_0x4c6a('0xf')](stvn[a0_0x4c6a('0x30')][a0_0x4c6a('0x51')],0xc),assert[a0_0x4c6a('0x7')](stvn[a0_0x4c6a('0x30')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});}),it(a0_0x4c6a('0x0'),function(){stvn[a0_0x4c6a('0x15')](JSON['parse'](a0_0x4c6a('0x1a'))),stvn[a0_0x4c6a('0x15')](JSON['parse'](a0_0x4c6a('0x57'))),assert[a0_0x4c6a('0xf')](stvn[a0_0x4c6a('0x30')][a0_0x4c6a('0x51')],0xc);});});});