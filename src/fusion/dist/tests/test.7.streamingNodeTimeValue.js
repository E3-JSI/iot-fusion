const a0_0x4b52=['duplicate\x20insertions\x20test','parse','deleteObsoleteRows\x20function\x20exists','equal','offsetExists\x20function\x20exists','function','variance','value','checkDataAvailability\x20function\x20exists','value|ma|43200000','../nodes/streamingStaticNode.js','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','setSlaveOffset','config\x20saved','192.168.85.98:2181','{\x22time\x22:','value|variance|43200000','fusionNodeI\x20correctly\x20saved','aggregate','value|ma|86400000','buffer\x20empty','parent','value|max|43200000','datetime','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','value|winbuf|86400000','base\x20saved','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','fusionNodeI','master\x20set\x20correctly','processRecord','getPartialFeatureVector','{\x22time\x22:\x201451613600}','getAggregates','base','value|min|43200000','fields','max','test','nodes','float','Base','check\x20if\x20store\x20exists','streamingTimeValueNode','value|tick','createFolder','value|min|86400000','Empty\x20values\x20in\x20message\x20set\x20to\x200','isMaster','check\x20store\x20structure','../nodes/streamingWeatherNode.js','value|ma|604800000','getAggregates\x20function\x20exists','value|max|86400000','../nodes/streamingNode.js','value|variance|86400000','rawstore','getPartialFeatureVector\x20function\x20exists','winbuf','deepEqual',',\x22value\x22:\x20','buffer','initialization','./db3/','mqtt','keys','processRecordCb','offsetExists','return\x20/\x22\x20+\x20this\x20+\x20\x22/','getOffsetTimestamp\x20function\x20exists','parent\x20saved','min','createAggregates','timevalue','../nodes/streamingTimeValueNode.js','length','deleteObsoleteRows','assert','createAggregates\x20function\x20exists','../common/utils/fileManager.js','broadcastAggregates','position','getOffsetTimestamp','value|winbuf|43200000','value|ma|21600000','value|winbuf|21600000','isMaster\x20function','setMasterOffset\x20function\x20exists','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','Time','name'];(function(_0x40cf52,_0x4b521a){const _0x5b421e=function(_0x1e3fef){while(--_0x1e3fef){_0x40cf52['push'](_0x40cf52['shift']());}},_0x55c193=function(){const _0x5c0349={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xcb963e,_0xc7c271,_0x67f8e4,_0xff7b3a){_0xff7b3a=_0xff7b3a||{};let _0x5e545c=_0xc7c271+'='+_0x67f8e4,_0x4bfbb4=0x0;for(let _0x1a8feb=0x0,_0x5c8152=_0xcb963e['length'];_0x1a8feb<_0x5c8152;_0x1a8feb++){const _0x38154c=_0xcb963e[_0x1a8feb];_0x5e545c+=';\x20'+_0x38154c;const _0x8cd206=_0xcb963e[_0x38154c];_0xcb963e['push'](_0x8cd206),_0x5c8152=_0xcb963e['length'],_0x8cd206!==!![]&&(_0x5e545c+='='+_0x8cd206);}_0xff7b3a['cookie']=_0x5e545c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x33cfb2,_0x5aaa23){_0x33cfb2=_0x33cfb2||function(_0x74ec39){return _0x74ec39;};const _0x468175=_0x33cfb2(new RegExp('(?:^|;\x20)'+_0x5aaa23['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xa774bf=function(_0x9b1e35,_0x5006f6){_0x9b1e35(++_0x5006f6);};return _0xa774bf(_0x5b421e,_0x4b521a),_0x468175?decodeURIComponent(_0x468175[0x1]):undefined;}},_0x22121a=function(){const _0x2b19f0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2b19f0['test'](_0x5c0349['removeCookie']['toString']());};_0x5c0349['updateCookie']=_0x22121a;let _0x4b91b9='';const _0x554293=_0x5c0349['updateCookie']();if(!_0x554293)_0x5c0349['setCookie'](['*'],'counter',0x1);else _0x554293?_0x4b91b9=_0x5c0349['getCookie'](null,'counter'):_0x5c0349['removeCookie']();};_0x55c193();}(a0_0x4b52,0x174));const a0_0x5b42=function(_0x40cf52,_0x4b521a){_0x40cf52=_0x40cf52-0x0;let _0x5b421e=a0_0x4b52[_0x40cf52];return _0x5b421e;};const a0_0x67f8e4=function(){let _0x2cb6f3=!![];return function(_0x4241da,_0x3d0265){const _0x46c5fd=_0x2cb6f3?function(){if(_0x3d0265){const _0x4970c7=_0x3d0265['apply'](_0x4241da,arguments);return _0x3d0265=null,_0x4970c7;}}:function(){};return _0x2cb6f3=![],_0x46c5fd;};}(),a0_0xc7c271=a0_0x67f8e4(this,function(){const _0x3ce5ec=function(){const _0x40cda1=_0x3ce5ec['constructor'](a0_0x5b42('0x3c'))()['constructor'](a0_0x5b42('0x3'));return!_0x40cda1[a0_0x5b42('0x1e')](a0_0xc7c271);};return _0x3ce5ec();});a0_0xc7c271();const streamingNode=require(a0_0x5b42('0x2e')),streamingEnergyNode=require('../nodes/streamingEnergyNode.js'),streamingWeatherNode=require(a0_0x5b42('0x2a')),streamingStaticNode=require(a0_0x5b42('0x2')),streamingTimeValueNode=require(a0_0x5b42('0x42')),fileManager=require(a0_0x5b42('0x47')),qm=require('qminer'),fs=require('fs');var assert=require(a0_0x5b42('0x45'));let connectionConfig={'zookeeper':a0_0x5b42('0x6')},aggrConfigs={'timevalue':[{'field':a0_0x5b42('0x5a'),'tick':[{'type':a0_0x5b42('0x32'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x5b42('0x32'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x5b42('0x3f')},{'type':a0_0x5b42('0x1d')},{'type':a0_0x5b42('0x59')}]},{'type':a0_0x5b42('0x32'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x5b42('0x3f')},{'type':'max'},{'type':a0_0x5b42('0x59')}]},{'type':a0_0x5b42('0x32'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x5b42('0x41'),'connection':{'type':a0_0x5b42('0x38')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x5b42('0x41'),'nodeid':a0_0x5b42('0x41'),'aggrConfigId':a0_0x5b42('0x41'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x5b42('0x5a'),'name':a0_0x5b42('0x5a')},{'type':'value','name':a0_0x5b42('0xb')},{'type':a0_0x5b42('0x5a'),'name':a0_0x5b42('0x26')},{'type':a0_0x5b42('0x5a'),'name':a0_0x5b42('0x2d')},{'type':'value','name':a0_0x5b42('0x2f')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x5b42('0x5a'),'name':'value'},{'type':a0_0x5b42('0x5a'),'name':a0_0x5b42('0xb')},{'type':'value','name':a0_0x5b42('0x26')},{'type':a0_0x5b42('0x5a'),'name':a0_0x5b42('0x2d')},{'type':'value','name':'value|variance|86400000'}]}]}]};function processRecordDummyCb(_0x1323d9,_0x2024c3){return!![];}describe(a0_0x5b42('0x23'),function(){let _0x5cd8e1,_0x44e1b3;before(function(){fileManager['removeFolder']('./db3/'),fileManager[a0_0x5b42('0x25')](a0_0x5b42('0x37')),_0x5cd8e1=new qm[(a0_0x5b42('0x21'))]({'dbPath':a0_0x5b42('0x37'),'mode':'createClean'}),stvn=new streamingTimeValueNode(_0x5cd8e1,connectionConfig,fusionConfig['nodes'][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x5cd8e1['close']();}),describe(a0_0x5b42('0x36'),function(){it(a0_0x5b42('0x12'),function(){assert[a0_0x5b42('0x56')](_0x5cd8e1,stvn[a0_0x5b42('0x1a')]);}),it(a0_0x5b42('0x22'),function(){assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0x30')][a0_0x5b42('0x52')],a0_0x5b42('0x41'));}),it(a0_0x5b42('0x29'),function(){assert[a0_0x5b42('0x33')](stvn['rawstore'][a0_0x5b42('0x1c')],[{'id':0x0,'name':a0_0x5b42('0x51'),'type':a0_0x5b42('0xf'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x5b42('0x5a'),'type':a0_0x5b42('0x20'),'nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x5b42('0x56')](Object[a0_0x5b42('0x39')](stvn['aggregate'])[a0_0x5b42('0x43')],0xf);}),it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert[a0_0x5b42('0x33')](Object[a0_0x5b42('0x39')](stvn[a0_0x5b42('0xa')]),[a0_0x5b42('0x24'),a0_0x5b42('0x4d'),a0_0x5b42('0x4c'),a0_0x5b42('0x4b'),a0_0x5b42('0x1'),a0_0x5b42('0x1b'),a0_0x5b42('0xe'),a0_0x5b42('0x8'),a0_0x5b42('0x11'),'value|ma|86400000',a0_0x5b42('0x26'),'value|max|86400000',a0_0x5b42('0x2f'),'value|winbuf|604800000',a0_0x5b42('0x2b')]);}),it(a0_0x5b42('0x5'),function(){assert[a0_0x5b42('0x33')](stvn['config'],fusionConfig[a0_0x5b42('0x1f')][0x0]);}),it(a0_0x5b42('0x9'),function(){assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0x14')],0x63);}),it('callback\x20function\x20should\x20be\x20set',function(){assert[a0_0x5b42('0x56')](typeof stvn[a0_0x5b42('0x3a')],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x3e'),function(){assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0xd')],null);}),it(a0_0x5b42('0xc'),function(){assert[a0_0x5b42('0x33')](stvn[a0_0x5b42('0x35')],[]);}),it('buffer\x20position\x20is\x200',function(){assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0x49')],0x0);}),it('master\x20flag\x20set\x20correctly',function(){assert[a0_0x5b42('0x56')](stvn['master'],!![]);}),it(a0_0x5b42('0x4e'),function(){assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0x28')](),!![]);}),it('connectToKafka\x20function\x20exists',function(){assert['equal'](typeof stvn['connectToKafka'],a0_0x5b42('0x58'));}),it('broadcastAggregates\x20function\x20exists',function(){assert[a0_0x5b42('0x56')](typeof stvn[a0_0x5b42('0x48')],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x46'),function(){assert[a0_0x5b42('0x56')](typeof stvn[a0_0x5b42('0x40')],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x57'),function(){assert[a0_0x5b42('0x56')](typeof stvn[a0_0x5b42('0x3b')],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x55'),function(){assert[a0_0x5b42('0x56')](typeof stvn[a0_0x5b42('0x44')],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x0'),function(){assert[a0_0x5b42('0x56')](typeof stvn['checkDataAvailability'],'function');}),it('setSlaveOffset\x20function\x20exists',function(){assert[a0_0x5b42('0x56')](typeof stvn[a0_0x5b42('0x4')],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x3d'),function(){assert['equal'](typeof stvn['getOffsetTimestamp'],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x4f'),function(){assert['equal'](typeof stvn[a0_0x5b42('0x4a')],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x2c'),function(){assert[a0_0x5b42('0x56')](typeof stvn[a0_0x5b42('0x19')],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x31'),function(){assert[a0_0x5b42('0x56')](typeof stvn[a0_0x5b42('0x17')],a0_0x5b42('0x58'));}),it(a0_0x5b42('0x15'),function(){assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0x28')](),!![]);}),it('master\x20offset\x20set\x20correctly',function(){stvn['setMasterOffset'](),assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0x49')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0x4')](0x0),![]);});}),describe('data\x20insertion',function(){it('data\x20record\x20saved\x20correctly',function(){stvn['processRecord'](JSON[a0_0x5b42('0x54')](a0_0x5b42('0x50'))),stvn[a0_0x5b42('0x16')](JSON[a0_0x5b42('0x54')](a0_0x5b42('0x13'))),assert['equal'](stvn['buffer'][a0_0x5b42('0x43')],0x2),assert['equal'](stvn[a0_0x5b42('0x35')][0x0][a0_0x5b42('0x5a')],0xa),assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0x35')][0x1]['value'],0x14);}),it(a0_0x5b42('0x27'),function(){stvn[a0_0x5b42('0x16')](JSON[a0_0x5b42('0x54')](a0_0x5b42('0x18'))),assert['equal'](stvn[a0_0x5b42('0x35')][a0_0x5b42('0x43')],0x3),assert['equal'](stvn['buffer'][0x2][a0_0x5b42('0x5a')],0x0);}),it(a0_0x5b42('0x10'),function(){assert[a0_0x5b42('0x33')](stvn[a0_0x5b42('0x35')][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});}),it('9\x20more\x20data\x20insertions',function(){for(let _0x450aa2=0x1;_0x450aa2<=0x9;_0x450aa2++){let _0x3ef45e=0x5685dda0+_0x450aa2*0xe10,_0x48811a=_0x450aa2+0x3*0xa;stvn[a0_0x5b42('0x16')](JSON[a0_0x5b42('0x54')](a0_0x5b42('0x7')+_0x3ef45e+a0_0x5b42('0x34')+_0x48811a+'}'));}assert[a0_0x5b42('0x56')](stvn['buffer'][a0_0x5b42('0x43')],0xc),assert['deepEqual'](stvn[a0_0x5b42('0x35')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});}),it(a0_0x5b42('0x53'),function(){stvn[a0_0x5b42('0x16')](JSON[a0_0x5b42('0x54')](a0_0x5b42('0x50'))),stvn[a0_0x5b42('0x16')](JSON['parse']('{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}')),assert[a0_0x5b42('0x56')](stvn[a0_0x5b42('0x35')][a0_0x5b42('0x43')],0xc);});});});