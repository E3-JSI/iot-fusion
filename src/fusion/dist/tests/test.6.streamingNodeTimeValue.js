const a0_0x4265=['value','deleteObsoleteRows','value|min|86400000','value|winbuf|604800000','variance','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','value|variance|43200000','checkDataAvailability\x20function\x20exists','deepEqual','buffer','broadcastAggregates','./db3/','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','value|max|86400000','keys','getAggregates\x20function\x20exists','position','getAggregates','fields','datetime','setMasterOffset','parse','float','offsetExists\x20function\x20exists','base','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','getOffsetTimestamp\x20function\x20exists','master\x20flag\x20set\x20correctly','name','createAggregates','buffer\x20empty','test','master\x20set\x20correctly','createClean','{\x22time\x22:\x201451613600}','data\x20insertion','value|winbuf|86400000','aggregates\x20initialized\x20-\x20key\x20names','Base','../nodes/streamingNode.js','getPartialFeatureVector\x20function\x20exists','isMaster','connectToKafka','getOffsetTimestamp','initialization','../nodes/streamingStaticNode.js','aggregates\x20initialized\x20-\x20number','streamingTimeValueNode','parent','data\x20record\x20saved\x20correctly','../nodes/streamingEnergyNode.js','../nodes/streamingTimeValueNode.js','duplicate\x20insertions\x20test','value|ma|43200000','qminer','equal','../nodes/streamingWeatherNode.js','processRecord','value|winbuf|43200000','connectToKafka\x20function\x20exists','value|tick','fusionNodeI\x20correctly\x20saved','nodes','master\x20offset\x20set\x20correctly','value|variance|86400000','timevalue','apply','192.168.85.98:2181','return\x20/\x22\x20+\x20this\x20+\x20\x22/','length','{\x22time\x22:','value|winbuf|21600000','assert','setSlaveOffset','../common/utils/fileManager.js','function','setSlaveOffset\x20function\x20exists',',\x22value\x22:\x20','aggregate','config','rawstore','winbuf','processRecordCb','min','callback\x20function\x20should\x20be\x20set','fusionNodeI','isMaster\x20function','close','deleteObsoleteRows\x20function\x20exists','value|ma|86400000','setMasterOffset\x20function\x20exists','offsetExists'];(function(_0x147473,_0x426588){const _0x26e227=function(_0x31d846){while(--_0x31d846){_0x147473['push'](_0x147473['shift']());}},_0x1e579e=function(){const _0x591408={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x120b7b,_0x313381,_0x566dfc,_0x4413c7){_0x4413c7=_0x4413c7||{};let _0x20fec8=_0x313381+'='+_0x566dfc,_0x57d3e7=0x0;for(let _0x2ac6b8=0x0,_0x4ba825=_0x120b7b['length'];_0x2ac6b8<_0x4ba825;_0x2ac6b8++){const _0x639e9f=_0x120b7b[_0x2ac6b8];_0x20fec8+=';\x20'+_0x639e9f;const _0xa90cfc=_0x120b7b[_0x639e9f];_0x120b7b['push'](_0xa90cfc),_0x4ba825=_0x120b7b['length'],_0xa90cfc!==!![]&&(_0x20fec8+='='+_0xa90cfc);}_0x4413c7['cookie']=_0x20fec8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1afc62,_0x405b52){_0x1afc62=_0x1afc62||function(_0x314f51){return _0x314f51;};const _0x14334b=_0x1afc62(new RegExp('(?:^|;\x20)'+_0x405b52['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x32b327=function(_0x24daa4,_0x1af202){_0x24daa4(++_0x1af202);};return _0x32b327(_0x26e227,_0x426588),_0x14334b?decodeURIComponent(_0x14334b[0x1]):undefined;}},_0x45177c=function(){const _0x10e1b5=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x10e1b5['test'](_0x591408['removeCookie']['toString']());};_0x591408['updateCookie']=_0x45177c;let _0x3d5a2c='';const _0x16f27d=_0x591408['updateCookie']();if(!_0x16f27d)_0x591408['setCookie'](['*'],'counter',0x1);else _0x16f27d?_0x3d5a2c=_0x591408['getCookie'](null,'counter'):_0x591408['removeCookie']();};_0x1e579e();}(a0_0x4265,0xb9));const a0_0x26e2=function(_0x147473,_0x426588){_0x147473=_0x147473-0x0;let _0x26e227=a0_0x4265[_0x147473];return _0x26e227;};const a0_0x566dfc=function(){let _0x42ae64=!![];return function(_0x9bb5ab,_0x480c9b){const _0x13a258=_0x42ae64?function(){if(_0x480c9b){const _0x12d4ab=_0x480c9b[a0_0x26e2('0x41')](_0x9bb5ab,arguments);return _0x480c9b=null,_0x12d4ab;}}:function(){};return _0x42ae64=![],_0x13a258;};}(),a0_0x313381=a0_0x566dfc(this,function(){const _0x522af3=function(){const _0x18b4a5=_0x522af3['constructor'](a0_0x26e2('0x43'))()['constructor'](a0_0x26e2('0xb'));return!_0x18b4a5[a0_0x26e2('0x1e')](a0_0x313381);};return _0x522af3();});a0_0x313381();const streamingNode=require(a0_0x26e2('0x26')),streamingEnergyNode=require(a0_0x26e2('0x31')),streamingWeatherNode=require(a0_0x26e2('0x37')),streamingStaticNode=require(a0_0x26e2('0x2c')),streamingTimeValueNode=require(a0_0x26e2('0x32')),fileManager=require(a0_0x26e2('0x49')),qm=require(a0_0x26e2('0x35')),fs=require('fs');var assert=require(a0_0x26e2('0x47'));let connectionConfig={'zookeeper':a0_0x26e2('0x42')},aggrConfigs={'timevalue':[{'field':'value','tick':[{'type':a0_0x26e2('0x50'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x26e2('0x52')},{'type':'max'},{'type':'variance'}]},{'type':a0_0x26e2('0x50'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x26e2('0x52')},{'type':'max'},{'type':a0_0x26e2('0x3')}]},{'type':a0_0x26e2('0x50'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x26e2('0x40'),'connection':{'type':'mqtt'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'timevalue','nodeid':a0_0x26e2('0x40'),'aggrConfigId':a0_0x26e2('0x40'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x26e2('0x5b'),'name':'value'},{'type':a0_0x26e2('0x5b'),'name':a0_0x26e2('0x58')},{'type':a0_0x26e2('0x5b'),'name':a0_0x26e2('0x1')},{'type':'value','name':a0_0x26e2('0xc')},{'type':'value','name':a0_0x26e2('0x3f')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x26e2('0x5b'),'name':a0_0x26e2('0x5b')},{'type':a0_0x26e2('0x5b'),'name':a0_0x26e2('0x58')},{'type':a0_0x26e2('0x5b'),'name':'value|min|86400000'},{'type':'value','name':a0_0x26e2('0xc')},{'type':'value','name':'value|variance|86400000'}]}]}]};function processRecordDummyCb(_0x3b2c4a,_0x16b703){return!![];}describe(a0_0x26e2('0x2e'),function(){let _0x4b1bea,_0xf34d12;before(function(){fileManager['removeFolder']('./db3/'),fileManager['createFolder'](a0_0x26e2('0xa')),_0x4b1bea=new qm[(a0_0x26e2('0x25'))]({'dbPath':a0_0x26e2('0xa'),'mode':a0_0x26e2('0x20')}),stvn=new streamingTimeValueNode(_0x4b1bea,connectionConfig,fusionConfig['nodes'][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x4b1bea[a0_0x26e2('0x56')]();}),describe(a0_0x26e2('0x2b'),function(){it('base\x20saved',function(){assert[a0_0x26e2('0x36')](_0x4b1bea,stvn[a0_0x26e2('0x17')]);}),it('check\x20if\x20store\x20exists',function(){assert['equal'](stvn[a0_0x26e2('0x4f')][a0_0x26e2('0x1b')],'timevalue');}),it('check\x20store\x20structure',function(){assert['deepEqual'](stvn[a0_0x26e2('0x4f')][a0_0x26e2('0x11')],[{'id':0x0,'name':'Time','type':a0_0x26e2('0x12'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':'value','type':a0_0x26e2('0x15'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x26e2('0x2d'),function(){assert[a0_0x26e2('0x36')](Object[a0_0x26e2('0xd')](stvn[a0_0x26e2('0x4d')])[a0_0x26e2('0x44')],0xf);}),it(a0_0x26e2('0x24'),function(){assert[a0_0x26e2('0x7')](Object[a0_0x26e2('0xd')](stvn[a0_0x26e2('0x4d')]),[a0_0x26e2('0x3b'),a0_0x26e2('0x46'),'value|ma|21600000',a0_0x26e2('0x39'),a0_0x26e2('0x34'),'value|min|43200000','value|max|43200000',a0_0x26e2('0x5'),a0_0x26e2('0x23'),a0_0x26e2('0x58'),a0_0x26e2('0x1'),a0_0x26e2('0xc'),a0_0x26e2('0x3f'),a0_0x26e2('0x2'),'value|ma|604800000']);}),it('config\x20saved',function(){assert['deepEqual'](stvn[a0_0x26e2('0x4e')],fusionConfig[a0_0x26e2('0x3d')][0x0]);}),it(a0_0x26e2('0x3c'),function(){assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0x54')],0x63);}),it(a0_0x26e2('0x53'),function(){assert[a0_0x26e2('0x36')](typeof stvn[a0_0x26e2('0x51')],a0_0x26e2('0x4a'));}),it('parent\x20saved',function(){assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0x2f')],null);}),it(a0_0x26e2('0x1d'),function(){assert[a0_0x26e2('0x7')](stvn[a0_0x26e2('0x8')],[]);}),it('buffer\x20position\x20is\x200',function(){assert[a0_0x26e2('0x36')](stvn['position'],0x0);}),it(a0_0x26e2('0x1a'),function(){assert[a0_0x26e2('0x36')](stvn['master'],!![]);}),it(a0_0x26e2('0x55'),function(){assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0x28')](),!![]);}),it(a0_0x26e2('0x3a'),function(){assert['equal'](typeof stvn[a0_0x26e2('0x29')],a0_0x26e2('0x4a'));}),it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof stvn[a0_0x26e2('0x9')],'function');}),it('createAggregates\x20function\x20exists',function(){assert[a0_0x26e2('0x36')](typeof stvn[a0_0x26e2('0x1c')],a0_0x26e2('0x4a'));}),it(a0_0x26e2('0x16'),function(){assert[a0_0x26e2('0x36')](typeof stvn[a0_0x26e2('0x5a')],'function');}),it(a0_0x26e2('0x57'),function(){assert[a0_0x26e2('0x36')](typeof stvn[a0_0x26e2('0x0')],'function');}),it(a0_0x26e2('0x6'),function(){assert[a0_0x26e2('0x36')](typeof stvn['checkDataAvailability'],a0_0x26e2('0x4a'));}),it(a0_0x26e2('0x4b'),function(){assert[a0_0x26e2('0x36')](typeof stvn[a0_0x26e2('0x48')],'function');}),it(a0_0x26e2('0x19'),function(){assert[a0_0x26e2('0x36')](typeof stvn[a0_0x26e2('0x2a')],'function');}),it(a0_0x26e2('0x59'),function(){assert[a0_0x26e2('0x36')](typeof stvn[a0_0x26e2('0x2a')],a0_0x26e2('0x4a'));}),it(a0_0x26e2('0xe'),function(){assert['equal'](typeof stvn[a0_0x26e2('0x10')],a0_0x26e2('0x4a'));}),it(a0_0x26e2('0x27'),function(){assert[a0_0x26e2('0x36')](typeof stvn['getPartialFeatureVector'],'function');}),it(a0_0x26e2('0x1f'),function(){assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0x28')](),!![]);}),it(a0_0x26e2('0x3e'),function(){stvn[a0_0x26e2('0x13')](),assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0xf')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0x48')](0x0),![]);});}),describe(a0_0x26e2('0x22'),function(){it(a0_0x26e2('0x30'),function(){stvn[a0_0x26e2('0x38')](JSON[a0_0x26e2('0x14')](a0_0x26e2('0x4'))),stvn[a0_0x26e2('0x38')](JSON[a0_0x26e2('0x14')]('{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}')),assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0x8')][a0_0x26e2('0x44')],0x2),assert['equal'](stvn[a0_0x26e2('0x8')][0x0][a0_0x26e2('0x5b')],0xa),assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0x8')][0x1][a0_0x26e2('0x5b')],0x14);}),it('Empty\x20values\x20in\x20message\x20set\x20to\x200',function(){stvn['processRecord'](JSON[a0_0x26e2('0x14')](a0_0x26e2('0x21'))),assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0x8')][a0_0x26e2('0x44')],0x3),assert['equal'](stvn['buffer'][0x2][a0_0x26e2('0x5b')],0x0);}),it('stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion',function(){assert[a0_0x26e2('0x7')](stvn[a0_0x26e2('0x8')][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});}),it('9\x20more\x20data\x20insertions',function(){for(let _0x6ec13b=0x1;_0x6ec13b<=0x9;_0x6ec13b++){let _0x5adc50=0x5685dda0+_0x6ec13b*0xe10,_0x5a6031=_0x6ec13b+0x3*0xa;stvn[a0_0x26e2('0x38')](JSON[a0_0x26e2('0x14')](a0_0x26e2('0x45')+_0x5adc50+a0_0x26e2('0x4c')+_0x5a6031+'}'));}assert[a0_0x26e2('0x36')](stvn['buffer']['length'],0xc),assert[a0_0x26e2('0x7')](stvn[a0_0x26e2('0x8')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});}),it(a0_0x26e2('0x33'),function(){stvn['processRecord'](JSON[a0_0x26e2('0x14')](a0_0x26e2('0x4'))),stvn[a0_0x26e2('0x38')](JSON[a0_0x26e2('0x14')](a0_0x26e2('0x18'))),assert[a0_0x26e2('0x36')](stvn[a0_0x26e2('0x8')]['length'],0xc);});});});