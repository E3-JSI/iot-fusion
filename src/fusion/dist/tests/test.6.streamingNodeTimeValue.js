var _0xbed1=['isMaster','connectToKafka\x20function\x20exists','connectToKafka','broadcastAggregates\x20function\x20exists','broadcastAggregates','createAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','setSlaveOffset','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20offset\x20set\x20correctly','setMasterOffset','slave\x20offset\x20set\x20correctly:\x20no\x20data','data\x20insertion','processRecord','parse','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','Empty\x20values\x20in\x20message\x20set\x20to\x200','{\x22time\x22:\x201451613600}','9\x20more\x20data\x20insertions','{\x22time\x22:',',\x22value\x22:\x20','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingTimeValueNode.js','../common/utils/fileManager.js','qminer','assert','192.168.85.98:2181','winbuf','max','variance','min','mqtt','timevalue','value','value|ma|86400000','value|min|86400000','value|max|86400000','value|variance|86400000','streamingTimeValueNode','removeFolder','./db3/','createFolder','Base','nodes','close','initialization','base\x20saved','base','equal','rawstore','name','check\x20store\x20structure','deepEqual','Time','datetime','float','aggregates\x20initialized\x20-\x20number','keys','length','aggregate','value|tick','value|winbuf|21600000','value|winbuf|43200000','value|winbuf|604800000','value|ma|604800000','config','fusionNodeI\x20correctly\x20saved','fusionNodeI','callback\x20function\x20should\x20be\x20set','function','parent\x20saved','parent','buffer\x20empty','buffer','buffer\x20position\x20is\x200','position','master\x20flag\x20set\x20correctly'];(function(_0x41852b,_0x29fcc6){var _0x1e43e9=function(_0x17d110){while(--_0x17d110){_0x41852b['push'](_0x41852b['shift']());}};var _0x514d7c=function(){var _0x3bd944={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4b768d,_0x7ffec6,_0x1d6a78,_0x43ea17){_0x43ea17=_0x43ea17||{};var _0x3f4c8e=_0x7ffec6+'='+_0x1d6a78;var _0x4a8ba6=0x0;for(var _0x4a8ba6=0x0,_0x3827f7=_0x4b768d['length'];_0x4a8ba6<_0x3827f7;_0x4a8ba6++){var _0x2578d0=_0x4b768d[_0x4a8ba6];_0x3f4c8e+=';\x20'+_0x2578d0;var _0x166d26=_0x4b768d[_0x2578d0];_0x4b768d['push'](_0x166d26);_0x3827f7=_0x4b768d['length'];if(_0x166d26!==!![]){_0x3f4c8e+='='+_0x166d26;}}_0x43ea17['cookie']=_0x3f4c8e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x81d012,_0x36c83e){_0x81d012=_0x81d012||function(_0x509923){return _0x509923;};var _0x54efaa=_0x81d012(new RegExp('(?:^|;\x20)'+_0x36c83e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x5eca77=function(_0x55b09d,_0x1579c9){_0x55b09d(++_0x1579c9);};_0x5eca77(_0x1e43e9,_0x29fcc6);return _0x54efaa?decodeURIComponent(_0x54efaa[0x1]):undefined;}};var _0x241c12=function(){var _0x40f169=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x40f169['test'](_0x3bd944['removeCookie']['toString']());};_0x3bd944['updateCookie']=_0x241c12;var _0x785eb6='';var _0x1d2129=_0x3bd944['updateCookie']();if(!_0x1d2129){_0x3bd944['setCookie'](['*'],'counter',0x1);}else if(_0x1d2129){_0x785eb6=_0x3bd944['getCookie'](null,'counter');}else{_0x3bd944['removeCookie']();}};_0x514d7c();}(_0xbed1,0x79));var _0x246c=function(_0x148ba1,_0xc08bea){_0x148ba1=_0x148ba1-0x0;var _0x490f5e=_0xbed1[_0x148ba1];return _0x490f5e;};var _0x2ac6c2=function(){var _0x45218b=!![];return function(_0x31e64a,_0x1b8dac){var _0x4bc05b=_0x45218b?function(){if(_0x1b8dac){var _0x1e948e=_0x1b8dac['apply'](_0x31e64a,arguments);_0x1b8dac=null;return _0x1e948e;}}:function(){};_0x45218b=![];return _0x4bc05b;};}();var _0x5d0613=_0x2ac6c2(this,function(){var _0x57f50e=function(){return'\x64\x65\x76';},_0x2d7483=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x32af3e=function(){var _0x16f6e8=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x16f6e8['\x74\x65\x73\x74'](_0x57f50e['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1ee9e3=function(){var _0x3b6f41=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3b6f41['\x74\x65\x73\x74'](_0x2d7483['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x46655d=function(_0x4abc0b){var _0x493946=~-0x1>>0x1+0xff%0x0;if(_0x4abc0b['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x493946)){_0x24641f(_0x4abc0b);}};var _0x24641f=function(_0x5da87d){var _0x3fcb3a=~-0x4>>0x1+0xff%0x0;if(_0x5da87d['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x3fcb3a){_0x46655d(_0x5da87d);}};if(!_0x32af3e()){if(!_0x1ee9e3()){_0x46655d('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x46655d('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x46655d('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x5d0613();const streamingNode=require(_0x246c('0x0'));const streamingEnergyNode=require(_0x246c('0x1'));const streamingWeatherNode=require('../nodes/streamingWeatherNode.js');const streamingStaticNode=require('../nodes/streamingStaticNode.js');const streamingTimeValueNode=require(_0x246c('0x2'));const fileManager=require(_0x246c('0x3'));const qm=require(_0x246c('0x4'));const fs=require('fs');var assert=require(_0x246c('0x5'));let connectionConfig={'zookeeper':_0x246c('0x6')};let aggrConfigs={'timevalue':[{'field':'value','tick':[{'type':_0x246c('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x246c('0x7'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':_0x246c('0x8')},{'type':_0x246c('0x9')}]},{'type':_0x246c('0x7'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x246c('0xa')},{'type':_0x246c('0x8')},{'type':'variance'}]},{'type':_0x246c('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'fusionModel':'timevalue','connection':{'type':_0x246c('0xb')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x246c('0xc'),'nodeid':_0x246c('0xc'),'aggrConfigId':_0x246c('0xc'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x246c('0xd'),'name':'value'},{'type':'value','name':_0x246c('0xe')},{'type':_0x246c('0xd'),'name':_0x246c('0xf')},{'type':'value','name':_0x246c('0x10')},{'type':_0x246c('0xd'),'name':'value|variance|86400000'}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':_0x246c('0xd'),'name':_0x246c('0xd')},{'type':'value','name':_0x246c('0xe')},{'type':_0x246c('0xd'),'name':_0x246c('0xf')},{'type':_0x246c('0xd'),'name':_0x246c('0x10')},{'type':_0x246c('0xd'),'name':_0x246c('0x11')}]}]}]};function processRecordDummyCb(_0x2da747,_0x386148){return!![];}describe(_0x246c('0x12'),function(){let _0x231303;let _0x4fbf9c;before(function(){fileManager[_0x246c('0x13')](_0x246c('0x14'));fileManager[_0x246c('0x15')](_0x246c('0x14'));_0x231303=new qm[(_0x246c('0x16'))]({'dbPath':_0x246c('0x14'),'mode':'createClean'});stvn=new streamingTimeValueNode(_0x231303,connectionConfig,fusionConfig[_0x246c('0x17')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x231303[_0x246c('0x18')]();});describe(_0x246c('0x19'),function(){it(_0x246c('0x1a'),function(){assert['equal'](_0x231303,stvn[_0x246c('0x1b')]);});it('check\x20if\x20store\x20exists',function(){assert[_0x246c('0x1c')](stvn[_0x246c('0x1d')][_0x246c('0x1e')],_0x246c('0xc'));});it(_0x246c('0x1f'),function(){assert[_0x246c('0x20')](stvn[_0x246c('0x1d')]['fields'],[{'id':0x0,'name':_0x246c('0x21'),'type':_0x246c('0x22'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x246c('0xd'),'type':_0x246c('0x23'),'nullable':![],'internal':![],'primary':![]}]);});it(_0x246c('0x24'),function(){assert[_0x246c('0x1c')](Object[_0x246c('0x25')](stvn['aggregate'])[_0x246c('0x26')],0xf);});it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert['deepEqual'](Object[_0x246c('0x25')](stvn[_0x246c('0x27')]),[_0x246c('0x28'),_0x246c('0x29'),'value|ma|21600000',_0x246c('0x2a'),'value|ma|43200000','value|min|43200000','value|max|43200000','value|variance|43200000','value|winbuf|86400000',_0x246c('0xe'),'value|min|86400000',_0x246c('0x10'),_0x246c('0x11'),_0x246c('0x2b'),_0x246c('0x2c')]);});it('config\x20saved',function(){assert[_0x246c('0x20')](stvn[_0x246c('0x2d')],fusionConfig['nodes'][0x0]);});it(_0x246c('0x2e'),function(){assert[_0x246c('0x1c')](stvn[_0x246c('0x2f')],0x63);});it(_0x246c('0x30'),function(){assert[_0x246c('0x1c')](typeof stvn['processRecordCb'],_0x246c('0x31'));});it(_0x246c('0x32'),function(){assert[_0x246c('0x1c')](stvn[_0x246c('0x33')],null);});it(_0x246c('0x34'),function(){assert['deepEqual'](stvn[_0x246c('0x35')],[]);});it(_0x246c('0x36'),function(){assert['equal'](stvn[_0x246c('0x37')],0x0);});it(_0x246c('0x38'),function(){assert[_0x246c('0x1c')](stvn['master'],!![]);});it('isMaster\x20function',function(){assert[_0x246c('0x1c')](stvn[_0x246c('0x39')](),!![]);});it(_0x246c('0x3a'),function(){assert['equal'](typeof stvn[_0x246c('0x3b')],'function');});it(_0x246c('0x3c'),function(){assert[_0x246c('0x1c')](typeof stvn[_0x246c('0x3d')],_0x246c('0x31'));});it(_0x246c('0x3e'),function(){assert[_0x246c('0x1c')](typeof stvn[_0x246c('0x3f')],_0x246c('0x31'));});it(_0x246c('0x40'),function(){assert[_0x246c('0x1c')](typeof stvn[_0x246c('0x41')],_0x246c('0x31'));});it(_0x246c('0x42'),function(){assert[_0x246c('0x1c')](typeof stvn['deleteObsoleteRows'],_0x246c('0x31'));});it('checkDataAvailability\x20function\x20exists',function(){assert[_0x246c('0x1c')](typeof stvn[_0x246c('0x43')],_0x246c('0x31'));});it(_0x246c('0x44'),function(){assert[_0x246c('0x1c')](typeof stvn[_0x246c('0x45')],_0x246c('0x31'));});it('getOffsetTimestamp\x20function\x20exists',function(){assert[_0x246c('0x1c')](typeof stvn[_0x246c('0x46')],_0x246c('0x31'));});it(_0x246c('0x47'),function(){assert[_0x246c('0x1c')](typeof stvn[_0x246c('0x46')],'function');});it(_0x246c('0x48'),function(){assert[_0x246c('0x1c')](typeof stvn[_0x246c('0x49')],_0x246c('0x31'));});it(_0x246c('0x4a'),function(){assert[_0x246c('0x1c')](typeof stvn[_0x246c('0x4b')],_0x246c('0x31'));});it('master\x20set\x20correctly',function(){assert['equal'](stvn['isMaster'](),!![]);});it(_0x246c('0x4c'),function(){stvn[_0x246c('0x4d')]();assert[_0x246c('0x1c')](stvn[_0x246c('0x37')],-0x1);});it(_0x246c('0x4e'),function(){assert[_0x246c('0x1c')](stvn['setSlaveOffset'](0x0),![]);});});describe(_0x246c('0x4f'),function(){it('data\x20record\x20saved\x20correctly',function(){stvn[_0x246c('0x50')](JSON[_0x246c('0x51')]('{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}'));stvn['processRecord'](JSON[_0x246c('0x51')](_0x246c('0x52')));assert[_0x246c('0x1c')](stvn[_0x246c('0x35')][_0x246c('0x26')],0x2);assert['equal'](stvn[_0x246c('0x35')][0x0][_0x246c('0xd')],0xa);assert[_0x246c('0x1c')](stvn[_0x246c('0x35')][0x1][_0x246c('0xd')],0x14);});it(_0x246c('0x53'),function(){stvn[_0x246c('0x50')](JSON[_0x246c('0x51')](_0x246c('0x54')));assert['equal'](stvn[_0x246c('0x35')]['length'],0x3);assert[_0x246c('0x1c')](stvn[_0x246c('0x35')][0x2][_0x246c('0xd')],0x0);});it('stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion',function(){assert[_0x246c('0x20')](stvn[_0x246c('0x35')][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});});it(_0x246c('0x55'),function(){for(let _0x5d3c81=0x1;_0x5d3c81<=0x9;_0x5d3c81++){let _0x366aac=0x5685dda0+_0x5d3c81*0xe10;let _0x18df3f=_0x5d3c81+0x3*0xa;stvn['processRecord'](JSON[_0x246c('0x51')](_0x246c('0x56')+_0x366aac+_0x246c('0x57')+_0x18df3f+'}'));}assert[_0x246c('0x1c')](stvn['buffer'][_0x246c('0x26')],0xc);assert[_0x246c('0x20')](stvn['buffer'][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});});it('duplicate\x20insertions\x20test',function(){stvn['processRecord'](JSON['parse'](_0x246c('0x58')));stvn[_0x246c('0x50')](JSON[_0x246c('0x51')](_0x246c('0x52')));assert[_0x246c('0x1c')](stvn[_0x246c('0x35')][_0x246c('0x26')],0xc);});});});