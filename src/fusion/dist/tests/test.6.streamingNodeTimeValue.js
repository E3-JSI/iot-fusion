var _0x1295=['parent\x20saved','parent','buffer','buffer\x20position\x20is\x200','position','master','isMaster','connectToKafka\x20function\x20exists','connectToKafka','broadcastAggregates','createAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','slave\x20offset\x20set\x20correctly:\x20no\x20data','data\x20record\x20saved\x20correctly','processRecord','parse','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','Empty\x20values\x20in\x20message\x20set\x20to\x200','{\x22time\x22:\x201451613600}','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','9\x20more\x20data\x20insertions',',\x22value\x22:\x20','duplicate\x20insertions\x20test','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','../nodes/streamingTimeValueNode.js','../common/utils/fileManager.js','qminer','assert','192.168.85.98:2181','winbuf','min','max','variance','timevalue','value','value|min|86400000','value|max|86400000','value|variance|86400000','value|ma|86400000','removeFolder','./db3/','Base','createClean','nodes','initialization','equal','base','check\x20if\x20store\x20exists','rawstore','deepEqual','fields','Time','datetime','float','keys','aggregate','length','value|tick','value|winbuf|21600000','value|winbuf|43200000','value|ma|43200000','value|min|43200000','value|max|43200000','value|variance|43200000','value|winbuf|86400000','value|ma|604800000','config\x20saved','config','fusionNodeI\x20correctly\x20saved','fusionNodeI','callback\x20function\x20should\x20be\x20set','processRecordCb','function'];(function(_0x50f5d3,_0x203b90){var _0x11659c=function(_0x39ba9e){while(--_0x39ba9e){_0x50f5d3['push'](_0x50f5d3['shift']());}};var _0x303358=function(){var _0x31755b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xcb555f,_0x26c24d,_0x2be133,_0x473ae2){_0x473ae2=_0x473ae2||{};var _0x15608e=_0x26c24d+'='+_0x2be133;var _0xed2fe=0x0;for(var _0xed2fe=0x0,_0x5aa971=_0xcb555f['length'];_0xed2fe<_0x5aa971;_0xed2fe++){var _0x15dcad=_0xcb555f[_0xed2fe];_0x15608e+=';\x20'+_0x15dcad;var _0x1caa60=_0xcb555f[_0x15dcad];_0xcb555f['push'](_0x1caa60);_0x5aa971=_0xcb555f['length'];if(_0x1caa60!==!![]){_0x15608e+='='+_0x1caa60;}}_0x473ae2['cookie']=_0x15608e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x837a4f,_0x558660){_0x837a4f=_0x837a4f||function(_0x3b9c2b){return _0x3b9c2b;};var _0x2cec1b=_0x837a4f(new RegExp('(?:^|;\x20)'+_0x558660['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x108290=function(_0x2483b6,_0x3d7646){_0x2483b6(++_0x3d7646);};_0x108290(_0x11659c,_0x203b90);return _0x2cec1b?decodeURIComponent(_0x2cec1b[0x1]):undefined;}};var _0x5d2d90=function(){var _0x280a5b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x280a5b['test'](_0x31755b['removeCookie']['toString']());};_0x31755b['updateCookie']=_0x5d2d90;var _0x29376d='';var _0x593399=_0x31755b['updateCookie']();if(!_0x593399){_0x31755b['setCookie'](['*'],'counter',0x1);}else if(_0x593399){_0x29376d=_0x31755b['getCookie'](null,'counter');}else{_0x31755b['removeCookie']();}};_0x303358();}(_0x1295,0x81));var _0x32b2=function(_0x4f699f,_0x4d2054){_0x4f699f=_0x4f699f-0x0;var _0x5d4eee=_0x1295[_0x4f699f];return _0x5d4eee;};var _0x5f4004=function(){var _0x336677=!![];return function(_0x53f18d,_0x5cac05){var _0x3dbdf8=_0x336677?function(){if(_0x5cac05){var _0xeb199e=_0x5cac05['apply'](_0x53f18d,arguments);_0x5cac05=null;return _0xeb199e;}}:function(){};_0x336677=![];return _0x3dbdf8;};}();var _0x19bdad=_0x5f4004(this,function(){var _0xf784be=function(){return'\x64\x65\x76';},_0x515429=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x569396=function(){var _0x236cd1=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x236cd1['\x74\x65\x73\x74'](_0xf784be['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3eb636=function(){var _0x3032a1=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3032a1['\x74\x65\x73\x74'](_0x515429['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x535f8e=function(_0x3a2849){var _0x4a4036=~-0x1>>0x1+0xff%0x0;if(_0x3a2849['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x4a4036)){_0x4f5989(_0x3a2849);}};var _0x4f5989=function(_0xaf29ce){var _0x14d3b3=~-0x4>>0x1+0xff%0x0;if(_0xaf29ce['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x14d3b3){_0x535f8e(_0xaf29ce);}};if(!_0x569396()){if(!_0x3eb636()){_0x535f8e('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x535f8e('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x535f8e('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x19bdad();const streamingNode=require('../nodes/streamingNode.js');const streamingEnergyNode=require('../nodes/streamingEnergyNode.js');const streamingWeatherNode=require(_0x32b2('0x0'));const streamingStaticNode=require(_0x32b2('0x1'));const streamingTimeValueNode=require(_0x32b2('0x2'));const fileManager=require(_0x32b2('0x3'));const qm=require(_0x32b2('0x4'));const fs=require('fs');var assert=require(_0x32b2('0x5'));let connectionConfig={'zookeeper':_0x32b2('0x6')};let aggrConfigs={'timevalue':[{'field':'value','tick':[{'type':_0x32b2('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x32b2('0x7'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x32b2('0x8')},{'type':_0x32b2('0x9')},{'type':_0x32b2('0xa')}]},{'type':_0x32b2('0x7'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x32b2('0x8')},{'type':_0x32b2('0x9')},{'type':_0x32b2('0xa')}]},{'type':_0x32b2('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'fusionModel':_0x32b2('0xb'),'connection':{'type':'mqtt'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x32b2('0xb'),'nodeid':'timevalue','aggrConfigId':_0x32b2('0xb'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x32b2('0xc'),'name':_0x32b2('0xc')},{'type':_0x32b2('0xc'),'name':'value|ma|86400000'},{'type':_0x32b2('0xc'),'name':_0x32b2('0xd')},{'type':'value','name':_0x32b2('0xe')},{'type':_0x32b2('0xc'),'name':_0x32b2('0xf')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':_0x32b2('0xc'),'name':_0x32b2('0xc')},{'type':_0x32b2('0xc'),'name':_0x32b2('0x10')},{'type':_0x32b2('0xc'),'name':_0x32b2('0xd')},{'type':_0x32b2('0xc'),'name':'value|max|86400000'},{'type':'value','name':_0x32b2('0xf')}]}]}]};function processRecordDummyCb(_0x20acc7,_0x39c5fa){return!![];}describe('streamingTimeValueNode',function(){let _0x37b3c4;let _0x301231;before(function(){fileManager[_0x32b2('0x11')](_0x32b2('0x12'));fileManager['createFolder'](_0x32b2('0x12'));_0x37b3c4=new qm[(_0x32b2('0x13'))]({'dbPath':_0x32b2('0x12'),'mode':_0x32b2('0x14')});stvn=new streamingTimeValueNode(_0x37b3c4,connectionConfig,fusionConfig[_0x32b2('0x15')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x37b3c4['close']();});describe(_0x32b2('0x16'),function(){it('base\x20saved',function(){assert[_0x32b2('0x17')](_0x37b3c4,stvn[_0x32b2('0x18')]);});it(_0x32b2('0x19'),function(){assert['equal'](stvn[_0x32b2('0x1a')]['name'],_0x32b2('0xb'));});it('check\x20store\x20structure',function(){assert[_0x32b2('0x1b')](stvn['rawstore'][_0x32b2('0x1c')],[{'id':0x0,'name':_0x32b2('0x1d'),'type':_0x32b2('0x1e'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':'value','type':_0x32b2('0x1f'),'nullable':![],'internal':![],'primary':![]}]);});it('aggregates\x20initialized\x20-\x20number',function(){assert[_0x32b2('0x17')](Object[_0x32b2('0x20')](stvn[_0x32b2('0x21')])[_0x32b2('0x22')],0xf);});it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert[_0x32b2('0x1b')](Object['keys'](stvn[_0x32b2('0x21')]),[_0x32b2('0x23'),_0x32b2('0x24'),'value|ma|21600000',_0x32b2('0x25'),_0x32b2('0x26'),_0x32b2('0x27'),_0x32b2('0x28'),_0x32b2('0x29'),_0x32b2('0x2a'),_0x32b2('0x10'),'value|min|86400000','value|max|86400000','value|variance|86400000','value|winbuf|604800000',_0x32b2('0x2b')]);});it(_0x32b2('0x2c'),function(){assert[_0x32b2('0x1b')](stvn[_0x32b2('0x2d')],fusionConfig[_0x32b2('0x15')][0x0]);});it(_0x32b2('0x2e'),function(){assert['equal'](stvn[_0x32b2('0x2f')],0x63);});it(_0x32b2('0x30'),function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x31')],_0x32b2('0x32'));});it(_0x32b2('0x33'),function(){assert[_0x32b2('0x17')](stvn[_0x32b2('0x34')],null);});it('buffer\x20empty',function(){assert['deepEqual'](stvn[_0x32b2('0x35')],[]);});it(_0x32b2('0x36'),function(){assert['equal'](stvn[_0x32b2('0x37')],0x0);});it('master\x20flag\x20set\x20correctly',function(){assert[_0x32b2('0x17')](stvn[_0x32b2('0x38')],!![]);});it('isMaster\x20function',function(){assert[_0x32b2('0x17')](stvn[_0x32b2('0x39')](),!![]);});it(_0x32b2('0x3a'),function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x3b')],_0x32b2('0x32'));});it('broadcastAggregates\x20function\x20exists',function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x3c')],_0x32b2('0x32'));});it(_0x32b2('0x3d'),function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x3e')],_0x32b2('0x32'));});it(_0x32b2('0x3f'),function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x40')],_0x32b2('0x32'));});it(_0x32b2('0x41'),function(){assert[_0x32b2('0x17')](typeof stvn['deleteObsoleteRows'],'function');});it(_0x32b2('0x42'),function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x43')],_0x32b2('0x32'));});it('setSlaveOffset\x20function\x20exists',function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x44')],_0x32b2('0x32'));});it(_0x32b2('0x45'),function(){assert['equal'](typeof stvn[_0x32b2('0x46')],_0x32b2('0x32'));});it(_0x32b2('0x47'),function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x46')],'function');});it(_0x32b2('0x48'),function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x49')],_0x32b2('0x32'));});it(_0x32b2('0x4a'),function(){assert[_0x32b2('0x17')](typeof stvn[_0x32b2('0x4b')],_0x32b2('0x32'));});it(_0x32b2('0x4c'),function(){assert['equal'](stvn[_0x32b2('0x39')](),!![]);});it(_0x32b2('0x4d'),function(){stvn['setMasterOffset']();assert[_0x32b2('0x17')](stvn[_0x32b2('0x37')],-0x1);});it(_0x32b2('0x4e'),function(){assert[_0x32b2('0x17')](stvn['setSlaveOffset'](0x0),![]);});});describe('data\x20insertion',function(){it(_0x32b2('0x4f'),function(){stvn[_0x32b2('0x50')](JSON[_0x32b2('0x51')](_0x32b2('0x52')));stvn[_0x32b2('0x50')](JSON['parse'](_0x32b2('0x53')));assert[_0x32b2('0x17')](stvn[_0x32b2('0x35')][_0x32b2('0x22')],0x2);assert[_0x32b2('0x17')](stvn['buffer'][0x0]['value'],0xa);assert[_0x32b2('0x17')](stvn[_0x32b2('0x35')][0x1][_0x32b2('0xc')],0x14);});it(_0x32b2('0x54'),function(){stvn[_0x32b2('0x50')](JSON[_0x32b2('0x51')](_0x32b2('0x55')));assert[_0x32b2('0x17')](stvn['buffer'][_0x32b2('0x22')],0x3);assert[_0x32b2('0x17')](stvn[_0x32b2('0x35')][0x2][_0x32b2('0xc')],0x0);});it(_0x32b2('0x56'),function(){assert['deepEqual'](stvn['buffer'][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});});it(_0x32b2('0x57'),function(){for(let _0x224093=0x1;_0x224093<=0x9;_0x224093++){let _0x45ed1e=0x5685dda0+_0x224093*0xe10;let _0x41d7fc=_0x224093+0x3*0xa;stvn['processRecord'](JSON[_0x32b2('0x51')]('{\x22time\x22:'+_0x45ed1e+_0x32b2('0x58')+_0x41d7fc+'}'));}assert[_0x32b2('0x17')](stvn['buffer'][_0x32b2('0x22')],0xc);assert[_0x32b2('0x1b')](stvn[_0x32b2('0x35')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});});it(_0x32b2('0x59'),function(){stvn[_0x32b2('0x50')](JSON[_0x32b2('0x51')]('{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}'));stvn['processRecord'](JSON[_0x32b2('0x51')](_0x32b2('0x53')));assert[_0x32b2('0x17')](stvn[_0x32b2('0x35')][_0x32b2('0x22')],0xc);});});});