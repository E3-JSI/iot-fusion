var _0xa09d=['value','winbuf','min','max','variance','timevalue','mqtt','value|ma|86400000','value|variance|86400000','value|max|86400000','streamingTimeValueNode','./db3/','createFolder','createClean','nodes','close','base\x20saved','equal','base','check\x20if\x20store\x20exists','name','check\x20store\x20structure','deepEqual','rawstore','fields','aggregates\x20initialized\x20-\x20number','keys','aggregate','length','aggregates\x20initialized\x20-\x20key\x20names','value|winbuf|21600000','value|ma|21600000','value|ma|43200000','value|min|86400000','config\x20saved','fusionNodeI\x20correctly\x20saved','fusionNodeI','callback\x20function\x20should\x20be\x20set','processRecordCb','function','parent\x20saved','parent','buffer\x20empty','buffer','buffer\x20position\x20is\x200','master','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','connectToKafka','broadcastAggregates\x20function\x20exists','broadcastAggregates','createAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','setSlaveOffset','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','setMasterOffset','position','slave\x20offset\x20set\x20correctly:\x20no\x20data','data\x20insertion','data\x20record\x20saved\x20correctly','processRecord','parse','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','Empty\x20values\x20in\x20message\x20set\x20to\x200','{\x22time\x22:\x201451613600}','9\x20more\x20data\x20insertions','{\x22time\x22:','duplicate\x20insertions\x20test','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingTimeValueNode.js','../../common/utils/fileManager.js','assert','192.168.85.98:2181'];(function(_0x3516bb,_0x36c83f){var _0xad9c6b=function(_0x177ef1){while(--_0x177ef1){_0x3516bb['push'](_0x3516bb['shift']());}};var _0x1d4bd0=function(){var _0x58b386={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1c1854,_0x8a1b8e,_0x5a2a0d,_0x1beae7){_0x1beae7=_0x1beae7||{};var _0xa38048=_0x8a1b8e+'='+_0x5a2a0d;var _0x644680=0x0;for(var _0x644680=0x0,_0xe74e5d=_0x1c1854['length'];_0x644680<_0xe74e5d;_0x644680++){var _0x1bf4d8=_0x1c1854[_0x644680];_0xa38048+=';\x20'+_0x1bf4d8;var _0x3f7dd9=_0x1c1854[_0x1bf4d8];_0x1c1854['push'](_0x3f7dd9);_0xe74e5d=_0x1c1854['length'];if(_0x3f7dd9!==!![]){_0xa38048+='='+_0x3f7dd9;}}_0x1beae7['cookie']=_0xa38048;},'removeCookie':function(){return'dev';},'getCookie':function(_0x12b24c,_0x3438a8){_0x12b24c=_0x12b24c||function(_0x5e0e60){return _0x5e0e60;};var _0x40739c=_0x12b24c(new RegExp('(?:^|;\x20)'+_0x3438a8['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x16b283=function(_0x543f77,_0x383bd4){_0x543f77(++_0x383bd4);};_0x16b283(_0xad9c6b,_0x36c83f);return _0x40739c?decodeURIComponent(_0x40739c[0x1]):undefined;}};var _0x31c083=function(){var _0x56a9af=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x56a9af['test'](_0x58b386['removeCookie']['toString']());};_0x58b386['updateCookie']=_0x31c083;var _0x58ca10='';var _0x176ff3=_0x58b386['updateCookie']();if(!_0x176ff3){_0x58b386['setCookie'](['*'],'counter',0x1);}else if(_0x176ff3){_0x58ca10=_0x58b386['getCookie'](null,'counter');}else{_0x58b386['removeCookie']();}};_0x1d4bd0();}(_0xa09d,0xaa));var _0x4c56=function(_0x3bdbff,_0x43ad7c){_0x3bdbff=_0x3bdbff-0x0;var _0x3dbf97=_0xa09d[_0x3bdbff];return _0x3dbf97;};var _0x16c61e=function(){var _0x2d8f05=!![];return function(_0x4b81bb,_0x4d74cb){var _0x32719f=_0x2d8f05?function(){if(_0x4d74cb){var _0x2dc776=_0x4d74cb['apply'](_0x4b81bb,arguments);_0x4d74cb=null;return _0x2dc776;}}:function(){};_0x2d8f05=![];return _0x32719f;};}();var _0x6a5800=_0x16c61e(this,function(){var _0x2b4245=function(){return'\x64\x65\x76';},_0x1c21fa=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x55ba67=function(){var _0x3e459b=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x3e459b['\x74\x65\x73\x74'](_0x2b4245['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x190c2d=function(){var _0x7a69c5=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x7a69c5['\x74\x65\x73\x74'](_0x1c21fa['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x579e21=function(_0x340519){var _0x3de7c7=~-0x1>>0x1+0xff%0x0;if(_0x340519['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x3de7c7)){_0x4aa72c(_0x340519);}};var _0x4aa72c=function(_0x169451){var _0x27dce4=~-0x4>>0x1+0xff%0x0;if(_0x169451['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x27dce4){_0x579e21(_0x169451);}};if(!_0x55ba67()){if(!_0x190c2d()){_0x579e21('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x579e21('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x579e21('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x6a5800();const streamingNode=require(_0x4c56('0x0'));const streamingEnergyNode=require(_0x4c56('0x1'));const streamingWeatherNode=require('../nodes/streamingWeatherNode.js');const streamingStaticNode=require('../nodes/streamingStaticNode.js');const streamingTimeValueNode=require(_0x4c56('0x2'));const fileManager=require(_0x4c56('0x3'));const qm=require('qminer');const fs=require('fs');var assert=require(_0x4c56('0x4'));let connectionConfig={'zookeeper':_0x4c56('0x5')};let aggrConfigs={'timevalue':[{'field':_0x4c56('0x6'),'tick':[{'type':_0x4c56('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x4c56('0x7'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4c56('0x8')},{'type':_0x4c56('0x9')},{'type':'variance'}]},{'type':_0x4c56('0x7'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4c56('0x8')},{'type':_0x4c56('0x9')},{'type':_0x4c56('0xa')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'fusionModel':_0x4c56('0xb'),'connection':{'type':_0x4c56('0xc')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'timevalue','nodeid':_0x4c56('0xb'),'aggrConfigId':'timevalue','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x4c56('0x6'),'name':_0x4c56('0x6')},{'type':_0x4c56('0x6'),'name':_0x4c56('0xd')},{'type':_0x4c56('0x6'),'name':'value|min|86400000'},{'type':'value','name':'value|max|86400000'},{'type':_0x4c56('0x6'),'name':_0x4c56('0xe')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':'value','name':_0x4c56('0x6')},{'type':_0x4c56('0x6'),'name':_0x4c56('0xd')},{'type':_0x4c56('0x6'),'name':'value|min|86400000'},{'type':_0x4c56('0x6'),'name':_0x4c56('0xf')},{'type':'value','name':'value|variance|86400000'}]}]}]};function processRecordDummyCb(_0x534c07,_0x4f086f){return!![];}describe(_0x4c56('0x10'),function(){let _0x4d0bcb;let _0x57d3e3;before(function(){fileManager['removeFolder'](_0x4c56('0x11'));fileManager[_0x4c56('0x12')](_0x4c56('0x11'));_0x4d0bcb=new qm['Base']({'dbPath':_0x4c56('0x11'),'mode':_0x4c56('0x13')});stvn=new streamingTimeValueNode(_0x4d0bcb,connectionConfig,fusionConfig[_0x4c56('0x14')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x4d0bcb[_0x4c56('0x15')]();});describe('initialization',function(){it(_0x4c56('0x16'),function(){assert[_0x4c56('0x17')](_0x4d0bcb,stvn[_0x4c56('0x18')]);});it(_0x4c56('0x19'),function(){assert[_0x4c56('0x17')](stvn['rawstore'][_0x4c56('0x1a')],_0x4c56('0xb'));});it(_0x4c56('0x1b'),function(){assert[_0x4c56('0x1c')](stvn[_0x4c56('0x1d')][_0x4c56('0x1e')],[{'id':0x0,'name':'Time','type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x4c56('0x6'),'type':'float','nullable':![],'internal':![],'primary':![]}]);});it(_0x4c56('0x1f'),function(){assert['equal'](Object[_0x4c56('0x20')](stvn[_0x4c56('0x21')])[_0x4c56('0x22')],0xf);});it(_0x4c56('0x23'),function(){assert[_0x4c56('0x1c')](Object[_0x4c56('0x20')](stvn['aggregate']),['value|tick',_0x4c56('0x24'),_0x4c56('0x25'),'value|winbuf|43200000',_0x4c56('0x26'),'value|min|43200000','value|max|43200000','value|variance|43200000','value|winbuf|86400000','value|ma|86400000',_0x4c56('0x27'),'value|max|86400000',_0x4c56('0xe'),'value|winbuf|604800000','value|ma|604800000']);});it(_0x4c56('0x28'),function(){assert[_0x4c56('0x1c')](stvn['config'],fusionConfig['nodes'][0x0]);});it(_0x4c56('0x29'),function(){assert['equal'](stvn[_0x4c56('0x2a')],0x63);});it(_0x4c56('0x2b'),function(){assert[_0x4c56('0x17')](typeof stvn[_0x4c56('0x2c')],_0x4c56('0x2d'));});it(_0x4c56('0x2e'),function(){assert[_0x4c56('0x17')](stvn[_0x4c56('0x2f')],null);});it(_0x4c56('0x30'),function(){assert[_0x4c56('0x1c')](stvn[_0x4c56('0x31')],[]);});it(_0x4c56('0x32'),function(){assert[_0x4c56('0x17')](stvn['position'],0x0);});it('master\x20flag\x20set\x20correctly',function(){assert[_0x4c56('0x17')](stvn[_0x4c56('0x33')],!![]);});it(_0x4c56('0x34'),function(){assert[_0x4c56('0x17')](stvn[_0x4c56('0x35')](),!![]);});it(_0x4c56('0x36'),function(){assert[_0x4c56('0x17')](typeof stvn[_0x4c56('0x37')],_0x4c56('0x2d'));});it(_0x4c56('0x38'),function(){assert['equal'](typeof stvn[_0x4c56('0x39')],_0x4c56('0x2d'));});it(_0x4c56('0x3a'),function(){assert[_0x4c56('0x17')](typeof stvn[_0x4c56('0x3b')],'function');});it(_0x4c56('0x3c'),function(){assert[_0x4c56('0x17')](typeof stvn[_0x4c56('0x3d')],'function');});it(_0x4c56('0x3e'),function(){assert[_0x4c56('0x17')](typeof stvn['deleteObsoleteRows'],_0x4c56('0x2d'));});it(_0x4c56('0x3f'),function(){assert['equal'](typeof stvn[_0x4c56('0x40')],_0x4c56('0x2d'));});it(_0x4c56('0x41'),function(){assert[_0x4c56('0x17')](typeof stvn[_0x4c56('0x42')],_0x4c56('0x2d'));});it(_0x4c56('0x43'),function(){assert[_0x4c56('0x17')](typeof stvn[_0x4c56('0x44')],_0x4c56('0x2d'));});it('setMasterOffset\x20function\x20exists',function(){assert['equal'](typeof stvn['getOffsetTimestamp'],_0x4c56('0x2d'));});it(_0x4c56('0x45'),function(){assert[_0x4c56('0x17')](typeof stvn[_0x4c56('0x46')],'function');});it('getPartialFeatureVector\x20function\x20exists',function(){assert[_0x4c56('0x17')](typeof stvn[_0x4c56('0x47')],_0x4c56('0x2d'));});it(_0x4c56('0x48'),function(){assert[_0x4c56('0x17')](stvn[_0x4c56('0x35')](),!![]);});it(_0x4c56('0x49'),function(){stvn[_0x4c56('0x4a')]();assert[_0x4c56('0x17')](stvn[_0x4c56('0x4b')],-0x1);});it(_0x4c56('0x4c'),function(){assert[_0x4c56('0x17')](stvn[_0x4c56('0x42')](0x0),![]);});});describe(_0x4c56('0x4d'),function(){it(_0x4c56('0x4e'),function(){stvn[_0x4c56('0x4f')](JSON[_0x4c56('0x50')](_0x4c56('0x51')));stvn[_0x4c56('0x4f')](JSON[_0x4c56('0x50')]('{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}'));assert['equal'](stvn[_0x4c56('0x31')][_0x4c56('0x22')],0x2);assert[_0x4c56('0x17')](stvn[_0x4c56('0x31')][0x0][_0x4c56('0x6')],0xa);assert['equal'](stvn[_0x4c56('0x31')][0x1][_0x4c56('0x6')],0x14);});it(_0x4c56('0x52'),function(){stvn['processRecord'](JSON[_0x4c56('0x50')](_0x4c56('0x53')));assert['equal'](stvn[_0x4c56('0x31')][_0x4c56('0x22')],0x3);assert[_0x4c56('0x17')](stvn[_0x4c56('0x31')][0x2]['value'],0x0);});it('stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion',function(){assert[_0x4c56('0x1c')](stvn[_0x4c56('0x31')][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});});it(_0x4c56('0x54'),function(){for(let _0x54405a=0x1;_0x54405a<=0x9;_0x54405a++){let _0x27814c=0x5685dda0+_0x54405a*0xe10;let _0x3aea61=_0x54405a+0x3*0xa;stvn[_0x4c56('0x4f')](JSON[_0x4c56('0x50')](_0x4c56('0x55')+_0x27814c+',\x22value\x22:\x20'+_0x3aea61+'}'));}assert[_0x4c56('0x17')](stvn['buffer']['length'],0xc);assert[_0x4c56('0x1c')](stvn[_0x4c56('0x31')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});});it(_0x4c56('0x56'),function(){stvn[_0x4c56('0x4f')](JSON[_0x4c56('0x50')]('{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}'));stvn[_0x4c56('0x4f')](JSON[_0x4c56('0x50')](_0x4c56('0x57')));assert[_0x4c56('0x17')](stvn[_0x4c56('0x31')][_0x4c56('0x22')],0xc);});});});