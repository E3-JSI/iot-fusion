var _0x50ed=['function','parent\x20saved','buffer\x20empty','buffer','position','master\x20flag\x20set\x20correctly','master','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','connectToKafka','broadcastAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','deleteObsoleteRows','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','setSlaveOffset','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','setMasterOffset','slave\x20offset\x20set\x20correctly:\x20no\x20data','data\x20insertion','data\x20record\x20saved\x20correctly','processRecord','parse','Empty\x20values\x20in\x20message\x20set\x20to\x200','{\x22time\x22:\x201451613600}','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','9\x20more\x20data\x20insertions','{\x22time\x22:',',\x22value\x22:\x20','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','../../common/utils/fileManager.js','qminer','assert','192.168.85.98:2181','value','winbuf','min','max','variance','mqtt','timevalue','value|ma|86400000','value|max|86400000','value|variance|86400000','value|min|86400000','streamingTimeValueNode','./db3/','Base','nodes','close','initialization','base\x20saved','equal','base','check\x20if\x20store\x20exists','rawstore','check\x20store\x20structure','deepEqual','fields','Time','float','aggregates\x20initialized\x20-\x20number','aggregate','length','aggregates\x20initialized\x20-\x20key\x20names','keys','value|tick','value|winbuf|21600000','value|winbuf|43200000','value|ma|43200000','value|min|43200000','value|max|43200000','value|winbuf|86400000','value|winbuf|604800000','value|ma|604800000','config\x20saved','fusionNodeI\x20correctly\x20saved','callback\x20function\x20should\x20be\x20set','processRecordCb'];(function(_0x135523,_0xfa8952){var _0x192955=function(_0x2f85c6){while(--_0x2f85c6){_0x135523['push'](_0x135523['shift']());}};var _0xef9f22=function(){var _0x5b4ee9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x23c51a,_0xfad698,_0x1c9dd2,_0x24b533){_0x24b533=_0x24b533||{};var _0x487c85=_0xfad698+'='+_0x1c9dd2;var _0x417d8f=0x0;for(var _0x417d8f=0x0,_0xc5e23c=_0x23c51a['length'];_0x417d8f<_0xc5e23c;_0x417d8f++){var _0x32d34c=_0x23c51a[_0x417d8f];_0x487c85+=';\x20'+_0x32d34c;var _0x4cee8e=_0x23c51a[_0x32d34c];_0x23c51a['push'](_0x4cee8e);_0xc5e23c=_0x23c51a['length'];if(_0x4cee8e!==!![]){_0x487c85+='='+_0x4cee8e;}}_0x24b533['cookie']=_0x487c85;},'removeCookie':function(){return'dev';},'getCookie':function(_0xb6c47e,_0x1dbeda){_0xb6c47e=_0xb6c47e||function(_0x34fb02){return _0x34fb02;};var _0x45cf6d=_0xb6c47e(new RegExp('(?:^|;\x20)'+_0x1dbeda['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x4d2956=function(_0x4acd17,_0x3e4b3c){_0x4acd17(++_0x3e4b3c);};_0x4d2956(_0x192955,_0xfa8952);return _0x45cf6d?decodeURIComponent(_0x45cf6d[0x1]):undefined;}};var _0x5f57cb=function(){var _0x163c22=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x163c22['test'](_0x5b4ee9['removeCookie']['toString']());};_0x5b4ee9['updateCookie']=_0x5f57cb;var _0x2e9e29='';var _0x11559a=_0x5b4ee9['updateCookie']();if(!_0x11559a){_0x5b4ee9['setCookie'](['*'],'counter',0x1);}else if(_0x11559a){_0x2e9e29=_0x5b4ee9['getCookie'](null,'counter');}else{_0x5b4ee9['removeCookie']();}};_0xef9f22();}(_0x50ed,0x1a6));var _0x57c1=function(_0x2f7c38,_0x23db7f){_0x2f7c38=_0x2f7c38-0x0;var _0x4b2c42=_0x50ed[_0x2f7c38];return _0x4b2c42;};var _0x1e46f6=function(){var _0x3ad6c5=!![];return function(_0x24f222,_0x5766c6){var _0x9d6db7=_0x3ad6c5?function(){if(_0x5766c6){var _0x1be89d=_0x5766c6['apply'](_0x24f222,arguments);_0x5766c6=null;return _0x1be89d;}}:function(){};_0x3ad6c5=![];return _0x9d6db7;};}();var _0x1995fc=_0x1e46f6(this,function(){var _0x197198=function(){return'\x64\x65\x76';},_0x5dba99=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x59526b=function(){var _0x17cee6=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x17cee6['\x74\x65\x73\x74'](_0x197198['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x9d73da=function(){var _0x15bcb4=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x15bcb4['\x74\x65\x73\x74'](_0x5dba99['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1c8f50=function(_0x22a873){var _0x1663d1=~-0x1>>0x1+0xff%0x0;if(_0x22a873['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1663d1)){_0xf19bb7(_0x22a873);}};var _0xf19bb7=function(_0x1b9d9f){var _0x47438f=~-0x4>>0x1+0xff%0x0;if(_0x1b9d9f['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x47438f){_0x1c8f50(_0x1b9d9f);}};if(!_0x59526b()){if(!_0x9d73da()){_0x1c8f50('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1c8f50('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1c8f50('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1995fc();const streamingNode=require(_0x57c1('0x0'));const streamingEnergyNode=require(_0x57c1('0x1'));const streamingWeatherNode=require(_0x57c1('0x2'));const streamingStaticNode=require(_0x57c1('0x3'));const streamingTimeValueNode=require('../nodes/streamingTimeValueNode.js');const fileManager=require(_0x57c1('0x4'));const qm=require(_0x57c1('0x5'));const fs=require('fs');var assert=require(_0x57c1('0x6'));let connectionConfig={'zookeeper':_0x57c1('0x7')};let aggrConfigs={'timevalue':[{'field':_0x57c1('0x8'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x57c1('0x9'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x57c1('0xa')},{'type':_0x57c1('0xb')},{'type':'variance'}]},{'type':_0x57c1('0x9'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x57c1('0xa')},{'type':'max'},{'type':_0x57c1('0xc')}]},{'type':_0x57c1('0x9'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'fusionModel':'timevalue','connection':{'type':_0x57c1('0xd')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'timevalue','nodeid':_0x57c1('0xe'),'aggrConfigId':'timevalue','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x57c1('0x8'),'name':'value'},{'type':_0x57c1('0x8'),'name':_0x57c1('0xf')},{'type':'value','name':'value|min|86400000'},{'type':_0x57c1('0x8'),'name':_0x57c1('0x10')},{'type':_0x57c1('0x8'),'name':_0x57c1('0x11')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':_0x57c1('0x8'),'name':_0x57c1('0x8')},{'type':_0x57c1('0x8'),'name':_0x57c1('0xf')},{'type':_0x57c1('0x8'),'name':_0x57c1('0x12')},{'type':_0x57c1('0x8'),'name':_0x57c1('0x10')},{'type':'value','name':_0x57c1('0x11')}]}]}]};function processRecordDummyCb(_0x31e406,_0x54c4a8){return!![];}describe(_0x57c1('0x13'),function(){let _0x31600e;let _0x3f9775;before(function(){fileManager['removeFolder'](_0x57c1('0x14'));fileManager['createFolder'](_0x57c1('0x14'));_0x31600e=new qm[(_0x57c1('0x15'))]({'dbPath':'./db3/','mode':'createClean'});stvn=new streamingTimeValueNode(_0x31600e,connectionConfig,fusionConfig[_0x57c1('0x16')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x31600e[_0x57c1('0x17')]();});describe(_0x57c1('0x18'),function(){it(_0x57c1('0x19'),function(){assert[_0x57c1('0x1a')](_0x31600e,stvn[_0x57c1('0x1b')]);});it(_0x57c1('0x1c'),function(){assert[_0x57c1('0x1a')](stvn[_0x57c1('0x1d')]['name'],'timevalue');});it(_0x57c1('0x1e'),function(){assert[_0x57c1('0x1f')](stvn[_0x57c1('0x1d')][_0x57c1('0x20')],[{'id':0x0,'name':_0x57c1('0x21'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x57c1('0x8'),'type':_0x57c1('0x22'),'nullable':![],'internal':![],'primary':![]}]);});it(_0x57c1('0x23'),function(){assert[_0x57c1('0x1a')](Object['keys'](stvn[_0x57c1('0x24')])[_0x57c1('0x25')],0xf);});it(_0x57c1('0x26'),function(){assert[_0x57c1('0x1f')](Object[_0x57c1('0x27')](stvn[_0x57c1('0x24')]),[_0x57c1('0x28'),_0x57c1('0x29'),'value|ma|21600000',_0x57c1('0x2a'),_0x57c1('0x2b'),_0x57c1('0x2c'),_0x57c1('0x2d'),'value|variance|43200000',_0x57c1('0x2e'),_0x57c1('0xf'),'value|min|86400000',_0x57c1('0x10'),'value|variance|86400000',_0x57c1('0x2f'),_0x57c1('0x30')]);});it(_0x57c1('0x31'),function(){assert[_0x57c1('0x1f')](stvn['config'],fusionConfig[_0x57c1('0x16')][0x0]);});it(_0x57c1('0x32'),function(){assert[_0x57c1('0x1a')](stvn['fusionNodeI'],0x63);});it(_0x57c1('0x33'),function(){assert[_0x57c1('0x1a')](typeof stvn[_0x57c1('0x34')],_0x57c1('0x35'));});it(_0x57c1('0x36'),function(){assert['equal'](stvn['parent'],null);});it(_0x57c1('0x37'),function(){assert['deepEqual'](stvn[_0x57c1('0x38')],[]);});it('buffer\x20position\x20is\x200',function(){assert[_0x57c1('0x1a')](stvn[_0x57c1('0x39')],0x0);});it(_0x57c1('0x3a'),function(){assert[_0x57c1('0x1a')](stvn[_0x57c1('0x3b')],!![]);});it(_0x57c1('0x3c'),function(){assert[_0x57c1('0x1a')](stvn[_0x57c1('0x3d')](),!![]);});it(_0x57c1('0x3e'),function(){assert['equal'](typeof stvn[_0x57c1('0x3f')],_0x57c1('0x35'));});it(_0x57c1('0x40'),function(){assert[_0x57c1('0x1a')](typeof stvn['broadcastAggregates'],_0x57c1('0x35'));});it('createAggregates\x20function\x20exists',function(){assert[_0x57c1('0x1a')](typeof stvn[_0x57c1('0x41')],_0x57c1('0x35'));});it(_0x57c1('0x42'),function(){assert['equal'](typeof stvn[_0x57c1('0x43')],'function');});it(_0x57c1('0x44'),function(){assert['equal'](typeof stvn[_0x57c1('0x45')],'function');});it(_0x57c1('0x46'),function(){assert[_0x57c1('0x1a')](typeof stvn[_0x57c1('0x47')],'function');});it(_0x57c1('0x48'),function(){assert['equal'](typeof stvn[_0x57c1('0x49')],_0x57c1('0x35'));});it('getOffsetTimestamp\x20function\x20exists',function(){assert[_0x57c1('0x1a')](typeof stvn[_0x57c1('0x4a')],'function');});it(_0x57c1('0x4b'),function(){assert[_0x57c1('0x1a')](typeof stvn['getOffsetTimestamp'],'function');});it(_0x57c1('0x4c'),function(){assert[_0x57c1('0x1a')](typeof stvn[_0x57c1('0x4d')],_0x57c1('0x35'));});it(_0x57c1('0x4e'),function(){assert[_0x57c1('0x1a')](typeof stvn['getPartialFeatureVector'],_0x57c1('0x35'));});it(_0x57c1('0x4f'),function(){assert[_0x57c1('0x1a')](stvn[_0x57c1('0x3d')](),!![]);});it(_0x57c1('0x50'),function(){stvn[_0x57c1('0x51')]();assert['equal'](stvn[_0x57c1('0x39')],-0x1);});it(_0x57c1('0x52'),function(){assert['equal'](stvn[_0x57c1('0x49')](0x0),![]);});});describe(_0x57c1('0x53'),function(){it(_0x57c1('0x54'),function(){stvn[_0x57c1('0x55')](JSON[_0x57c1('0x56')]('{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}'));stvn['processRecord'](JSON[_0x57c1('0x56')]('{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}'));assert[_0x57c1('0x1a')](stvn[_0x57c1('0x38')][_0x57c1('0x25')],0x2);assert['equal'](stvn[_0x57c1('0x38')][0x0][_0x57c1('0x8')],0xa);assert[_0x57c1('0x1a')](stvn[_0x57c1('0x38')][0x1][_0x57c1('0x8')],0x14);});it(_0x57c1('0x57'),function(){stvn['processRecord'](JSON[_0x57c1('0x56')](_0x57c1('0x58')));assert[_0x57c1('0x1a')](stvn[_0x57c1('0x38')][_0x57c1('0x25')],0x3);assert[_0x57c1('0x1a')](stvn[_0x57c1('0x38')][0x2]['value'],0x0);});it(_0x57c1('0x59'),function(){assert[_0x57c1('0x1f')](stvn[_0x57c1('0x38')][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});});it(_0x57c1('0x5a'),function(){for(let _0x12c82f=0x1;_0x12c82f<=0x9;_0x12c82f++){let _0x854523=0x5685dda0+_0x12c82f*0xe10;let _0x4030cf=_0x12c82f+0x3*0xa;stvn['processRecord'](JSON[_0x57c1('0x56')](_0x57c1('0x5b')+_0x854523+_0x57c1('0x5c')+_0x4030cf+'}'));}assert[_0x57c1('0x1a')](stvn[_0x57c1('0x38')][_0x57c1('0x25')],0xc);assert['deepEqual'](stvn[_0x57c1('0x38')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});});it('duplicate\x20insertions\x20test',function(){stvn[_0x57c1('0x55')](JSON[_0x57c1('0x56')](_0x57c1('0x5d')));stvn[_0x57c1('0x55')](JSON[_0x57c1('0x56')](_0x57c1('0x5e')));assert['equal'](stvn[_0x57c1('0x38')][_0x57c1('0x25')],0xc);});});});