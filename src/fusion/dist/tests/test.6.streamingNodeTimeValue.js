var _0x1bca=['check\x20if\x20store\x20exists','equal','rawstore','name','check\x20store\x20structure','deepEqual','Time','datetime','float','aggregates\x20initialized\x20-\x20number','keys','length','aggregates\x20initialized\x20-\x20key\x20names','aggregate','value|tick','value|winbuf|21600000','value|ma|21600000','value|winbuf|43200000','value|ma|43200000','value|winbuf|86400000','value|winbuf|604800000','value|ma|604800000','config\x20saved','config','nodes','fusionNodeI\x20correctly\x20saved','fusionNodeI','processRecordCb','function','parent\x20saved','parent','buffer\x20empty','buffer\x20position\x20is\x200','position','master\x20flag\x20set\x20correctly','master','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','connectToKafka','broadcastAggregates\x20function\x20exists','broadcastAggregates','createAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','setSlaveOffset','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates','getPartialFeatureVector','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','slave\x20offset\x20set\x20correctly:\x20no\x20data','data\x20insertion','data\x20record\x20saved\x20correctly','parse','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','processRecord','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','buffer','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','9\x20more\x20data\x20insertions',',\x22value\x22:\x20','duplicate\x20insertions\x20test','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','../nodes/streamingTimeValueNode.js','../../common/utils/fileManager.js','qminer','assert','192.168.85.98:2181','value','winbuf','min','max','variance','timevalue','value|ma|86400000','value|min|86400000','value|max|86400000','value|variance|86400000','streamingTimeValueNode','createClean','close','initialization','base'];(function(_0x3c8cd1,_0x5b72ef){var _0x205c83=function(_0x3c6c56){while(--_0x3c6c56){_0x3c8cd1['push'](_0x3c8cd1['shift']());}};var _0x534140=function(){var _0x2a188f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x15a236,_0x342aaa,_0x1feba5,_0x5b0475){_0x5b0475=_0x5b0475||{};var _0x3f5870=_0x342aaa+'='+_0x1feba5;var _0x5c517f=0x0;for(var _0x5c517f=0x0,_0x52f345=_0x15a236['length'];_0x5c517f<_0x52f345;_0x5c517f++){var _0x563569=_0x15a236[_0x5c517f];_0x3f5870+=';\x20'+_0x563569;var _0x5c0a56=_0x15a236[_0x563569];_0x15a236['push'](_0x5c0a56);_0x52f345=_0x15a236['length'];if(_0x5c0a56!==!![]){_0x3f5870+='='+_0x5c0a56;}}_0x5b0475['cookie']=_0x3f5870;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2ddf73,_0x700c9c){_0x2ddf73=_0x2ddf73||function(_0x434b8b){return _0x434b8b;};var _0x4ed93f=_0x2ddf73(new RegExp('(?:^|;\x20)'+_0x700c9c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x512dba=function(_0x18d390,_0x2f4171){_0x18d390(++_0x2f4171);};_0x512dba(_0x205c83,_0x5b72ef);return _0x4ed93f?decodeURIComponent(_0x4ed93f[0x1]):undefined;}};var _0x3dc2a0=function(){var _0x445616=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x445616['test'](_0x2a188f['removeCookie']['toString']());};_0x2a188f['updateCookie']=_0x3dc2a0;var _0x450acb='';var _0x153a1e=_0x2a188f['updateCookie']();if(!_0x153a1e){_0x2a188f['setCookie'](['*'],'counter',0x1);}else if(_0x153a1e){_0x450acb=_0x2a188f['getCookie'](null,'counter');}else{_0x2a188f['removeCookie']();}};_0x534140();}(_0x1bca,0x1be));var _0x19d8=function(_0x554718,_0x3744ab){_0x554718=_0x554718-0x0;var _0x598044=_0x1bca[_0x554718];return _0x598044;};var _0x5dea6e=function(){var _0x5325f8=!![];return function(_0x5703b9,_0x2eadc7){var _0x49a224=_0x5325f8?function(){if(_0x2eadc7){var _0x224750=_0x2eadc7['apply'](_0x5703b9,arguments);_0x2eadc7=null;return _0x224750;}}:function(){};_0x5325f8=![];return _0x49a224;};}();var _0x6f4c34=_0x5dea6e(this,function(){var _0x27932e=function(){return'\x64\x65\x76';},_0x1e771d=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x4c9982=function(){var _0x43b7b0=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x43b7b0['\x74\x65\x73\x74'](_0x27932e['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x270424=function(){var _0x188ebf=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x188ebf['\x74\x65\x73\x74'](_0x1e771d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2fb583=function(_0x498d93){var _0xe76407=~-0x1>>0x1+0xff%0x0;if(_0x498d93['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0xe76407)){_0x3a47a9(_0x498d93);}};var _0x3a47a9=function(_0x135f6e){var _0x2f84a1=~-0x4>>0x1+0xff%0x0;if(_0x135f6e['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x2f84a1){_0x2fb583(_0x135f6e);}};if(!_0x4c9982()){if(!_0x270424()){_0x2fb583('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x2fb583('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x2fb583('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x6f4c34();const streamingNode=require(_0x19d8('0x0'));const streamingEnergyNode=require(_0x19d8('0x1'));const streamingWeatherNode=require(_0x19d8('0x2'));const streamingStaticNode=require(_0x19d8('0x3'));const streamingTimeValueNode=require(_0x19d8('0x4'));const fileManager=require(_0x19d8('0x5'));const qm=require(_0x19d8('0x6'));const fs=require('fs');var assert=require(_0x19d8('0x7'));let connectionConfig={'zookeeper':_0x19d8('0x8')};let aggrConfigs={'timevalue':[{'field':_0x19d8('0x9'),'tick':[{'type':_0x19d8('0xa'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x19d8('0xa'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x19d8('0xb')},{'type':_0x19d8('0xc')},{'type':'variance'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x19d8('0xb')},{'type':_0x19d8('0xc')},{'type':_0x19d8('0xd')}]},{'type':_0x19d8('0xa'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'fusionModel':_0x19d8('0xe'),'connection':{'type':'mqtt'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x19d8('0xe'),'nodeid':_0x19d8('0xe'),'aggrConfigId':_0x19d8('0xe'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x19d8('0x9'),'name':_0x19d8('0x9')},{'type':'value','name':_0x19d8('0xf')},{'type':'value','name':_0x19d8('0x10')},{'type':_0x19d8('0x9'),'name':_0x19d8('0x11')},{'type':'value','name':_0x19d8('0x12')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':_0x19d8('0x9'),'name':_0x19d8('0x9')},{'type':_0x19d8('0x9'),'name':_0x19d8('0xf')},{'type':_0x19d8('0x9'),'name':_0x19d8('0x10')},{'type':_0x19d8('0x9'),'name':_0x19d8('0x11')},{'type':_0x19d8('0x9'),'name':_0x19d8('0x12')}]}]}]};function processRecordDummyCb(_0x4f45ee,_0x3d2c93){return!![];}describe(_0x19d8('0x13'),function(){let _0x44c59f;let _0x2b1680;before(function(){fileManager['removeFolder']('./db3/');fileManager['createFolder']('./db3/');_0x44c59f=new qm['Base']({'dbPath':'./db3/','mode':_0x19d8('0x14')});stvn=new streamingTimeValueNode(_0x44c59f,connectionConfig,fusionConfig['nodes'][0x0],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x44c59f[_0x19d8('0x15')]();});describe(_0x19d8('0x16'),function(){it('base\x20saved',function(){assert['equal'](_0x44c59f,stvn[_0x19d8('0x17')]);});it(_0x19d8('0x18'),function(){assert[_0x19d8('0x19')](stvn[_0x19d8('0x1a')][_0x19d8('0x1b')],_0x19d8('0xe'));});it(_0x19d8('0x1c'),function(){assert[_0x19d8('0x1d')](stvn[_0x19d8('0x1a')]['fields'],[{'id':0x0,'name':_0x19d8('0x1e'),'type':_0x19d8('0x1f'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x19d8('0x9'),'type':_0x19d8('0x20'),'nullable':![],'internal':![],'primary':![]}]);});it(_0x19d8('0x21'),function(){assert[_0x19d8('0x19')](Object[_0x19d8('0x22')](stvn['aggregate'])[_0x19d8('0x23')],0xf);});it(_0x19d8('0x24'),function(){assert[_0x19d8('0x1d')](Object[_0x19d8('0x22')](stvn[_0x19d8('0x25')]),[_0x19d8('0x26'),_0x19d8('0x27'),_0x19d8('0x28'),_0x19d8('0x29'),_0x19d8('0x2a'),'value|min|43200000','value|max|43200000','value|variance|43200000',_0x19d8('0x2b'),_0x19d8('0xf'),_0x19d8('0x10'),_0x19d8('0x11'),_0x19d8('0x12'),_0x19d8('0x2c'),_0x19d8('0x2d')]);});it(_0x19d8('0x2e'),function(){assert['deepEqual'](stvn[_0x19d8('0x2f')],fusionConfig[_0x19d8('0x30')][0x0]);});it(_0x19d8('0x31'),function(){assert['equal'](stvn[_0x19d8('0x32')],0x63);});it('callback\x20function\x20should\x20be\x20set',function(){assert[_0x19d8('0x19')](typeof stvn[_0x19d8('0x33')],_0x19d8('0x34'));});it(_0x19d8('0x35'),function(){assert[_0x19d8('0x19')](stvn[_0x19d8('0x36')],null);});it(_0x19d8('0x37'),function(){assert['deepEqual'](stvn['buffer'],[]);});it(_0x19d8('0x38'),function(){assert[_0x19d8('0x19')](stvn[_0x19d8('0x39')],0x0);});it(_0x19d8('0x3a'),function(){assert['equal'](stvn[_0x19d8('0x3b')],!![]);});it(_0x19d8('0x3c'),function(){assert[_0x19d8('0x19')](stvn[_0x19d8('0x3d')](),!![]);});it(_0x19d8('0x3e'),function(){assert['equal'](typeof stvn[_0x19d8('0x3f')],_0x19d8('0x34'));});it(_0x19d8('0x40'),function(){assert[_0x19d8('0x19')](typeof stvn[_0x19d8('0x41')],'function');});it(_0x19d8('0x42'),function(){assert['equal'](typeof stvn[_0x19d8('0x43')],_0x19d8('0x34'));});it(_0x19d8('0x44'),function(){assert[_0x19d8('0x19')](typeof stvn[_0x19d8('0x45')],'function');});it(_0x19d8('0x46'),function(){assert[_0x19d8('0x19')](typeof stvn['deleteObsoleteRows'],'function');});it(_0x19d8('0x47'),function(){assert[_0x19d8('0x19')](typeof stvn[_0x19d8('0x48')],'function');});it(_0x19d8('0x49'),function(){assert[_0x19d8('0x19')](typeof stvn[_0x19d8('0x4a')],_0x19d8('0x34'));});it(_0x19d8('0x4b'),function(){assert['equal'](typeof stvn[_0x19d8('0x4c')],'function');});it(_0x19d8('0x4d'),function(){assert[_0x19d8('0x19')](typeof stvn[_0x19d8('0x4c')],'function');});it('getAggregates\x20function\x20exists',function(){assert[_0x19d8('0x19')](typeof stvn[_0x19d8('0x4e')],_0x19d8('0x34'));});it('getPartialFeatureVector\x20function\x20exists',function(){assert['equal'](typeof stvn[_0x19d8('0x4f')],_0x19d8('0x34'));});it(_0x19d8('0x50'),function(){assert['equal'](stvn['isMaster'](),!![]);});it(_0x19d8('0x51'),function(){stvn['setMasterOffset']();assert[_0x19d8('0x19')](stvn[_0x19d8('0x39')],-0x1);});it(_0x19d8('0x52'),function(){assert[_0x19d8('0x19')](stvn[_0x19d8('0x4a')](0x0),![]);});});describe(_0x19d8('0x53'),function(){it(_0x19d8('0x54'),function(){stvn['processRecord'](JSON[_0x19d8('0x55')](_0x19d8('0x56')));stvn[_0x19d8('0x57')](JSON[_0x19d8('0x55')](_0x19d8('0x58')));assert[_0x19d8('0x19')](stvn[_0x19d8('0x59')][_0x19d8('0x23')],0x2);assert['equal'](stvn[_0x19d8('0x59')][0x0][_0x19d8('0x9')],0xa);assert[_0x19d8('0x19')](stvn['buffer'][0x1][_0x19d8('0x9')],0x14);});it('Empty\x20values\x20in\x20message\x20set\x20to\x200',function(){stvn[_0x19d8('0x57')](JSON[_0x19d8('0x55')]('{\x22time\x22:\x201451613600}'));assert['equal'](stvn[_0x19d8('0x59')][_0x19d8('0x23')],0x3);assert[_0x19d8('0x19')](stvn[_0x19d8('0x59')][0x2][_0x19d8('0x9')],0x0);});it(_0x19d8('0x5a'),function(){assert[_0x19d8('0x1d')](stvn['buffer'][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});});it(_0x19d8('0x5b'),function(){for(let _0x1021ef=0x1;_0x1021ef<=0x9;_0x1021ef++){let _0x33c27d=0x5685dda0+_0x1021ef*0xe10;let _0x226100=_0x1021ef+0x3*0xa;stvn[_0x19d8('0x57')](JSON[_0x19d8('0x55')]('{\x22time\x22:'+_0x33c27d+_0x19d8('0x5c')+_0x226100+'}'));}assert[_0x19d8('0x19')](stvn[_0x19d8('0x59')]['length'],0xc);assert['deepEqual'](stvn[_0x19d8('0x59')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});});it(_0x19d8('0x5d'),function(){stvn[_0x19d8('0x57')](JSON[_0x19d8('0x55')](_0x19d8('0x56')));stvn[_0x19d8('0x57')](JSON['parse'](_0x19d8('0x58')));assert[_0x19d8('0x19')](stvn[_0x19d8('0x59')][_0x19d8('0x23')],0xc);});});});