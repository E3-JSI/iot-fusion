const a0_0x3c96=['test','equal','value|max|86400000','../common/utils/fileManager.js','value|winbuf|21600000','value|ma|43200000','max','setMasterOffset\x20function\x20exists','getPartialFeatureVector','isMaster\x20function','{\x22time\x22:\x201451613600}','rawstore','datetime','config','base\x20saved','../nodes/streamingWeatherNode.js','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','value|max|43200000','fusionNodeI\x20correctly\x20saved','broadcastAggregates\x20function\x20exists','buffer','../nodes/streamingEnergyNode.js','createAggregates\x20function\x20exists','value|min|86400000','aggregates\x20initialized\x20-\x20number','mqtt','initialization','check\x20if\x20store\x20exists','slave\x20offset\x20set\x20correctly:\x20no\x20data','deepEqual','setSlaveOffset','master\x20set\x20correctly','{\x22time\x22:','value|ma|604800000','isMaster','float','buffer\x20empty','processRecordCb','timevalue','parent','192.168.85.98:2181','9\x20more\x20data\x20insertions','base','Time','deleteObsoleteRows\x20function\x20exists','connectToKafka','keys','length','function','getAggregates','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','getOffsetTimestamp\x20function\x20exists','value|ma|86400000','value|variance|86400000','parse','constructor','getOffsetTimestamp','value','aggregate','close','broadcastAggregates','checkDataAvailability','data\x20insertion','min','fields','value|winbuf|604800000','master\x20offset\x20set\x20correctly','getPartialFeatureVector\x20function\x20exists','variance','config\x20saved','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','winbuf','deleteObsoleteRows','check\x20store\x20structure','createFolder','checkDataAvailability\x20function\x20exists','./db3/','position','setSlaveOffset\x20function\x20exists','value|variance|43200000','fusionNodeI','getAggregates\x20function\x20exists','processRecord','value|winbuf|43200000','data\x20record\x20saved\x20correctly','name','../nodes/streamingStaticNode.js','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','value|min|43200000','value|ma|21600000','assert','offsetExists\x20function\x20exists','parent\x20saved','createAggregates','connectToKafka\x20function\x20exists','setMasterOffset','../nodes/streamingNode.js','qminer'];(function(_0x4f5486,_0x3c960e){const _0xa039f6=function(_0x4a6eed){while(--_0x4a6eed){_0x4f5486['push'](_0x4f5486['shift']());}},_0xcabb3e=function(){const _0x37006c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xdbf870,_0x5bfacc,_0x27a74d,_0x11cf3f){_0x11cf3f=_0x11cf3f||{};let _0x4e1b4e=_0x5bfacc+'='+_0x27a74d,_0xba2eb6=0x0;for(let _0x5a3398=0x0,_0x2aa260=_0xdbf870['length'];_0x5a3398<_0x2aa260;_0x5a3398++){const _0x11f1d3=_0xdbf870[_0x5a3398];_0x4e1b4e+=';\x20'+_0x11f1d3;const _0x8e4952=_0xdbf870[_0x11f1d3];_0xdbf870['push'](_0x8e4952),_0x2aa260=_0xdbf870['length'],_0x8e4952!==!![]&&(_0x4e1b4e+='='+_0x8e4952);}_0x11cf3f['cookie']=_0x4e1b4e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1932df,_0xfba8fe){_0x1932df=_0x1932df||function(_0x4da780){return _0x4da780;};const _0x6ff5ad=_0x1932df(new RegExp('(?:^|;\x20)'+_0xfba8fe['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5b0274=function(_0x24c75f,_0x42b697){_0x24c75f(++_0x42b697);};return _0x5b0274(_0xa039f6,_0x3c960e),_0x6ff5ad?decodeURIComponent(_0x6ff5ad[0x1]):undefined;}},_0x47d1ee=function(){const _0xdc85a9=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xdc85a9['test'](_0x37006c['removeCookie']['toString']());};_0x37006c['updateCookie']=_0x47d1ee;let _0x4eaf2f='';const _0x25e854=_0x37006c['updateCookie']();if(!_0x25e854)_0x37006c['setCookie'](['*'],'counter',0x1);else _0x25e854?_0x4eaf2f=_0x37006c['getCookie'](null,'counter'):_0x37006c['removeCookie']();};_0xcabb3e();}(a0_0x3c96,0x1b1));const a0_0xa039=function(_0x4f5486,_0x3c960e){_0x4f5486=_0x4f5486-0x0;let _0xa039f6=a0_0x3c96[_0x4f5486];return _0xa039f6;};const a0_0x27a74d=function(){let _0x4151f0=!![];return function(_0x2c3790,_0x295ec3){const _0x5696de=_0x4151f0?function(){if(_0x295ec3){const _0x3ee50d=_0x295ec3['apply'](_0x2c3790,arguments);return _0x295ec3=null,_0x3ee50d;}}:function(){};return _0x4151f0=![],_0x5696de;};}(),a0_0x5bfacc=a0_0x27a74d(this,function(){const _0x5427c0=function(){const _0x34ca58=_0x5427c0[a0_0xa039('0xe')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a0_0xa039('0xe')](a0_0xa039('0x49'));return!_0x34ca58[a0_0xa039('0x39')](a0_0x5bfacc);};return _0x5427c0();});a0_0x5bfacc();const streamingNode=require(a0_0xa039('0x37')),streamingEnergyNode=require(a0_0xa039('0x4e')),streamingWeatherNode=require(a0_0xa039('0x48')),streamingStaticNode=require(a0_0xa039('0x2d')),streamingTimeValueNode=require('../nodes/streamingTimeValueNode.js'),fileManager=require(a0_0xa039('0x3c')),qm=require(a0_0xa039('0x38')),fs=require('fs');var assert=require(a0_0xa039('0x31'));let connectionConfig={'zookeeper':a0_0xa039('0x61')},aggrConfigs={'timevalue':[{'field':a0_0xa039('0x10'),'tick':[{'type':a0_0xa039('0x1e'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0xa039('0x1e'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0xa039('0x16')},{'type':a0_0xa039('0x3f')},{'type':a0_0xa039('0x1b')}]},{'type':a0_0xa039('0x1e'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0xa039('0x16')},{'type':a0_0xa039('0x3f')},{'type':a0_0xa039('0x1b')}]},{'type':a0_0xa039('0x1e'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0xa039('0x5f'),'connection':{'type':a0_0xa039('0x52')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0xa039('0x5f'),'nodeid':a0_0xa039('0x5f'),'aggrConfigId':a0_0xa039('0x5f'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0xa039('0x10'),'name':a0_0xa039('0x10')},{'type':a0_0xa039('0x10'),'name':'value|ma|86400000'},{'type':a0_0xa039('0x10'),'name':a0_0xa039('0x50')},{'type':a0_0xa039('0x10'),'name':a0_0xa039('0x3b')},{'type':a0_0xa039('0x10'),'name':a0_0xa039('0xc')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0xa039('0x10'),'name':a0_0xa039('0x10')},{'type':'value','name':'value|ma|86400000'},{'type':a0_0xa039('0x10'),'name':a0_0xa039('0x50')},{'type':a0_0xa039('0x10'),'name':a0_0xa039('0x3b')},{'type':a0_0xa039('0x10'),'name':a0_0xa039('0xc')}]}]}]};function processRecordDummyCb(_0x3595b2,_0x5002c5){return!![];}describe('streamingTimeValueNode',function(){let _0x473e04,_0xa0216;before(function(){fileManager['removeFolder'](a0_0xa039('0x23')),fileManager[a0_0xa039('0x21')](a0_0xa039('0x23')),_0x473e04=new qm['Base']({'dbPath':a0_0xa039('0x23'),'mode':'createClean'}),stvn=new streamingTimeValueNode(_0x473e04,connectionConfig,fusionConfig['nodes'][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x473e04[a0_0xa039('0x12')]();}),describe(a0_0xa039('0x53'),function(){it(a0_0xa039('0x47'),function(){assert[a0_0xa039('0x3a')](_0x473e04,stvn[a0_0xa039('0x1')]);}),it(a0_0xa039('0x54'),function(){assert['equal'](stvn[a0_0xa039('0x44')][a0_0xa039('0x2c')],a0_0xa039('0x5f'));}),it(a0_0xa039('0x20'),function(){assert['deepEqual'](stvn[a0_0xa039('0x44')][a0_0xa039('0x17')],[{'id':0x0,'name':a0_0xa039('0x2'),'type':a0_0xa039('0x45'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0xa039('0x10'),'type':a0_0xa039('0x5c'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0xa039('0x51'),function(){assert['equal'](Object[a0_0xa039('0x5')](stvn[a0_0xa039('0x11')])[a0_0xa039('0x6')],0xf);}),it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert['deepEqual'](Object[a0_0xa039('0x5')](stvn[a0_0xa039('0x11')]),['value|tick',a0_0xa039('0x3d'),a0_0xa039('0x30'),a0_0xa039('0x2a'),a0_0xa039('0x3e'),a0_0xa039('0x2f'),a0_0xa039('0x4a'),a0_0xa039('0x26'),'value|winbuf|86400000',a0_0xa039('0xb'),a0_0xa039('0x50'),a0_0xa039('0x3b'),a0_0xa039('0xc'),a0_0xa039('0x18'),a0_0xa039('0x5a')]);}),it(a0_0xa039('0x1c'),function(){assert[a0_0xa039('0x56')](stvn[a0_0xa039('0x46')],fusionConfig['nodes'][0x0]);}),it(a0_0xa039('0x4b'),function(){assert[a0_0xa039('0x3a')](stvn[a0_0xa039('0x27')],0x63);}),it('callback\x20function\x20should\x20be\x20set',function(){assert[a0_0xa039('0x3a')](typeof stvn[a0_0xa039('0x5e')],a0_0xa039('0x7'));}),it(a0_0xa039('0x33'),function(){assert[a0_0xa039('0x3a')](stvn[a0_0xa039('0x60')],null);}),it(a0_0xa039('0x5d'),function(){assert[a0_0xa039('0x56')](stvn[a0_0xa039('0x4d')],[]);}),it('buffer\x20position\x20is\x200',function(){assert[a0_0xa039('0x3a')](stvn[a0_0xa039('0x24')],0x0);}),it('master\x20flag\x20set\x20correctly',function(){assert[a0_0xa039('0x3a')](stvn['master'],!![]);}),it(a0_0xa039('0x42'),function(){assert[a0_0xa039('0x3a')](stvn[a0_0xa039('0x5b')](),!![]);}),it(a0_0xa039('0x35'),function(){assert['equal'](typeof stvn[a0_0xa039('0x4')],a0_0xa039('0x7'));}),it(a0_0xa039('0x4c'),function(){assert['equal'](typeof stvn[a0_0xa039('0x13')],a0_0xa039('0x7'));}),it(a0_0xa039('0x4f'),function(){assert[a0_0xa039('0x3a')](typeof stvn[a0_0xa039('0x34')],'function');}),it(a0_0xa039('0x32'),function(){assert['equal'](typeof stvn['offsetExists'],a0_0xa039('0x7'));}),it(a0_0xa039('0x3'),function(){assert[a0_0xa039('0x3a')](typeof stvn[a0_0xa039('0x1f')],'function');}),it(a0_0xa039('0x22'),function(){assert[a0_0xa039('0x3a')](typeof stvn[a0_0xa039('0x14')],a0_0xa039('0x7'));}),it(a0_0xa039('0x25'),function(){assert['equal'](typeof stvn['setSlaveOffset'],a0_0xa039('0x7'));}),it(a0_0xa039('0xa'),function(){assert[a0_0xa039('0x3a')](typeof stvn[a0_0xa039('0xf')],a0_0xa039('0x7'));}),it(a0_0xa039('0x40'),function(){assert[a0_0xa039('0x3a')](typeof stvn[a0_0xa039('0xf')],a0_0xa039('0x7'));}),it(a0_0xa039('0x28'),function(){assert['equal'](typeof stvn[a0_0xa039('0x8')],a0_0xa039('0x7'));}),it(a0_0xa039('0x1a'),function(){assert['equal'](typeof stvn[a0_0xa039('0x41')],a0_0xa039('0x7'));}),it(a0_0xa039('0x58'),function(){assert['equal'](stvn[a0_0xa039('0x5b')](),!![]);}),it(a0_0xa039('0x19'),function(){stvn[a0_0xa039('0x36')](),assert[a0_0xa039('0x3a')](stvn[a0_0xa039('0x24')],-0x1);}),it(a0_0xa039('0x55'),function(){assert['equal'](stvn[a0_0xa039('0x57')](0x0),![]);});}),describe(a0_0xa039('0x15'),function(){it(a0_0xa039('0x2b'),function(){stvn[a0_0xa039('0x29')](JSON[a0_0xa039('0xd')]('{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}')),stvn[a0_0xa039('0x29')](JSON[a0_0xa039('0xd')](a0_0xa039('0x9'))),assert['equal'](stvn[a0_0xa039('0x4d')]['length'],0x2),assert[a0_0xa039('0x3a')](stvn[a0_0xa039('0x4d')][0x0][a0_0xa039('0x10')],0xa),assert[a0_0xa039('0x3a')](stvn[a0_0xa039('0x4d')][0x1][a0_0xa039('0x10')],0x14);}),it('Empty\x20values\x20in\x20message\x20set\x20to\x200',function(){stvn[a0_0xa039('0x29')](JSON[a0_0xa039('0xd')](a0_0xa039('0x43'))),assert[a0_0xa039('0x3a')](stvn['buffer']['length'],0x3),assert['equal'](stvn[a0_0xa039('0x4d')][0x2][a0_0xa039('0x10')],0x0);}),it(a0_0xa039('0x2e'),function(){assert[a0_0xa039('0x56')](stvn['buffer'][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});}),it(a0_0xa039('0x0'),function(){for(let _0x5cde00=0x1;_0x5cde00<=0x9;_0x5cde00++){let _0x5e224d=0x5685dda0+_0x5cde00*0xe10,_0x443c5f=_0x5cde00+0x3*0xa;stvn[a0_0xa039('0x29')](JSON[a0_0xa039('0xd')](a0_0xa039('0x59')+_0x5e224d+',\x22value\x22:\x20'+_0x443c5f+'}'));}assert[a0_0xa039('0x3a')](stvn[a0_0xa039('0x4d')][a0_0xa039('0x6')],0xc),assert[a0_0xa039('0x56')](stvn[a0_0xa039('0x4d')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});}),it('duplicate\x20insertions\x20test',function(){stvn['processRecord'](JSON[a0_0xa039('0xd')](a0_0xa039('0x1d'))),stvn['processRecord'](JSON[a0_0xa039('0xd')](a0_0xa039('0x9'))),assert[a0_0xa039('0x3a')](stvn[a0_0xa039('0x4d')][a0_0xa039('0x6')],0xc);});});});