var _0x469e=['master\x20offset\x20set\x20correctly','setMasterOffset','slave\x20offset\x20set\x20correctly:\x20no\x20data','data\x20insertion','data\x20record\x20saved\x20correctly','processRecord','parse','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','{\x22time\x22:\x201451613600}','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','9\x20more\x20data\x20insertions','{\x22time\x22:',',\x22value\x22:\x20','duplicate\x20insertions\x20test','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','../../common/utils/fileManager.js','qminer','assert','192.168.85.98:2181','winbuf','min','variance','timevalue','value','value|ma|86400000','value|min|86400000','value|max|86400000','value|variance|86400000','streamingTimeValueNode','removeFolder','./db3/','createFolder','Base','createClean','close','initialization','base\x20saved','equal','base','check\x20if\x20store\x20exists','rawstore','name','check\x20store\x20structure','deepEqual','Time','datetime','float','aggregates\x20initialized\x20-\x20number','length','keys','aggregate','value|tick','value|winbuf|21600000','value|ma|21600000','value|winbuf|43200000','value|ma|43200000','value|min|43200000','value|max|43200000','value|variance|43200000','value|winbuf|86400000','value|winbuf|604800000','config\x20saved','config','nodes','fusionNodeI\x20correctly\x20saved','processRecordCb','parent\x20saved','parent','buffer\x20empty','buffer','buffer\x20position\x20is\x200','position','master\x20flag\x20set\x20correctly','master','isMaster','connectToKafka\x20function\x20exists','function','broadcastAggregates','createAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','checkDataAvailability','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20set\x20correctly'];(function(_0x51cb32,_0x676b1a){var _0x27c765=function(_0x7141e9){while(--_0x7141e9){_0x51cb32['push'](_0x51cb32['shift']());}};var _0x1a9aed=function(){var _0x3d326c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5e7d93,_0x1d3b74,_0x42e91c,_0x5b7c35){_0x5b7c35=_0x5b7c35||{};var _0x3ab23d=_0x1d3b74+'='+_0x42e91c;var _0x5bd838=0x0;for(var _0x5bd838=0x0,_0x33cabc=_0x5e7d93['length'];_0x5bd838<_0x33cabc;_0x5bd838++){var _0x5768b6=_0x5e7d93[_0x5bd838];_0x3ab23d+=';\x20'+_0x5768b6;var _0x335096=_0x5e7d93[_0x5768b6];_0x5e7d93['push'](_0x335096);_0x33cabc=_0x5e7d93['length'];if(_0x335096!==!![]){_0x3ab23d+='='+_0x335096;}}_0x5b7c35['cookie']=_0x3ab23d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2f8869,_0x2d67f3){_0x2f8869=_0x2f8869||function(_0x4a1cab){return _0x4a1cab;};var _0x4b7f15=_0x2f8869(new RegExp('(?:^|;\x20)'+_0x2d67f3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x2a26d2=function(_0x1be41a,_0x45bbcb){_0x1be41a(++_0x45bbcb);};_0x2a26d2(_0x27c765,_0x676b1a);return _0x4b7f15?decodeURIComponent(_0x4b7f15[0x1]):undefined;}};var _0x46ef96=function(){var _0x437f41=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x437f41['test'](_0x3d326c['removeCookie']['toString']());};_0x3d326c['updateCookie']=_0x46ef96;var _0x47f83d='';var _0x5987c9=_0x3d326c['updateCookie']();if(!_0x5987c9){_0x3d326c['setCookie'](['*'],'counter',0x1);}else if(_0x5987c9){_0x47f83d=_0x3d326c['getCookie'](null,'counter');}else{_0x3d326c['removeCookie']();}};_0x1a9aed();}(_0x469e,0x126));var _0x3889=function(_0x5131ba,_0x69b394){_0x5131ba=_0x5131ba-0x0;var _0x1bde41=_0x469e[_0x5131ba];return _0x1bde41;};var _0x4edb1c=function(){var _0x150136=!![];return function(_0x227261,_0x39fb0d){var _0x5a8d76=_0x150136?function(){if(_0x39fb0d){var _0x103a56=_0x39fb0d['apply'](_0x227261,arguments);_0x39fb0d=null;return _0x103a56;}}:function(){};_0x150136=![];return _0x5a8d76;};}();var _0x430817=_0x4edb1c(this,function(){var _0x4c18ab=function(){return'\x64\x65\x76';},_0x59c8e9=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x46ed7e=function(){var _0x840205=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x840205['\x74\x65\x73\x74'](_0x4c18ab['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0xd10543=function(){var _0x38cda3=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x38cda3['\x74\x65\x73\x74'](_0x59c8e9['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x447df1=function(_0x224df8){var _0x2f738e=~-0x1>>0x1+0xff%0x0;if(_0x224df8['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x2f738e)){_0x429dee(_0x224df8);}};var _0x429dee=function(_0x475d01){var _0x30f367=~-0x4>>0x1+0xff%0x0;if(_0x475d01['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x30f367){_0x447df1(_0x475d01);}};if(!_0x46ed7e()){if(!_0xd10543()){_0x447df1('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x447df1('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x447df1('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x430817();const streamingNode=require('../nodes/streamingNode.js');const streamingEnergyNode=require(_0x3889('0x0'));const streamingWeatherNode=require(_0x3889('0x1'));const streamingStaticNode=require(_0x3889('0x2'));const streamingTimeValueNode=require('../nodes/streamingTimeValueNode.js');const fileManager=require(_0x3889('0x3'));const qm=require(_0x3889('0x4'));const fs=require('fs');var assert=require(_0x3889('0x5'));let connectionConfig={'zookeeper':_0x3889('0x6')};let aggrConfigs={'timevalue':[{'field':'value','tick':[{'type':_0x3889('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x3889('0x7'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x3889('0x8')},{'type':'max'},{'type':_0x3889('0x9')}]},{'type':_0x3889('0x7'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x3889('0x8')},{'type':'max'},{'type':_0x3889('0x9')}]},{'type':_0x3889('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'fusionModel':_0x3889('0xa'),'connection':{'type':'mqtt'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x3889('0xa'),'nodeid':'timevalue','aggrConfigId':_0x3889('0xa'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x3889('0xb'),'name':'value'},{'type':_0x3889('0xb'),'name':_0x3889('0xc')},{'type':_0x3889('0xb'),'name':_0x3889('0xd')},{'type':'value','name':_0x3889('0xe')},{'type':'value','name':_0x3889('0xf')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':_0x3889('0xb'),'name':_0x3889('0xb')},{'type':_0x3889('0xb'),'name':'value|ma|86400000'},{'type':_0x3889('0xb'),'name':_0x3889('0xd')},{'type':'value','name':_0x3889('0xe')},{'type':_0x3889('0xb'),'name':_0x3889('0xf')}]}]}]};function processRecordDummyCb(_0x293b9c,_0x55972){return!![];}describe(_0x3889('0x10'),function(){let _0x447bad;let _0x3ebaaa;before(function(){fileManager[_0x3889('0x11')](_0x3889('0x12'));fileManager[_0x3889('0x13')]('./db3/');_0x447bad=new qm[(_0x3889('0x14'))]({'dbPath':_0x3889('0x12'),'mode':_0x3889('0x15')});stvn=new streamingTimeValueNode(_0x447bad,connectionConfig,fusionConfig['nodes'][0x0],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x447bad[_0x3889('0x16')]();});describe(_0x3889('0x17'),function(){it(_0x3889('0x18'),function(){assert[_0x3889('0x19')](_0x447bad,stvn[_0x3889('0x1a')]);});it(_0x3889('0x1b'),function(){assert[_0x3889('0x19')](stvn[_0x3889('0x1c')][_0x3889('0x1d')],_0x3889('0xa'));});it(_0x3889('0x1e'),function(){assert[_0x3889('0x1f')](stvn[_0x3889('0x1c')]['fields'],[{'id':0x0,'name':_0x3889('0x20'),'type':_0x3889('0x21'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0x3889('0xb'),'type':_0x3889('0x22'),'nullable':![],'internal':![],'primary':![]}]);});it(_0x3889('0x23'),function(){assert['equal'](Object['keys'](stvn['aggregate'])[_0x3889('0x24')],0xf);});it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert[_0x3889('0x1f')](Object[_0x3889('0x25')](stvn[_0x3889('0x26')]),[_0x3889('0x27'),_0x3889('0x28'),_0x3889('0x29'),_0x3889('0x2a'),_0x3889('0x2b'),_0x3889('0x2c'),_0x3889('0x2d'),_0x3889('0x2e'),_0x3889('0x2f'),_0x3889('0xc'),_0x3889('0xd'),_0x3889('0xe'),'value|variance|86400000',_0x3889('0x30'),'value|ma|604800000']);});it(_0x3889('0x31'),function(){assert[_0x3889('0x1f')](stvn[_0x3889('0x32')],fusionConfig[_0x3889('0x33')][0x0]);});it(_0x3889('0x34'),function(){assert[_0x3889('0x19')](stvn['fusionNodeI'],0x63);});it('callback\x20function\x20should\x20be\x20set',function(){assert[_0x3889('0x19')](typeof stvn[_0x3889('0x35')],'function');});it(_0x3889('0x36'),function(){assert[_0x3889('0x19')](stvn[_0x3889('0x37')],null);});it(_0x3889('0x38'),function(){assert[_0x3889('0x1f')](stvn[_0x3889('0x39')],[]);});it(_0x3889('0x3a'),function(){assert[_0x3889('0x19')](stvn[_0x3889('0x3b')],0x0);});it(_0x3889('0x3c'),function(){assert[_0x3889('0x19')](stvn[_0x3889('0x3d')],!![]);});it('isMaster\x20function',function(){assert[_0x3889('0x19')](stvn[_0x3889('0x3e')](),!![]);});it(_0x3889('0x3f'),function(){assert['equal'](typeof stvn['connectToKafka'],_0x3889('0x40'));});it('broadcastAggregates\x20function\x20exists',function(){assert[_0x3889('0x19')](typeof stvn[_0x3889('0x41')],_0x3889('0x40'));});it(_0x3889('0x42'),function(){assert[_0x3889('0x19')](typeof stvn[_0x3889('0x43')],_0x3889('0x40'));});it(_0x3889('0x44'),function(){assert['equal'](typeof stvn[_0x3889('0x45')],_0x3889('0x40'));});it(_0x3889('0x46'),function(){assert[_0x3889('0x19')](typeof stvn['deleteObsoleteRows'],_0x3889('0x40'));});it('checkDataAvailability\x20function\x20exists',function(){assert[_0x3889('0x19')](typeof stvn[_0x3889('0x47')],_0x3889('0x40'));});it('setSlaveOffset\x20function\x20exists',function(){assert[_0x3889('0x19')](typeof stvn['setSlaveOffset'],'function');});it('getOffsetTimestamp\x20function\x20exists',function(){assert[_0x3889('0x19')](typeof stvn[_0x3889('0x48')],'function');});it(_0x3889('0x49'),function(){assert[_0x3889('0x19')](typeof stvn['getOffsetTimestamp'],_0x3889('0x40'));});it('getAggregates\x20function\x20exists',function(){assert[_0x3889('0x19')](typeof stvn[_0x3889('0x4a')],'function');});it(_0x3889('0x4b'),function(){assert[_0x3889('0x19')](typeof stvn[_0x3889('0x4c')],_0x3889('0x40'));});it(_0x3889('0x4d'),function(){assert[_0x3889('0x19')](stvn['isMaster'](),!![]);});it(_0x3889('0x4e'),function(){stvn[_0x3889('0x4f')]();assert[_0x3889('0x19')](stvn[_0x3889('0x3b')],-0x1);});it(_0x3889('0x50'),function(){assert[_0x3889('0x19')](stvn['setSlaveOffset'](0x0),![]);});});describe(_0x3889('0x51'),function(){it(_0x3889('0x52'),function(){stvn[_0x3889('0x53')](JSON[_0x3889('0x54')](_0x3889('0x55')));stvn[_0x3889('0x53')](JSON[_0x3889('0x54')](_0x3889('0x56')));assert[_0x3889('0x19')](stvn[_0x3889('0x39')][_0x3889('0x24')],0x2);assert[_0x3889('0x19')](stvn['buffer'][0x0][_0x3889('0xb')],0xa);assert[_0x3889('0x19')](stvn[_0x3889('0x39')][0x1][_0x3889('0xb')],0x14);});it('Empty\x20values\x20in\x20message\x20set\x20to\x200',function(){stvn[_0x3889('0x53')](JSON[_0x3889('0x54')](_0x3889('0x57')));assert[_0x3889('0x19')](stvn[_0x3889('0x39')][_0x3889('0x24')],0x3);assert[_0x3889('0x19')](stvn['buffer'][0x2][_0x3889('0xb')],0x0);});it(_0x3889('0x58'),function(){assert[_0x3889('0x1f')](stvn[_0x3889('0x39')][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});});it(_0x3889('0x59'),function(){for(let _0x5397ca=0x1;_0x5397ca<=0x9;_0x5397ca++){let _0x47377d=0x5685dda0+_0x5397ca*0xe10;let _0x1a7d4f=_0x5397ca+0x3*0xa;stvn[_0x3889('0x53')](JSON[_0x3889('0x54')](_0x3889('0x5a')+_0x47377d+_0x3889('0x5b')+_0x1a7d4f+'}'));}assert['equal'](stvn[_0x3889('0x39')][_0x3889('0x24')],0xc);assert['deepEqual'](stvn[_0x3889('0x39')][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});});it(_0x3889('0x5c'),function(){stvn[_0x3889('0x53')](JSON[_0x3889('0x54')](_0x3889('0x55')));stvn['processRecord'](JSON[_0x3889('0x54')](_0x3889('0x56')));assert[_0x3889('0x19')](stvn[_0x3889('0x39')][_0x3889('0x24')],0xc);});});});