const a0_0x5d12=['buffer','setMasterOffset\x20function\x20exists','streamingTimeValueNode','close','value|winbuf|604800000','Time','../nodes/streamingNode.js','constructor','name','value|tick','value|min|86400000','../nodes/streamingStaticNode.js','value|winbuf|86400000','config\x20saved','config','deleteObsoleteRows\x20function\x20exists','{\x22time\x22:\x201451613600}','data\x20record\x20saved\x20correctly','aggregates\x20initialized\x20-\x20number','master\x20set\x20correctly','float','aggregate','winbuf','parse','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','setMasterOffset','createAggregates','getOffsetTimestamp','fusionNodeI\x20correctly\x20saved','parent\x20saved','getOffsetTimestamp\x20function\x20exists','length','value|ma|21600000','timevalue','../common/utils/fileManager.js','../nodes/streamingWeatherNode.js','9\x20more\x20data\x20insertions','isMaster','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Base','value|max|86400000','value|ma|86400000','getAggregates\x20function\x20exists','{\x22time\x22:','equal','192.168.85.98:2181','mqtt','master\x20offset\x20set\x20correctly','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','parent','deleteObsoleteRows','base','function','value|variance|86400000','value|winbuf|21600000','value|winbuf|43200000','value','processRecord','getPartialFeatureVector','connectToKafka\x20function\x20exists','base\x20saved','buffer\x20empty','./db3/','check\x20store\x20structure','getAggregates','value|max|43200000','check\x20if\x20store\x20exists','processRecordCb','offsetExists','setSlaveOffset\x20function\x20exists','offsetExists\x20function\x20exists','setSlaveOffset','master','keys','fields','min','rawstore','createFolder','position','data\x20insertion','isMaster\x20function','nodes','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','getPartialFeatureVector\x20function\x20exists','master\x20flag\x20set\x20correctly','../nodes/streamingEnergyNode.js','variance','createClean','checkDataAvailability','connectToKafka','deepEqual'];(function(_0x2424d9,_0x5d121a){const _0x19b798=function(_0x53ec4b){while(--_0x53ec4b){_0x2424d9['push'](_0x2424d9['shift']());}},_0xcdcdbc=function(){const _0x58d286={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x21aaf9,_0x1fb557,_0x334708,_0x236df0){_0x236df0=_0x236df0||{};let _0x577321=_0x1fb557+'='+_0x334708,_0x32fc57=0x0;for(let _0x5362b5=0x0,_0x1d0c2f=_0x21aaf9['length'];_0x5362b5<_0x1d0c2f;_0x5362b5++){const _0x3dfdd0=_0x21aaf9[_0x5362b5];_0x577321+=';\x20'+_0x3dfdd0;const _0x567023=_0x21aaf9[_0x3dfdd0];_0x21aaf9['push'](_0x567023),_0x1d0c2f=_0x21aaf9['length'],_0x567023!==!![]&&(_0x577321+='='+_0x567023);}_0x236df0['cookie']=_0x577321;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1b5174,_0x1cac85){_0x1b5174=_0x1b5174||function(_0x53d66e){return _0x53d66e;};const _0x275ba3=_0x1b5174(new RegExp('(?:^|;\x20)'+_0x1cac85['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x356ca6=function(_0x26e211,_0x56c5d5){_0x26e211(++_0x56c5d5);};return _0x356ca6(_0x19b798,_0x5d121a),_0x275ba3?decodeURIComponent(_0x275ba3[0x1]):undefined;}},_0x52caec=function(){const _0x4d1b94=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4d1b94['test'](_0x58d286['removeCookie']['toString']());};_0x58d286['updateCookie']=_0x52caec;let _0x469291='';const _0x18583f=_0x58d286['updateCookie']();if(!_0x18583f)_0x58d286['setCookie'](['*'],'counter',0x1);else _0x18583f?_0x469291=_0x58d286['getCookie'](null,'counter'):_0x58d286['removeCookie']();};_0xcdcdbc();}(a0_0x5d12,0xfb));const a0_0x19b7=function(_0x2424d9,_0x5d121a){_0x2424d9=_0x2424d9-0x0;let _0x19b798=a0_0x5d12[_0x2424d9];return _0x19b798;};const a0_0x334708=function(){let _0x593637=!![];return function(_0x182618,_0x1af933){const _0x3495db=_0x593637?function(){if(_0x1af933){const _0x1f4eed=_0x1af933['apply'](_0x182618,arguments);return _0x1af933=null,_0x1f4eed;}}:function(){};return _0x593637=![],_0x3495db;};}(),a0_0x1fb557=a0_0x334708(this,function(){const _0x2c666e=function(){const _0x2914d7=_0x2c666e[a0_0x19b7('0x1d')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a0_0x19b7('0x1d')](a0_0x19b7('0x3c'));return!_0x2914d7['test'](a0_0x1fb557);};return _0x2c666e();});a0_0x1fb557();const streamingNode=require(a0_0x19b7('0x1c')),streamingEnergyNode=require(a0_0x19b7('0x10')),streamingWeatherNode=require(a0_0x19b7('0x39')),streamingStaticNode=require(a0_0x19b7('0x21')),streamingTimeValueNode=require('../nodes/streamingTimeValueNode.js'),fileManager=require(a0_0x19b7('0x38')),qm=require('qminer'),fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':a0_0x19b7('0x43')},aggrConfigs={'timevalue':[{'field':a0_0x19b7('0x4e'),'tick':[{'type':a0_0x19b7('0x2c'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x19b7('0x2c'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':'max'},{'type':'variance'}]},{'type':a0_0x19b7('0x2c'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x19b7('0x6')},{'type':'max'},{'type':a0_0x19b7('0x11')}]},{'type':a0_0x19b7('0x2c'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x19b7('0x37'),'connection':{'type':a0_0x19b7('0x44')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x19b7('0x37'),'nodeid':a0_0x19b7('0x37'),'aggrConfigId':a0_0x19b7('0x37'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x19b7('0x4e'),'name':a0_0x19b7('0x4e')},{'type':a0_0x19b7('0x4e'),'name':a0_0x19b7('0x3f')},{'type':a0_0x19b7('0x4e'),'name':'value|min|86400000'},{'type':'value','name':a0_0x19b7('0x3e')},{'type':a0_0x19b7('0x4e'),'name':'value|variance|86400000'}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':'value','name':a0_0x19b7('0x4e')},{'type':a0_0x19b7('0x4e'),'name':a0_0x19b7('0x3f')},{'type':a0_0x19b7('0x4e'),'name':a0_0x19b7('0x20')},{'type':a0_0x19b7('0x4e'),'name':a0_0x19b7('0x3e')},{'type':a0_0x19b7('0x4e'),'name':a0_0x19b7('0x4b')}]}]}]};function processRecordDummyCb(_0x32a012,_0x5ed4a8){return!![];}describe(a0_0x19b7('0x18'),function(){let _0x599a18,_0x2dc278;before(function(){fileManager['removeFolder']('./db3/'),fileManager[a0_0x19b7('0x8')](a0_0x19b7('0x54')),_0x599a18=new qm[(a0_0x19b7('0x3d'))]({'dbPath':'./db3/','mode':a0_0x19b7('0x12')}),stvn=new streamingTimeValueNode(_0x599a18,connectionConfig,fusionConfig[a0_0x19b7('0xc')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x599a18[a0_0x19b7('0x19')]();}),describe('initialization',function(){it(a0_0x19b7('0x52'),function(){assert[a0_0x19b7('0x42')](_0x599a18,stvn[a0_0x19b7('0x49')]);}),it(a0_0x19b7('0x58'),function(){assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x7')][a0_0x19b7('0x1e')],a0_0x19b7('0x37'));}),it(a0_0x19b7('0x55'),function(){assert[a0_0x19b7('0x15')](stvn[a0_0x19b7('0x7')][a0_0x19b7('0x5')],[{'id':0x0,'name':a0_0x19b7('0x1b'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x19b7('0x4e'),'type':a0_0x19b7('0x2a'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x19b7('0x28'),function(){assert[a0_0x19b7('0x42')](Object[a0_0x19b7('0x4')](stvn[a0_0x19b7('0x2b')])[a0_0x19b7('0x35')],0xf);}),it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert['deepEqual'](Object[a0_0x19b7('0x4')](stvn[a0_0x19b7('0x2b')]),[a0_0x19b7('0x1f'),a0_0x19b7('0x4c'),a0_0x19b7('0x36'),a0_0x19b7('0x4d'),'value|ma|43200000','value|min|43200000',a0_0x19b7('0x57'),'value|variance|43200000',a0_0x19b7('0x22'),a0_0x19b7('0x3f'),a0_0x19b7('0x20'),'value|max|86400000','value|variance|86400000',a0_0x19b7('0x1a'),'value|ma|604800000']);}),it(a0_0x19b7('0x23'),function(){assert[a0_0x19b7('0x15')](stvn[a0_0x19b7('0x24')],fusionConfig[a0_0x19b7('0xc')][0x0]);}),it(a0_0x19b7('0x32'),function(){assert[a0_0x19b7('0x42')](stvn['fusionNodeI'],0x63);}),it('callback\x20function\x20should\x20be\x20set',function(){assert[a0_0x19b7('0x42')](typeof stvn[a0_0x19b7('0x59')],a0_0x19b7('0x4a'));}),it(a0_0x19b7('0x33'),function(){assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x47')],null);}),it(a0_0x19b7('0x53'),function(){assert[a0_0x19b7('0x15')](stvn[a0_0x19b7('0x16')],[]);}),it('buffer\x20position\x20is\x200',function(){assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x9')],0x0);}),it(a0_0x19b7('0xf'),function(){assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x3')],!![]);}),it(a0_0x19b7('0xb'),function(){assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x3b')](),!![]);}),it(a0_0x19b7('0x51'),function(){assert[a0_0x19b7('0x42')](typeof stvn[a0_0x19b7('0x14')],a0_0x19b7('0x4a'));}),it('broadcastAggregates\x20function\x20exists',function(){assert[a0_0x19b7('0x42')](typeof stvn['broadcastAggregates'],a0_0x19b7('0x4a'));}),it('createAggregates\x20function\x20exists',function(){assert['equal'](typeof stvn[a0_0x19b7('0x30')],a0_0x19b7('0x4a'));}),it(a0_0x19b7('0x1'),function(){assert[a0_0x19b7('0x42')](typeof stvn[a0_0x19b7('0x5a')],a0_0x19b7('0x4a'));}),it(a0_0x19b7('0x25'),function(){assert[a0_0x19b7('0x42')](typeof stvn[a0_0x19b7('0x48')],a0_0x19b7('0x4a'));}),it('checkDataAvailability\x20function\x20exists',function(){assert[a0_0x19b7('0x42')](typeof stvn[a0_0x19b7('0x13')],'function');}),it(a0_0x19b7('0x0'),function(){assert[a0_0x19b7('0x42')](typeof stvn['setSlaveOffset'],'function');}),it(a0_0x19b7('0x34'),function(){assert[a0_0x19b7('0x42')](typeof stvn[a0_0x19b7('0x31')],a0_0x19b7('0x4a'));}),it(a0_0x19b7('0x17'),function(){assert[a0_0x19b7('0x42')](typeof stvn[a0_0x19b7('0x31')],a0_0x19b7('0x4a'));}),it(a0_0x19b7('0x40'),function(){assert[a0_0x19b7('0x42')](typeof stvn[a0_0x19b7('0x56')],a0_0x19b7('0x4a'));}),it(a0_0x19b7('0xe'),function(){assert[a0_0x19b7('0x42')](typeof stvn[a0_0x19b7('0x50')],a0_0x19b7('0x4a'));}),it(a0_0x19b7('0x29'),function(){assert[a0_0x19b7('0x42')](stvn['isMaster'](),!![]);}),it(a0_0x19b7('0x45'),function(){stvn[a0_0x19b7('0x2f')](),assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x9')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x2')](0x0),![]);});}),describe(a0_0x19b7('0xa'),function(){it(a0_0x19b7('0x27'),function(){stvn[a0_0x19b7('0x4f')](JSON[a0_0x19b7('0x2d')](a0_0x19b7('0xd'))),stvn[a0_0x19b7('0x4f')](JSON[a0_0x19b7('0x2d')](a0_0x19b7('0x46'))),assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x16')][a0_0x19b7('0x35')],0x2),assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x16')][0x0][a0_0x19b7('0x4e')],0xa),assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x16')][0x1][a0_0x19b7('0x4e')],0x14);}),it('Empty\x20values\x20in\x20message\x20set\x20to\x200',function(){stvn[a0_0x19b7('0x4f')](JSON[a0_0x19b7('0x2d')](a0_0x19b7('0x26'))),assert['equal'](stvn['buffer']['length'],0x3),assert['equal'](stvn[a0_0x19b7('0x16')][0x2][a0_0x19b7('0x4e')],0x0);}),it(a0_0x19b7('0x2e'),function(){assert[a0_0x19b7('0x15')](stvn[a0_0x19b7('0x16')][0x1],{'stampm':0x151fab2ca80,'value':0x14,'value|max|43200000':0x14,'value|max|86400000':0x14,'value|ma|21600000':0xf,'value|ma|43200000':0xf,'value|ma|604800000':0xf,'value|ma|86400000':0xf,'value|min|43200000':0xa,'value|min|86400000':0xa,'value|variance|43200000':0x32,'value|variance|86400000':0x32});}),it(a0_0x19b7('0x3a'),function(){for(let _0x2e39b4=0x1;_0x2e39b4<=0x9;_0x2e39b4++){let _0x54114f=0x5685dda0+_0x2e39b4*0xe10,_0x2a9472=_0x2e39b4+0x3*0xa;stvn['processRecord'](JSON[a0_0x19b7('0x2d')](a0_0x19b7('0x41')+_0x54114f+',\x22value\x22:\x20'+_0x2a9472+'}'));}assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x16')]['length'],0xc),assert[a0_0x19b7('0x15')](stvn['buffer'][0xb],{'stampm':0x151fcd81b80,'value':0x27,'value|max|43200000':0x27,'value|max|86400000':0x27,'value|ma|21600000':0x24,'value|ma|43200000':28.75,'value|ma|604800000':28.75,'value|ma|86400000':28.75,'value|min|43200000':0x0,'value|min|86400000':0x0,'value|variance|43200000':151.47727272727272,'value|variance|86400000':151.47727272727272});}),it('duplicate\x20insertions\x20test',function(){stvn[a0_0x19b7('0x4f')](JSON['parse'](a0_0x19b7('0xd'))),stvn[a0_0x19b7('0x4f')](JSON[a0_0x19b7('0x2d')](a0_0x19b7('0x46'))),assert[a0_0x19b7('0x42')](stvn[a0_0x19b7('0x16')][a0_0x19b7('0x35')],0xc);});});});