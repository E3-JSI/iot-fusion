const a0_0x3c7f=['../nodes/streamingSubstationNode.js','deepEqual','fusionNodeI\x20correctly\x20saved','checkDataAvailability\x20function\x20exists','current|winbuf|604800000','getPartialFeatureVector\x20function\x20exists','buffer','weekEnd','current|variance|21600000','winbuf','equal','test','cloudCover1','voltage|ma|21600000','fields','connectToKafka\x20function\x20exists','current|ma|3600000','holiday','check\x20store\x20structure','offsetExists','current|ma|86400000','return\x20/\x22\x20+\x20this\x20+\x20\x22/','voltage|ma|3600000','current|max|86400000','voltage|min|86400000','data\x20insertion','assert','voltage|winbuf|21600000','getOffsetTimestamp','current','dayOfWeek','./db2/','192.168.85.98:2181','value','qminer','config\x20saved','keys','getAggregates','length','voltage|max|21600000','voltage|min|21600000','buffer\x20position\x20is\x200','buffer\x20values','voltage|ma|86400000','{\x22timestamp\x22:1538737201000,\x22current\x22:17,\x22voltage\x22:242.45}','current|tick','../nodes/streamingNode.js','parent\x20saved','{\x22timestamp\x22:1538737200000,\x22current\x22:12,\x22voltage\x22:232.45}','function','master\x20offset\x20set\x20correctly','master\x20flag\x20set\x20correctly','current|max|21600000','windBearing1','power','float','current|ma|000','aggregates\x20initialized\x20-\x20number','aggregates\x20initialized\x20-\x20key\x20names','base','timeOfDay','getOffsetTimestamp\x20function\x20exists','apply','current|min|86400000','streamingSubstationNode','min','current|variance|86400000','setSlaveOffset\x20function\x20exists','deleteObsoleteRows\x20function\x20exists','voltage|winbuf|86400000','connectToKafka','windSpeed1','parse','setSlaveOffset','position','rawstore','voltage','voltage|variance|21600000','createClean','voltage|winbuf|3600000','dayBeforeHoliday','voltage|ma|000','variance','{\x22timestamp\x22:1538737202000,\x22current\x22:18,\x22voltage\x22:252.45}','voltage|ma|604800000','master\x20set\x20correctly','dayOfYear','buffer\x20empty','initialization','broadcastAggregates\x20function\x20exists','name','../nodes/streamingEnergyNode.js','nodes','../nodes/streamingStaticNode.js','deleteObsoleteRows','parent','voltage|variance|86400000','getAggregates\x20function\x20exists','weather','{\x22timestamp\x22:1538737213000,\x22current\x22:19,\x22voltage\x22:262.45}','{\x22timestamp\x22:1538737201000,\x22current\x22:13,\x22voltage\x22:242.45}','createAggregates','../nodes/streamingTrainNode.js','current|ma|21600000','monthOfYear','getPartialFeatureVector','max','current|ma|604800000','log','aggregate','removeFolder','isMaster','{\x22timestamp\x22:1538737213000,\x22current\x22:15,\x22voltage\x22:262.45}','data\x20record\x20saved\x20correctly','setMasterOffset','static','current|winbuf|3600000','processRecord','current|min|21600000','Time','checkDataAvailability','{\x22timestamp\x22:1538737202000,\x22current\x22:14,\x22voltage\x22:252.45}','current|winbuf|86400000','fusionNodeI','check\x20if\x20store\x20exists','N1_24h','processRecordCb'];(function(_0xebde56,_0x3c7fc9){const _0x161016=function(_0x2d7612){while(--_0x2d7612){_0xebde56['push'](_0xebde56['shift']());}},_0x57853d=function(){const _0x52851c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4d55dc,_0x171464,_0x4540b4,_0x4358ca){_0x4358ca=_0x4358ca||{};let _0x7333dc=_0x171464+'='+_0x4540b4,_0x564252=0x0;for(let _0x163796=0x0,_0x4cd281=_0x4d55dc['length'];_0x163796<_0x4cd281;_0x163796++){const _0x577758=_0x4d55dc[_0x163796];_0x7333dc+=';\x20'+_0x577758;const _0xd345d3=_0x4d55dc[_0x577758];_0x4d55dc['push'](_0xd345d3),_0x4cd281=_0x4d55dc['length'],_0xd345d3!==!![]&&(_0x7333dc+='='+_0xd345d3);}_0x4358ca['cookie']=_0x7333dc;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3185f9,_0x378f19){_0x3185f9=_0x3185f9||function(_0x3fa803){return _0x3fa803;};const _0x4ba5c0=_0x3185f9(new RegExp('(?:^|;\x20)'+_0x378f19['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x347e6c=function(_0x164bf6,_0x4c6d90){_0x164bf6(++_0x4c6d90);};return _0x347e6c(_0x161016,_0x3c7fc9),_0x4ba5c0?decodeURIComponent(_0x4ba5c0[0x1]):undefined;}},_0x286487=function(){const _0x2a9221=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2a9221['test'](_0x52851c['removeCookie']['toString']());};_0x52851c['updateCookie']=_0x286487;let _0x2164c4='';const _0x80fe1=_0x52851c['updateCookie']();if(!_0x80fe1)_0x52851c['setCookie'](['*'],'counter',0x1);else _0x80fe1?_0x2164c4=_0x52851c['getCookie'](null,'counter'):_0x52851c['removeCookie']();};_0x57853d();}(a0_0x3c7f,0xa1));const a0_0x1610=function(_0xebde56,_0x3c7fc9){_0xebde56=_0xebde56-0x0;let _0x161016=a0_0x3c7f[_0xebde56];return _0x161016;};const a0_0x4540b4=function(){let _0x30bc54=!![];return function(_0x4db4e7,_0x592fd3){const _0x414d7b=_0x30bc54?function(){if(_0x592fd3){const _0x18f50b=_0x592fd3[a0_0x1610('0x1c')](_0x4db4e7,arguments);return _0x592fd3=null,_0x18f50b;}}:function(){};return _0x30bc54=![],_0x414d7b;};}(),a0_0x171464=a0_0x4540b4(this,function(){const _0x4fe052=function(){const _0x49ef15=_0x4fe052['constructor'](a0_0x1610('0x72'))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x49ef15[a0_0x1610('0x68')](a0_0x171464);};return _0x4fe052();});a0_0x171464();const streamingNode=require(a0_0x1610('0xc')),streamingEnergyNode=require(a0_0x1610('0x39')),streamingWeatherNode=require('../nodes/streamingWeatherNode.js'),streamingStaticNode=require(a0_0x1610('0x3b')),streamingTrainNode=require(a0_0x1610('0x44')),streamingSubstationNode=require(a0_0x1610('0x5d')),fileManager=require('../common/utils/fileManager.js'),qm=require(a0_0x1610('0x0')),fs=require('fs');var assert=require(a0_0x1610('0x77'));let connectionConfig={'zookeeper':a0_0x1610('0x7d')},aggrConfigs={'Substation':[{'field':a0_0x1610('0x7a'),'tick':[{'type':'winbuf','winsize':0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x1610('0x48')},{'type':a0_0x1610('0x1f')},{'type':'variance'}]},{'type':a0_0x1610('0x66'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x1610('0x48')},{'type':'min'},{'type':a0_0x1610('0x30')}]},{'type':a0_0x1610('0x66'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':a0_0x1610('0x2a'),'tick':[{'type':a0_0x1610('0x66'),'winsize':0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x1610('0x66'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'max'},{'type':a0_0x1610('0x1f')},{'type':a0_0x1610('0x30')}]},{'type':a0_0x1610('0x66'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'max'},{'type':a0_0x1610('0x1f')},{'type':a0_0x1610('0x30')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':a0_0x1610('0x6e'),'tick':[{'type':a0_0x1610('0x66'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x1610('0x5b'),'connection':{'type':'kafka'},'fusionTick':0x3e8,'nodes':[{'type':'Substation','fusionTick':0x3e8,'nodeid':'N1','aggrConfigId':'Substation','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x16')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x2f')}]},{'time':-0xe10*0x3e8,'attributes':[{'type':'value','name':a0_0x1610('0x6d')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x73')}]},{'time':-0x6*0xe10*0x3e8,'attributes':[{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x45')},{'type':'value','name':a0_0x1610('0x12')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x54')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x65')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x6a')},{'type':a0_0x1610('0x7e'),'name':'voltage|max|21600000'},{'type':'value','name':'voltage|min|21600000'},{'type':a0_0x1610('0x7e'),'name':'voltage|variance|21600000'}]},{'time':-0x18*0xe10*0x3e8,'attributes':[{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x71')},{'type':a0_0x1610('0x7e'),'name':'current|max|86400000'},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x1d')},{'type':'value','name':'current|variance|86400000'},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x9')},{'type':'value','name':'voltage|max|86400000'},{'type':'value','name':'voltage|min|86400000'},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x3e')}]},{'time':-0x7*0x18*0xe10*0x3e8,'attributes':[{'type':'value','name':a0_0x1610('0x49')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x32')}]}]},{'type':a0_0x1610('0x51'),'nodeid':'S1','aggrConfigId':'static','master':![],'attributes':[{'time':0x18*0x168*0x3e8,'attributes':[{'type':'value','name':a0_0x1610('0x1a')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x64')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x6e')},{'type':'value','name':'dayAfterHoliday'},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x2e')},{'type':'value','name':a0_0x1610('0x7b')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x34')},{'type':'value','name':a0_0x1610('0x46')}]}]},{'type':'weather','nodeid':'W1','aggrConfigId':a0_0x1610('0x40'),'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x1610('0x7e'),'name':'temperature1'},{'type':a0_0x1610('0x7e'),'name':'humidity1'},{'type':a0_0x1610('0x7e'),'name':'pressure1'},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x25')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x13')},{'type':a0_0x1610('0x7e'),'name':a0_0x1610('0x69')}]}]}]};function processRecordDummyCb(_0x2cffe6,_0x105392){return!![];}describe(a0_0x1610('0x1e'),function(){let _0x4fe6ff,_0x12d4ec;before(function(){fileManager[a0_0x1610('0x4c')](a0_0x1610('0x7c')),fileManager['createFolder']('./db2/'),_0x4fe6ff=new qm['Base']({'dbPath':a0_0x1610('0x7c'),'mode':a0_0x1610('0x2c')}),sen=new streamingSubstationNode(_0x4fe6ff,connectionConfig,fusionConfig[a0_0x1610('0x3a')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x4fe6ff['close']();}),describe(a0_0x1610('0x36'),function(){it('base\x20saved',function(){assert[a0_0x1610('0x67')](_0x4fe6ff,sen[a0_0x1610('0x19')]);}),it(a0_0x1610('0x5a'),function(){assert[a0_0x1610('0x67')](sen[a0_0x1610('0x29')][a0_0x1610('0x38')],'N1');}),it(a0_0x1610('0x6f'),function(){assert['deepEqual'](sen[a0_0x1610('0x29')][a0_0x1610('0x6b')],[{'id':0x0,'name':a0_0x1610('0x55'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x1610('0x7a'),'type':a0_0x1610('0x15'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x1610('0x2a'),'type':a0_0x1610('0x15'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':a0_0x1610('0x14'),'type':a0_0x1610('0x15'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x1610('0x17'),function(){assert[a0_0x1610('0x67')](Object['keys'](sen[a0_0x1610('0x4b')])[a0_0x1610('0x4')],0x1e);}),it(a0_0x1610('0x18'),function(){assert[a0_0x1610('0x5e')](Object[a0_0x1610('0x2')](sen[a0_0x1610('0x4b')]),[a0_0x1610('0xb'),a0_0x1610('0x52'),'current|ma|3600000','current|winbuf|21600000',a0_0x1610('0x45'),a0_0x1610('0x12'),a0_0x1610('0x54'),'current|variance|21600000',a0_0x1610('0x58'),a0_0x1610('0x71'),a0_0x1610('0x74'),a0_0x1610('0x1d'),a0_0x1610('0x20'),a0_0x1610('0x61'),a0_0x1610('0x49'),'voltage|tick',a0_0x1610('0x2d'),a0_0x1610('0x73'),a0_0x1610('0x78'),'voltage|ma|21600000',a0_0x1610('0x5'),a0_0x1610('0x6'),a0_0x1610('0x2b'),a0_0x1610('0x23'),'voltage|ma|86400000','voltage|max|86400000',a0_0x1610('0x75'),a0_0x1610('0x3e'),'voltage|winbuf|604800000',a0_0x1610('0x32')]);}),it(a0_0x1610('0x1'),function(){assert[a0_0x1610('0x5e')](sen['config'],fusionConfig['nodes'][0x0]);}),it(a0_0x1610('0x5f'),function(){assert[a0_0x1610('0x67')](sen[a0_0x1610('0x59')],0x63);}),it('callback\x20function\x20should\x20be\x20set',function(){assert[a0_0x1610('0x67')](typeof sen[a0_0x1610('0x5c')],a0_0x1610('0xf'));}),it(a0_0x1610('0xd'),function(){assert[a0_0x1610('0x67')](sen[a0_0x1610('0x3d')],null);}),it(a0_0x1610('0x35'),function(){assert[a0_0x1610('0x5e')](sen['buffer'],[]);}),it(a0_0x1610('0x7'),function(){assert['equal'](sen[a0_0x1610('0x28')],0x0);}),it(a0_0x1610('0x11'),function(){assert[a0_0x1610('0x67')](sen['master'],!![]);}),it('isMaster\x20function',function(){assert[a0_0x1610('0x67')](sen[a0_0x1610('0x4d')](),!![]);}),it(a0_0x1610('0x6c'),function(){assert[a0_0x1610('0x67')](typeof sen[a0_0x1610('0x24')],'function');}),it(a0_0x1610('0x37'),function(){assert[a0_0x1610('0x67')](typeof sen['broadcastAggregates'],'function');}),it('createAggregates\x20function\x20exists',function(){assert[a0_0x1610('0x67')](typeof sen[a0_0x1610('0x43')],'function');}),it('offsetExists\x20function\x20exists',function(){assert[a0_0x1610('0x67')](typeof sen[a0_0x1610('0x70')],a0_0x1610('0xf'));}),it(a0_0x1610('0x22'),function(){assert['equal'](typeof sen[a0_0x1610('0x3c')],a0_0x1610('0xf'));}),it(a0_0x1610('0x60'),function(){assert[a0_0x1610('0x67')](typeof sen[a0_0x1610('0x56')],a0_0x1610('0xf'));}),it(a0_0x1610('0x21'),function(){assert[a0_0x1610('0x67')](typeof sen[a0_0x1610('0x27')],'function');}),it(a0_0x1610('0x1b'),function(){assert['equal'](typeof sen[a0_0x1610('0x79')],a0_0x1610('0xf'));}),it('setMasterOffset\x20function\x20exists',function(){assert[a0_0x1610('0x67')](typeof sen[a0_0x1610('0x79')],'function');}),it(a0_0x1610('0x3f'),function(){assert[a0_0x1610('0x67')](typeof sen[a0_0x1610('0x3')],a0_0x1610('0xf'));}),it(a0_0x1610('0x62'),function(){assert[a0_0x1610('0x67')](typeof sen[a0_0x1610('0x47')],'function');}),it(a0_0x1610('0x33'),function(){assert[a0_0x1610('0x67')](sen['isMaster'](),!![]);}),it(a0_0x1610('0x10'),function(){sen[a0_0x1610('0x50')](),assert[a0_0x1610('0x67')](sen['position'],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x1610('0x67')](sen['setSlaveOffset'](0x0),![]);});}),describe(a0_0x1610('0x76'),function(){it(a0_0x1610('0x4f'),function(){sen[a0_0x1610('0x53')](JSON[a0_0x1610('0x26')](a0_0x1610('0xe'))),sen[a0_0x1610('0x53')](JSON[a0_0x1610('0x26')](a0_0x1610('0x42'))),sen['processRecord'](JSON[a0_0x1610('0x26')](a0_0x1610('0x57'))),sen[a0_0x1610('0x53')](JSON[a0_0x1610('0x26')](a0_0x1610('0x4e'))),sen[a0_0x1610('0x53')](JSON[a0_0x1610('0x26')]('{\x22timestamp\x22:1538737200000,\x22current\x22:16,\x22voltage\x22:232.45}')),sen[a0_0x1610('0x53')](JSON[a0_0x1610('0x26')](a0_0x1610('0xa'))),sen['processRecord'](JSON[a0_0x1610('0x26')](a0_0x1610('0x31'))),sen[a0_0x1610('0x53')](JSON[a0_0x1610('0x26')](a0_0x1610('0x41'))),console[a0_0x1610('0x4a')](a0_0x1610('0x8')),console[a0_0x1610('0x4a')](sen[a0_0x1610('0x63')]);});});});