var _0x314e=['weekEnd','dayBeforeHoliday','monthOfYear','weather','humidity1','windSpeed1','streamingSubstationNode','removeFolder','./db2/','createFolder','nodes','close','initialization','base\x20saved','equal','base','check\x20if\x20store\x20exists','name','check\x20store\x20structure','rawstore','fields','Time','float','power','aggregates\x20initialized\x20-\x20number','keys','aggregate','length','aggregates\x20initialized\x20-\x20key\x20names','deepEqual','current|tick','current|winbuf|21600000','current|min|21600000','current|winbuf|86400000','current|winbuf|604800000','voltage|tick','voltage|winbuf|3600000','voltage|winbuf|21600000','voltage|max|21600000','voltage|winbuf|86400000','voltage|winbuf|604800000','config\x20saved','config','fusionNodeI\x20correctly\x20saved','fusionNodeI','processRecordCb','parent\x20saved','buffer\x20empty','buffer','position','master\x20flag\x20set\x20correctly','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','connectToKafka','broadcastAggregates','function','createAggregates\x20function\x20exists','createAggregates','offsetExists','deleteObsoleteRows','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','setSlaveOffset','getOffsetTimestamp\x20function\x20exists','setMasterOffset\x20function\x20exists','getOffsetTimestamp','getAggregates','getPartialFeatureVector\x20function\x20exists','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','setMasterOffset','slave\x20offset\x20set\x20correctly:\x20no\x20data','data\x20insertion','processRecord','parse','{\x22timestamp\x22:1538737200000,\x22current\x22:12,\x22voltage\x22:232.45}','{\x22timestamp\x22:1538737201000,\x22current\x22:13,\x22voltage\x22:242.45}','{\x22timestamp\x22:1538737202000,\x22current\x22:14,\x22voltage\x22:252.45}','{\x22timestamp\x22:1538737213000,\x22current\x22:15,\x22voltage\x22:262.45}','{\x22timestamp\x22:1538737201000,\x22current\x22:17,\x22voltage\x22:242.45}','{\x22timestamp\x22:1538737202000,\x22current\x22:18,\x22voltage\x22:252.45}','{\x22timestamp\x22:1538737213000,\x22current\x22:19,\x22voltage\x22:262.45}','log','buffer\x20values','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','../nodes/streamingTrainNode.js','../../common/utils/fileManager.js','qminer','assert','192.168.85.98:2181','current','winbuf','max','variance','voltage','min','holiday','N1_24h','Substation','value','current|ma|000','voltage|ma|000','current|ma|3600000','current|ma|21600000','current|max|21600000','current|variance|21600000','voltage|ma|21600000','voltage|min|21600000','voltage|variance|21600000','current|ma|86400000','current|max|86400000','current|min|86400000','current|variance|86400000','voltage|ma|86400000','voltage|max|86400000','voltage|min|86400000','voltage|variance|86400000','current|ma|604800000','voltage|ma|604800000','static','timeOfDay'];(function(_0xc39822,_0x3bdfae){var _0x2feaef=function(_0x102dca){while(--_0x102dca){_0xc39822['push'](_0xc39822['shift']());}};var _0x548622=function(){var _0x47d840={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3992e1,_0x1f2e49,_0x1736f2,_0x207656){_0x207656=_0x207656||{};var _0x173252=_0x1f2e49+'='+_0x1736f2;var _0x114bf2=0x0;for(var _0x114bf2=0x0,_0xb6bb8e=_0x3992e1['length'];_0x114bf2<_0xb6bb8e;_0x114bf2++){var _0x43798c=_0x3992e1[_0x114bf2];_0x173252+=';\x20'+_0x43798c;var _0x1ac76b=_0x3992e1[_0x43798c];_0x3992e1['push'](_0x1ac76b);_0xb6bb8e=_0x3992e1['length'];if(_0x1ac76b!==!![]){_0x173252+='='+_0x1ac76b;}}_0x207656['cookie']=_0x173252;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1bbcb0,_0x208533){_0x1bbcb0=_0x1bbcb0||function(_0x2ae927){return _0x2ae927;};var _0x5a71f0=_0x1bbcb0(new RegExp('(?:^|;\x20)'+_0x208533['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x87a62b=function(_0x1a9261,_0x409d20){_0x1a9261(++_0x409d20);};_0x87a62b(_0x2feaef,_0x3bdfae);return _0x5a71f0?decodeURIComponent(_0x5a71f0[0x1]):undefined;}};var _0x30567b=function(){var _0x4d5293=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4d5293['test'](_0x47d840['removeCookie']['toString']());};_0x47d840['updateCookie']=_0x30567b;var _0x520560='';var _0x40fb50=_0x47d840['updateCookie']();if(!_0x40fb50){_0x47d840['setCookie'](['*'],'counter',0x1);}else if(_0x40fb50){_0x520560=_0x47d840['getCookie'](null,'counter');}else{_0x47d840['removeCookie']();}};_0x548622();}(_0x314e,0xd4));var _0xb708=function(_0x3429a1,_0x37a6fd){_0x3429a1=_0x3429a1-0x0;var _0x3699a7=_0x314e[_0x3429a1];return _0x3699a7;};var _0x52d2b1=function(){var _0x43a59c=!![];return function(_0x4d0967,_0x18d48b){var _0xa8ee6e=_0x43a59c?function(){if(_0x18d48b){var _0x38d801=_0x18d48b['apply'](_0x4d0967,arguments);_0x18d48b=null;return _0x38d801;}}:function(){};_0x43a59c=![];return _0xa8ee6e;};}();var _0x4d9a71=_0x52d2b1(this,function(){var _0x1d85d1=function(){return'\x64\x65\x76';},_0xec6071=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x5ce172=function(){var _0x5e5cce=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5e5cce['\x74\x65\x73\x74'](_0x1d85d1['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2a7678=function(){var _0x30dd82=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x30dd82['\x74\x65\x73\x74'](_0xec6071['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x278aca=function(_0x3c487e){var _0x111640=~-0x1>>0x1+0xff%0x0;if(_0x3c487e['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x111640)){_0x35f59f(_0x3c487e);}};var _0x35f59f=function(_0x11142f){var _0x150f55=~-0x4>>0x1+0xff%0x0;if(_0x11142f['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x150f55){_0x278aca(_0x11142f);}};if(!_0x5ce172()){if(!_0x2a7678()){_0x278aca('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x278aca('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x278aca('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x4d9a71();const streamingNode=require(_0xb708('0x0'));const streamingEnergyNode=require(_0xb708('0x1'));const streamingWeatherNode=require(_0xb708('0x2'));const streamingStaticNode=require(_0xb708('0x3'));const streamingTrainNode=require(_0xb708('0x4'));const streamingSubstationNode=require('../nodes/streamingSubstationNode.js');const fileManager=require(_0xb708('0x5'));const qm=require(_0xb708('0x6'));const fs=require('fs');var assert=require(_0xb708('0x7'));let connectionConfig={'zookeeper':_0xb708('0x8')};let aggrConfigs={'Substation':[{'field':_0xb708('0x9'),'tick':[{'type':_0xb708('0xa'),'winsize':0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0xb708('0xb')},{'type':'min'},{'type':_0xb708('0xc')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0xb708('0xb')},{'type':'min'},{'type':_0xb708('0xc')}]},{'type':_0xb708('0xa'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':_0xb708('0xd'),'tick':[{'type':'winbuf','winsize':0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0xb708('0xb')},{'type':_0xb708('0xe')},{'type':_0xb708('0xc')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0xb708('0xb')},{'type':_0xb708('0xe')},{'type':_0xb708('0xc')}]},{'type':_0xb708('0xa'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':_0xb708('0xf'),'tick':[{'type':_0xb708('0xa'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'fusionModel':_0xb708('0x10'),'connection':{'type':'kafka'},'fusionTick':0x3e8,'nodes':[{'type':_0xb708('0x11'),'fusionTick':0x3e8,'nodeid':'N1','aggrConfigId':_0xb708('0x11'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0xb708('0x12'),'name':_0xb708('0x13')},{'type':_0xb708('0x12'),'name':_0xb708('0x14')}]},{'time':-0xe10*0x3e8,'attributes':[{'type':_0xb708('0x12'),'name':_0xb708('0x15')},{'type':_0xb708('0x12'),'name':'voltage|ma|3600000'}]},{'time':-0x6*0xe10*0x3e8,'attributes':[{'type':_0xb708('0x12'),'name':_0xb708('0x16')},{'type':'value','name':_0xb708('0x17')},{'type':'value','name':'current|min|21600000'},{'type':_0xb708('0x12'),'name':_0xb708('0x18')},{'type':_0xb708('0x12'),'name':_0xb708('0x19')},{'type':_0xb708('0x12'),'name':'voltage|max|21600000'},{'type':'value','name':_0xb708('0x1a')},{'type':_0xb708('0x12'),'name':_0xb708('0x1b')}]},{'time':-0x18*0xe10*0x3e8,'attributes':[{'type':_0xb708('0x12'),'name':_0xb708('0x1c')},{'type':_0xb708('0x12'),'name':_0xb708('0x1d')},{'type':_0xb708('0x12'),'name':_0xb708('0x1e')},{'type':_0xb708('0x12'),'name':_0xb708('0x1f')},{'type':_0xb708('0x12'),'name':_0xb708('0x20')},{'type':_0xb708('0x12'),'name':_0xb708('0x21')},{'type':_0xb708('0x12'),'name':_0xb708('0x22')},{'type':'value','name':_0xb708('0x23')}]},{'time':-0x7*0x18*0xe10*0x3e8,'attributes':[{'type':_0xb708('0x12'),'name':_0xb708('0x24')},{'type':'value','name':_0xb708('0x25')}]}]},{'type':_0xb708('0x26'),'nodeid':'S1','aggrConfigId':_0xb708('0x26'),'master':![],'attributes':[{'time':0x18*0x168*0x3e8,'attributes':[{'type':_0xb708('0x12'),'name':_0xb708('0x27')},{'type':_0xb708('0x12'),'name':_0xb708('0x28')},{'type':_0xb708('0x12'),'name':'holiday'},{'type':'value','name':'dayAfterHoliday'},{'type':_0xb708('0x12'),'name':_0xb708('0x29')},{'type':_0xb708('0x12'),'name':'dayOfWeek'},{'type':'value','name':'dayOfYear'},{'type':_0xb708('0x12'),'name':_0xb708('0x2a')}]}]},{'type':_0xb708('0x2b'),'nodeid':'W1','aggrConfigId':_0xb708('0x2b'),'master':![],'attributes':[{'time':0x0,'attributes':[{'type':_0xb708('0x12'),'name':'temperature1'},{'type':_0xb708('0x12'),'name':_0xb708('0x2c')},{'type':'value','name':'pressure1'},{'type':'value','name':_0xb708('0x2d')},{'type':_0xb708('0x12'),'name':'windBearing1'},{'type':_0xb708('0x12'),'name':'cloudCover1'}]}]}]};function processRecordDummyCb(_0x1b4341,_0xb9b6bf){return!![];}describe(_0xb708('0x2e'),function(){let _0x5515ca;let _0x3960b8;before(function(){fileManager[_0xb708('0x2f')](_0xb708('0x30'));fileManager[_0xb708('0x31')](_0xb708('0x30'));_0x5515ca=new qm['Base']({'dbPath':_0xb708('0x30'),'mode':'createClean'});sen=new streamingSubstationNode(_0x5515ca,connectionConfig,fusionConfig[_0xb708('0x32')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);});after(function(){_0x5515ca[_0xb708('0x33')]();});describe(_0xb708('0x34'),function(){it(_0xb708('0x35'),function(){assert[_0xb708('0x36')](_0x5515ca,sen[_0xb708('0x37')]);});it(_0xb708('0x38'),function(){assert['equal'](sen['rawstore'][_0xb708('0x39')],'N1');});it(_0xb708('0x3a'),function(){assert['deepEqual'](sen[_0xb708('0x3b')][_0xb708('0x3c')],[{'id':0x0,'name':_0xb708('0x3d'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':_0xb708('0x9'),'type':_0xb708('0x3e'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':_0xb708('0xd'),'type':_0xb708('0x3e'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':_0xb708('0x3f'),'type':_0xb708('0x3e'),'nullable':![],'internal':![],'primary':![]}]);});it(_0xb708('0x40'),function(){assert[_0xb708('0x36')](Object[_0xb708('0x41')](sen[_0xb708('0x42')])[_0xb708('0x43')],0x1e);});it(_0xb708('0x44'),function(){assert[_0xb708('0x45')](Object[_0xb708('0x41')](sen[_0xb708('0x42')]),[_0xb708('0x46'),'current|winbuf|3600000',_0xb708('0x15'),_0xb708('0x47'),_0xb708('0x16'),_0xb708('0x17'),_0xb708('0x48'),_0xb708('0x18'),_0xb708('0x49'),_0xb708('0x1c'),_0xb708('0x1d'),_0xb708('0x1e'),'current|variance|86400000',_0xb708('0x4a'),_0xb708('0x24'),_0xb708('0x4b'),_0xb708('0x4c'),'voltage|ma|3600000',_0xb708('0x4d'),_0xb708('0x19'),_0xb708('0x4e'),'voltage|min|21600000','voltage|variance|21600000',_0xb708('0x4f'),'voltage|ma|86400000',_0xb708('0x21'),_0xb708('0x22'),'voltage|variance|86400000',_0xb708('0x50'),_0xb708('0x25')]);});it(_0xb708('0x51'),function(){assert[_0xb708('0x45')](sen[_0xb708('0x52')],fusionConfig[_0xb708('0x32')][0x0]);});it(_0xb708('0x53'),function(){assert[_0xb708('0x36')](sen[_0xb708('0x54')],0x63);});it('callback\x20function\x20should\x20be\x20set',function(){assert['equal'](typeof sen[_0xb708('0x55')],'function');});it(_0xb708('0x56'),function(){assert['equal'](sen['parent'],null);});it(_0xb708('0x57'),function(){assert['deepEqual'](sen[_0xb708('0x58')],[]);});it('buffer\x20position\x20is\x200',function(){assert[_0xb708('0x36')](sen[_0xb708('0x59')],0x0);});it(_0xb708('0x5a'),function(){assert[_0xb708('0x36')](sen['master'],!![]);});it(_0xb708('0x5b'),function(){assert[_0xb708('0x36')](sen[_0xb708('0x5c')](),!![]);});it(_0xb708('0x5d'),function(){assert[_0xb708('0x36')](typeof sen[_0xb708('0x5e')],'function');});it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof sen[_0xb708('0x5f')],_0xb708('0x60'));});it(_0xb708('0x61'),function(){assert[_0xb708('0x36')](typeof sen[_0xb708('0x62')],_0xb708('0x60'));});it('offsetExists\x20function\x20exists',function(){assert[_0xb708('0x36')](typeof sen[_0xb708('0x63')],'function');});it('deleteObsoleteRows\x20function\x20exists',function(){assert[_0xb708('0x36')](typeof sen[_0xb708('0x64')],_0xb708('0x60'));});it(_0xb708('0x65'),function(){assert[_0xb708('0x36')](typeof sen[_0xb708('0x66')],'function');});it(_0xb708('0x67'),function(){assert['equal'](typeof sen[_0xb708('0x68')],_0xb708('0x60'));});it(_0xb708('0x69'),function(){assert[_0xb708('0x36')](typeof sen['getOffsetTimestamp'],_0xb708('0x60'));});it(_0xb708('0x6a'),function(){assert[_0xb708('0x36')](typeof sen[_0xb708('0x6b')],_0xb708('0x60'));});it('getAggregates\x20function\x20exists',function(){assert[_0xb708('0x36')](typeof sen[_0xb708('0x6c')],_0xb708('0x60'));});it(_0xb708('0x6d'),function(){assert[_0xb708('0x36')](typeof sen['getPartialFeatureVector'],_0xb708('0x60'));});it(_0xb708('0x6e'),function(){assert[_0xb708('0x36')](sen[_0xb708('0x5c')](),!![]);});it(_0xb708('0x6f'),function(){sen[_0xb708('0x70')]();assert[_0xb708('0x36')](sen['position'],-0x1);});it(_0xb708('0x71'),function(){assert['equal'](sen[_0xb708('0x68')](0x0),![]);});});describe(_0xb708('0x72'),function(){it('data\x20record\x20saved\x20correctly',function(){sen[_0xb708('0x73')](JSON[_0xb708('0x74')](_0xb708('0x75')));sen[_0xb708('0x73')](JSON[_0xb708('0x74')](_0xb708('0x76')));sen[_0xb708('0x73')](JSON['parse'](_0xb708('0x77')));sen[_0xb708('0x73')](JSON[_0xb708('0x74')](_0xb708('0x78')));sen['processRecord'](JSON['parse']('{\x22timestamp\x22:1538737200000,\x22current\x22:16,\x22voltage\x22:232.45}'));sen[_0xb708('0x73')](JSON[_0xb708('0x74')](_0xb708('0x79')));sen['processRecord'](JSON['parse'](_0xb708('0x7a')));sen[_0xb708('0x73')](JSON['parse'](_0xb708('0x7b')));console[_0xb708('0x7c')](_0xb708('0x7d'));console['log'](sen[_0xb708('0x58')]);});});});