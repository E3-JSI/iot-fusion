const a0_0x5ed4=['equal','voltage|winbuf|86400000','{\x22timestamp\x22:1538737213000,\x22current\x22:15,\x22voltage\x22:262.45}','base','connectToKafka\x20function\x20exists','config','current|min|86400000','voltage|ma|000','{\x22timestamp\x22:1538737201000,\x22current\x22:13,\x22voltage\x22:242.45}','slave\x20offset\x20set\x20correctly:\x20no\x20data','min','timeOfDay','static','variance','{\x22timestamp\x22:1538737201000,\x22current\x22:17,\x22voltage\x22:242.45}','aggregates\x20initialized\x20-\x20number','current|max|86400000','current|ma|604800000','fusionNodeI\x20correctly\x20saved','current|ma|3600000','voltage|variance|21600000','setMasterOffset','data\x20insertion','setSlaveOffset','pressure1','weather','initialization','rawstore','Time','buffer\x20position\x20is\x200','value','isMaster\x20function','setSlaveOffset\x20function\x20exists','processRecordCb','voltage|winbuf|604800000','keys','createClean','callback\x20function\x20should\x20be\x20set','getOffsetTimestamp','voltage|winbuf|3600000','function','deleteObsoleteRows','float','voltage|ma|3600000','../common/utils/fileManager.js','aggregates\x20initialized\x20-\x20key\x20names','voltage','voltage|variance|86400000','checkDataAvailability','qminer','current|min|21600000','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','current|tick','holiday','current|max|21600000','buffer','./db2/','aggregate','current|ma|000','Substation','current|ma|21600000','{\x22timestamp\x22:1538737200000,\x22current\x22:12,\x22voltage\x22:232.45}','current|winbuf|86400000','dayOfWeek','createAggregates','fusionNodeI','check\x20if\x20store\x20exists','Base','parent\x20saved','broadcastAggregates','constructor','datetime','current|ma|86400000','nodes','setMasterOffset\x20function\x20exists','offsetExists','voltage|max|86400000','getAggregates','dayAfterHoliday','humidity1','voltage|max|21600000','streamingSubstationNode','temperature1','voltage|ma|86400000','position','base\x20saved','dayOfYear','broadcastAggregates\x20function\x20exists','checkDataAvailability\x20function\x20exists','log','getAggregates\x20function\x20exists','buffer\x20empty','../nodes/streamingSubstationNode.js','current|winbuf|604800000','fields','windBearing1','voltage|min|86400000','deepEqual','monthOfYear','isMaster','createAggregates\x20function\x20exists','data\x20record\x20saved\x20correctly','power','deleteObsoleteRows\x20function\x20exists','offsetExists\x20function\x20exists','current|variance|86400000','../nodes/streamingTrainNode.js','cloudCover1','voltage|winbuf|21600000','../nodes/streamingEnergyNode.js','winbuf','return\x20/\x22\x20+\x20this\x20+\x20\x22/','voltage|ma|604800000','current','max','apply','parse','getOffsetTimestamp\x20function\x20exists','windSpeed1','voltage|tick','voltage|ma|21600000','config\x20saved','current|variance|21600000','processRecord','voltage|min|21600000','check\x20store\x20structure'];(function(_0x4baac9,_0x5ed449){const _0x1d0431=function(_0x2baae5){while(--_0x2baae5){_0x4baac9['push'](_0x4baac9['shift']());}},_0x4c242c=function(){const _0xcc6d1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x289291,_0x5616e3,_0x495936,_0x4d8d7a){_0x4d8d7a=_0x4d8d7a||{};let _0x1595b1=_0x5616e3+'='+_0x495936,_0x1aafa5=0x0;for(let _0x3ad38d=0x0,_0x253b15=_0x289291['length'];_0x3ad38d<_0x253b15;_0x3ad38d++){const _0x3962e1=_0x289291[_0x3ad38d];_0x1595b1+=';\x20'+_0x3962e1;const _0x5c7ae0=_0x289291[_0x3962e1];_0x289291['push'](_0x5c7ae0),_0x253b15=_0x289291['length'],_0x5c7ae0!==!![]&&(_0x1595b1+='='+_0x5c7ae0);}_0x4d8d7a['cookie']=_0x1595b1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5a5597,_0x413313){_0x5a5597=_0x5a5597||function(_0x29274b){return _0x29274b;};const _0x4c9921=_0x5a5597(new RegExp('(?:^|;\x20)'+_0x413313['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x570254=function(_0x29519b,_0x1c194d){_0x29519b(++_0x1c194d);};return _0x570254(_0x1d0431,_0x5ed449),_0x4c9921?decodeURIComponent(_0x4c9921[0x1]):undefined;}},_0x36654c=function(){const _0x26b5ff=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x26b5ff['test'](_0xcc6d1['removeCookie']['toString']());};_0xcc6d1['updateCookie']=_0x36654c;let _0x141c02='';const _0xa66b71=_0xcc6d1['updateCookie']();if(!_0xa66b71)_0xcc6d1['setCookie'](['*'],'counter',0x1);else _0xa66b71?_0x141c02=_0xcc6d1['getCookie'](null,'counter'):_0xcc6d1['removeCookie']();};_0x4c242c();}(a0_0x5ed4,0x1a2));const a0_0x1d04=function(_0x4baac9,_0x5ed449){_0x4baac9=_0x4baac9-0x0;let _0x1d0431=a0_0x5ed4[_0x4baac9];return _0x1d0431;};const a0_0x495936=function(){let _0x4cb471=!![];return function(_0x5b828a,_0x3455b6){const _0x3afb83=_0x4cb471?function(){if(_0x3455b6){const _0x118144=_0x3455b6[a0_0x1d04('0x4b')](_0x5b828a,arguments);return _0x3455b6=null,_0x118144;}}:function(){};return _0x4cb471=![],_0x3afb83;};}(),a0_0x5616e3=a0_0x495936(this,function(){const _0x2c2f11=function(){const _0x2e4061=_0x2c2f11[a0_0x1d04('0x1e')](a0_0x1d04('0x47'))()[a0_0x1d04('0x1e')](a0_0x1d04('0xb'));return!_0x2e4061['test'](a0_0x5616e3);};return _0x2c2f11();});a0_0x5616e3();const streamingNode=require('../nodes/streamingNode.js'),streamingEnergyNode=require(a0_0x1d04('0x45')),streamingWeatherNode=require('../nodes/streamingWeatherNode.js'),streamingStaticNode=require('../nodes/streamingStaticNode.js'),streamingTrainNode=require(a0_0x1d04('0x42')),streamingSubstationNode=require(a0_0x1d04('0x34')),fileManager=require(a0_0x1d04('0x4')),qm=require(a0_0x1d04('0x9')),fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'Substation':[{'field':a0_0x1d04('0x49'),'tick':[{'type':a0_0x1d04('0x46'),'winsize':0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x1d04('0x4a')},{'type':a0_0x1d04('0x60')},{'type':a0_0x1d04('0x63')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'max'},{'type':a0_0x1d04('0x60')},{'type':a0_0x1d04('0x63')}]},{'type':a0_0x1d04('0x46'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'voltage','tick':[{'type':'winbuf','winsize':0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x1d04('0x46'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x1d04('0x4a')},{'type':a0_0x1d04('0x60')},{'type':a0_0x1d04('0x63')}]},{'type':a0_0x1d04('0x46'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x1d04('0x4a')},{'type':a0_0x1d04('0x60')},{'type':'variance'}]},{'type':a0_0x1d04('0x46'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':'holiday','tick':[{'type':a0_0x1d04('0x46'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':'N1_24h','connection':{'type':'kafka'},'fusionTick':0x3e8,'nodes':[{'type':a0_0x1d04('0x13'),'fusionTick':0x3e8,'nodeid':'N1','aggrConfigId':a0_0x1d04('0x13'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x12')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x5d')}]},{'time':-0xe10*0x3e8,'attributes':[{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x69')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x3')}]},{'time':-0x6*0xe10*0x3e8,'attributes':[{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x14')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0xe')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0xa')},{'type':'value','name':a0_0x1d04('0x52')},{'type':a0_0x1d04('0x74'),'name':'voltage|ma|21600000'},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x28')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x54')},{'type':'value','name':a0_0x1d04('0x6a')}]},{'time':-0x18*0xe10*0x3e8,'attributes':[{'type':'value','name':a0_0x1d04('0x20')},{'type':a0_0x1d04('0x74'),'name':'current|max|86400000'},{'type':'value','name':a0_0x1d04('0x5c')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x41')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x2b')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x24')},{'type':'value','name':a0_0x1d04('0x38')},{'type':'value','name':a0_0x1d04('0x7')}]},{'time':-0x7*0x18*0xe10*0x3e8,'attributes':[{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x67')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x48')}]}]},{'type':a0_0x1d04('0x62'),'nodeid':'S1','aggrConfigId':a0_0x1d04('0x62'),'master':![],'attributes':[{'time':0x18*0x168*0x3e8,'attributes':[{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x61')},{'type':'value','name':'weekEnd'},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0xd')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x26')},{'type':a0_0x1d04('0x74'),'name':'dayBeforeHoliday'},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x17')},{'type':'value','name':a0_0x1d04('0x2e')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x3a')}]}]},{'type':a0_0x1d04('0x6f'),'nodeid':'W1','aggrConfigId':a0_0x1d04('0x6f'),'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x2a')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x27')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x6e')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x4e')},{'type':'value','name':a0_0x1d04('0x37')},{'type':a0_0x1d04('0x74'),'name':a0_0x1d04('0x43')}]}]}]};function processRecordDummyCb(_0x38ff1d,_0x5264e6){return!![];}describe(a0_0x1d04('0x29'),function(){let _0x28d9a8,_0x29793c;before(function(){fileManager['removeFolder'](a0_0x1d04('0x10')),fileManager['createFolder'](a0_0x1d04('0x10')),_0x28d9a8=new qm[(a0_0x1d04('0x1b'))]({'dbPath':a0_0x1d04('0x10'),'mode':a0_0x1d04('0x7a')}),sen=new streamingSubstationNode(_0x28d9a8,connectionConfig,fusionConfig[a0_0x1d04('0x21')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x28d9a8['close']();}),describe(a0_0x1d04('0x70'),function(){it(a0_0x1d04('0x2d'),function(){assert[a0_0x1d04('0x56')](_0x28d9a8,sen[a0_0x1d04('0x59')]);}),it(a0_0x1d04('0x1a'),function(){assert[a0_0x1d04('0x56')](sen[a0_0x1d04('0x71')]['name'],'N1');}),it(a0_0x1d04('0x55'),function(){assert[a0_0x1d04('0x39')](sen[a0_0x1d04('0x71')][a0_0x1d04('0x36')],[{'id':0x0,'name':a0_0x1d04('0x72'),'type':a0_0x1d04('0x1f'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':'current','type':a0_0x1d04('0x2'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x1d04('0x6'),'type':a0_0x1d04('0x2'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':a0_0x1d04('0x3e'),'type':a0_0x1d04('0x2'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x1d04('0x65'),function(){assert['equal'](Object[a0_0x1d04('0x79')](sen[a0_0x1d04('0x11')])['length'],0x1e);}),it(a0_0x1d04('0x5'),function(){assert[a0_0x1d04('0x39')](Object[a0_0x1d04('0x79')](sen['aggregate']),[a0_0x1d04('0xc'),'current|winbuf|3600000',a0_0x1d04('0x69'),'current|winbuf|21600000',a0_0x1d04('0x14'),'current|max|21600000',a0_0x1d04('0xa'),a0_0x1d04('0x52'),a0_0x1d04('0x16'),a0_0x1d04('0x20'),a0_0x1d04('0x66'),a0_0x1d04('0x5c'),'current|variance|86400000',a0_0x1d04('0x35'),'current|ma|604800000',a0_0x1d04('0x4f'),a0_0x1d04('0x7d'),a0_0x1d04('0x3'),a0_0x1d04('0x44'),a0_0x1d04('0x50'),'voltage|max|21600000',a0_0x1d04('0x54'),a0_0x1d04('0x6a'),a0_0x1d04('0x57'),'voltage|ma|86400000','voltage|max|86400000',a0_0x1d04('0x38'),a0_0x1d04('0x7'),a0_0x1d04('0x78'),'voltage|ma|604800000']);}),it(a0_0x1d04('0x51'),function(){assert[a0_0x1d04('0x39')](sen[a0_0x1d04('0x5b')],fusionConfig['nodes'][0x0]);}),it(a0_0x1d04('0x68'),function(){assert[a0_0x1d04('0x56')](sen[a0_0x1d04('0x19')],0x63);}),it(a0_0x1d04('0x7b'),function(){assert[a0_0x1d04('0x56')](typeof sen[a0_0x1d04('0x77')],'function');}),it(a0_0x1d04('0x1c'),function(){assert[a0_0x1d04('0x56')](sen['parent'],null);}),it(a0_0x1d04('0x33'),function(){assert['deepEqual'](sen[a0_0x1d04('0xf')],[]);}),it(a0_0x1d04('0x73'),function(){assert[a0_0x1d04('0x56')](sen[a0_0x1d04('0x2c')],0x0);}),it('master\x20flag\x20set\x20correctly',function(){assert['equal'](sen['master'],!![]);}),it(a0_0x1d04('0x75'),function(){assert[a0_0x1d04('0x56')](sen['isMaster'](),!![]);}),it(a0_0x1d04('0x5a'),function(){assert[a0_0x1d04('0x56')](typeof sen['connectToKafka'],a0_0x1d04('0x0'));}),it(a0_0x1d04('0x2f'),function(){assert[a0_0x1d04('0x56')](typeof sen[a0_0x1d04('0x1d')],a0_0x1d04('0x0'));}),it(a0_0x1d04('0x3c'),function(){assert[a0_0x1d04('0x56')](typeof sen[a0_0x1d04('0x18')],a0_0x1d04('0x0'));}),it(a0_0x1d04('0x40'),function(){assert[a0_0x1d04('0x56')](typeof sen[a0_0x1d04('0x23')],a0_0x1d04('0x0'));}),it(a0_0x1d04('0x3f'),function(){assert[a0_0x1d04('0x56')](typeof sen[a0_0x1d04('0x1')],a0_0x1d04('0x0'));}),it(a0_0x1d04('0x30'),function(){assert['equal'](typeof sen[a0_0x1d04('0x8')],'function');}),it(a0_0x1d04('0x76'),function(){assert['equal'](typeof sen[a0_0x1d04('0x6d')],a0_0x1d04('0x0'));}),it(a0_0x1d04('0x4d'),function(){assert[a0_0x1d04('0x56')](typeof sen[a0_0x1d04('0x7c')],a0_0x1d04('0x0'));}),it(a0_0x1d04('0x22'),function(){assert[a0_0x1d04('0x56')](typeof sen[a0_0x1d04('0x7c')],'function');}),it(a0_0x1d04('0x32'),function(){assert['equal'](typeof sen[a0_0x1d04('0x25')],a0_0x1d04('0x0'));}),it('getPartialFeatureVector\x20function\x20exists',function(){assert[a0_0x1d04('0x56')](typeof sen['getPartialFeatureVector'],a0_0x1d04('0x0'));}),it('master\x20set\x20correctly',function(){assert[a0_0x1d04('0x56')](sen[a0_0x1d04('0x3b')](),!![]);}),it('master\x20offset\x20set\x20correctly',function(){sen[a0_0x1d04('0x6b')](),assert[a0_0x1d04('0x56')](sen[a0_0x1d04('0x2c')],-0x1);}),it(a0_0x1d04('0x5f'),function(){assert[a0_0x1d04('0x56')](sen[a0_0x1d04('0x6d')](0x0),![]);});}),describe(a0_0x1d04('0x6c'),function(){it(a0_0x1d04('0x3d'),function(){sen[a0_0x1d04('0x53')](JSON[a0_0x1d04('0x4c')](a0_0x1d04('0x15'))),sen['processRecord'](JSON[a0_0x1d04('0x4c')](a0_0x1d04('0x5e'))),sen[a0_0x1d04('0x53')](JSON[a0_0x1d04('0x4c')]('{\x22timestamp\x22:1538737202000,\x22current\x22:14,\x22voltage\x22:252.45}')),sen['processRecord'](JSON['parse'](a0_0x1d04('0x58'))),sen['processRecord'](JSON[a0_0x1d04('0x4c')]('{\x22timestamp\x22:1538737200000,\x22current\x22:16,\x22voltage\x22:232.45}')),sen['processRecord'](JSON['parse'](a0_0x1d04('0x64'))),sen[a0_0x1d04('0x53')](JSON[a0_0x1d04('0x4c')]('{\x22timestamp\x22:1538737202000,\x22current\x22:18,\x22voltage\x22:252.45}')),sen[a0_0x1d04('0x53')](JSON['parse']('{\x22timestamp\x22:1538737213000,\x22current\x22:19,\x22voltage\x22:262.45}')),console[a0_0x1d04('0x31')]('buffer\x20values'),console['log'](sen[a0_0x1d04('0xf')]);});});});