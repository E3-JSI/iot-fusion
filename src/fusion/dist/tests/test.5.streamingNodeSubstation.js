const a0_0x46f4=['min','parent','Time','voltage|max|86400000','winbuf','{\x22timestamp\x22:1538737200000,\x22current\x22:12,\x22voltage\x22:232.45}','voltage|max|21600000','current|max|21600000','./db2/','power','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','function','rawstore','voltage','assert','getPartialFeatureVector','aggregates\x20initialized\x20-\x20key\x20names','current|ma|21600000','voltage|min|21600000','master\x20set\x20correctly','broadcastAggregates\x20function\x20exists','../nodes/streamingSubstationNode.js','voltage|winbuf|21600000','log','master','master\x20flag\x20set\x20correctly','fusionNodeI\x20correctly\x20saved','{\x22timestamp\x22:1538737202000,\x22current\x22:14,\x22voltage\x22:252.45}','variance','weather','humidity1','../common/utils/fileManager.js','parent\x20saved','streamingSubstationNode','position','buffer\x20empty','192.168.85.98:2181','holiday','current|ma|3600000','{\x22timestamp\x22:1538737201000,\x22current\x22:17,\x22voltage\x22:242.45}','data\x20record\x20saved\x20correctly','Base','offsetExists\x20function\x20exists','base','current|min|86400000','current|tick','callback\x20function\x20should\x20be\x20set','current|winbuf|3600000','voltage|variance|86400000','../nodes/streamingWeatherNode.js','processRecord','../nodes/streamingTrainNode.js','getOffsetTimestamp','monthOfYear','{\x22timestamp\x22:1538737213000,\x22current\x22:19,\x22voltage\x22:262.45}','current|ma|604800000','deleteObsoleteRows\x20function\x20exists','parse','apply','current|min|21600000','config','master\x20offset\x20set\x20correctly','constructor','qminer','test','createFolder','kafka','current|winbuf|604800000','isMaster','setMasterOffset\x20function\x20exists','buffer','voltage|ma|21600000','current|winbuf|86400000','temperature1','../nodes/streamingEnergyNode.js','dayBeforeHoliday','{\x22timestamp\x22:1538737202000,\x22current\x22:18,\x22voltage\x22:252.45}','current','value','checkDataAvailability\x20function\x20exists','initialization','data\x20insertion','Substation','windSpeed1','pressure1','voltage|winbuf|86400000','name','current|variance|21600000','voltage|variance|21600000','current|ma|86400000','current|ma|000','checkDataAvailability','float','../nodes/streamingNode.js','current|variance|86400000','setMasterOffset','isMaster\x20function','keys','voltage|ma|000','createAggregates\x20function\x20exists','current|max|86400000','dayAfterHoliday','aggregate','N1_24h','{\x22timestamp\x22:1538737200000,\x22current\x22:16,\x22voltage\x22:232.45}','aggregates\x20initialized\x20-\x20number','connectToKafka','voltage|min|86400000','fields','equal','setSlaveOffset','voltage|ma|86400000','getAggregates\x20function\x20exists','cloudCover1','{\x22timestamp\x22:1538737201000,\x22current\x22:13,\x22voltage\x22:242.45}','setSlaveOffset\x20function\x20exists','windBearing1','voltage|winbuf|604800000','check\x20store\x20structure','voltage|tick','nodes','close','getAggregates','buffer\x20position\x20is\x200','createAggregates','max','static','check\x20if\x20store\x20exists','getPartialFeatureVector\x20function\x20exists','length','deepEqual'];(function(_0xf76752,_0x46f405){const _0x475bfe=function(_0x161fb4){while(--_0x161fb4){_0xf76752['push'](_0xf76752['shift']());}},_0x37bf4a=function(){const _0x2acf05={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x354b47,_0x51d6f5,_0x468486,_0x3f32a2){_0x3f32a2=_0x3f32a2||{};let _0x1fdcae=_0x51d6f5+'='+_0x468486,_0x434191=0x0;for(let _0x5981bf=0x0,_0x2dfc76=_0x354b47['length'];_0x5981bf<_0x2dfc76;_0x5981bf++){const _0xd37cea=_0x354b47[_0x5981bf];_0x1fdcae+=';\x20'+_0xd37cea;const _0x30a32b=_0x354b47[_0xd37cea];_0x354b47['push'](_0x30a32b),_0x2dfc76=_0x354b47['length'],_0x30a32b!==!![]&&(_0x1fdcae+='='+_0x30a32b);}_0x3f32a2['cookie']=_0x1fdcae;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2bdfa3,_0x7b66e8){_0x2bdfa3=_0x2bdfa3||function(_0x74d412){return _0x74d412;};const _0x454afe=_0x2bdfa3(new RegExp('(?:^|;\x20)'+_0x7b66e8['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x577dc8=function(_0x29d203,_0x2a6edd){_0x29d203(++_0x2a6edd);};return _0x577dc8(_0x475bfe,_0x46f405),_0x454afe?decodeURIComponent(_0x454afe[0x1]):undefined;}},_0x2d5f81=function(){const _0x430ccd=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x430ccd['test'](_0x2acf05['removeCookie']['toString']());};_0x2acf05['updateCookie']=_0x2d5f81;let _0x21e1bc='';const _0x5862e1=_0x2acf05['updateCookie']();if(!_0x5862e1)_0x2acf05['setCookie'](['*'],'counter',0x1);else _0x5862e1?_0x21e1bc=_0x2acf05['getCookie'](null,'counter'):_0x2acf05['removeCookie']();};_0x37bf4a();}(a0_0x46f4,0xa4));const a0_0x475b=function(_0xf76752,_0x46f405){_0xf76752=_0xf76752-0x0;let _0x475bfe=a0_0x46f4[_0xf76752];return _0x475bfe;};const a0_0x468486=function(){let _0x2fd192=!![];return function(_0x26d64c,_0x349bf8){const _0x3d5855=_0x2fd192?function(){if(_0x349bf8){const _0x511d4d=_0x349bf8[a0_0x475b('0x19')](_0x26d64c,arguments);return _0x349bf8=null,_0x511d4d;}}:function(){};return _0x2fd192=![],_0x3d5855;};}(),a0_0x51d6f5=a0_0x468486(this,function(){const _0x27d550=function(){const _0x223e5e=_0x27d550[a0_0x475b('0x1d')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a0_0x475b('0x1d')](a0_0x475b('0x6c'));return!_0x223e5e[a0_0x475b('0x1f')](a0_0x51d6f5);};return _0x27d550();});a0_0x51d6f5();const streamingNode=require(a0_0x475b('0x3c')),streamingEnergyNode=require(a0_0x475b('0x29')),streamingWeatherNode=require(a0_0x475b('0x10')),streamingStaticNode=require('../nodes/streamingStaticNode.js'),streamingTrainNode=require(a0_0x475b('0x12')),streamingSubstationNode=require(a0_0x475b('0x77')),fileManager=require(a0_0x475b('0x81')),qm=require(a0_0x475b('0x1e')),fs=require('fs');var assert=require(a0_0x475b('0x70'));let connectionConfig={'zookeeper':a0_0x475b('0x3')},aggrConfigs={'Substation':[{'field':a0_0x475b('0x2c'),'tick':[{'type':'winbuf','winsize':0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x475b('0x5c')},{'type':a0_0x475b('0x62')},{'type':a0_0x475b('0x7e')}]},{'type':a0_0x475b('0x66'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x475b('0x5c')},{'type':a0_0x475b('0x62')},{'type':a0_0x475b('0x7e')}]},{'type':a0_0x475b('0x66'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':a0_0x475b('0x6f'),'tick':[{'type':'winbuf','winsize':0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x475b('0x66'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'max'},{'type':a0_0x475b('0x62')},{'type':a0_0x475b('0x7e')}]},{'type':a0_0x475b('0x66'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x475b('0x5c')},{'type':a0_0x475b('0x62')},{'type':a0_0x475b('0x7e')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':a0_0x475b('0x4'),'tick':[{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x475b('0x46'),'connection':{'type':a0_0x475b('0x21')},'fusionTick':0x3e8,'nodes':[{'type':a0_0x475b('0x31'),'fusionTick':0x3e8,'nodeid':'N1','aggrConfigId':'Substation','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x39')},{'type':'value','name':a0_0x475b('0x41')}]},{'time':-0xe10*0x3e8,'attributes':[{'type':'value','name':a0_0x475b('0x5')},{'type':a0_0x475b('0x2d'),'name':'voltage|ma|3600000'}]},{'time':-0x6*0xe10*0x3e8,'attributes':[{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x73')},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x69')},{'type':'value','name':a0_0x475b('0x1a')},{'type':a0_0x475b('0x2d'),'name':'current|variance|21600000'},{'type':a0_0x475b('0x2d'),'name':'voltage|ma|21600000'},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x68')},{'type':'value','name':'voltage|min|21600000'},{'type':'value','name':a0_0x475b('0x37')}]},{'time':-0x18*0xe10*0x3e8,'attributes':[{'type':'value','name':a0_0x475b('0x38')},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x43')},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0xb')},{'type':'value','name':a0_0x475b('0x3d')},{'type':'value','name':a0_0x475b('0x4e')},{'type':'value','name':a0_0x475b('0x65')},{'type':'value','name':'voltage|min|86400000'},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0xf')}]},{'time':-0x7*0x18*0xe10*0x3e8,'attributes':[{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x16')},{'type':a0_0x475b('0x2d'),'name':'voltage|ma|604800000'}]}]},{'type':'static','nodeid':'S1','aggrConfigId':a0_0x475b('0x5d'),'master':![],'attributes':[{'time':0x18*0x168*0x3e8,'attributes':[{'type':a0_0x475b('0x2d'),'name':'timeOfDay'},{'type':'value','name':'weekEnd'},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x4')},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x44')},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x2a')},{'type':a0_0x475b('0x2d'),'name':'dayOfWeek'},{'type':a0_0x475b('0x2d'),'name':'dayOfYear'},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x14')}]}]},{'type':a0_0x475b('0x7f'),'nodeid':'W1','aggrConfigId':a0_0x475b('0x7f'),'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x28')},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x80')},{'type':'value','name':a0_0x475b('0x33')},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x32')},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x53')},{'type':a0_0x475b('0x2d'),'name':a0_0x475b('0x50')}]}]}]};function processRecordDummyCb(_0x2620f3,_0x4aa7e7){return!![];}describe(a0_0x475b('0x0'),function(){let _0x4b590d,_0xa118ca;before(function(){fileManager['removeFolder'](a0_0x475b('0x6a')),fileManager[a0_0x475b('0x20')](a0_0x475b('0x6a')),_0x4b590d=new qm[(a0_0x475b('0x8'))]({'dbPath':a0_0x475b('0x6a'),'mode':'createClean'}),sen=new streamingSubstationNode(_0x4b590d,connectionConfig,fusionConfig[a0_0x475b('0x57')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x4b590d[a0_0x475b('0x58')]();}),describe(a0_0x475b('0x2f'),function(){it('base\x20saved',function(){assert[a0_0x475b('0x4c')](_0x4b590d,sen[a0_0x475b('0xa')]);}),it(a0_0x475b('0x5e'),function(){assert[a0_0x475b('0x4c')](sen[a0_0x475b('0x6e')][a0_0x475b('0x35')],'N1');}),it(a0_0x475b('0x55'),function(){assert['deepEqual'](sen[a0_0x475b('0x6e')][a0_0x475b('0x4b')],[{'id':0x0,'name':a0_0x475b('0x64'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x475b('0x2c'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':'voltage','type':a0_0x475b('0x3b'),'nullable':![],'internal':![],'primary':![]},{'id':0x3,'name':a0_0x475b('0x6b'),'type':a0_0x475b('0x3b'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x475b('0x48'),function(){assert[a0_0x475b('0x4c')](Object[a0_0x475b('0x40')](sen[a0_0x475b('0x45')])[a0_0x475b('0x60')],0x1e);}),it(a0_0x475b('0x72'),function(){assert[a0_0x475b('0x61')](Object[a0_0x475b('0x40')](sen[a0_0x475b('0x45')]),[a0_0x475b('0xc'),a0_0x475b('0xe'),'current|ma|3600000','current|winbuf|21600000','current|ma|21600000','current|max|21600000',a0_0x475b('0x1a'),a0_0x475b('0x36'),a0_0x475b('0x27'),'current|ma|86400000','current|max|86400000',a0_0x475b('0xb'),a0_0x475b('0x3d'),a0_0x475b('0x22'),a0_0x475b('0x16'),a0_0x475b('0x56'),'voltage|winbuf|3600000','voltage|ma|3600000',a0_0x475b('0x78'),a0_0x475b('0x26'),a0_0x475b('0x68'),a0_0x475b('0x74'),a0_0x475b('0x37'),a0_0x475b('0x34'),a0_0x475b('0x4e'),'voltage|max|86400000',a0_0x475b('0x4a'),a0_0x475b('0xf'),a0_0x475b('0x54'),'voltage|ma|604800000']);}),it('config\x20saved',function(){assert[a0_0x475b('0x61')](sen[a0_0x475b('0x1b')],fusionConfig['nodes'][0x0]);}),it(a0_0x475b('0x7c'),function(){assert[a0_0x475b('0x4c')](sen['fusionNodeI'],0x63);}),it(a0_0x475b('0xd'),function(){assert[a0_0x475b('0x4c')](typeof sen['processRecordCb'],'function');}),it(a0_0x475b('0x82'),function(){assert['equal'](sen[a0_0x475b('0x63')],null);}),it(a0_0x475b('0x2'),function(){assert[a0_0x475b('0x61')](sen['buffer'],[]);}),it(a0_0x475b('0x5a'),function(){assert['equal'](sen[a0_0x475b('0x1')],0x0);}),it(a0_0x475b('0x7b'),function(){assert['equal'](sen[a0_0x475b('0x7a')],!![]);}),it(a0_0x475b('0x3f'),function(){assert[a0_0x475b('0x4c')](sen[a0_0x475b('0x23')](),!![]);}),it('connectToKafka\x20function\x20exists',function(){assert['equal'](typeof sen[a0_0x475b('0x49')],'function');}),it(a0_0x475b('0x76'),function(){assert[a0_0x475b('0x4c')](typeof sen['broadcastAggregates'],a0_0x475b('0x6d'));}),it(a0_0x475b('0x42'),function(){assert[a0_0x475b('0x4c')](typeof sen[a0_0x475b('0x5b')],a0_0x475b('0x6d'));}),it(a0_0x475b('0x9'),function(){assert['equal'](typeof sen['offsetExists'],a0_0x475b('0x6d'));}),it(a0_0x475b('0x17'),function(){assert[a0_0x475b('0x4c')](typeof sen['deleteObsoleteRows'],a0_0x475b('0x6d'));}),it(a0_0x475b('0x2e'),function(){assert[a0_0x475b('0x4c')](typeof sen[a0_0x475b('0x3a')],'function');}),it(a0_0x475b('0x52'),function(){assert['equal'](typeof sen[a0_0x475b('0x4d')],'function');}),it('getOffsetTimestamp\x20function\x20exists',function(){assert[a0_0x475b('0x4c')](typeof sen[a0_0x475b('0x13')],a0_0x475b('0x6d'));}),it(a0_0x475b('0x24'),function(){assert['equal'](typeof sen[a0_0x475b('0x13')],a0_0x475b('0x6d'));}),it(a0_0x475b('0x4f'),function(){assert[a0_0x475b('0x4c')](typeof sen[a0_0x475b('0x59')],a0_0x475b('0x6d'));}),it(a0_0x475b('0x5f'),function(){assert[a0_0x475b('0x4c')](typeof sen[a0_0x475b('0x71')],a0_0x475b('0x6d'));}),it(a0_0x475b('0x75'),function(){assert['equal'](sen['isMaster'](),!![]);}),it(a0_0x475b('0x1c'),function(){sen[a0_0x475b('0x3e')](),assert['equal'](sen[a0_0x475b('0x1')],-0x1);}),it('slave\x20offset\x20set\x20correctly:\x20no\x20data',function(){assert[a0_0x475b('0x4c')](sen[a0_0x475b('0x4d')](0x0),![]);});}),describe(a0_0x475b('0x30'),function(){it(a0_0x475b('0x7'),function(){sen[a0_0x475b('0x11')](JSON[a0_0x475b('0x18')](a0_0x475b('0x67'))),sen[a0_0x475b('0x11')](JSON[a0_0x475b('0x18')](a0_0x475b('0x51'))),sen[a0_0x475b('0x11')](JSON['parse'](a0_0x475b('0x7d'))),sen[a0_0x475b('0x11')](JSON[a0_0x475b('0x18')]('{\x22timestamp\x22:1538737213000,\x22current\x22:15,\x22voltage\x22:262.45}')),sen[a0_0x475b('0x11')](JSON[a0_0x475b('0x18')](a0_0x475b('0x47'))),sen[a0_0x475b('0x11')](JSON['parse'](a0_0x475b('0x6'))),sen['processRecord'](JSON[a0_0x475b('0x18')](a0_0x475b('0x2b'))),sen['processRecord'](JSON[a0_0x475b('0x18')](a0_0x475b('0x15'))),console[a0_0x475b('0x79')]('buffer\x20values'),console[a0_0x475b('0x79')](sen[a0_0x475b('0x25')]);});});});