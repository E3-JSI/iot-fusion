const a0_0x42ab=['value|ma|21600000','value|max|21600000','value|max|86400000','max','equal','base','deepEqual','topic','value|variance|86400000','check\x20fusion\x20model\x20name','floor','check\x20number\x20of\x20fusion\x20objects','config','holiday','timeOfDay','assert','../common/utils/fileManager.js','winbuf','weekEnd','return\x20/\x22\x20+\x20this\x20+\x20\x22/','N1_24h','global\x20config\x20correct','dayBeforeHoliday','variance','constructor','./db-1/','value','getStats','dayOfYear','check\x20number\x20of\x20stores','parse','192.168.85.98:2181','qminer','features_N1_24h','aggr','dayAfterHoliday','timestamp','value|min|21600000','timevalue','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x200,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','lastTimestamp','fusion','dayOfWeek','stores','processRecord','value|variance|21600000','test','min','monthOfYear','nodes','base\x20saved','setSlaveOffset','feature\x20vector\x20ok','object','static','none','streamingStaticNode','apply','removeFolder'];(function(_0x1f5644,_0x42abcd){const _0x41ba27=function(_0x23b439){while(--_0x23b439){_0x1f5644['push'](_0x1f5644['shift']());}},_0xb72593=function(){const _0x270e13={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x59f88d,_0x3a27e9,_0x5c3360,_0x26ba73){_0x26ba73=_0x26ba73||{};let _0x338d28=_0x3a27e9+'='+_0x5c3360,_0x35cfe2=0x0;for(let _0xdc4400=0x0,_0x5a7e4e=_0x59f88d['length'];_0xdc4400<_0x5a7e4e;_0xdc4400++){const _0x183f54=_0x59f88d[_0xdc4400];_0x338d28+=';\x20'+_0x183f54;const _0x12ef1f=_0x59f88d[_0x183f54];_0x59f88d['push'](_0x12ef1f),_0x5a7e4e=_0x59f88d['length'],_0x12ef1f!==!![]&&(_0x338d28+='='+_0x12ef1f);}_0x26ba73['cookie']=_0x338d28;},'removeCookie':function(){return'dev';},'getCookie':function(_0x104231,_0x5dc9c3){_0x104231=_0x104231||function(_0x2f980b){return _0x2f980b;};const _0x2844d8=_0x104231(new RegExp('(?:^|;\x20)'+_0x5dc9c3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x191118=function(_0x1c7641,_0x1ef0a9){_0x1c7641(++_0x1ef0a9);};return _0x191118(_0x41ba27,_0x42abcd),_0x2844d8?decodeURIComponent(_0x2844d8[0x1]):undefined;}},_0x5ac036=function(){const _0x98cb52=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x98cb52['test'](_0x270e13['removeCookie']['toString']());};_0x270e13['updateCookie']=_0x5ac036;let _0x4e027f='';const _0x313e2b=_0x270e13['updateCookie']();if(!_0x313e2b)_0x270e13['setCookie'](['*'],'counter',0x1);else _0x313e2b?_0x4e027f=_0x270e13['getCookie'](null,'counter'):_0x270e13['removeCookie']();};_0xb72593();}(a0_0x42ab,0xe7));const a0_0x41ba=function(_0x1f5644,_0x42abcd){_0x1f5644=_0x1f5644-0x0;let _0x41ba27=a0_0x42ab[_0x1f5644];return _0x41ba27;};const a0_0x5c3360=function(){let _0x5af66f=!![];return function(_0x5be5ca,_0x216f18){const _0x33d71f=_0x5af66f?function(){if(_0x216f18){const _0x171c94=_0x216f18[a0_0x41ba('0x7')](_0x5be5ca,arguments);return _0x216f18=null,_0x171c94;}}:function(){};return _0x5af66f=![],_0x33d71f;};}(),a0_0x3a27e9=a0_0x5c3360(this,function(){const _0x2f2ae3=function(){const _0x3a9d19=_0x2f2ae3[a0_0x41ba('0x21')](a0_0x41ba('0x1c'))()['constructor'](a0_0x41ba('0x31'));return!_0x3a9d19[a0_0x41ba('0x38')](a0_0x3a27e9);};return _0x2f2ae3();});a0_0x3a27e9();const fileManager=require(a0_0x41ba('0x19')),StreamFusion=require('../streamFusion.js'),qm=require(a0_0x41ba('0x29')),fs=require('fs');var assert=require(a0_0x41ba('0x18'));let connectionConfig={'zookeeper':a0_0x41ba('0x28')},smConf={'aggr':{'timevalue':[{'field':a0_0x41ba('0x23'),'tick':[{'type':a0_0x41ba('0x1a'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x41ba('0xc')},{'type':a0_0x41ba('0x39')},{'type':a0_0x41ba('0x20')}]},{'type':a0_0x41ba('0x1a'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x41ba('0xc')},{'type':a0_0x41ba('0x39')},{'type':a0_0x41ba('0x20')}]},{'type':a0_0x41ba('0x1a'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x41ba('0xc')},{'type':a0_0x41ba('0x39')},{'type':'variance'}]}]}],'static':[{'field':'holiday','tick':[{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},'fusion':{'fusionModel':a0_0x41ba('0x1d'),'connection':{'type':a0_0x41ba('0x5')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x41ba('0x2f'),'nodeid':'N1','aggrConfigId':a0_0x41ba('0x2f'),'master':!![],'fusionTick':0x3c*0x3c*0x3e8,'attributes':[{'time':0x0,'attributes':[{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0x23')},{'type':'value','name':a0_0x41ba('0x9')},{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0x2e')},{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0xa')},{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0x37')},{'type':'value','name':'value|ma|86400000'},{'type':'value','name':'value|min|86400000'},{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0xb')},{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0x11')}]},{'time':-0x18,'attributes':[{'type':a0_0x41ba('0x23'),'name':'value'}]}]},{'type':a0_0x41ba('0x4'),'nodeid':'S1','aggrConfigId':a0_0x41ba('0x4'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0x17')},{'type':'value','name':a0_0x41ba('0x1b')},{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0x16')},{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0x2c')},{'type':'value','name':a0_0x41ba('0x1f')},{'type':'value','name':a0_0x41ba('0x34')},{'type':a0_0x41ba('0x23'),'name':a0_0x41ba('0x25')},{'type':'value','name':a0_0x41ba('0x3a')}]}]}]}};describe('streamFusion',function(){let _0x176610;before(function(){fileManager[a0_0x41ba('0x8')](a0_0x41ba('0x22')),fileManager['createFolder'](a0_0x41ba('0x22')),_0x176610=new StreamFusion(connectionConfig,smConf[a0_0x41ba('0x33')],smConf[a0_0x41ba('0x2b')]);}),after(function(){}),describe('initialization',function(){it(a0_0x41ba('0x0'),function(){assert[a0_0x41ba('0xd')](typeof _0x176610[a0_0x41ba('0xe')],a0_0x41ba('0x3'));}),it(a0_0x41ba('0x14'),function(){assert[a0_0x41ba('0xd')](_0x176610[a0_0x41ba('0x3b')]['length'],0x2);}),it(a0_0x41ba('0x26'),function(){assert['equal'](_0x176610[a0_0x41ba('0xe')][a0_0x41ba('0x24')]()[a0_0x41ba('0x35')]['length'],0x2);}),it(a0_0x41ba('0x12'),function(){assert[a0_0x41ba('0xd')](_0x176610['fusion_id'],a0_0x41ba('0x1d'));}),it('check\x20features\x20topic\x20name',function(){assert[a0_0x41ba('0xd')](_0x176610[a0_0x41ba('0x10')],a0_0x41ba('0x2a'));}),it('check\x20types\x20of\x20nodes',function(){assert[a0_0x41ba('0xd')](_0x176610['nodes'][0x0]['constructor']['name'],'streamingTimeValueNode'),assert[a0_0x41ba('0xd')](_0x176610[a0_0x41ba('0x3b')][0x1]['constructor']['name'],a0_0x41ba('0x6'));}),it(a0_0x41ba('0x1e'),function(){assert[a0_0x41ba('0xf')](_0x176610[a0_0x41ba('0x15')],smConf['fusion']);}),it(a0_0x41ba('0x2'),function(){let _0x281888=JSON[a0_0x41ba('0x27')](a0_0x41ba('0x30'));_0x176610['nodes'][0x1]['processRecord'](_0x281888);for(let _0x342e79=0x1;_0x342e79<=0x49;_0x342e79++){_0x281888[a0_0x41ba('0x2d')]=_0x342e79*0x3c*0x3c*0x3e8,_0x281888[a0_0x41ba('0x17')]=_0x342e79%0x18,_0x281888[a0_0x41ba('0x25')]=Math['floor'](_0x342e79/0x18)+0x1,_0x281888[a0_0x41ba('0x34')]=Math[a0_0x41ba('0x13')](_0x342e79/0x18)+0x2,_0x281888['dayOfMonth']=Math['floor'](_0x342e79/0x18)+0x1,_0x281888['dayOfYear']=Math[a0_0x41ba('0x13')](_0x342e79/0x18)+0x1,_0x281888[a0_0x41ba('0x16')]=0x0,_0x176610[a0_0x41ba('0x3b')][0x1][a0_0x41ba('0x36')](_0x281888);}for(let _0x39930a=0x1;_0x39930a<=0x30;_0x39930a++){let _0x29c10f=_0x39930a*0x3c*0x3c;_0x176610[a0_0x41ba('0x3b')][0x0][a0_0x41ba('0x36')]({'time':_0x29c10f,'value':_0x39930a});}_0x176610[a0_0x41ba('0x3b')][0x0]['setMasterOffset'](),_0x176610[a0_0x41ba('0x3b')][0x1][a0_0x41ba('0x1')](0x0),assert[a0_0x41ba('0xd')](_0x176610[a0_0x41ba('0x3b')][0x0]['getOffsetTimestamp'](),0x30*0x3c*0x3c*0x3e8),assert[a0_0x41ba('0xf')](_0x176610['buildFeatureVector'](),[0x30,0x2d,0x2a,0x30,4.666666666666667,0x24,0x18,0x30,54.166666666666664,0x18,0x1,0x0,0x0,0x0,0x0,0x5,0x4,0x1]),assert[a0_0x41ba('0xd')](_0x176610[a0_0x41ba('0x32')],0x30*0x3c*0x3c*0x3e8);});});});