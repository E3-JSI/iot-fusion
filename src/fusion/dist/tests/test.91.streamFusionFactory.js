var _0x2aad=['check\x20features\x20topic\x20name','topic','features_N1_24h','check\x20types\x20of\x20nodes','name','streamingTimeValueNode','constructor','global\x20config\x20correct','deepEqual','config','feature\x20vector\x20ok','parse','{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x200,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}','timestamp','floor','dayOfMonth','processRecord','setMasterOffset','setSlaveOffset','getOffsetTimestamp','buildFeatureVector','lastTimestamp','../common/utils/fileManager.js','../streamFusion.js','qminer','192.168.85.98:2181','value','winbuf','max','min','variance','holiday','N1_24h','value|ma|21600000','value|min|21600000','value|max|21600000','value|ma|86400000','value|min|86400000','value|variance|86400000','static','timeOfDay','weekEnd','dayAfterHoliday','dayBeforeHoliday','dayOfWeek','dayOfYear','monthOfYear','streamFusion','removeFolder','./db-1/','fusion','initialization','base\x20saved','base','object','check\x20number\x20of\x20fusion\x20objects','equal','nodes','length','getStats','stores','check\x20fusion\x20model\x20name'];(function(_0x5646d2,_0x57e78c){var _0x1e98e3=function(_0x5adb7d){while(--_0x5adb7d){_0x5646d2['push'](_0x5646d2['shift']());}};var _0x4fd4d7=function(){var _0x3e11b5={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x429043,_0x2875a5,_0x24d1d4,_0x185255){_0x185255=_0x185255||{};var _0x629ca2=_0x2875a5+'='+_0x24d1d4;var _0x440f0e=0x0;for(var _0x440f0e=0x0,_0x2163b7=_0x429043['length'];_0x440f0e<_0x2163b7;_0x440f0e++){var _0x51d240=_0x429043[_0x440f0e];_0x629ca2+=';\x20'+_0x51d240;var _0x5656ab=_0x429043[_0x51d240];_0x429043['push'](_0x5656ab);_0x2163b7=_0x429043['length'];if(_0x5656ab!==!![]){_0x629ca2+='='+_0x5656ab;}}_0x185255['cookie']=_0x629ca2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x55d8f9,_0x291ae7){_0x55d8f9=_0x55d8f9||function(_0x19cda7){return _0x19cda7;};var _0x5918d1=_0x55d8f9(new RegExp('(?:^|;\x20)'+_0x291ae7['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x1e9394=function(_0x3175f6,_0x6b2b0d){_0x3175f6(++_0x6b2b0d);};_0x1e9394(_0x1e98e3,_0x57e78c);return _0x5918d1?decodeURIComponent(_0x5918d1[0x1]):undefined;}};var _0x554e44=function(){var _0x398015=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x398015['test'](_0x3e11b5['removeCookie']['toString']());};_0x3e11b5['updateCookie']=_0x554e44;var _0x43cbcf='';var _0x30e080=_0x3e11b5['updateCookie']();if(!_0x30e080){_0x3e11b5['setCookie'](['*'],'counter',0x1);}else if(_0x30e080){_0x43cbcf=_0x3e11b5['getCookie'](null,'counter');}else{_0x3e11b5['removeCookie']();}};_0x4fd4d7();}(_0x2aad,0x14c));var _0x4e31=function(_0x385742,_0x37de18){_0x385742=_0x385742-0x0;var _0x24bb7d=_0x2aad[_0x385742];return _0x24bb7d;};var _0x85a109=function(){var _0x15e3cb=!![];return function(_0x2e5105,_0x19d423){var _0x33b2c7=_0x15e3cb?function(){if(_0x19d423){var _0x465d35=_0x19d423['apply'](_0x2e5105,arguments);_0x19d423=null;return _0x465d35;}}:function(){};_0x15e3cb=![];return _0x33b2c7;};}();var _0x4f6f22=_0x85a109(this,function(){var _0xbd2a28=function(){return'\x64\x65\x76';},_0x1e6267=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x591dc9=function(){var _0x2916ff=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x2916ff['\x74\x65\x73\x74'](_0xbd2a28['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3b0f99=function(){var _0x3cdf47=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3cdf47['\x74\x65\x73\x74'](_0x1e6267['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2e7400=function(_0x2299d7){var _0x1e8238=~-0x1>>0x1+0xff%0x0;if(_0x2299d7['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1e8238)){_0x2d0787(_0x2299d7);}};var _0x2d0787=function(_0x3ee167){var _0x421ec5=~-0x4>>0x1+0xff%0x0;if(_0x3ee167['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x421ec5){_0x2e7400(_0x3ee167);}};if(!_0x591dc9()){if(!_0x3b0f99()){_0x2e7400('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x2e7400('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x2e7400('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x4f6f22();const fileManager=require(_0x4e31('0x0'));const StreamFusion=require(_0x4e31('0x1'));const qm=require(_0x4e31('0x2'));const fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':_0x4e31('0x3')};let smConf={'aggr':{'timevalue':[{'field':_0x4e31('0x4'),'tick':[{'type':_0x4e31('0x5'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4e31('0x6')},{'type':_0x4e31('0x7')},{'type':_0x4e31('0x8')}]},{'type':_0x4e31('0x5'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4e31('0x6')},{'type':_0x4e31('0x7')},{'type':_0x4e31('0x8')}]},{'type':_0x4e31('0x5'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4e31('0x6')},{'type':_0x4e31('0x7')},{'type':_0x4e31('0x8')}]}]}],'static':[{'field':_0x4e31('0x9'),'tick':[{'type':_0x4e31('0x5'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},'fusion':{'fusionModel':_0x4e31('0xa'),'connection':{'type':'none'},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'timevalue','nodeid':'N1','aggrConfigId':'timevalue','master':!![],'fusionTick':0x3c*0x3c*0x3e8,'attributes':[{'time':0x0,'attributes':[{'type':_0x4e31('0x4'),'name':_0x4e31('0x4')},{'type':'value','name':_0x4e31('0xb')},{'type':_0x4e31('0x4'),'name':_0x4e31('0xc')},{'type':_0x4e31('0x4'),'name':_0x4e31('0xd')},{'type':_0x4e31('0x4'),'name':'value|variance|21600000'},{'type':'value','name':_0x4e31('0xe')},{'type':_0x4e31('0x4'),'name':_0x4e31('0xf')},{'type':_0x4e31('0x4'),'name':'value|max|86400000'},{'type':'value','name':_0x4e31('0x10')}]},{'time':-0x18,'attributes':[{'type':'value','name':_0x4e31('0x4')}]}]},{'type':_0x4e31('0x11'),'nodeid':'S1','aggrConfigId':'static','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':_0x4e31('0x4'),'name':_0x4e31('0x12')},{'type':'value','name':_0x4e31('0x13')},{'type':_0x4e31('0x4'),'name':'holiday'},{'type':_0x4e31('0x4'),'name':_0x4e31('0x14')},{'type':_0x4e31('0x4'),'name':_0x4e31('0x15')},{'type':_0x4e31('0x4'),'name':_0x4e31('0x16')},{'type':_0x4e31('0x4'),'name':_0x4e31('0x17')},{'type':_0x4e31('0x4'),'name':_0x4e31('0x18')}]}]}]}};describe(_0x4e31('0x19'),function(){let _0x13c8f8;before(function(){fileManager[_0x4e31('0x1a')](_0x4e31('0x1b'));fileManager['createFolder'](_0x4e31('0x1b'));_0x13c8f8=new StreamFusion(connectionConfig,smConf[_0x4e31('0x1c')],smConf['aggr']);});after(function(){});describe(_0x4e31('0x1d'),function(){it(_0x4e31('0x1e'),function(){assert['equal'](typeof _0x13c8f8[_0x4e31('0x1f')],_0x4e31('0x20'));});it(_0x4e31('0x21'),function(){assert[_0x4e31('0x22')](_0x13c8f8[_0x4e31('0x23')][_0x4e31('0x24')],0x2);});it('check\x20number\x20of\x20stores',function(){assert[_0x4e31('0x22')](_0x13c8f8[_0x4e31('0x1f')][_0x4e31('0x25')]()[_0x4e31('0x26')][_0x4e31('0x24')],0x2);});it(_0x4e31('0x27'),function(){assert[_0x4e31('0x22')](_0x13c8f8['fusion_id'],_0x4e31('0xa'));});it(_0x4e31('0x28'),function(){assert['equal'](_0x13c8f8[_0x4e31('0x29')],_0x4e31('0x2a'));});it(_0x4e31('0x2b'),function(){assert[_0x4e31('0x22')](_0x13c8f8[_0x4e31('0x23')][0x0]['constructor'][_0x4e31('0x2c')],_0x4e31('0x2d'));assert[_0x4e31('0x22')](_0x13c8f8[_0x4e31('0x23')][0x1][_0x4e31('0x2e')][_0x4e31('0x2c')],'streamingStaticNode');});it(_0x4e31('0x2f'),function(){assert[_0x4e31('0x30')](_0x13c8f8[_0x4e31('0x31')],smConf['fusion']);});it(_0x4e31('0x32'),function(){let _0x3129a9=JSON[_0x4e31('0x33')](_0x4e31('0x34'));_0x13c8f8['nodes'][0x1]['processRecord'](_0x3129a9);for(let _0x2384bc=0x1;_0x2384bc<=0x49;_0x2384bc++){_0x3129a9[_0x4e31('0x35')]=_0x2384bc*0x3c*0x3c*0x3e8;_0x3129a9[_0x4e31('0x12')]=_0x2384bc%0x18;_0x3129a9[_0x4e31('0x17')]=Math['floor'](_0x2384bc/0x18)+0x1;_0x3129a9[_0x4e31('0x16')]=Math[_0x4e31('0x36')](_0x2384bc/0x18)+0x2;_0x3129a9[_0x4e31('0x37')]=Math[_0x4e31('0x36')](_0x2384bc/0x18)+0x1;_0x3129a9[_0x4e31('0x17')]=Math[_0x4e31('0x36')](_0x2384bc/0x18)+0x1;_0x3129a9[_0x4e31('0x9')]=0x0;_0x13c8f8[_0x4e31('0x23')][0x1][_0x4e31('0x38')](_0x3129a9);}for(let _0xfb4594=0x1;_0xfb4594<=0x30;_0xfb4594++){let _0x462b19=_0xfb4594*0x3c*0x3c;_0x13c8f8['nodes'][0x0]['processRecord']({'time':_0x462b19,'value':_0xfb4594});}_0x13c8f8[_0x4e31('0x23')][0x0][_0x4e31('0x39')]();_0x13c8f8[_0x4e31('0x23')][0x1][_0x4e31('0x3a')](0x0);assert['equal'](_0x13c8f8[_0x4e31('0x23')][0x0][_0x4e31('0x3b')](),0x30*0x3c*0x3c*0x3e8);assert['deepEqual'](_0x13c8f8[_0x4e31('0x3c')](),[0x30,0x2d,0x2a,0x30,4.666666666666667,0x24,0x18,0x30,54.166666666666664,0x18,0x1,0x0,0x0,0x0,0x0,0x5,0x4,0x1]);assert[_0x4e31('0x22')](_0x13c8f8[_0x4e31('0x3d')],0x30*0x3c*0x3c*0x3e8);});});});