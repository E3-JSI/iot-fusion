var _0x185d=['base','stores','check\x20fusion\x20model\x20name','fusion_id','check\x20features\x20topic\x20name','topic','constructor','name','streamingTimeValueNode','streamingStaticNode','global\x20config\x20correct','deepEqual','feature\x20vector\x20ok','parse','timestamp','dayOfYear','floor','dayOfMonth','processRecord','getOffsetTimestamp','buildFeatureVector','lastTimestamp','qminer','192.168.85.98:2181','value','winbuf','max','min','variance','holiday','N1_24h','none','timevalue','value|ma|21600000','value|max|21600000','value|variance|21600000','value|ma|86400000','value|min|86400000','value|max|86400000','value|variance|86400000','static','timeOfDay','weekEnd','dayAfterHoliday','dayBeforeHoliday','dayOfWeek','streamFusion','./db-1/','fusion','aggr','initialization','equal','object','check\x20number\x20of\x20fusion\x20objects','nodes','length','check\x20number\x20of\x20stores'];(function(_0x4afa60,_0x42b64c){var _0x4b6b58=function(_0x16ad7c){while(--_0x16ad7c){_0x4afa60['push'](_0x4afa60['shift']());}};var _0x116784=function(){var _0x4da3fb={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2f44c6,_0x4cc0d3,_0x13bcdc,_0x5eb770){_0x5eb770=_0x5eb770||{};var _0x1dddbf=_0x4cc0d3+'='+_0x13bcdc;var _0xf55976=0x0;for(var _0xf55976=0x0,_0x1c7cc8=_0x2f44c6['length'];_0xf55976<_0x1c7cc8;_0xf55976++){var _0x4b105d=_0x2f44c6[_0xf55976];_0x1dddbf+=';\x20'+_0x4b105d;var _0x1c6234=_0x2f44c6[_0x4b105d];_0x2f44c6['push'](_0x1c6234);_0x1c7cc8=_0x2f44c6['length'];if(_0x1c6234!==!![]){_0x1dddbf+='='+_0x1c6234;}}_0x5eb770['cookie']=_0x1dddbf;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2f658c,_0x503bd4){_0x2f658c=_0x2f658c||function(_0x82572){return _0x82572;};var _0x107624=_0x2f658c(new RegExp('(?:^|;\x20)'+_0x503bd4['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x11629a=function(_0x217004,_0x56bf2e){_0x217004(++_0x56bf2e);};_0x11629a(_0x4b6b58,_0x42b64c);return _0x107624?decodeURIComponent(_0x107624[0x1]):undefined;}};var _0x44652d=function(){var _0x3ac89e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3ac89e['test'](_0x4da3fb['removeCookie']['toString']());};_0x4da3fb['updateCookie']=_0x44652d;var _0x394068='';var _0x24b241=_0x4da3fb['updateCookie']();if(!_0x24b241){_0x4da3fb['setCookie'](['*'],'counter',0x1);}else if(_0x24b241){_0x394068=_0x4da3fb['getCookie'](null,'counter');}else{_0x4da3fb['removeCookie']();}};_0x116784();}(_0x185d,0x133));var _0x4ee3=function(_0x3b7a63,_0xe7e4e2){_0x3b7a63=_0x3b7a63-0x0;var _0x5d3430=_0x185d[_0x3b7a63];return _0x5d3430;};var _0x38183b=function(){var _0xa355b=!![];return function(_0x5267fd,_0x3a47cb){var _0x3427cd=_0xa355b?function(){if(_0x3a47cb){var _0x5a2400=_0x3a47cb['apply'](_0x5267fd,arguments);_0x3a47cb=null;return _0x5a2400;}}:function(){};_0xa355b=![];return _0x3427cd;};}();var _0x456d25=_0x38183b(this,function(){var _0x344f48=function(){return'\x64\x65\x76';},_0x31a60c=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0xe9db8a=function(){var _0x1d6b1c=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1d6b1c['\x74\x65\x73\x74'](_0x344f48['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4a28a3=function(){var _0x35544e=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x35544e['\x74\x65\x73\x74'](_0x31a60c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x282963=function(_0x5a4bb6){var _0x272bac=~-0x1>>0x1+0xff%0x0;if(_0x5a4bb6['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x272bac)){_0x5265a8(_0x5a4bb6);}};var _0x5265a8=function(_0x5b22ef){var _0x1dd13f=~-0x4>>0x1+0xff%0x0;if(_0x5b22ef['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1dd13f){_0x282963(_0x5b22ef);}};if(!_0xe9db8a()){if(!_0x4a28a3()){_0x282963('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x282963('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x282963('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x456d25();const fileManager=require('../common/utils/fileManager.js');const StreamFusion=require('../streamFusion.js');const qm=require(_0x4ee3('0x0'));const fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':_0x4ee3('0x1')};let smConf={'aggr':{'timevalue':[{'field':_0x4ee3('0x2'),'tick':[{'type':_0x4ee3('0x3'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4ee3('0x4')},{'type':_0x4ee3('0x5')},{'type':_0x4ee3('0x6')}]},{'type':_0x4ee3('0x3'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':_0x4ee3('0x4')},{'type':_0x4ee3('0x5')},{'type':_0x4ee3('0x6')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'max'},{'type':_0x4ee3('0x5')},{'type':_0x4ee3('0x6')}]}]}],'static':[{'field':_0x4ee3('0x7'),'tick':[{'type':_0x4ee3('0x3'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},'fusion':{'fusionModel':_0x4ee3('0x8'),'connection':{'type':_0x4ee3('0x9')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0x4ee3('0xa'),'nodeid':'N1','aggrConfigId':'timevalue','master':!![],'fusionTick':0x3c*0x3c*0x3e8,'attributes':[{'time':0x0,'attributes':[{'type':'value','name':'value'},{'type':'value','name':_0x4ee3('0xb')},{'type':'value','name':'value|min|21600000'},{'type':'value','name':_0x4ee3('0xc')},{'type':_0x4ee3('0x2'),'name':_0x4ee3('0xd')},{'type':_0x4ee3('0x2'),'name':_0x4ee3('0xe')},{'type':'value','name':_0x4ee3('0xf')},{'type':'value','name':_0x4ee3('0x10')},{'type':_0x4ee3('0x2'),'name':_0x4ee3('0x11')}]},{'time':-0x18,'attributes':[{'type':_0x4ee3('0x2'),'name':_0x4ee3('0x2')}]}]},{'type':_0x4ee3('0x12'),'nodeid':'S1','aggrConfigId':_0x4ee3('0x12'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':_0x4ee3('0x2'),'name':_0x4ee3('0x13')},{'type':_0x4ee3('0x2'),'name':_0x4ee3('0x14')},{'type':_0x4ee3('0x2'),'name':_0x4ee3('0x7')},{'type':_0x4ee3('0x2'),'name':_0x4ee3('0x15')},{'type':_0x4ee3('0x2'),'name':_0x4ee3('0x16')},{'type':'value','name':_0x4ee3('0x17')},{'type':_0x4ee3('0x2'),'name':'dayOfYear'},{'type':_0x4ee3('0x2'),'name':'monthOfYear'}]}]}]}};describe(_0x4ee3('0x18'),function(){let _0x58c90e;before(function(){fileManager['removeFolder'](_0x4ee3('0x19'));fileManager['createFolder'](_0x4ee3('0x19'));_0x58c90e=new StreamFusion(connectionConfig,smConf[_0x4ee3('0x1a')],smConf[_0x4ee3('0x1b')]);});after(function(){});describe(_0x4ee3('0x1c'),function(){it('base\x20saved',function(){assert[_0x4ee3('0x1d')](typeof _0x58c90e['base'],_0x4ee3('0x1e'));});it(_0x4ee3('0x1f'),function(){assert[_0x4ee3('0x1d')](_0x58c90e[_0x4ee3('0x20')][_0x4ee3('0x21')],0x2);});it(_0x4ee3('0x22'),function(){assert[_0x4ee3('0x1d')](_0x58c90e[_0x4ee3('0x23')]['getStats']()[_0x4ee3('0x24')][_0x4ee3('0x21')],0x2);});it(_0x4ee3('0x25'),function(){assert['equal'](_0x58c90e[_0x4ee3('0x26')],_0x4ee3('0x8'));});it(_0x4ee3('0x27'),function(){assert[_0x4ee3('0x1d')](_0x58c90e[_0x4ee3('0x28')],'features_N1_24h');});it('check\x20types\x20of\x20nodes',function(){assert[_0x4ee3('0x1d')](_0x58c90e['nodes'][0x0][_0x4ee3('0x29')][_0x4ee3('0x2a')],_0x4ee3('0x2b'));assert[_0x4ee3('0x1d')](_0x58c90e[_0x4ee3('0x20')][0x1][_0x4ee3('0x29')][_0x4ee3('0x2a')],_0x4ee3('0x2c'));});it(_0x4ee3('0x2d'),function(){assert[_0x4ee3('0x2e')](_0x58c90e['config'],smConf[_0x4ee3('0x1a')]);});it(_0x4ee3('0x2f'),function(){let _0x2a4533=JSON[_0x4ee3('0x30')]('{\x22timestamp\x22:0,\x20\x22timeOfDay\x22:\x200,\x20\x22dayAfterHoliday\x22:\x200,\x20\x22dayBeforeHoliday\x22:\x200,\x20\x22dayOfYear\x22:\x201,\x20\x22dayOfWeek\x22:\x202,\x20\x22dayOfMonth\x22:\x201,\x20\x22holiday\x22:\x201,\x20\x22monthOfYear\x22:\x201,\x20\x22weekEnd\x22:\x200\x20}');_0x58c90e[_0x4ee3('0x20')][0x1]['processRecord'](_0x2a4533);for(let _0xe50329=0x1;_0xe50329<=0x49;_0xe50329++){_0x2a4533[_0x4ee3('0x31')]=_0xe50329*0x3c*0x3c*0x3e8;_0x2a4533['timeOfDay']=_0xe50329%0x18;_0x2a4533[_0x4ee3('0x32')]=Math[_0x4ee3('0x33')](_0xe50329/0x18)+0x1;_0x2a4533[_0x4ee3('0x17')]=Math['floor'](_0xe50329/0x18)+0x2;_0x2a4533[_0x4ee3('0x34')]=Math['floor'](_0xe50329/0x18)+0x1;_0x2a4533[_0x4ee3('0x32')]=Math[_0x4ee3('0x33')](_0xe50329/0x18)+0x1;_0x2a4533[_0x4ee3('0x7')]=0x0;_0x58c90e['nodes'][0x1]['processRecord'](_0x2a4533);}for(let _0x533c74=0x1;_0x533c74<=0x30;_0x533c74++){let _0x18f7ce=_0x533c74*0x3c*0x3c;_0x58c90e['nodes'][0x0][_0x4ee3('0x35')]({'time':_0x18f7ce,'value':_0x533c74});}_0x58c90e['nodes'][0x0]['setMasterOffset']();_0x58c90e[_0x4ee3('0x20')][0x1]['setSlaveOffset'](0x0);assert['equal'](_0x58c90e[_0x4ee3('0x20')][0x0][_0x4ee3('0x36')](),0x30*0x3c*0x3c*0x3e8);assert[_0x4ee3('0x2e')](_0x58c90e[_0x4ee3('0x37')](),[0x30,0x2d,0x2a,0x30,4.666666666666667,0x24,0x18,0x30,54.166666666666664,0x18,0x1,0x0,0x0,0x0,0x0,0x5,0x4,0x1]);assert['equal'](_0x58c90e[_0x4ee3('0x38')],0x30*0x3c*0x3c*0x3e8);});});});