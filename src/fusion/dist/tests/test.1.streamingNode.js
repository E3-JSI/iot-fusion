var _0x26ca=['../nodes/streamingStaticNode.js','../../common/utils/fileManager.js','192.168.85.98:2181','winbuf','variance','min','max','holiday','none','test','energy','value','pc|ma|86400000','pc|ma|604800000','pc|ma|2592000000','pc|min|604800000','pc|max|86400000','pc|variance|86400000','pc|variance|604800000','static','weekEnd','dayAfterHoliday','dayBeforeHoliday','dayOfWeek','dayOfYear','weather','temperature24','windSpeed24','cloudCover24','streamingNode','removeFolder','./db2/','Base','nodes','close','initialization','base\x20saved','equal','aggregates\x20initialized','deepEqual','aggregate','config\x20saved','config','fusionNodeI\x20correctly\x20saved','fusionNodeI','callback\x20function\x20should\x20be\x20set','processRecordCb','parent\x20saved','parent','buffer','buffer\x20position\x20is\x200','position','master\x20flag\x20set\x20correctly','isMaster\x20function','isMaster','function','broadcastAggregates\x20function\x20exists','createAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','deleteObsoleteRows','checkDataAvailability\x20function\x20exists','setSlaveOffset\x20function\x20exists','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20set\x20correctly','slave\x20offset\x20set\x20correctly:\x20no\x20data','setSlaveOffset','../nodes/streamingNode.js'];(function(_0x12e1f7,_0x472e24){var _0x27f2f3=function(_0x2a9557){while(--_0x2a9557){_0x12e1f7['push'](_0x12e1f7['shift']());}};var _0x327c31=function(){var _0x4f426c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x588a4a,_0x38213f,_0xe9ccb2,_0x3267bb){_0x3267bb=_0x3267bb||{};var _0x4e1ec3=_0x38213f+'='+_0xe9ccb2;var _0x6065a0=0x0;for(var _0x6065a0=0x0,_0xd6fc7d=_0x588a4a['length'];_0x6065a0<_0xd6fc7d;_0x6065a0++){var _0x2a7a44=_0x588a4a[_0x6065a0];_0x4e1ec3+=';\x20'+_0x2a7a44;var _0x274bc2=_0x588a4a[_0x2a7a44];_0x588a4a['push'](_0x274bc2);_0xd6fc7d=_0x588a4a['length'];if(_0x274bc2!==!![]){_0x4e1ec3+='='+_0x274bc2;}}_0x3267bb['cookie']=_0x4e1ec3;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4aca84,_0x45af5c){_0x4aca84=_0x4aca84||function(_0x4dbf82){return _0x4dbf82;};var _0x59d919=_0x4aca84(new RegExp('(?:^|;\x20)'+_0x45af5c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0xa758ad=function(_0x591273,_0x5bd665){_0x591273(++_0x5bd665);};_0xa758ad(_0x27f2f3,_0x472e24);return _0x59d919?decodeURIComponent(_0x59d919[0x1]):undefined;}};var _0x1c3ebe=function(){var _0x5490c3=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5490c3['test'](_0x4f426c['removeCookie']['toString']());};_0x4f426c['updateCookie']=_0x1c3ebe;var _0x5e1371='';var _0x5033c6=_0x4f426c['updateCookie']();if(!_0x5033c6){_0x4f426c['setCookie'](['*'],'counter',0x1);}else if(_0x5033c6){_0x5e1371=_0x4f426c['getCookie'](null,'counter');}else{_0x4f426c['removeCookie']();}};_0x327c31();}(_0x26ca,0x176));var _0x1a56=function(_0x12b02d,_0x438b09){_0x12b02d=_0x12b02d-0x0;var _0x41a731=_0x26ca[_0x12b02d];return _0x41a731;};var _0x49222c=function(){var _0x35e70b=!![];return function(_0x232222,_0x3aeab0){var _0x6eeea5=_0x35e70b?function(){if(_0x3aeab0){var _0x191706=_0x3aeab0['apply'](_0x232222,arguments);_0x3aeab0=null;return _0x191706;}}:function(){};_0x35e70b=![];return _0x6eeea5;};}();var _0x11dd50=_0x49222c(this,function(){var _0x48b599=function(){return'\x64\x65\x76';},_0x3fcb65=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x5c90f5=function(){var _0x52b06a=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x52b06a['\x74\x65\x73\x74'](_0x48b599['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x371d7c=function(){var _0x5dba41=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x5dba41['\x74\x65\x73\x74'](_0x3fcb65['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4940ea=function(_0x513992){var _0x5dd453=~-0x1>>0x1+0xff%0x0;if(_0x513992['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5dd453)){_0x34e17f(_0x513992);}};var _0x34e17f=function(_0x37c922){var _0x30806c=~-0x4>>0x1+0xff%0x0;if(_0x37c922['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x30806c){_0x4940ea(_0x37c922);}};if(!_0x5c90f5()){if(!_0x371d7c()){_0x4940ea('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x4940ea('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x4940ea('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x11dd50();const streamingNode=require(_0x1a56('0x0'));const streamingEnergyNode=require('../nodes/streamingEnergyNode.js');const streamingWeatherNode=require('../nodes/streamingWeatherNode.js');const streamingStaticNode=require(_0x1a56('0x1'));const fileManager=require(_0x1a56('0x2'));const qm=require('qminer');const fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':_0x1a56('0x3')};let aggrConfigs={'energy':[{'field':'pc','tick':[{'type':_0x1a56('0x4'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x1a56('0x4'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':_0x1a56('0x5')},{'type':'ma'}]},{'type':_0x1a56('0x4'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x1a56('0x5')},{'type':'ma'},{'type':_0x1a56('0x6')},{'type':_0x1a56('0x7')}]},{'type':_0x1a56('0x4'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x1a56('0x5')},{'type':'ma'},{'type':'min'},{'type':_0x1a56('0x7')}]},{'type':_0x1a56('0x4'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':_0x1a56('0x8'),'tick':[{'type':_0x1a56('0x4'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'connection':{'type':_0x1a56('0x9')},'fusionModel':_0x1a56('0xa'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'energy','nodeid':'N1','aggrConfigId':_0x1a56('0xb'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x1a56('0xc'),'name':'pc'},{'type':'value','name':'pc|ma|3600000'},{'type':_0x1a56('0xc'),'name':'pc|ma|21600000'},{'type':'value','name':_0x1a56('0xd')},{'type':_0x1a56('0xc'),'name':_0x1a56('0xe')},{'type':_0x1a56('0xc'),'name':_0x1a56('0xf')},{'type':_0x1a56('0xc'),'name':'pc|min|86400000'},{'type':_0x1a56('0xc'),'name':_0x1a56('0x10')},{'type':'value','name':_0x1a56('0x11')},{'type':'value','name':'pc|max|604800000'},{'type':_0x1a56('0xc'),'name':'pc|variance|21600000'},{'type':_0x1a56('0xc'),'name':_0x1a56('0x12')},{'type':_0x1a56('0xc'),'name':_0x1a56('0x13')}]},{'time':-0x18,'attributes':[{'type':_0x1a56('0xc'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':_0x1a56('0xc'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':_0x1a56('0xc'),'name':'pc'}]}]},{'type':'static','nodeid':_0x1a56('0x14'),'aggrConfigId':_0x1a56('0x14'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':_0x1a56('0xc'),'name':'timeOfDay'},{'type':_0x1a56('0xc'),'name':_0x1a56('0x15')},{'type':_0x1a56('0xc'),'name':_0x1a56('0x8')},{'type':_0x1a56('0xc'),'name':_0x1a56('0x16')},{'type':_0x1a56('0xc'),'name':_0x1a56('0x17')},{'type':_0x1a56('0xc'),'name':_0x1a56('0x18')},{'type':'value','name':_0x1a56('0x19')},{'type':_0x1a56('0xc'),'name':'monthOfYear'}]}]},{'type':_0x1a56('0x1a'),'nodeid':'weather','aggrConfigId':'weather','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':_0x1a56('0xc'),'name':_0x1a56('0x1b')},{'type':_0x1a56('0xc'),'name':'humidity24'},{'type':_0x1a56('0xc'),'name':'pressure24'},{'type':_0x1a56('0xc'),'name':_0x1a56('0x1c')},{'type':_0x1a56('0xc'),'name':'windBearing24'},{'type':_0x1a56('0xc'),'name':_0x1a56('0x1d')}]}]}]};describe(_0x1a56('0x1e'),function(){let _0x27d33e;let _0x445864;before(function(){fileManager[_0x1a56('0x1f')](_0x1a56('0x20'));fileManager['createFolder'](_0x1a56('0x20'));_0x27d33e=new qm[(_0x1a56('0x21'))]({'dbPath':_0x1a56('0x20'),'mode':'createClean'});_0x445864=new streamingNode(_0x27d33e,connectionConfig,fusionConfig[_0x1a56('0x22')][0x0],aggrConfigs,null,0x63,null);});after(function(){_0x27d33e[_0x1a56('0x23')]();});describe(_0x1a56('0x24'),function(){it(_0x1a56('0x25'),function(){assert[_0x1a56('0x26')](_0x27d33e,_0x445864['base']);});it(_0x1a56('0x27'),function(){assert[_0x1a56('0x28')](_0x445864[_0x1a56('0x29')],{});});it(_0x1a56('0x2a'),function(){assert[_0x1a56('0x28')](_0x445864[_0x1a56('0x2b')],fusionConfig[_0x1a56('0x22')][0x0]);});it(_0x1a56('0x2c'),function(){assert['equal'](_0x445864[_0x1a56('0x2d')],0x63);});it(_0x1a56('0x2e'),function(){assert[_0x1a56('0x26')](_0x445864[_0x1a56('0x2f')],null);});it(_0x1a56('0x30'),function(){assert[_0x1a56('0x26')](_0x445864[_0x1a56('0x31')],null);});it('buffer\x20empty',function(){assert[_0x1a56('0x28')](_0x445864[_0x1a56('0x32')],[]);});it(_0x1a56('0x33'),function(){assert[_0x1a56('0x26')](_0x445864[_0x1a56('0x34')],0x0);});it(_0x1a56('0x35'),function(){assert[_0x1a56('0x26')](_0x445864['master'],!![]);});it(_0x1a56('0x36'),function(){assert[_0x1a56('0x26')](_0x445864[_0x1a56('0x37')](),!![]);});it('connectToKafka\x20function\x20exists',function(){assert[_0x1a56('0x26')](typeof _0x445864['connectToKafka'],_0x1a56('0x38'));});it(_0x1a56('0x39'),function(){assert['equal'](typeof _0x445864['broadcastAggregates'],'function');});it(_0x1a56('0x3a'),function(){assert['equal'](typeof _0x445864[_0x1a56('0x3b')],_0x1a56('0x38'));});it(_0x1a56('0x3c'),function(){assert[_0x1a56('0x26')](typeof _0x445864[_0x1a56('0x3d')],_0x1a56('0x38'));});it(_0x1a56('0x3e'),function(){assert['equal'](typeof _0x445864[_0x1a56('0x3f')],'function');});it(_0x1a56('0x40'),function(){assert['equal'](typeof _0x445864['checkDataAvailability'],'function');});it(_0x1a56('0x41'),function(){assert['equal'](typeof _0x445864['setSlaveOffset'],_0x1a56('0x38'));});it(_0x1a56('0x42'),function(){assert[_0x1a56('0x26')](typeof _0x445864[_0x1a56('0x43')],_0x1a56('0x38'));});it(_0x1a56('0x44'),function(){assert[_0x1a56('0x26')](typeof _0x445864['getOffsetTimestamp'],'function');});it('getAggregates\x20function\x20exists',function(){assert[_0x1a56('0x26')](typeof _0x445864[_0x1a56('0x45')],_0x1a56('0x38'));});it(_0x1a56('0x46'),function(){assert['equal'](typeof _0x445864[_0x1a56('0x47')],_0x1a56('0x38'));});it(_0x1a56('0x48'),function(){assert[_0x1a56('0x26')](_0x445864[_0x1a56('0x37')](),!![]);});it('master\x20offset\x20set\x20correctly',function(){_0x445864['setMasterOffset']();assert[_0x1a56('0x26')](_0x445864['position'],-0x1);});it(_0x1a56('0x49'),function(){assert[_0x1a56('0x26')](_0x445864[_0x1a56('0x4a')](0x0),![]);});});});