var _0x74b6=['checkDataAvailability','setSlaveOffset','getOffsetTimestamp\x20function\x20exists','setMasterOffset\x20function\x20exists','getOffsetTimestamp','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector','master\x20set\x20correctly','setMasterOffset','slave\x20offset\x20set\x20correctly:\x20no\x20data','../nodes/streamingNode.js','../nodes/streamingWeatherNode.js','qminer','assert','variance','winbuf','min','max','holiday','none','test','energy','value','pc|ma|3600000','pc|ma|21600000','pc|ma|86400000','pc|ma|604800000','pc|ma|2592000000','pc|min|604800000','pc|max|604800000','pc|variance|21600000','pc|variance|86400000','pc|variance|604800000','static','timeOfDay','weekEnd','dayAfterHoliday','dayBeforeHoliday','dayOfWeek','dayOfYear','monthOfYear','weather','temperature24','humidity24','pressure24','windBearing24','./db2/','Base','createClean','close','initialization','base\x20saved','equal','base','aggregates\x20initialized','deepEqual','config\x20saved','config','nodes','fusionNodeI\x20correctly\x20saved','parent\x20saved','parent','buffer\x20empty','buffer\x20position\x20is\x200','position','master\x20flag\x20set\x20correctly','master','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','function','broadcastAggregates\x20function\x20exists','broadcastAggregates','createAggregates\x20function\x20exists','offsetExists\x20function\x20exists','deleteObsoleteRows','checkDataAvailability\x20function\x20exists'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};var _0x33748d=function(){var _0x3e4c21={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5c685e,_0x3e3156,_0x1e9e81,_0x292610){_0x292610=_0x292610||{};var _0x151bd2=_0x3e3156+'='+_0x1e9e81;var _0x558098=0x0;for(var _0x558098=0x0,_0x230f38=_0x5c685e['length'];_0x558098<_0x230f38;_0x558098++){var _0x948b6c=_0x5c685e[_0x558098];_0x151bd2+=';\x20'+_0x948b6c;var _0x29929c=_0x5c685e[_0x948b6c];_0x5c685e['push'](_0x29929c);_0x230f38=_0x5c685e['length'];if(_0x29929c!==!![]){_0x151bd2+='='+_0x29929c;}}_0x292610['cookie']=_0x151bd2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5dd881,_0x550fbc){_0x5dd881=_0x5dd881||function(_0x18d5c9){return _0x18d5c9;};var _0x4ce2f1=_0x5dd881(new RegExp('(?:^|;\x20)'+_0x550fbc['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x333808=function(_0x432180,_0x2ab90b){_0x432180(++_0x2ab90b);};_0x333808(_0x4d74cb,_0x4b81bb);return _0x4ce2f1?decodeURIComponent(_0x4ce2f1[0x1]):undefined;}};var _0x991246=function(){var _0x981158=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x981158['test'](_0x3e4c21['removeCookie']['toString']());};_0x3e4c21['updateCookie']=_0x991246;var _0x57b080='';var _0x219af0=_0x3e4c21['updateCookie']();if(!_0x219af0){_0x3e4c21['setCookie'](['*'],'counter',0x1);}else if(_0x219af0){_0x57b080=_0x3e4c21['getCookie'](null,'counter');}else{_0x3e4c21['removeCookie']();}};_0x33748d();}(_0x74b6,0x143));var _0xbf7c=function(_0x354292,_0x1e5014){_0x354292=_0x354292-0x0;var _0x1079be=_0x74b6[_0x354292];return _0x1079be;};var _0x34564d=function(){var _0x5ee355=!![];return function(_0x5971b1,_0x487cf7){var _0x3f66e3=_0x5ee355?function(){if(_0x487cf7){var _0x4797f4=_0x487cf7['apply'](_0x5971b1,arguments);_0x487cf7=null;return _0x4797f4;}}:function(){};_0x5ee355=![];return _0x3f66e3;};}();var _0x1c34bb=_0x34564d(this,function(){var _0x912d0b=function(){return'\x64\x65\x76';},_0x357c86=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x217c04=function(){var _0x271243=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x271243['\x74\x65\x73\x74'](_0x912d0b['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x47b2e3=function(){var _0x2db35f=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x2db35f['\x74\x65\x73\x74'](_0x357c86['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x482c50=function(_0x1a86b6){var _0x395b32=~-0x1>>0x1+0xff%0x0;if(_0x1a86b6['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x395b32)){_0x1973bf(_0x1a86b6);}};var _0x1973bf=function(_0x5081ab){var _0xea2c3d=~-0x4>>0x1+0xff%0x0;if(_0x5081ab['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0xea2c3d){_0x482c50(_0x5081ab);}};if(!_0x217c04()){if(!_0x47b2e3()){_0x482c50('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x482c50('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x482c50('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1c34bb();const streamingNode=require(_0xbf7c('0x0'));const streamingEnergyNode=require('../nodes/streamingEnergyNode.js');const streamingWeatherNode=require(_0xbf7c('0x1'));const streamingStaticNode=require('../nodes/streamingStaticNode.js');const fileManager=require('../common/utils/fileManager.js');const qm=require(_0xbf7c('0x2'));const fs=require('fs');var assert=require(_0xbf7c('0x3'));let connectionConfig={'zookeeper':'192.168.85.98:2181'};let aggrConfigs={'energy':[{'field':'pc','tick':[{'type':'winbuf','winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':_0xbf7c('0x4')},{'type':'ma'}]},{'type':_0xbf7c('0x5'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0xbf7c('0x4')},{'type':'ma'},{'type':_0xbf7c('0x6')},{'type':_0xbf7c('0x7')}]},{'type':_0xbf7c('0x5'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0xbf7c('0x4')},{'type':'ma'},{'type':_0xbf7c('0x6')},{'type':_0xbf7c('0x7')}]},{'type':'winbuf','winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':_0xbf7c('0x8'),'tick':[{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'connection':{'type':_0xbf7c('0x9')},'fusionModel':_0xbf7c('0xa'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0xbf7c('0xb'),'nodeid':'N1','aggrConfigId':_0xbf7c('0xb'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0xbf7c('0xc'),'name':'pc'},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0xd')},{'type':'value','name':_0xbf7c('0xe')},{'type':'value','name':_0xbf7c('0xf')},{'type':'value','name':_0xbf7c('0x10')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x11')},{'type':_0xbf7c('0xc'),'name':'pc|min|86400000'},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x12')},{'type':'value','name':'pc|max|86400000'},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x13')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x14')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x15')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x16')}]},{'time':-0x18,'attributes':[{'type':'value','name':'pc'}]},{'time':-0x30,'attributes':[{'type':_0xbf7c('0xc'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':_0xbf7c('0xc'),'name':'pc'}]}]},{'type':'static','nodeid':_0xbf7c('0x17'),'aggrConfigId':'static','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x18')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x19')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x8')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x1a')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x1b')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x1c')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x1d')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x1e')}]}]},{'type':_0xbf7c('0x1f'),'nodeid':_0xbf7c('0x1f'),'aggrConfigId':'weather','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x20')},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x21')},{'type':'value','name':_0xbf7c('0x22')},{'type':_0xbf7c('0xc'),'name':'windSpeed24'},{'type':_0xbf7c('0xc'),'name':_0xbf7c('0x23')},{'type':_0xbf7c('0xc'),'name':'cloudCover24'}]}]}]};describe('streamingNode',function(){let _0x583a73;let _0x81b495;before(function(){fileManager['removeFolder'](_0xbf7c('0x24'));fileManager['createFolder']('./db2/');_0x583a73=new qm[(_0xbf7c('0x25'))]({'dbPath':_0xbf7c('0x24'),'mode':_0xbf7c('0x26')});_0x81b495=new streamingNode(_0x583a73,connectionConfig,fusionConfig['nodes'][0x0],aggrConfigs,null,0x63,null);});after(function(){_0x583a73[_0xbf7c('0x27')]();});describe(_0xbf7c('0x28'),function(){it(_0xbf7c('0x29'),function(){assert[_0xbf7c('0x2a')](_0x583a73,_0x81b495[_0xbf7c('0x2b')]);});it(_0xbf7c('0x2c'),function(){assert[_0xbf7c('0x2d')](_0x81b495['aggregate'],{});});it(_0xbf7c('0x2e'),function(){assert['deepEqual'](_0x81b495[_0xbf7c('0x2f')],fusionConfig[_0xbf7c('0x30')][0x0]);});it(_0xbf7c('0x31'),function(){assert['equal'](_0x81b495['fusionNodeI'],0x63);});it('callback\x20function\x20should\x20be\x20set',function(){assert[_0xbf7c('0x2a')](_0x81b495['processRecordCb'],null);});it(_0xbf7c('0x32'),function(){assert[_0xbf7c('0x2a')](_0x81b495[_0xbf7c('0x33')],null);});it(_0xbf7c('0x34'),function(){assert[_0xbf7c('0x2d')](_0x81b495['buffer'],[]);});it(_0xbf7c('0x35'),function(){assert[_0xbf7c('0x2a')](_0x81b495[_0xbf7c('0x36')],0x0);});it(_0xbf7c('0x37'),function(){assert[_0xbf7c('0x2a')](_0x81b495[_0xbf7c('0x38')],!![]);});it(_0xbf7c('0x39'),function(){assert[_0xbf7c('0x2a')](_0x81b495[_0xbf7c('0x3a')](),!![]);});it(_0xbf7c('0x3b'),function(){assert['equal'](typeof _0x81b495['connectToKafka'],_0xbf7c('0x3c'));});it(_0xbf7c('0x3d'),function(){assert[_0xbf7c('0x2a')](typeof _0x81b495[_0xbf7c('0x3e')],'function');});it(_0xbf7c('0x3f'),function(){assert[_0xbf7c('0x2a')](typeof _0x81b495['createAggregates'],'function');});it(_0xbf7c('0x40'),function(){assert['equal'](typeof _0x81b495['offsetExists'],'function');});it('deleteObsoleteRows\x20function\x20exists',function(){assert['equal'](typeof _0x81b495[_0xbf7c('0x41')],_0xbf7c('0x3c'));});it(_0xbf7c('0x42'),function(){assert['equal'](typeof _0x81b495[_0xbf7c('0x43')],'function');});it('setSlaveOffset\x20function\x20exists',function(){assert[_0xbf7c('0x2a')](typeof _0x81b495[_0xbf7c('0x44')],_0xbf7c('0x3c'));});it(_0xbf7c('0x45'),function(){assert[_0xbf7c('0x2a')](typeof _0x81b495['getOffsetTimestamp'],_0xbf7c('0x3c'));});it(_0xbf7c('0x46'),function(){assert[_0xbf7c('0x2a')](typeof _0x81b495[_0xbf7c('0x47')],_0xbf7c('0x3c'));});it(_0xbf7c('0x48'),function(){assert['equal'](typeof _0x81b495[_0xbf7c('0x49')],_0xbf7c('0x3c'));});it('getPartialFeatureVector\x20function\x20exists',function(){assert[_0xbf7c('0x2a')](typeof _0x81b495[_0xbf7c('0x4a')],_0xbf7c('0x3c'));});it(_0xbf7c('0x4b'),function(){assert[_0xbf7c('0x2a')](_0x81b495['isMaster'](),!![]);});it('master\x20offset\x20set\x20correctly',function(){_0x81b495[_0xbf7c('0x4c')]();assert[_0xbf7c('0x2a')](_0x81b495['position'],-0x1);});it(_0xbf7c('0x4d'),function(){assert['equal'](_0x81b495['setSlaveOffset'](0x0),![]);});});});