const a0_0x17df=['connectToKafka','test','constructor','windBearing24','value','createAggregates','aggregates\x20initialized','pc|max|86400000','weekEnd','fusionNodeI','apply','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','removeFolder','pc|min|604800000','static','equal','buffer','pc|variance|86400000','max','function','broadcastAggregates','timeOfDay','getPartialFeatureVector\x20function\x20exists','humidity24','offsetExists\x20function\x20exists','pc|ma|3600000','assert','pc|ma|86400000','base','base\x20saved','buffer\x20empty','dayOfYear','master\x20flag\x20set\x20correctly','checkDataAvailability\x20function\x20exists','dayAfterHoliday','dayOfWeek','none','config','initialization','deepEqual','getOffsetTimestamp\x20function\x20exists','pc|variance|21600000','createClean','../nodes/streamingStaticNode.js','getAggregates','parent','cloudCover24','pc|ma|604800000','dayBeforeHoliday','position','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Base','fusionNodeI\x20correctly\x20saved','connectToKafka\x20function\x20exists','setSlaveOffset\x20function\x20exists','monthOfYear','slave\x20offset\x20set\x20correctly:\x20no\x20data','setMasterOffset','buffer\x20position\x20is\x200','pc|variance|604800000','weather','config\x20saved','temperature24','nodes','../nodes/streamingEnergyNode.js','pc|ma|21600000','getPartialFeatureVector','isMaster','energy','pressure24','setSlaveOffset','pc|ma|2592000000','processRecordCb','winbuf','../nodes/streamingWeatherNode.js','deleteObsoleteRows\x20function\x20exists','aggregate','variance','getOffsetTimestamp','close','offsetExists','qminer','master\x20set\x20correctly'];(function(_0xd7884f,_0x17df86){const _0x5379ab=function(_0x45f832){while(--_0x45f832){_0xd7884f['push'](_0xd7884f['shift']());}},_0x476f58=function(){const _0x428494={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x308e0e,_0x58dc02,_0x451c11,_0x56aefc){_0x56aefc=_0x56aefc||{};let _0x2c9ece=_0x58dc02+'='+_0x451c11,_0x4e40be=0x0;for(let _0x2e4d3e=0x0,_0x550168=_0x308e0e['length'];_0x2e4d3e<_0x550168;_0x2e4d3e++){const _0x328da0=_0x308e0e[_0x2e4d3e];_0x2c9ece+=';\x20'+_0x328da0;const _0x84971e=_0x308e0e[_0x328da0];_0x308e0e['push'](_0x84971e),_0x550168=_0x308e0e['length'],_0x84971e!==!![]&&(_0x2c9ece+='='+_0x84971e);}_0x56aefc['cookie']=_0x2c9ece;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5d97ff,_0x42d873){_0x5d97ff=_0x5d97ff||function(_0x5bbaf3){return _0x5bbaf3;};const _0x2ca401=_0x5d97ff(new RegExp('(?:^|;\x20)'+_0x42d873['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x127e10=function(_0x38ceea,_0x425795){_0x38ceea(++_0x425795);};return _0x127e10(_0x5379ab,_0x17df86),_0x2ca401?decodeURIComponent(_0x2ca401[0x1]):undefined;}},_0x19fcab=function(){const _0x5b279e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5b279e['test'](_0x428494['removeCookie']['toString']());};_0x428494['updateCookie']=_0x19fcab;let _0x5066d7='';const _0x565e5a=_0x428494['updateCookie']();if(!_0x565e5a)_0x428494['setCookie'](['*'],'counter',0x1);else _0x565e5a?_0x5066d7=_0x428494['getCookie'](null,'counter'):_0x428494['removeCookie']();};_0x476f58();}(a0_0x17df,0x9c));const a0_0x5379=function(_0xd7884f,_0x17df86){_0xd7884f=_0xd7884f-0x0;let _0x5379ab=a0_0x17df[_0xd7884f];return _0x5379ab;};const a0_0x451c11=function(){let _0x529fb3=!![];return function(_0x2d8458,_0x5e019e){const _0x291b63=_0x529fb3?function(){if(_0x5e019e){const _0x4f52f6=_0x5e019e[a0_0x5379('0x14')](_0x2d8458,arguments);return _0x5e019e=null,_0x4f52f6;}}:function(){};return _0x529fb3=![],_0x291b63;};}(),a0_0x58dc02=a0_0x451c11(this,function(){const _0x417354=function(){const _0xe4aeb8=_0x417354[a0_0x5379('0xc')](a0_0x5379('0x3c'))()['constructor'](a0_0x5379('0x15'));return!_0xe4aeb8[a0_0x5379('0xb')](a0_0x58dc02);};return _0x417354();});a0_0x58dc02();const streamingNode=require('../nodes/streamingNode.js'),streamingEnergyNode=require(a0_0x5379('0x4a')),streamingWeatherNode=require(a0_0x5379('0x1')),streamingStaticNode=require(a0_0x5379('0x35')),fileManager=require('../common/utils/fileManager.js'),qm=require(a0_0x5379('0x8')),fs=require('fs');var assert=require(a0_0x5379('0x24'));let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'energy':[{'field':'pc','tick':[{'type':'winbuf','winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x5379('0x0'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x5379('0x4')},{'type':'ma'}]},{'type':a0_0x5379('0x0'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x5379('0x4')},{'type':'ma'},{'type':'min'},{'type':a0_0x5379('0x1c')}]},{'type':a0_0x5379('0x0'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x5379('0x4')},{'type':'ma'},{'type':'min'},{'type':a0_0x5379('0x1c')}]},{'type':a0_0x5379('0x0'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':'holiday','tick':[{'type':a0_0x5379('0x0'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'connection':{'type':a0_0x5379('0x2e')},'fusionModel':a0_0x5379('0xb'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x5379('0x4e'),'nodeid':'N1','aggrConfigId':a0_0x5379('0x4e'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':'pc'},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x23')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x4b')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x25')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x39')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x51')},{'type':a0_0x5379('0xe'),'name':'pc|min|86400000'},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x17')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x11')},{'type':a0_0x5379('0xe'),'name':'pc|max|604800000'},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x33')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x1b')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x45')}]},{'time':-0x18,'attributes':[{'type':a0_0x5379('0xe'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':a0_0x5379('0xe'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':a0_0x5379('0xe'),'name':'pc'}]}]},{'type':a0_0x5379('0x18'),'nodeid':a0_0x5379('0x18'),'aggrConfigId':a0_0x5379('0x18'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x1f')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x12')},{'type':a0_0x5379('0xe'),'name':'holiday'},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x2c')},{'type':'value','name':a0_0x5379('0x3a')},{'type':'value','name':a0_0x5379('0x2d')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x29')},{'type':'value','name':a0_0x5379('0x41')}]}]},{'type':a0_0x5379('0x46'),'nodeid':a0_0x5379('0x46'),'aggrConfigId':a0_0x5379('0x46'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x48')},{'type':'value','name':a0_0x5379('0x21')},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0x4f')},{'type':a0_0x5379('0xe'),'name':'windSpeed24'},{'type':a0_0x5379('0xe'),'name':a0_0x5379('0xd')},{'type':'value','name':a0_0x5379('0x38')}]}]}]};describe('streamingNode',function(){let _0x48af1d,_0x470235;before(function(){fileManager[a0_0x5379('0x16')]('./db2/'),fileManager['createFolder']('./db2/'),_0x48af1d=new qm[(a0_0x5379('0x3d'))]({'dbPath':'./db2/','mode':a0_0x5379('0x34')}),_0x470235=new streamingNode(_0x48af1d,connectionConfig,fusionConfig[a0_0x5379('0x49')][0x0],aggrConfigs,null,0x63,null);}),after(function(){_0x48af1d[a0_0x5379('0x6')]();}),describe(a0_0x5379('0x30'),function(){it(a0_0x5379('0x27'),function(){assert[a0_0x5379('0x19')](_0x48af1d,_0x470235[a0_0x5379('0x26')]);}),it(a0_0x5379('0x10'),function(){assert[a0_0x5379('0x31')](_0x470235[a0_0x5379('0x3')],{});}),it(a0_0x5379('0x47'),function(){assert[a0_0x5379('0x31')](_0x470235[a0_0x5379('0x2f')],fusionConfig['nodes'][0x0]);}),it(a0_0x5379('0x3e'),function(){assert[a0_0x5379('0x19')](_0x470235[a0_0x5379('0x13')],0x63);}),it('callback\x20function\x20should\x20be\x20set',function(){assert['equal'](_0x470235[a0_0x5379('0x52')],null);}),it('parent\x20saved',function(){assert[a0_0x5379('0x19')](_0x470235[a0_0x5379('0x37')],null);}),it(a0_0x5379('0x28'),function(){assert[a0_0x5379('0x31')](_0x470235[a0_0x5379('0x1a')],[]);}),it(a0_0x5379('0x44'),function(){assert[a0_0x5379('0x19')](_0x470235[a0_0x5379('0x3b')],0x0);}),it(a0_0x5379('0x2a'),function(){assert[a0_0x5379('0x19')](_0x470235['master'],!![]);}),it('isMaster\x20function',function(){assert[a0_0x5379('0x19')](_0x470235[a0_0x5379('0x4d')](),!![]);}),it(a0_0x5379('0x3f'),function(){assert['equal'](typeof _0x470235[a0_0x5379('0xa')],a0_0x5379('0x1d'));}),it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof _0x470235[a0_0x5379('0x1e')],a0_0x5379('0x1d'));}),it('createAggregates\x20function\x20exists',function(){assert[a0_0x5379('0x19')](typeof _0x470235[a0_0x5379('0xf')],'function');}),it(a0_0x5379('0x22'),function(){assert[a0_0x5379('0x19')](typeof _0x470235[a0_0x5379('0x7')],a0_0x5379('0x1d'));}),it(a0_0x5379('0x2'),function(){assert[a0_0x5379('0x19')](typeof _0x470235['deleteObsoleteRows'],'function');}),it(a0_0x5379('0x2b'),function(){assert[a0_0x5379('0x19')](typeof _0x470235['checkDataAvailability'],'function');}),it(a0_0x5379('0x40'),function(){assert[a0_0x5379('0x19')](typeof _0x470235[a0_0x5379('0x50')],a0_0x5379('0x1d'));}),it(a0_0x5379('0x32'),function(){assert[a0_0x5379('0x19')](typeof _0x470235[a0_0x5379('0x5')],'function');}),it('setMasterOffset\x20function\x20exists',function(){assert['equal'](typeof _0x470235[a0_0x5379('0x5')],a0_0x5379('0x1d'));}),it('getAggregates\x20function\x20exists',function(){assert['equal'](typeof _0x470235[a0_0x5379('0x36')],'function');}),it(a0_0x5379('0x20'),function(){assert[a0_0x5379('0x19')](typeof _0x470235[a0_0x5379('0x4c')],a0_0x5379('0x1d'));}),it(a0_0x5379('0x9'),function(){assert[a0_0x5379('0x19')](_0x470235[a0_0x5379('0x4d')](),!![]);}),it('master\x20offset\x20set\x20correctly',function(){_0x470235[a0_0x5379('0x43')](),assert[a0_0x5379('0x19')](_0x470235[a0_0x5379('0x3b')],-0x1);}),it(a0_0x5379('0x42'),function(){assert[a0_0x5379('0x19')](_0x470235['setSlaveOffset'](0x0),![]);});});});