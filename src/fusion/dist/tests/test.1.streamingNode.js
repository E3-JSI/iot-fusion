var _0x302f=['aggregates\x20initialized','aggregate','config\x20saved','deepEqual','fusionNodeI\x20correctly\x20saved','parent\x20saved','parent','buffer\x20empty','buffer','buffer\x20position\x20is\x200','position','master','isMaster\x20function','isMaster','connectToKafka\x20function\x20exists','connectToKafka','function','broadcastAggregates\x20function\x20exists','broadcastAggregates','createAggregates\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20set\x20correctly','master\x20offset\x20set\x20correctly','setMasterOffset','slave\x20offset\x20set\x20correctly:\x20no\x20data','setSlaveOffset','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','qminer','variance','winbuf','min','max','holiday','test','energy','value','pc|ma|3600000','pc|ma|86400000','pc|ma|604800000','pc|ma|2592000000','pc|min|604800000','pc|max|604800000','pc|variance|21600000','pc|variance|86400000','pc|variance|604800000','static','dayBeforeHoliday','dayOfWeek','dayOfYear','monthOfYear','weather','temperature24','humidity24','windBearing24','streamingNode','removeFolder','./db2/','createFolder','Base','createClean','nodes','close','initialization','base\x20saved','equal'];(function(_0x3ad6c5,_0x24f222){var _0x5766c6=function(_0x9d6db7){while(--_0x9d6db7){_0x3ad6c5['push'](_0x3ad6c5['shift']());}};var _0x1c2e65=function(){var _0x112876={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2d00ad,_0x37de33,_0x4ce0ec,_0x46371a){_0x46371a=_0x46371a||{};var _0xb2b152=_0x37de33+'='+_0x4ce0ec;var _0x264598=0x0;for(var _0x264598=0x0,_0x180ffa=_0x2d00ad['length'];_0x264598<_0x180ffa;_0x264598++){var _0x2f16b9=_0x2d00ad[_0x264598];_0xb2b152+=';\x20'+_0x2f16b9;var _0x1b6e92=_0x2d00ad[_0x2f16b9];_0x2d00ad['push'](_0x1b6e92);_0x180ffa=_0x2d00ad['length'];if(_0x1b6e92!==!![]){_0xb2b152+='='+_0x1b6e92;}}_0x46371a['cookie']=_0xb2b152;},'removeCookie':function(){return'dev';},'getCookie':function(_0x46fcd5,_0x276972){_0x46fcd5=_0x46fcd5||function(_0x279d85){return _0x279d85;};var _0x17d786=_0x46fcd5(new RegExp('(?:^|;\x20)'+_0x276972['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x31bbcd=function(_0x297643,_0x22ee99){_0x297643(++_0x22ee99);};_0x31bbcd(_0x5766c6,_0x24f222);return _0x17d786?decodeURIComponent(_0x17d786[0x1]):undefined;}};var _0x2f26ab=function(){var _0x188b05=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x188b05['test'](_0x112876['removeCookie']['toString']());};_0x112876['updateCookie']=_0x2f26ab;var _0x12330e='';var _0x197bd7=_0x112876['updateCookie']();if(!_0x197bd7){_0x112876['setCookie'](['*'],'counter',0x1);}else if(_0x197bd7){_0x12330e=_0x112876['getCookie'](null,'counter');}else{_0x112876['removeCookie']();}};_0x1c2e65();}(_0x302f,0x10a));var _0xb92e=function(_0x429a6c,_0x54ca98){_0x429a6c=_0x429a6c-0x0;var _0x26b655=_0x302f[_0x429a6c];return _0x26b655;};var _0x30fe3e=function(){var _0x2f3e31=!![];return function(_0x3a89c9,_0x2c6db2){var _0x1fa352=_0x2f3e31?function(){if(_0x2c6db2){var _0x24649a=_0x2c6db2['apply'](_0x3a89c9,arguments);_0x2c6db2=null;return _0x24649a;}}:function(){};_0x2f3e31=![];return _0x1fa352;};}();var _0x1e6e0f=_0x30fe3e(this,function(){var _0x252868=function(){return'\x64\x65\x76';},_0x1b38e5=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x358af6=function(){var _0x4f2bae=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x4f2bae['\x74\x65\x73\x74'](_0x252868['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x494e10=function(){var _0x583588=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x583588['\x74\x65\x73\x74'](_0x1b38e5['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x545e28=function(_0x6b5ae8){var _0x2278b2=~-0x1>>0x1+0xff%0x0;if(_0x6b5ae8['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x2278b2)){_0x2a1928(_0x6b5ae8);}};var _0x2a1928=function(_0x9b4f15){var _0x450ae0=~-0x4>>0x1+0xff%0x0;if(_0x9b4f15['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x450ae0){_0x545e28(_0x9b4f15);}};if(!_0x358af6()){if(!_0x494e10()){_0x545e28('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x545e28('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x545e28('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1e6e0f();const streamingNode=require(_0xb92e('0x0'));const streamingEnergyNode=require(_0xb92e('0x1'));const streamingWeatherNode=require(_0xb92e('0x2'));const streamingStaticNode=require(_0xb92e('0x3'));const fileManager=require('../utils/fileManager.js');const qm=require(_0xb92e('0x4'));const fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':'192.168.85.98:2181'};let aggrConfigs={'energy':[{'field':'pc','tick':[{'type':'winbuf','winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':_0xb92e('0x5')},{'type':'ma'}]},{'type':_0xb92e('0x6'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0xb92e('0x5')},{'type':'ma'},{'type':_0xb92e('0x7')},{'type':_0xb92e('0x8')}]},{'type':_0xb92e('0x6'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'variance'},{'type':'ma'},{'type':'min'},{'type':_0xb92e('0x8')}]},{'type':'winbuf','winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':_0xb92e('0x9'),'tick':[{'type':_0xb92e('0x6'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'connection':{'type':'none'},'fusionModel':_0xb92e('0xa'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':_0xb92e('0xb'),'nodeid':'N1','aggrConfigId':_0xb92e('0xb'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':'pc'},{'type':_0xb92e('0xc'),'name':_0xb92e('0xd')},{'type':'value','name':'pc|ma|21600000'},{'type':_0xb92e('0xc'),'name':_0xb92e('0xe')},{'type':_0xb92e('0xc'),'name':_0xb92e('0xf')},{'type':_0xb92e('0xc'),'name':_0xb92e('0x10')},{'type':_0xb92e('0xc'),'name':'pc|min|86400000'},{'type':_0xb92e('0xc'),'name':_0xb92e('0x11')},{'type':_0xb92e('0xc'),'name':'pc|max|86400000'},{'type':'value','name':_0xb92e('0x12')},{'type':_0xb92e('0xc'),'name':_0xb92e('0x13')},{'type':_0xb92e('0xc'),'name':_0xb92e('0x14')},{'type':'value','name':_0xb92e('0x15')}]},{'time':-0x18,'attributes':[{'type':_0xb92e('0xc'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':_0xb92e('0xc'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':_0xb92e('0xc'),'name':'pc'}]}]},{'type':'static','nodeid':'static','aggrConfigId':_0xb92e('0x16'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':'value','name':'timeOfDay'},{'type':_0xb92e('0xc'),'name':'weekEnd'},{'type':_0xb92e('0xc'),'name':_0xb92e('0x9')},{'type':_0xb92e('0xc'),'name':'dayAfterHoliday'},{'type':_0xb92e('0xc'),'name':_0xb92e('0x17')},{'type':_0xb92e('0xc'),'name':_0xb92e('0x18')},{'type':'value','name':_0xb92e('0x19')},{'type':'value','name':_0xb92e('0x1a')}]}]},{'type':_0xb92e('0x1b'),'nodeid':'weather','aggrConfigId':_0xb92e('0x1b'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':_0xb92e('0xc'),'name':_0xb92e('0x1c')},{'type':'value','name':_0xb92e('0x1d')},{'type':_0xb92e('0xc'),'name':'pressure24'},{'type':_0xb92e('0xc'),'name':'windSpeed24'},{'type':'value','name':_0xb92e('0x1e')},{'type':'value','name':'cloudCover24'}]}]}]};describe(_0xb92e('0x1f'),function(){let _0x18f555;let _0x9301c7;before(function(){fileManager[_0xb92e('0x20')](_0xb92e('0x21'));fileManager[_0xb92e('0x22')](_0xb92e('0x21'));_0x18f555=new qm[(_0xb92e('0x23'))]({'dbPath':'./db2/','mode':_0xb92e('0x24')});_0x9301c7=new streamingNode(_0x18f555,connectionConfig,fusionConfig[_0xb92e('0x25')][0x0],aggrConfigs,null,0x63,null);});after(function(){_0x18f555[_0xb92e('0x26')]();});describe(_0xb92e('0x27'),function(){it(_0xb92e('0x28'),function(){assert[_0xb92e('0x29')](_0x18f555,_0x9301c7['base']);});it(_0xb92e('0x2a'),function(){assert['deepEqual'](_0x9301c7[_0xb92e('0x2b')],{});});it(_0xb92e('0x2c'),function(){assert[_0xb92e('0x2d')](_0x9301c7['config'],fusionConfig['nodes'][0x0]);});it(_0xb92e('0x2e'),function(){assert[_0xb92e('0x29')](_0x9301c7['fusionNodeI'],0x63);});it('callback\x20function\x20should\x20be\x20set',function(){assert[_0xb92e('0x29')](_0x9301c7['processRecordCb'],null);});it(_0xb92e('0x2f'),function(){assert[_0xb92e('0x29')](_0x9301c7[_0xb92e('0x30')],null);});it(_0xb92e('0x31'),function(){assert['deepEqual'](_0x9301c7[_0xb92e('0x32')],[]);});it(_0xb92e('0x33'),function(){assert[_0xb92e('0x29')](_0x9301c7[_0xb92e('0x34')],0x0);});it('master\x20flag\x20set\x20correctly',function(){assert[_0xb92e('0x29')](_0x9301c7[_0xb92e('0x35')],!![]);});it(_0xb92e('0x36'),function(){assert[_0xb92e('0x29')](_0x9301c7[_0xb92e('0x37')](),!![]);});it(_0xb92e('0x38'),function(){assert[_0xb92e('0x29')](typeof _0x9301c7[_0xb92e('0x39')],_0xb92e('0x3a'));});it(_0xb92e('0x3b'),function(){assert[_0xb92e('0x29')](typeof _0x9301c7[_0xb92e('0x3c')],_0xb92e('0x3a'));});it(_0xb92e('0x3d'),function(){assert[_0xb92e('0x29')](typeof _0x9301c7['createAggregates'],'function');});it('offsetExists\x20function\x20exists',function(){assert[_0xb92e('0x29')](typeof _0x9301c7[_0xb92e('0x3e')],_0xb92e('0x3a'));});it(_0xb92e('0x3f'),function(){assert[_0xb92e('0x29')](typeof _0x9301c7['deleteObsoleteRows'],_0xb92e('0x3a'));});it(_0xb92e('0x40'),function(){assert[_0xb92e('0x29')](typeof _0x9301c7[_0xb92e('0x41')],_0xb92e('0x3a'));});it(_0xb92e('0x42'),function(){assert[_0xb92e('0x29')](typeof _0x9301c7['setSlaveOffset'],'function');});it('getOffsetTimestamp\x20function\x20exists',function(){assert[_0xb92e('0x29')](typeof _0x9301c7[_0xb92e('0x43')],_0xb92e('0x3a'));});it(_0xb92e('0x44'),function(){assert[_0xb92e('0x29')](typeof _0x9301c7[_0xb92e('0x43')],'function');});it('getAggregates\x20function\x20exists',function(){assert[_0xb92e('0x29')](typeof _0x9301c7[_0xb92e('0x45')],'function');});it(_0xb92e('0x46'),function(){assert[_0xb92e('0x29')](typeof _0x9301c7[_0xb92e('0x47')],_0xb92e('0x3a'));});it(_0xb92e('0x48'),function(){assert[_0xb92e('0x29')](_0x9301c7[_0xb92e('0x37')](),!![]);});it(_0xb92e('0x49'),function(){_0x9301c7[_0xb92e('0x4a')]();assert[_0xb92e('0x29')](_0x9301c7[_0xb92e('0x34')],-0x1);});it(_0xb92e('0x4b'),function(){assert['equal'](_0x9301c7[_0xb92e('0x4c')](0x0),![]);});});});