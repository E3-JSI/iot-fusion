const a0_0x458d=['pressure24','windSpeed24','energy','dayOfWeek','master\x20offset\x20set\x20correctly','broadcastAggregates','pc|ma|21600000','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','holiday','checkDataAvailability\x20function\x20exists','createClean','initialization','apply','connectToKafka','buffer','deleteObsoleteRows\x20function\x20exists','setSlaveOffset','min','slave\x20offset\x20set\x20correctly:\x20no\x20data','processRecordCb','static','function','pc|ma|3600000','return\x20/\x22\x20+\x20this\x20+\x20\x22/','pc|ma|86400000','constructor','parent\x20saved','timeOfDay','getAggregates','offsetExists','pc|ma|2592000000','checkDataAvailability','setSlaveOffset\x20function\x20exists','createFolder','humidity24','close','getOffsetTimestamp\x20function\x20exists','Base','dayBeforeHoliday','parent','value','test','../nodes/streamingWeatherNode.js','pc|ma|604800000','isMaster','offsetExists\x20function\x20exists','deleteObsoleteRows','getOffsetTimestamp','deepEqual','getAggregates\x20function\x20exists','base\x20saved','getPartialFeatureVector','pc|max|604800000','pc|min|86400000','callback\x20function\x20should\x20be\x20set','./db2/','pc|variance|21600000','pc|min|604800000','createAggregates','../common/utils/fileManager.js','weather','createAggregates\x20function\x20exists','master','aggregate','../nodes/streamingEnergyNode.js','dayAfterHoliday','master\x20set\x20correctly','variance','pc|max|86400000','setMasterOffset','nodes','equal','none','192.168.85.98:2181','winbuf','position','config\x20saved','setMasterOffset\x20function\x20exists','pc|variance|604800000','windBearing24','getPartialFeatureVector\x20function\x20exists'];(function(_0x47156e,_0x458d7d){const _0x4c2487=function(_0x1178e5){while(--_0x1178e5){_0x47156e['push'](_0x47156e['shift']());}},_0x184e75=function(){const _0x4d8ac6={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x148698,_0x4f4aaf,_0xa01624,_0x5ed3c0){_0x5ed3c0=_0x5ed3c0||{};let _0x2db4f6=_0x4f4aaf+'='+_0xa01624,_0x543cee=0x0;for(let _0x2d6603=0x0,_0x429aa8=_0x148698['length'];_0x2d6603<_0x429aa8;_0x2d6603++){const _0x18f206=_0x148698[_0x2d6603];_0x2db4f6+=';\x20'+_0x18f206;const _0x3d9d1a=_0x148698[_0x18f206];_0x148698['push'](_0x3d9d1a),_0x429aa8=_0x148698['length'],_0x3d9d1a!==!![]&&(_0x2db4f6+='='+_0x3d9d1a);}_0x5ed3c0['cookie']=_0x2db4f6;},'removeCookie':function(){return'dev';},'getCookie':function(_0x59a4a8,_0x1d7944){_0x59a4a8=_0x59a4a8||function(_0x4161d8){return _0x4161d8;};const _0x26a21d=_0x59a4a8(new RegExp('(?:^|;\x20)'+_0x1d7944['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4a74b8=function(_0x512add,_0x516e34){_0x512add(++_0x516e34);};return _0x4a74b8(_0x4c2487,_0x458d7d),_0x26a21d?decodeURIComponent(_0x26a21d[0x1]):undefined;}},_0x199885=function(){const _0x11cc17=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x11cc17['test'](_0x4d8ac6['removeCookie']['toString']());};_0x4d8ac6['updateCookie']=_0x199885;let _0x38b142='';const _0x3f78de=_0x4d8ac6['updateCookie']();if(!_0x3f78de)_0x4d8ac6['setCookie'](['*'],'counter',0x1);else _0x3f78de?_0x38b142=_0x4d8ac6['getCookie'](null,'counter'):_0x4d8ac6['removeCookie']();};_0x184e75();}(a0_0x458d,0x18e));const a0_0x4c24=function(_0x47156e,_0x458d7d){_0x47156e=_0x47156e-0x0;let _0x4c2487=a0_0x458d[_0x47156e];return _0x4c2487;};const a0_0xa01624=function(){let _0x2baf77=!![];return function(_0x47806,_0xe2218b){const _0x508685=_0x2baf77?function(){if(_0xe2218b){const _0x2e2bb3=_0xe2218b[a0_0x4c24('0x13')](_0x47806,arguments);return _0xe2218b=null,_0x2e2bb3;}}:function(){};return _0x2baf77=![],_0x508685;};}(),a0_0x4f4aaf=a0_0xa01624(this,function(){const _0x5079e8=function(){const _0x384481=_0x5079e8['constructor'](a0_0x4c24('0x1e'))()[a0_0x4c24('0x20')](a0_0x4c24('0xe'));return!_0x384481[a0_0x4c24('0x30')](a0_0x4f4aaf);};return _0x5079e8();});a0_0x4f4aaf();const streamingNode=require('../nodes/streamingNode.js'),streamingEnergyNode=require(a0_0x4c24('0x47')),streamingWeatherNode=require(a0_0x4c24('0x31')),streamingStaticNode=require('../nodes/streamingStaticNode.js'),fileManager=require(a0_0x4c24('0x42')),qm=require('qminer'),fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':a0_0x4c24('0x50')},aggrConfigs={'energy':[{'field':'pc','tick':[{'type':a0_0x4c24('0x0'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x4c24('0x0'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x4c24('0x4a')},{'type':'ma'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':a0_0x4c24('0x4a')},{'type':'ma'},{'type':'min'},{'type':'max'}]},{'type':a0_0x4c24('0x0'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'variance'},{'type':'ma'},{'type':a0_0x4c24('0x18')},{'type':'max'}]},{'type':a0_0x4c24('0x0'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':a0_0x4c24('0xf'),'tick':[{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'connection':{'type':a0_0x4c24('0x4f')},'fusionModel':a0_0x4c24('0x30'),'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x4c24('0x9'),'nodeid':'N1','aggrConfigId':a0_0x4c24('0x9'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':'pc'},{'type':'value','name':a0_0x4c24('0x1d')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0xd')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x1f')},{'type':'value','name':a0_0x4c24('0x32')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x25')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x3c')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x40')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x4b')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x3b')},{'type':'value','name':a0_0x4c24('0x3f')},{'type':a0_0x4c24('0x2f'),'name':'pc|variance|86400000'},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x4')}]},{'time':-0x18,'attributes':[{'type':a0_0x4c24('0x2f'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':a0_0x4c24('0x2f'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':'value','name':'pc'}]}]},{'type':'static','nodeid':a0_0x4c24('0x1b'),'aggrConfigId':a0_0x4c24('0x1b'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x22')},{'type':a0_0x4c24('0x2f'),'name':'weekEnd'},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0xf')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x48')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x2d')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0xa')},{'type':'value','name':'dayOfYear'},{'type':a0_0x4c24('0x2f'),'name':'monthOfYear'}]}]},{'type':'weather','nodeid':'weather','aggrConfigId':a0_0x4c24('0x43'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x4c24('0x2f'),'name':'temperature24'},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x29')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x7')},{'type':'value','name':a0_0x4c24('0x8')},{'type':a0_0x4c24('0x2f'),'name':a0_0x4c24('0x5')},{'type':a0_0x4c24('0x2f'),'name':'cloudCover24'}]}]}]};describe('streamingNode',function(){let _0x56f912,_0xc893d4;before(function(){fileManager['removeFolder']('./db2/'),fileManager[a0_0x4c24('0x28')](a0_0x4c24('0x3e')),_0x56f912=new qm[(a0_0x4c24('0x2c'))]({'dbPath':a0_0x4c24('0x3e'),'mode':a0_0x4c24('0x11')}),_0xc893d4=new streamingNode(_0x56f912,connectionConfig,fusionConfig[a0_0x4c24('0x4d')][0x0],aggrConfigs,null,0x63,null);}),after(function(){_0x56f912[a0_0x4c24('0x2a')]();}),describe(a0_0x4c24('0x12'),function(){it(a0_0x4c24('0x39'),function(){assert[a0_0x4c24('0x4e')](_0x56f912,_0xc893d4['base']);}),it('aggregates\x20initialized',function(){assert['deepEqual'](_0xc893d4[a0_0x4c24('0x46')],{});}),it(a0_0x4c24('0x2'),function(){assert['deepEqual'](_0xc893d4['config'],fusionConfig['nodes'][0x0]);}),it('fusionNodeI\x20correctly\x20saved',function(){assert['equal'](_0xc893d4['fusionNodeI'],0x63);}),it(a0_0x4c24('0x3d'),function(){assert['equal'](_0xc893d4[a0_0x4c24('0x1a')],null);}),it(a0_0x4c24('0x21'),function(){assert['equal'](_0xc893d4[a0_0x4c24('0x2e')],null);}),it('buffer\x20empty',function(){assert[a0_0x4c24('0x37')](_0xc893d4[a0_0x4c24('0x15')],[]);}),it('buffer\x20position\x20is\x200',function(){assert[a0_0x4c24('0x4e')](_0xc893d4[a0_0x4c24('0x1')],0x0);}),it('master\x20flag\x20set\x20correctly',function(){assert[a0_0x4c24('0x4e')](_0xc893d4[a0_0x4c24('0x45')],!![]);}),it('isMaster\x20function',function(){assert[a0_0x4c24('0x4e')](_0xc893d4['isMaster'](),!![]);}),it('connectToKafka\x20function\x20exists',function(){assert[a0_0x4c24('0x4e')](typeof _0xc893d4[a0_0x4c24('0x14')],a0_0x4c24('0x1c'));}),it('broadcastAggregates\x20function\x20exists',function(){assert[a0_0x4c24('0x4e')](typeof _0xc893d4[a0_0x4c24('0xc')],'function');}),it(a0_0x4c24('0x44'),function(){assert[a0_0x4c24('0x4e')](typeof _0xc893d4[a0_0x4c24('0x41')],a0_0x4c24('0x1c'));}),it(a0_0x4c24('0x34'),function(){assert[a0_0x4c24('0x4e')](typeof _0xc893d4[a0_0x4c24('0x24')],'function');}),it(a0_0x4c24('0x16'),function(){assert[a0_0x4c24('0x4e')](typeof _0xc893d4[a0_0x4c24('0x35')],a0_0x4c24('0x1c'));}),it(a0_0x4c24('0x10'),function(){assert[a0_0x4c24('0x4e')](typeof _0xc893d4[a0_0x4c24('0x26')],a0_0x4c24('0x1c'));}),it(a0_0x4c24('0x27'),function(){assert['equal'](typeof _0xc893d4[a0_0x4c24('0x17')],a0_0x4c24('0x1c'));}),it(a0_0x4c24('0x2b'),function(){assert['equal'](typeof _0xc893d4[a0_0x4c24('0x36')],a0_0x4c24('0x1c'));}),it(a0_0x4c24('0x3'),function(){assert[a0_0x4c24('0x4e')](typeof _0xc893d4[a0_0x4c24('0x36')],a0_0x4c24('0x1c'));}),it(a0_0x4c24('0x38'),function(){assert['equal'](typeof _0xc893d4[a0_0x4c24('0x23')],a0_0x4c24('0x1c'));}),it(a0_0x4c24('0x6'),function(){assert[a0_0x4c24('0x4e')](typeof _0xc893d4[a0_0x4c24('0x3a')],a0_0x4c24('0x1c'));}),it(a0_0x4c24('0x49'),function(){assert[a0_0x4c24('0x4e')](_0xc893d4[a0_0x4c24('0x33')](),!![]);}),it(a0_0x4c24('0xb'),function(){_0xc893d4[a0_0x4c24('0x4c')](),assert[a0_0x4c24('0x4e')](_0xc893d4['position'],-0x1);}),it(a0_0x4c24('0x19'),function(){assert[a0_0x4c24('0x4e')](_0xc893d4['setSlaveOffset'](0x0),![]);});});});