var _0x3569=['weekEnd','dayBeforeHoliday','dayOfWeek','dayOfYear','weather','temperature24','humidity24','pressure24','windSpeed24','windBearing24','cloudCover24','streamingNode','./db2/','createFolder','createClean','nodes','close','base\x20saved','equal','base','aggregates\x20initialized','deepEqual','aggregate','config','fusionNodeI\x20correctly\x20saved','callback\x20function\x20should\x20be\x20set','processRecordCb','parent\x20saved','parent','buffer','buffer\x20position\x20is\x200','position','master\x20flag\x20set\x20correctly','isMaster','connectToKafka','function','broadcastAggregates','createAggregates\x20function\x20exists','createAggregates','offsetExists\x20function\x20exists','offsetExists','deleteObsoleteRows\x20function\x20exists','deleteObsoleteRows','checkDataAvailability\x20function\x20exists','checkDataAvailability','setSlaveOffset\x20function\x20exists','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','setMasterOffset\x20function\x20exists','getAggregates\x20function\x20exists','getAggregates','getPartialFeatureVector\x20function\x20exists','getPartialFeatureVector','master\x20offset\x20set\x20correctly','slave\x20offset\x20set\x20correctly:\x20no\x20data','setSlaveOffset','../nodes/streamingNode.js','../nodes/streamingEnergyNode.js','../nodes/streamingWeatherNode.js','../nodes/streamingStaticNode.js','../../common/utils/fileManager.js','qminer','assert','winbuf','variance','min','max','holiday','none','energy','value','pc|ma|3600000','pc|ma|21600000','pc|ma|604800000','pc|ma|2592000000','pc|min|86400000','pc|min|604800000','pc|variance|21600000','static','timeOfDay'];(function(_0x1e6d27,_0x322bb2){var _0x5087aa=function(_0x57a5eb){while(--_0x57a5eb){_0x1e6d27['push'](_0x1e6d27['shift']());}};var _0x5468d0=function(){var _0x38f1e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4f4795,_0x464749,_0x4a4ae4,_0x29c761){_0x29c761=_0x29c761||{};var _0x15a9f5=_0x464749+'='+_0x4a4ae4;var _0x6acea9=0x0;for(var _0x6acea9=0x0,_0x130d2f=_0x4f4795['length'];_0x6acea9<_0x130d2f;_0x6acea9++){var _0x1cc518=_0x4f4795[_0x6acea9];_0x15a9f5+=';\x20'+_0x1cc518;var _0x1939bc=_0x4f4795[_0x1cc518];_0x4f4795['push'](_0x1939bc);_0x130d2f=_0x4f4795['length'];if(_0x1939bc!==!![]){_0x15a9f5+='='+_0x1939bc;}}_0x29c761['cookie']=_0x15a9f5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3ff131,_0x49a5ff){_0x3ff131=_0x3ff131||function(_0x2b5577){return _0x2b5577;};var _0x17874f=_0x3ff131(new RegExp('(?:^|;\x20)'+_0x49a5ff['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x38fc1c=function(_0x464cc3,_0xc16b0b){_0x464cc3(++_0xc16b0b);};_0x38fc1c(_0x5087aa,_0x322bb2);return _0x17874f?decodeURIComponent(_0x17874f[0x1]):undefined;}};var _0xf6c669=function(){var _0x3c698e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3c698e['test'](_0x38f1e['removeCookie']['toString']());};_0x38f1e['updateCookie']=_0xf6c669;var _0x5989e3='';var _0x3ff81e=_0x38f1e['updateCookie']();if(!_0x3ff81e){_0x38f1e['setCookie'](['*'],'counter',0x1);}else if(_0x3ff81e){_0x5989e3=_0x38f1e['getCookie'](null,'counter');}else{_0x38f1e['removeCookie']();}};_0x5468d0();}(_0x3569,0x88));var _0x348d=function(_0x36a749,_0x4048c8){_0x36a749=_0x36a749-0x0;var _0x5ce725=_0x3569[_0x36a749];return _0x5ce725;};var _0x361645=function(){var _0x36a62e=!![];return function(_0x5d8a3d,_0x2b93b1){var _0x1f9f4e=_0x36a62e?function(){if(_0x2b93b1){var _0x48b367=_0x2b93b1['apply'](_0x5d8a3d,arguments);_0x2b93b1=null;return _0x48b367;}}:function(){};_0x36a62e=![];return _0x1f9f4e;};}();var _0x2236b9=_0x361645(this,function(){var _0x3d92ef=function(){return'\x64\x65\x76';},_0xea7c91=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x870db5=function(){var _0xcd8b1=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0xcd8b1['\x74\x65\x73\x74'](_0x3d92ef['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4c1831=function(){var _0x191540=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x191540['\x74\x65\x73\x74'](_0xea7c91['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1206f2=function(_0x1d1dd2){var _0x5457b9=~-0x1>>0x1+0xff%0x0;if(_0x1d1dd2['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5457b9)){_0x48735b(_0x1d1dd2);}};var _0x48735b=function(_0x3959fa){var _0x4073ca=~-0x4>>0x1+0xff%0x0;if(_0x3959fa['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x4073ca){_0x1206f2(_0x3959fa);}};if(!_0x870db5()){if(!_0x4c1831()){_0x1206f2('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1206f2('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1206f2('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x2236b9();const streamingNode=require(_0x348d('0x0'));const streamingEnergyNode=require(_0x348d('0x1'));const streamingWeatherNode=require(_0x348d('0x2'));const streamingStaticNode=require(_0x348d('0x3'));const fileManager=require(_0x348d('0x4'));const qm=require(_0x348d('0x5'));const fs=require('fs');var assert=require(_0x348d('0x6'));let connectionConfig={'zookeeper':'192.168.85.98:2181'};let aggrConfigs={'energy':[{'field':'pc','tick':[{'type':_0x348d('0x7'),'winsize':0x1*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':_0x348d('0x7'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'variance'},{'type':'ma'}]},{'type':_0x348d('0x7'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x348d('0x8')},{'type':'ma'},{'type':_0x348d('0x9')},{'type':_0x348d('0xa')}]},{'type':_0x348d('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':_0x348d('0x8')},{'type':'ma'},{'type':'min'},{'type':_0x348d('0xa')}]},{'type':_0x348d('0x7'),'winsize':0x1e*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}],'weather':[],'static':[{'field':_0x348d('0xb'),'tick':[{'type':_0x348d('0x7'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]};let fusionConfig={'connection':{'type':_0x348d('0xc')},'fusionModel':'test','fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':'energy','nodeid':'N1','aggrConfigId':_0x348d('0xd'),'fusionTick':0x3c*0x3c*0x3e8,'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':_0x348d('0xe'),'name':'pc'},{'type':_0x348d('0xe'),'name':_0x348d('0xf')},{'type':_0x348d('0xe'),'name':_0x348d('0x10')},{'type':_0x348d('0xe'),'name':'pc|ma|86400000'},{'type':_0x348d('0xe'),'name':_0x348d('0x11')},{'type':_0x348d('0xe'),'name':_0x348d('0x12')},{'type':'value','name':_0x348d('0x13')},{'type':_0x348d('0xe'),'name':_0x348d('0x14')},{'type':'value','name':'pc|max|86400000'},{'type':_0x348d('0xe'),'name':'pc|max|604800000'},{'type':'value','name':_0x348d('0x15')},{'type':_0x348d('0xe'),'name':'pc|variance|86400000'},{'type':_0x348d('0xe'),'name':'pc|variance|604800000'}]},{'time':-0x18,'attributes':[{'type':_0x348d('0xe'),'name':'pc'}]},{'time':-0x30,'attributes':[{'type':_0x348d('0xe'),'name':'pc'}]},{'time':-0xa8,'attributes':[{'type':_0x348d('0xe'),'name':'pc'}]}]},{'type':'static','nodeid':'static','aggrConfigId':_0x348d('0x16'),'fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x18,'attributes':[{'type':'value','name':_0x348d('0x17')},{'type':_0x348d('0xe'),'name':_0x348d('0x18')},{'type':_0x348d('0xe'),'name':_0x348d('0xb')},{'type':'value','name':'dayAfterHoliday'},{'type':_0x348d('0xe'),'name':_0x348d('0x19')},{'type':'value','name':_0x348d('0x1a')},{'type':_0x348d('0xe'),'name':_0x348d('0x1b')},{'type':'value','name':'monthOfYear'}]}]},{'type':_0x348d('0x1c'),'nodeid':'weather','aggrConfigId':'weather','fusionTick':0x3c*0x3c*0x3e8,'master':![],'attributes':[{'time':0x0,'attributes':[{'type':_0x348d('0xe'),'name':_0x348d('0x1d')},{'type':_0x348d('0xe'),'name':_0x348d('0x1e')},{'type':_0x348d('0xe'),'name':_0x348d('0x1f')},{'type':'value','name':_0x348d('0x20')},{'type':_0x348d('0xe'),'name':_0x348d('0x21')},{'type':_0x348d('0xe'),'name':_0x348d('0x22')}]}]}]};describe(_0x348d('0x23'),function(){let _0x3b32d8;let _0x375804;before(function(){fileManager['removeFolder'](_0x348d('0x24'));fileManager[_0x348d('0x25')]('./db2/');_0x3b32d8=new qm['Base']({'dbPath':_0x348d('0x24'),'mode':_0x348d('0x26')});_0x375804=new streamingNode(_0x3b32d8,connectionConfig,fusionConfig[_0x348d('0x27')][0x0],aggrConfigs,null,0x63,null);});after(function(){_0x3b32d8[_0x348d('0x28')]();});describe('initialization',function(){it(_0x348d('0x29'),function(){assert[_0x348d('0x2a')](_0x3b32d8,_0x375804[_0x348d('0x2b')]);});it(_0x348d('0x2c'),function(){assert[_0x348d('0x2d')](_0x375804[_0x348d('0x2e')],{});});it('config\x20saved',function(){assert[_0x348d('0x2d')](_0x375804[_0x348d('0x2f')],fusionConfig[_0x348d('0x27')][0x0]);});it(_0x348d('0x30'),function(){assert[_0x348d('0x2a')](_0x375804['fusionNodeI'],0x63);});it(_0x348d('0x31'),function(){assert[_0x348d('0x2a')](_0x375804[_0x348d('0x32')],null);});it(_0x348d('0x33'),function(){assert[_0x348d('0x2a')](_0x375804[_0x348d('0x34')],null);});it('buffer\x20empty',function(){assert['deepEqual'](_0x375804[_0x348d('0x35')],[]);});it(_0x348d('0x36'),function(){assert[_0x348d('0x2a')](_0x375804[_0x348d('0x37')],0x0);});it(_0x348d('0x38'),function(){assert['equal'](_0x375804['master'],!![]);});it('isMaster\x20function',function(){assert[_0x348d('0x2a')](_0x375804[_0x348d('0x39')](),!![]);});it('connectToKafka\x20function\x20exists',function(){assert[_0x348d('0x2a')](typeof _0x375804[_0x348d('0x3a')],_0x348d('0x3b'));});it('broadcastAggregates\x20function\x20exists',function(){assert['equal'](typeof _0x375804[_0x348d('0x3c')],'function');});it(_0x348d('0x3d'),function(){assert['equal'](typeof _0x375804[_0x348d('0x3e')],'function');});it(_0x348d('0x3f'),function(){assert[_0x348d('0x2a')](typeof _0x375804[_0x348d('0x40')],_0x348d('0x3b'));});it(_0x348d('0x41'),function(){assert['equal'](typeof _0x375804[_0x348d('0x42')],'function');});it(_0x348d('0x43'),function(){assert[_0x348d('0x2a')](typeof _0x375804[_0x348d('0x44')],_0x348d('0x3b'));});it(_0x348d('0x45'),function(){assert[_0x348d('0x2a')](typeof _0x375804['setSlaveOffset'],'function');});it(_0x348d('0x46'),function(){assert[_0x348d('0x2a')](typeof _0x375804[_0x348d('0x47')],'function');});it(_0x348d('0x48'),function(){assert['equal'](typeof _0x375804[_0x348d('0x47')],_0x348d('0x3b'));});it(_0x348d('0x49'),function(){assert['equal'](typeof _0x375804[_0x348d('0x4a')],_0x348d('0x3b'));});it(_0x348d('0x4b'),function(){assert[_0x348d('0x2a')](typeof _0x375804[_0x348d('0x4c')],_0x348d('0x3b'));});it('master\x20set\x20correctly',function(){assert[_0x348d('0x2a')](_0x375804[_0x348d('0x39')](),!![]);});it(_0x348d('0x4d'),function(){_0x375804['setMasterOffset']();assert[_0x348d('0x2a')](_0x375804[_0x348d('0x37')],-0x1);});it(_0x348d('0x4e'),function(){assert[_0x348d('0x2a')](_0x375804[_0x348d('0x4f')](0x0),![]);});});});