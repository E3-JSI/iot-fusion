const a0_0x49fa=['dimml|tick','master\x20flag\x20set\x20correctly','../nodes/streamingEnergyNode.js','createFolder','pact|max|86400000','pact|max|21600000','../nodes/streamingTimeValueNode.js','nodes','initialization','close','pact|ma|86400000','isMaster','base','parse','parent\x20saved','check\x20store\x20structure','{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}','setSlaveOffset\x20function\x20exists','../common/utils/fileManager.js','{\x22stampm\x22:\x201468493073000}','mqtt','test','master\x20offset\x20set\x20correctly','slave\x20offset\x20set\x20correctly:\x20no\x20data','getPartialFeatureVector','../nodes/streamingStaticNode.js','config','removeFolder','{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}','constructor','datetime','buffer\x20empty','master\x20set\x20correctly','deleteObsoleteRows','connectToKafka','pact|ma|21600000','../nodes/streamingWeatherNode.js','processRecord','pact|ma|21600','Empty\x20values\x20in\x20message\x20set\x20to\x200','192.168.85.98:2181','max','pact|min|86400000','float','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','value','getAggregates\x20function\x20exists','assert','buffer\x20position\x20is\x200','name','callback\x20function\x20should\x20be\x20set','length','offsetExists\x20function\x20exists','dimml','base\x20saved','min','createAggregates\x20function\x20exists','position','deepEqual','dimml|winbuf|604800000','pact','dimml|winbuf|86400000','getOffsetTimestamp\x20function\x20exists','{\x22stampm\x22:','master','isMaster\x20function','qminer','return\x20/\x22\x20+\x20this\x20+\x20\x22/','./db4/','dimml|winbuf|21600000','pact|ma|604800000','broadcastAggregates','function','smartlamp','getOffsetTimestamp','offsetExists','equal','apply','aggregate',',\x22dimml\x22:\x20','keys','dimml|variance|86400000','rawstore','checkDataAvailability','setSlaveOffset','createAggregates','setMasterOffset\x20function\x20exists','connectToKafka\x20function\x20exists','pact|tick','fusionNodeI\x20correctly\x20saved','deleteObsoleteRows\x20function\x20exists','dimml|ma|21600000','variance','checkDataAvailability\x20function\x20exists','dimml|max|21600000','dimml|max|86400000','processRecordCb','streamingSmartLampNode','data\x20record\x20saved\x20correctly','Base','pact|variance|21600000','dimml|min|21600000','winbuf','check\x20if\x20store\x20exists','fields','getPartialFeatureVector\x20function\x20exists','dimml|min|86400000','buffer','dimml|ma|86400000','data\x20insertion'];(function(_0x1975b0,_0x49fa0c){const _0x21fd49=function(_0x373caf){while(--_0x373caf){_0x1975b0['push'](_0x1975b0['shift']());}},_0x370c4f=function(){const _0x3a7c6b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1cfbe7,_0x14dadf,_0x288200,_0x740e77){_0x740e77=_0x740e77||{};let _0x259dc5=_0x14dadf+'='+_0x288200,_0x2d1883=0x0;for(let _0xc41309=0x0,_0xefb899=_0x1cfbe7['length'];_0xc41309<_0xefb899;_0xc41309++){const _0x53448c=_0x1cfbe7[_0xc41309];_0x259dc5+=';\x20'+_0x53448c;const _0x412c2c=_0x1cfbe7[_0x53448c];_0x1cfbe7['push'](_0x412c2c),_0xefb899=_0x1cfbe7['length'],_0x412c2c!==!![]&&(_0x259dc5+='='+_0x412c2c);}_0x740e77['cookie']=_0x259dc5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4e0490,_0x4b5b6f){_0x4e0490=_0x4e0490||function(_0x323018){return _0x323018;};const _0x2df338=_0x4e0490(new RegExp('(?:^|;\x20)'+_0x4b5b6f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x45c89a=function(_0x5711ae,_0xe66cf7){_0x5711ae(++_0xe66cf7);};return _0x45c89a(_0x21fd49,_0x49fa0c),_0x2df338?decodeURIComponent(_0x2df338[0x1]):undefined;}},_0x3f3801=function(){const _0x25f42c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x25f42c['test'](_0x3a7c6b['removeCookie']['toString']());};_0x3a7c6b['updateCookie']=_0x3f3801;let _0x8bf816='';const _0x4caf77=_0x3a7c6b['updateCookie']();if(!_0x4caf77)_0x3a7c6b['setCookie'](['*'],'counter',0x1);else _0x4caf77?_0x8bf816=_0x3a7c6b['getCookie'](null,'counter'):_0x3a7c6b['removeCookie']();};_0x370c4f();}(a0_0x49fa,0xcf));const a0_0x21fd=function(_0x1975b0,_0x49fa0c){_0x1975b0=_0x1975b0-0x0;let _0x21fd49=a0_0x49fa[_0x1975b0];return _0x21fd49;};const a0_0x288200=function(){let _0x15289d=!![];return function(_0x200c28,_0x14b6f9){const _0x49fac5=_0x15289d?function(){if(_0x14b6f9){const _0x712791=_0x14b6f9[a0_0x21fd('0x5a')](_0x200c28,arguments);return _0x14b6f9=null,_0x712791;}}:function(){};return _0x15289d=![],_0x49fac5;};}(),a0_0x14dadf=a0_0x288200(this,function(){const _0x3f1d15=function(){const _0xf07e9b=_0x3f1d15[a0_0x21fd('0x2a')](a0_0x21fd('0x50'))()[a0_0x21fd('0x2a')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0xf07e9b[a0_0x21fd('0x22')](a0_0x14dadf);};return _0x3f1d15();});a0_0x14dadf();const streamingNode=require('../nodes/streamingNode.js'),streamingEnergyNode=require(a0_0x21fd('0xf')),streamingWeatherNode=require(a0_0x21fd('0x31')),streamingStaticNode=require(a0_0x21fd('0x26')),streamingTimeValueNode=require(a0_0x21fd('0x13')),streamingSmartLampNode=require('../nodes/streamingSmartLampNode.js'),fileManager=require(a0_0x21fd('0x1f')),qm=require(a0_0x21fd('0x4f')),fs=require('fs');var assert=require(a0_0x21fd('0x3c'));let connectionConfig={'zookeeper':a0_0x21fd('0x35')},aggrConfigs={'smartlamp':[{'field':a0_0x21fd('0x42'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x21fd('0x44')},{'type':a0_0x21fd('0x36')},{'type':'variance'}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x21fd('0x36')},{'type':a0_0x21fd('0x69')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':a0_0x21fd('0x49'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x21fd('0x44')},{'type':a0_0x21fd('0x36')},{'type':a0_0x21fd('0x69')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x21fd('0x44')},{'type':a0_0x21fd('0x36')},{'type':a0_0x21fd('0x69')}]},{'type':a0_0x21fd('0x5'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x21fd('0x56'),'connection':{'type':a0_0x21fd('0x21')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x21fd('0x56'),'nodeid':a0_0x21fd('0x56'),'aggrConfigId':'smartlamp','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x21fd('0x3a'),'name':a0_0x21fd('0x42')},{'type':a0_0x21fd('0x3a'),'name':a0_0x21fd('0x33')},{'type':a0_0x21fd('0x3a'),'name':a0_0x21fd('0xb')},{'type':a0_0x21fd('0x3a'),'name':'dimml|min|86400000'},{'type':a0_0x21fd('0x3a'),'name':a0_0x21fd('0x6c')},{'type':'value','name':a0_0x21fd('0x5e')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x21fd('0x3a'),'name':'dimml'},{'type':a0_0x21fd('0x3a'),'name':a0_0x21fd('0x49')},{'type':a0_0x21fd('0x3a'),'name':a0_0x21fd('0xb')},{'type':'value','name':'dimml|min|86400000'},{'type':a0_0x21fd('0x3a'),'name':'dimml|max|86400000'},{'type':a0_0x21fd('0x3a'),'name':a0_0x21fd('0x5e')}]}]}]};function processRecordDummyCb(_0x5c0b2a,_0x591483){return!![];}describe(a0_0x21fd('0x0'),function(){let _0x1f955a,_0x4a4aad;before(function(){fileManager[a0_0x21fd('0x28')](a0_0x21fd('0x51')),fileManager[a0_0x21fd('0x10')](a0_0x21fd('0x51')),_0x1f955a=new qm[(a0_0x21fd('0x2'))]({'dbPath':'./db4/','mode':'createClean'}),ssln=new streamingSmartLampNode(_0x1f955a,connectionConfig,fusionConfig[a0_0x21fd('0x14')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x1f955a[a0_0x21fd('0x16')]();}),describe(a0_0x21fd('0x15'),function(){it(a0_0x21fd('0x43'),function(){assert['equal'](_0x1f955a,ssln[a0_0x21fd('0x19')]);}),it(a0_0x21fd('0x6'),function(){assert[a0_0x21fd('0x59')](ssln[a0_0x21fd('0x5f')][a0_0x21fd('0x3e')],a0_0x21fd('0x56'));}),it(a0_0x21fd('0x1c'),function(){assert[a0_0x21fd('0x47')](ssln['rawstore'][a0_0x21fd('0x7')],[{'id':0x0,'name':'Time','type':a0_0x21fd('0x2b'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x21fd('0x49'),'type':a0_0x21fd('0x38'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x21fd('0x42'),'type':a0_0x21fd('0x38'),'nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x21fd('0x59')](Object['keys'](ssln[a0_0x21fd('0x5b')])[a0_0x21fd('0x40')],0x1a);}),it('aggregates\x20initialized\x20-\x20key\x20names',function(){assert['deepEqual'](Object[a0_0x21fd('0x5d')](ssln['aggregate']),[a0_0x21fd('0xd'),a0_0x21fd('0x52'),a0_0x21fd('0x68'),a0_0x21fd('0x4'),a0_0x21fd('0x6b'),'dimml|variance|21600000',a0_0x21fd('0x4a'),'dimml|ma|86400000',a0_0x21fd('0x9'),a0_0x21fd('0x6c'),a0_0x21fd('0x5e'),a0_0x21fd('0x48'),'dimml|ma|604800000',a0_0x21fd('0x65'),'pact|winbuf|21600000',a0_0x21fd('0x30'),'pact|min|21600000',a0_0x21fd('0x12'),a0_0x21fd('0x3'),'pact|winbuf|86400000',a0_0x21fd('0x17'),a0_0x21fd('0x37'),a0_0x21fd('0x11'),'pact|variance|86400000','pact|winbuf|604800000',a0_0x21fd('0x53')]);}),it('config\x20saved',function(){assert[a0_0x21fd('0x47')](ssln[a0_0x21fd('0x27')],fusionConfig[a0_0x21fd('0x14')][0x0]);}),it(a0_0x21fd('0x66'),function(){assert[a0_0x21fd('0x59')](ssln['fusionNodeI'],0x63);}),it(a0_0x21fd('0x3f'),function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x6d')],'function');}),it(a0_0x21fd('0x1b'),function(){assert[a0_0x21fd('0x59')](ssln['parent'],null);}),it(a0_0x21fd('0x2c'),function(){assert[a0_0x21fd('0x47')](ssln[a0_0x21fd('0xa')],[]);}),it(a0_0x21fd('0x3d'),function(){assert['equal'](ssln['position'],0x0);}),it(a0_0x21fd('0xe'),function(){assert[a0_0x21fd('0x59')](ssln[a0_0x21fd('0x4d')],!![]);}),it(a0_0x21fd('0x4e'),function(){assert[a0_0x21fd('0x59')](ssln[a0_0x21fd('0x18')](),!![]);}),it(a0_0x21fd('0x64'),function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x2f')],a0_0x21fd('0x55'));}),it('broadcastAggregates\x20function\x20exists',function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x54')],a0_0x21fd('0x55'));}),it(a0_0x21fd('0x45'),function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x62')],a0_0x21fd('0x55'));}),it(a0_0x21fd('0x41'),function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x58')],a0_0x21fd('0x55'));}),it(a0_0x21fd('0x67'),function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x2e')],'function');}),it(a0_0x21fd('0x6a'),function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x60')],a0_0x21fd('0x55'));}),it(a0_0x21fd('0x1e'),function(){assert['equal'](typeof ssln[a0_0x21fd('0x61')],a0_0x21fd('0x55'));}),it(a0_0x21fd('0x4b'),function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x57')],a0_0x21fd('0x55'));}),it(a0_0x21fd('0x63'),function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x57')],a0_0x21fd('0x55'));}),it(a0_0x21fd('0x3b'),function(){assert[a0_0x21fd('0x59')](typeof ssln['getAggregates'],'function');}),it(a0_0x21fd('0x8'),function(){assert[a0_0x21fd('0x59')](typeof ssln[a0_0x21fd('0x25')],a0_0x21fd('0x55'));}),it(a0_0x21fd('0x2d'),function(){assert['equal'](ssln[a0_0x21fd('0x18')](),!![]);}),it(a0_0x21fd('0x23'),function(){ssln['setMasterOffset'](),assert[a0_0x21fd('0x59')](ssln[a0_0x21fd('0x46')],-0x1);}),it(a0_0x21fd('0x24'),function(){assert[a0_0x21fd('0x59')](ssln[a0_0x21fd('0x61')](0x0),![]);});}),describe(a0_0x21fd('0xc'),function(){it(a0_0x21fd('0x1'),function(){ssln[a0_0x21fd('0x32')](JSON[a0_0x21fd('0x1a')](a0_0x21fd('0x29'))),ssln['processRecord'](JSON[a0_0x21fd('0x1a')](a0_0x21fd('0x1d'))),assert[a0_0x21fd('0x59')](ssln[a0_0x21fd('0xa')][a0_0x21fd('0x40')],0x2),assert['equal'](ssln[a0_0x21fd('0xa')][0x0]['dimml'],0x0),assert[a0_0x21fd('0x59')](ssln['buffer'][0x1]['pact'],0x1);}),it(a0_0x21fd('0x34'),function(){ssln['processRecord'](JSON[a0_0x21fd('0x1a')](a0_0x21fd('0x20'))),assert['equal'](ssln[a0_0x21fd('0xa')][a0_0x21fd('0x40')],0x3),assert['equal'](ssln[a0_0x21fd('0xa')][0x2][a0_0x21fd('0x42')],0x0),assert[a0_0x21fd('0x59')](ssln['buffer'][0x2]['pact'],0x0);}),it(a0_0x21fd('0x39'),function(){assert['deepEqual'](ssln[a0_0x21fd('0xa')][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});}),it('9\x20more\x20data\x20insertions',function(){for(let _0x5bd90f=0x1;_0x5bd90f<=0x9;_0x5bd90f++){let _0x55b664=0x155e9020a68+_0x5bd90f*0x3e8,_0x11036b=_0x5bd90f+0x1,_0x377b16=_0x5bd90f+0x1;ssln[a0_0x21fd('0x32')](JSON['parse'](a0_0x21fd('0x4c')+_0x55b664+a0_0x21fd('0x5c')+_0x11036b+',\x22pact\x22:\x20'+_0x377b16+'}'));}assert['equal'](ssln['buffer'][a0_0x21fd('0x40')],0xc),assert[a0_0x21fd('0x47')](ssln['buffer'][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});}),it('duplicate\x20insertions\x20test',function(){ssln['processRecord'](JSON[a0_0x21fd('0x1a')](a0_0x21fd('0x29'))),ssln[a0_0x21fd('0x32')](JSON[a0_0x21fd('0x1a')]('{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}')),assert[a0_0x21fd('0x59')](ssln[a0_0x21fd('0xa')][a0_0x21fd('0x40')],0xc);});});});