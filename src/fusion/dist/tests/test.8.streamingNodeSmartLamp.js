const a0_0x1591=['winbuf','float','getPartialFeatureVector\x20function\x20exists','Base','callback\x20function\x20should\x20be\x20set','function','dimml|variance|86400000','pact|winbuf|86400000','isMaster','../nodes/streamingNode.js','pact|ma|21600000','keys','pact|variance|86400000','../nodes/streamingWeatherNode.js','../nodes/streamingTimeValueNode.js','config','duplicate\x20insertions\x20test','variance','connectToKafka\x20function\x20exists','processRecord','dimml|max|86400000','dimml|winbuf|604800000','slave\x20offset\x20set\x20correctly:\x20no\x20data','../common/utils/fileManager.js','setMasterOffset\x20function\x20exists','dimml|max|21600000','name','buffer','mqtt','isMaster\x20function','check\x20store\x20structure','createAggregates','dimml','master\x20set\x20correctly','processRecordCb','dimml|winbuf|21600000','data\x20record\x20saved\x20correctly','fields','pact|min|21600000','getOffsetTimestamp\x20function\x20exists','parent','assert','getAggregates\x20function\x20exists','../nodes/streamingEnergyNode.js','aggregate','master','max','{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}','setSlaveOffset','pact|ma|21600','{\x22stampm\x22:\x201468493073000}','deleteObsoleteRows\x20function\x20exists','../nodes/streamingSmartLampNode.js','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','pact|variance|21600000','getPartialFeatureVector','./db4/','rawstore','createAggregates\x20function\x20exists','test','pact|min|86400000','offsetExists\x20function\x20exists','buffer\x20empty','initialization','getAggregates','setMasterOffset','equal','dimml|ma|86400000',',\x22dimml\x22:\x20','pact|max|21600000','pact|ma|86400000','parse','pact|tick','smartlamp','base','streamingSmartLampNode','dimml|ma|21600000','apply','dimml|min|86400000','constructor','pact|ma|604800000','master\x20offset\x20set\x20correctly','dimml|min|21600000','checkDataAvailability','dimml|variance|21600000','{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}','getOffsetTimestamp','nodes','192.168.85.98:2181','broadcastAggregates\x20function\x20exists','Time','aggregates\x20initialized\x20-\x20key\x20names','dimml|tick','min','deepEqual','9\x20more\x20data\x20insertions','pact','qminer','close','buffer\x20position\x20is\x200','master\x20flag\x20set\x20correctly','length','position','fusionNodeI','value'];(function(_0x26190f,_0x1591a7){const _0x2d44ac=function(_0x5823fc){while(--_0x5823fc){_0x26190f['push'](_0x26190f['shift']());}},_0x22ced5=function(){const _0x1e7d2b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x45d2f5,_0x19b048,_0x4fffb6,_0x34dcaf){_0x34dcaf=_0x34dcaf||{};let _0x1278ac=_0x19b048+'='+_0x4fffb6,_0xb4558=0x0;for(let _0x4b090c=0x0,_0x1dd9ed=_0x45d2f5['length'];_0x4b090c<_0x1dd9ed;_0x4b090c++){const _0x1ec12f=_0x45d2f5[_0x4b090c];_0x1278ac+=';\x20'+_0x1ec12f;const _0x3eaa97=_0x45d2f5[_0x1ec12f];_0x45d2f5['push'](_0x3eaa97),_0x1dd9ed=_0x45d2f5['length'],_0x3eaa97!==!![]&&(_0x1278ac+='='+_0x3eaa97);}_0x34dcaf['cookie']=_0x1278ac;},'removeCookie':function(){return'dev';},'getCookie':function(_0x118cb5,_0x3aa358){_0x118cb5=_0x118cb5||function(_0x339e0e){return _0x339e0e;};const _0xe14d26=_0x118cb5(new RegExp('(?:^|;\x20)'+_0x3aa358['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x535e44=function(_0x4425d0,_0x21e1da){_0x4425d0(++_0x21e1da);};return _0x535e44(_0x2d44ac,_0x1591a7),_0xe14d26?decodeURIComponent(_0xe14d26[0x1]):undefined;}},_0x42d16b=function(){const _0x28fb1a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x28fb1a['test'](_0x1e7d2b['removeCookie']['toString']());};_0x1e7d2b['updateCookie']=_0x42d16b;let _0x3ad345='';const _0x436a7e=_0x1e7d2b['updateCookie']();if(!_0x436a7e)_0x1e7d2b['setCookie'](['*'],'counter',0x1);else _0x436a7e?_0x3ad345=_0x1e7d2b['getCookie'](null,'counter'):_0x1e7d2b['removeCookie']();};_0x22ced5();}(a0_0x1591,0x104));const a0_0x2d44=function(_0x26190f,_0x1591a7){_0x26190f=_0x26190f-0x0;let _0x2d44ac=a0_0x1591[_0x26190f];return _0x2d44ac;};const a0_0x4fffb6=function(){let _0x58811a=!![];return function(_0x184a42,_0x183802){const _0x56d0c6=_0x58811a?function(){if(_0x183802){const _0x77fbcc=_0x183802[a0_0x2d44('0x1b')](_0x184a42,arguments);return _0x183802=null,_0x77fbcc;}}:function(){};return _0x58811a=![],_0x56d0c6;};}(),a0_0x19b048=a0_0x4fffb6(this,function(){const _0x52ba11=function(){const _0x1ef631=_0x52ba11[a0_0x2d44('0x1d')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a0_0x2d44('0x1d')](a0_0x2d44('0x3'));return!_0x1ef631[a0_0x2d44('0x9')](a0_0x19b048);};return _0x52ba11();});a0_0x19b048();const streamingNode=require(a0_0x2d44('0x40')),streamingEnergyNode=require(a0_0x2d44('0x62')),streamingWeatherNode=require(a0_0x2d44('0x44')),streamingStaticNode=require('../nodes/streamingStaticNode.js'),streamingTimeValueNode=require(a0_0x2d44('0x45')),streamingSmartLampNode=require(a0_0x2d44('0x2')),fileManager=require(a0_0x2d44('0x4e')),qm=require(a0_0x2d44('0x2f')),fs=require('fs');var assert=require(a0_0x2d44('0x60'));let connectionConfig={'zookeeper':a0_0x2d44('0x26')},aggrConfigs={'smartlamp':[{'field':'dimml','tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x2d44('0x65')},{'type':'variance'}]},{'type':a0_0x2d44('0x37'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x2d44('0x2b')},{'type':a0_0x2d44('0x65')},{'type':a0_0x2d44('0x48')}]},{'type':a0_0x2d44('0x37'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':'pact','tick':[{'type':a0_0x2d44('0x37'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x2d44('0x2b')},{'type':a0_0x2d44('0x65')},{'type':'variance'}]},{'type':a0_0x2d44('0x37'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x2d44('0x2b')},{'type':a0_0x2d44('0x65')},{'type':'variance'}]},{'type':a0_0x2d44('0x37'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x2d44('0x17'),'connection':{'type':a0_0x2d44('0x53')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x2d44('0x17'),'nodeid':a0_0x2d44('0x17'),'aggrConfigId':a0_0x2d44('0x17'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x2d44('0x36'),'name':'dimml'},{'type':'value','name':a0_0x2d44('0x68')},{'type':a0_0x2d44('0x36'),'name':a0_0x2d44('0x11')},{'type':a0_0x2d44('0x36'),'name':a0_0x2d44('0x1c')},{'type':a0_0x2d44('0x36'),'name':a0_0x2d44('0x4b')},{'type':'value','name':a0_0x2d44('0x3d')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x2d44('0x36'),'name':a0_0x2d44('0x57')},{'type':'value','name':a0_0x2d44('0x2e')},{'type':a0_0x2d44('0x36'),'name':'dimml|ma|86400000'},{'type':'value','name':a0_0x2d44('0x1c')},{'type':a0_0x2d44('0x36'),'name':'dimml|max|86400000'},{'type':'value','name':a0_0x2d44('0x3d')}]}]}]};function processRecordDummyCb(_0x2d1a81,_0x348cad){return!![];}describe(a0_0x2d44('0x19'),function(){let _0x3bc148,_0x5dd205;before(function(){fileManager['removeFolder'](a0_0x2d44('0x6')),fileManager['createFolder'](a0_0x2d44('0x6')),_0x3bc148=new qm[(a0_0x2d44('0x3a'))]({'dbPath':'./db4/','mode':'createClean'}),ssln=new streamingSmartLampNode(_0x3bc148,connectionConfig,fusionConfig['nodes'][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x3bc148[a0_0x2d44('0x30')]();}),describe(a0_0x2d44('0xd'),function(){it('base\x20saved',function(){assert['equal'](_0x3bc148,ssln[a0_0x2d44('0x18')]);}),it('check\x20if\x20store\x20exists',function(){assert['equal'](ssln[a0_0x2d44('0x7')][a0_0x2d44('0x51')],a0_0x2d44('0x17'));}),it(a0_0x2d44('0x55'),function(){assert[a0_0x2d44('0x2c')](ssln[a0_0x2d44('0x7')][a0_0x2d44('0x5c')],[{'id':0x0,'name':a0_0x2d44('0x28'),'type':'datetime','nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x2d44('0x2e'),'type':'float','nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x2d44('0x57'),'type':a0_0x2d44('0x38'),'nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x2d44('0x10')](Object['keys'](ssln[a0_0x2d44('0x63')])[a0_0x2d44('0x33')],0x1a);}),it(a0_0x2d44('0x29'),function(){assert[a0_0x2d44('0x2c')](Object[a0_0x2d44('0x42')](ssln['aggregate']),[a0_0x2d44('0x2a'),a0_0x2d44('0x5a'),a0_0x2d44('0x1a'),a0_0x2d44('0x20'),a0_0x2d44('0x50'),a0_0x2d44('0x22'),'dimml|winbuf|86400000','dimml|ma|86400000',a0_0x2d44('0x1c'),a0_0x2d44('0x4b'),a0_0x2d44('0x3d'),a0_0x2d44('0x4c'),'dimml|ma|604800000',a0_0x2d44('0x16'),'pact|winbuf|21600000',a0_0x2d44('0x41'),a0_0x2d44('0x5d'),a0_0x2d44('0x13'),a0_0x2d44('0x4'),a0_0x2d44('0x3e'),a0_0x2d44('0x14'),a0_0x2d44('0xa'),'pact|max|86400000',a0_0x2d44('0x43'),'pact|winbuf|604800000',a0_0x2d44('0x1e')]);}),it('config\x20saved',function(){assert[a0_0x2d44('0x2c')](ssln[a0_0x2d44('0x46')],fusionConfig[a0_0x2d44('0x25')][0x0]);}),it('fusionNodeI\x20correctly\x20saved',function(){assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x35')],0x63);}),it(a0_0x2d44('0x3b'),function(){assert[a0_0x2d44('0x10')](typeof ssln[a0_0x2d44('0x59')],a0_0x2d44('0x3c'));}),it('parent\x20saved',function(){assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x5f')],null);}),it(a0_0x2d44('0xc'),function(){assert['deepEqual'](ssln['buffer'],[]);}),it(a0_0x2d44('0x31'),function(){assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x34')],0x0);}),it(a0_0x2d44('0x32'),function(){assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x64')],!![]);}),it(a0_0x2d44('0x54'),function(){assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x3f')](),!![]);}),it(a0_0x2d44('0x49'),function(){assert[a0_0x2d44('0x10')](typeof ssln['connectToKafka'],'function');}),it(a0_0x2d44('0x27'),function(){assert[a0_0x2d44('0x10')](typeof ssln['broadcastAggregates'],'function');}),it(a0_0x2d44('0x8'),function(){assert[a0_0x2d44('0x10')](typeof ssln[a0_0x2d44('0x56')],a0_0x2d44('0x3c'));}),it(a0_0x2d44('0xb'),function(){assert[a0_0x2d44('0x10')](typeof ssln['offsetExists'],'function');}),it(a0_0x2d44('0x1'),function(){assert[a0_0x2d44('0x10')](typeof ssln['deleteObsoleteRows'],a0_0x2d44('0x3c'));}),it('checkDataAvailability\x20function\x20exists',function(){assert[a0_0x2d44('0x10')](typeof ssln[a0_0x2d44('0x21')],a0_0x2d44('0x3c'));}),it('setSlaveOffset\x20function\x20exists',function(){assert[a0_0x2d44('0x10')](typeof ssln['setSlaveOffset'],'function');}),it(a0_0x2d44('0x5e'),function(){assert['equal'](typeof ssln['getOffsetTimestamp'],a0_0x2d44('0x3c'));}),it(a0_0x2d44('0x4f'),function(){assert['equal'](typeof ssln[a0_0x2d44('0x24')],'function');}),it(a0_0x2d44('0x61'),function(){assert[a0_0x2d44('0x10')](typeof ssln[a0_0x2d44('0xe')],a0_0x2d44('0x3c'));}),it(a0_0x2d44('0x39'),function(){assert[a0_0x2d44('0x10')](typeof ssln[a0_0x2d44('0x5')],a0_0x2d44('0x3c'));}),it(a0_0x2d44('0x58'),function(){assert['equal'](ssln[a0_0x2d44('0x3f')](),!![]);}),it(a0_0x2d44('0x1f'),function(){ssln[a0_0x2d44('0xf')](),assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x34')],-0x1);}),it(a0_0x2d44('0x4d'),function(){assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x67')](0x0),![]);});}),describe('data\x20insertion',function(){it(a0_0x2d44('0x5b'),function(){ssln[a0_0x2d44('0x4a')](JSON[a0_0x2d44('0x15')](a0_0x2d44('0x66'))),ssln[a0_0x2d44('0x4a')](JSON['parse'](a0_0x2d44('0x23'))),assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x52')][a0_0x2d44('0x33')],0x2),assert['equal'](ssln[a0_0x2d44('0x52')][0x0][a0_0x2d44('0x57')],0x0),assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x52')][0x1]['pact'],0x1);}),it('Empty\x20values\x20in\x20message\x20set\x20to\x200',function(){ssln['processRecord'](JSON[a0_0x2d44('0x15')](a0_0x2d44('0x0'))),assert[a0_0x2d44('0x10')](ssln['buffer']['length'],0x3),assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x52')][0x2][a0_0x2d44('0x57')],0x0),assert[a0_0x2d44('0x10')](ssln['buffer'][0x2][a0_0x2d44('0x2e')],0x0);}),it('stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion',function(){assert[a0_0x2d44('0x2c')](ssln[a0_0x2d44('0x52')][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});}),it(a0_0x2d44('0x2d'),function(){for(let _0x499f52=0x1;_0x499f52<=0x9;_0x499f52++){let _0x2ee6fc=0x155e9020a68+_0x499f52*0x3e8,_0x9a1e48=_0x499f52+0x1,_0x17f36c=_0x499f52+0x1;ssln['processRecord'](JSON[a0_0x2d44('0x15')]('{\x22stampm\x22:'+_0x2ee6fc+a0_0x2d44('0x12')+_0x9a1e48+',\x22pact\x22:\x20'+_0x17f36c+'}'));}assert[a0_0x2d44('0x10')](ssln['buffer'][a0_0x2d44('0x33')],0xc),assert[a0_0x2d44('0x2c')](ssln[a0_0x2d44('0x52')][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});}),it(a0_0x2d44('0x47'),function(){ssln[a0_0x2d44('0x4a')](JSON[a0_0x2d44('0x15')](a0_0x2d44('0x66'))),ssln[a0_0x2d44('0x4a')](JSON[a0_0x2d44('0x15')](a0_0x2d44('0x23'))),assert[a0_0x2d44('0x10')](ssln[a0_0x2d44('0x52')][a0_0x2d44('0x33')],0xc);});});});