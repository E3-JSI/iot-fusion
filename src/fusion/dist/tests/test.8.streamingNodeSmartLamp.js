const a0_0xd9f6=['datetime','dimml|ma|604800000','pact|min|21600000','isMaster','streamingSmartLampNode','apply','connectToKafka','pact|max|21600000','buffer\x20empty','Base','dimml','config\x20saved','createAggregates','function','float','dimml|winbuf|21600000','name','master\x20set\x20correctly','getAggregates','192.168.85.98:2181','length','deepEqual','pact|ma|21600','buffer','dimml|ma|86400000','winbuf','parent\x20saved','pact|max|86400000','min','{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}','Empty\x20values\x20in\x20message\x20set\x20to\x200','nodes','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','pact|winbuf|21600000','fields','./db4/','fusionNodeI','config','dimml|max|86400000','createFolder','connectToKafka\x20function\x20exists','Time','dimml|variance|86400000','parent','getPartialFeatureVector','deleteObsoleteRows\x20function\x20exists','test','dimml|ma|21600000','dimml|max|21600000','return\x20/\x22\x20+\x20this\x20+\x20\x22/','master\x20flag\x20set\x20correctly','base','dimml|min|21600000','pact|min|86400000','../nodes/streamingNode.js','createClean','dimml|winbuf|86400000','keys','offsetExists\x20function\x20exists','processRecordCb','offsetExists','broadcastAggregates\x20function\x20exists','slave\x20offset\x20set\x20correctly:\x20no\x20data','value','fusionNodeI\x20correctly\x20saved','checkDataAvailability\x20function\x20exists','dimml|min|86400000','../nodes/streamingTimeValueNode.js','{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}','rawstore','parse','master\x20offset\x20set\x20correctly','close','../nodes/streamingSmartLampNode.js','buffer\x20position\x20is\x200','base\x20saved','master','getAggregates\x20function\x20exists','9\x20more\x20data\x20insertions','../nodes/streamingWeatherNode.js','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','aggregates\x20initialized\x20-\x20key\x20names','setMasterOffset','../nodes/streamingEnergyNode.js','pact|variance|86400000','../common/utils/fileManager.js','smartlamp','aggregate','constructor','position','variance','../nodes/streamingStaticNode.js','check\x20store\x20structure','duplicate\x20insertions\x20test',',\x22dimml\x22:\x20','data\x20record\x20saved\x20correctly','processRecord','callback\x20function\x20should\x20be\x20set','dimml|variance|21600000','mqtt','dimml|winbuf|604800000','data\x20insertion','max','broadcastAggregates','initialization','equal','getOffsetTimestamp\x20function\x20exists','getOffsetTimestamp','setSlaveOffset','pact|ma|21600000','pact',',\x22pact\x22:\x20','dimml|tick','setSlaveOffset\x20function\x20exists','{\x22stampm\x22:\x201468493073000}','{\x22stampm\x22:','pact|variance|21600000','pact|winbuf|86400000'];(function(_0x5c1b18,_0xd9f686){const _0x345ddb=function(_0x44c885){while(--_0x44c885){_0x5c1b18['push'](_0x5c1b18['shift']());}},_0x4a98c7=function(){const _0x3a108f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x574462,_0x525d54,_0xf40ee0,_0x1ffd6d){_0x1ffd6d=_0x1ffd6d||{};let _0x1dbdf8=_0x525d54+'='+_0xf40ee0,_0x183c13=0x0;for(let _0x33f3e9=0x0,_0x495998=_0x574462['length'];_0x33f3e9<_0x495998;_0x33f3e9++){const _0x1be02a=_0x574462[_0x33f3e9];_0x1dbdf8+=';\x20'+_0x1be02a;const _0x893938=_0x574462[_0x1be02a];_0x574462['push'](_0x893938),_0x495998=_0x574462['length'],_0x893938!==!![]&&(_0x1dbdf8+='='+_0x893938);}_0x1ffd6d['cookie']=_0x1dbdf8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x41609f,_0x2ec494){_0x41609f=_0x41609f||function(_0x1f7aa8){return _0x1f7aa8;};const _0x24ead5=_0x41609f(new RegExp('(?:^|;\x20)'+_0x2ec494['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x10474e=function(_0xf444cb,_0xc141bf){_0xf444cb(++_0xc141bf);};return _0x10474e(_0x345ddb,_0xd9f686),_0x24ead5?decodeURIComponent(_0x24ead5[0x1]):undefined;}},_0x2252ba=function(){const _0x5edb69=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5edb69['test'](_0x3a108f['removeCookie']['toString']());};_0x3a108f['updateCookie']=_0x2252ba;let _0x28c82e='';const _0x405a39=_0x3a108f['updateCookie']();if(!_0x405a39)_0x3a108f['setCookie'](['*'],'counter',0x1);else _0x405a39?_0x28c82e=_0x3a108f['getCookie'](null,'counter'):_0x3a108f['removeCookie']();};_0x4a98c7();}(a0_0xd9f6,0x1e7));const a0_0x345d=function(_0x5c1b18,_0xd9f686){_0x5c1b18=_0x5c1b18-0x0;let _0x345ddb=a0_0xd9f6[_0x5c1b18];return _0x345ddb;};const a0_0xf40ee0=function(){let _0x1fdf8d=!![];return function(_0x5445a3,_0x1eba1f){const _0x4fd40d=_0x1fdf8d?function(){if(_0x1eba1f){const _0x2bd055=_0x1eba1f[a0_0x345d('0x6c')](_0x5445a3,arguments);return _0x1eba1f=null,_0x2bd055;}}:function(){};return _0x1fdf8d=![],_0x4fd40d;};}(),a0_0x525d54=a0_0xf40ee0(this,function(){const _0x18c128=function(){const _0x417b18=_0x18c128[a0_0x345d('0x49')](a0_0x345d('0x22'))()['constructor'](a0_0x345d('0x11'));return!_0x417b18[a0_0x345d('0x1f')](a0_0x525d54);};return _0x18c128();});a0_0x525d54();const streamingNode=require(a0_0x345d('0x27')),streamingEnergyNode=require(a0_0x345d('0x44')),streamingWeatherNode=require(a0_0x345d('0x40')),streamingStaticNode=require(a0_0x345d('0x4c')),streamingTimeValueNode=require(a0_0x345d('0x34')),streamingSmartLampNode=require(a0_0x345d('0x3a')),fileManager=require(a0_0x345d('0x46')),qm=require('qminer'),fs=require('fs');var assert=require('assert');let connectionConfig={'zookeeper':a0_0x345d('0x4')},aggrConfigs={'smartlamp':[{'field':'dimml','tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x345d('0xd')},{'type':a0_0x345d('0x57')},{'type':a0_0x345d('0x4b')}]},{'type':a0_0x345d('0xa'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x345d('0xd')},{'type':a0_0x345d('0x57')},{'type':'variance'}]},{'type':a0_0x345d('0xa'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':a0_0x345d('0x5f'),'tick':[{'type':a0_0x345d('0xa'),'winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x345d('0xd')},{'type':a0_0x345d('0x57')},{'type':a0_0x345d('0x4b')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x345d('0xd')},{'type':a0_0x345d('0x57')},{'type':a0_0x345d('0x4b')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':'smartlamp','connection':{'type':a0_0x345d('0x54')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x345d('0x47'),'nodeid':a0_0x345d('0x47'),'aggrConfigId':a0_0x345d('0x47'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':a0_0x345d('0x71')},{'type':a0_0x345d('0x30'),'name':a0_0x345d('0x7')},{'type':'value','name':a0_0x345d('0x9')},{'type':a0_0x345d('0x30'),'name':a0_0x345d('0x33')},{'type':a0_0x345d('0x30'),'name':a0_0x345d('0x17')},{'type':a0_0x345d('0x30'),'name':'dimml|variance|86400000'}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':a0_0x345d('0x30'),'name':a0_0x345d('0x71')},{'type':a0_0x345d('0x30'),'name':'pact'},{'type':a0_0x345d('0x30'),'name':a0_0x345d('0x9')},{'type':a0_0x345d('0x30'),'name':a0_0x345d('0x33')},{'type':a0_0x345d('0x30'),'name':a0_0x345d('0x17')},{'type':a0_0x345d('0x30'),'name':a0_0x345d('0x1b')}]}]}]};function processRecordDummyCb(_0x4f18cf,_0x482bb9){return!![];}describe(a0_0x345d('0x6b'),function(){let _0x2b950e,_0x4673f4;before(function(){fileManager['removeFolder'](a0_0x345d('0x14')),fileManager[a0_0x345d('0x18')](a0_0x345d('0x14')),_0x2b950e=new qm[(a0_0x345d('0x70'))]({'dbPath':a0_0x345d('0x14'),'mode':a0_0x345d('0x28')}),ssln=new streamingSmartLampNode(_0x2b950e,connectionConfig,fusionConfig[a0_0x345d('0x10')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x2b950e[a0_0x345d('0x39')]();}),describe(a0_0x345d('0x59'),function(){it(a0_0x345d('0x3c'),function(){assert['equal'](_0x2b950e,ssln[a0_0x345d('0x24')]);}),it('check\x20if\x20store\x20exists',function(){assert[a0_0x345d('0x5a')](ssln[a0_0x345d('0x36')][a0_0x345d('0x1')],a0_0x345d('0x47'));}),it(a0_0x345d('0x4d'),function(){assert[a0_0x345d('0x6')](ssln[a0_0x345d('0x36')][a0_0x345d('0x13')],[{'id':0x0,'name':a0_0x345d('0x1a'),'type':a0_0x345d('0x67'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x345d('0x5f'),'type':a0_0x345d('0x75'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x345d('0x71'),'type':a0_0x345d('0x75'),'nullable':![],'internal':![],'primary':![]}]);}),it('aggregates\x20initialized\x20-\x20number',function(){assert[a0_0x345d('0x5a')](Object[a0_0x345d('0x2a')](ssln[a0_0x345d('0x48')])['length'],0x1a);}),it(a0_0x345d('0x42'),function(){assert[a0_0x345d('0x6')](Object[a0_0x345d('0x2a')](ssln[a0_0x345d('0x48')]),[a0_0x345d('0x61'),a0_0x345d('0x0'),a0_0x345d('0x20'),a0_0x345d('0x25'),a0_0x345d('0x21'),a0_0x345d('0x53'),a0_0x345d('0x29'),a0_0x345d('0x9'),'dimml|min|86400000','dimml|max|86400000',a0_0x345d('0x1b'),a0_0x345d('0x55'),a0_0x345d('0x68'),'pact|tick',a0_0x345d('0x12'),a0_0x345d('0x5e'),a0_0x345d('0x69'),a0_0x345d('0x6e'),a0_0x345d('0x65'),a0_0x345d('0x66'),'pact|ma|86400000',a0_0x345d('0x26'),a0_0x345d('0xc'),a0_0x345d('0x45'),'pact|winbuf|604800000','pact|ma|604800000']);}),it(a0_0x345d('0x72'),function(){assert[a0_0x345d('0x6')](ssln[a0_0x345d('0x16')],fusionConfig[a0_0x345d('0x10')][0x0]);}),it(a0_0x345d('0x31'),function(){assert['equal'](ssln[a0_0x345d('0x15')],0x63);}),it(a0_0x345d('0x52'),function(){assert['equal'](typeof ssln[a0_0x345d('0x2c')],a0_0x345d('0x74'));}),it(a0_0x345d('0xb'),function(){assert[a0_0x345d('0x5a')](ssln[a0_0x345d('0x1c')],null);}),it(a0_0x345d('0x6f'),function(){assert[a0_0x345d('0x6')](ssln['buffer'],[]);}),it(a0_0x345d('0x3b'),function(){assert[a0_0x345d('0x5a')](ssln[a0_0x345d('0x4a')],0x0);}),it(a0_0x345d('0x23'),function(){assert[a0_0x345d('0x5a')](ssln[a0_0x345d('0x3d')],!![]);}),it('isMaster\x20function',function(){assert['equal'](ssln[a0_0x345d('0x6a')](),!![]);}),it(a0_0x345d('0x19'),function(){assert[a0_0x345d('0x5a')](typeof ssln[a0_0x345d('0x6d')],a0_0x345d('0x74'));}),it(a0_0x345d('0x2e'),function(){assert[a0_0x345d('0x5a')](typeof ssln[a0_0x345d('0x58')],a0_0x345d('0x74'));}),it('createAggregates\x20function\x20exists',function(){assert[a0_0x345d('0x5a')](typeof ssln[a0_0x345d('0x73')],a0_0x345d('0x74'));}),it(a0_0x345d('0x2b'),function(){assert[a0_0x345d('0x5a')](typeof ssln[a0_0x345d('0x2d')],'function');}),it(a0_0x345d('0x1e'),function(){assert[a0_0x345d('0x5a')](typeof ssln['deleteObsoleteRows'],a0_0x345d('0x74'));}),it(a0_0x345d('0x32'),function(){assert['equal'](typeof ssln['checkDataAvailability'],a0_0x345d('0x74'));}),it(a0_0x345d('0x62'),function(){assert['equal'](typeof ssln[a0_0x345d('0x5d')],'function');}),it(a0_0x345d('0x5b'),function(){assert[a0_0x345d('0x5a')](typeof ssln[a0_0x345d('0x5c')],a0_0x345d('0x74'));}),it('setMasterOffset\x20function\x20exists',function(){assert['equal'](typeof ssln[a0_0x345d('0x5c')],'function');}),it(a0_0x345d('0x3e'),function(){assert['equal'](typeof ssln[a0_0x345d('0x3')],'function');}),it('getPartialFeatureVector\x20function\x20exists',function(){assert[a0_0x345d('0x5a')](typeof ssln[a0_0x345d('0x1d')],a0_0x345d('0x74'));}),it(a0_0x345d('0x2'),function(){assert[a0_0x345d('0x5a')](ssln['isMaster'](),!![]);}),it(a0_0x345d('0x38'),function(){ssln[a0_0x345d('0x43')](),assert['equal'](ssln[a0_0x345d('0x4a')],-0x1);}),it(a0_0x345d('0x2f'),function(){assert[a0_0x345d('0x5a')](ssln[a0_0x345d('0x5d')](0x0),![]);});}),describe(a0_0x345d('0x56'),function(){it(a0_0x345d('0x50'),function(){ssln['processRecord'](JSON['parse'](a0_0x345d('0x35'))),ssln[a0_0x345d('0x51')](JSON[a0_0x345d('0x37')]('{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}')),assert[a0_0x345d('0x5a')](ssln['buffer'][a0_0x345d('0x5')],0x2),assert[a0_0x345d('0x5a')](ssln['buffer'][0x0][a0_0x345d('0x71')],0x0),assert[a0_0x345d('0x5a')](ssln[a0_0x345d('0x8')][0x1][a0_0x345d('0x5f')],0x1);}),it(a0_0x345d('0xf'),function(){ssln[a0_0x345d('0x51')](JSON[a0_0x345d('0x37')](a0_0x345d('0x63'))),assert[a0_0x345d('0x5a')](ssln[a0_0x345d('0x8')][a0_0x345d('0x5')],0x3),assert[a0_0x345d('0x5a')](ssln[a0_0x345d('0x8')][0x2]['dimml'],0x0),assert['equal'](ssln[a0_0x345d('0x8')][0x2][a0_0x345d('0x5f')],0x0);}),it(a0_0x345d('0x41'),function(){assert[a0_0x345d('0x6')](ssln[a0_0x345d('0x8')][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});}),it(a0_0x345d('0x3f'),function(){for(let _0x314b44=0x1;_0x314b44<=0x9;_0x314b44++){let _0x4b3318=0x155e9020a68+_0x314b44*0x3e8,_0x31ac59=_0x314b44+0x1,_0x3ad157=_0x314b44+0x1;ssln[a0_0x345d('0x51')](JSON['parse'](a0_0x345d('0x64')+_0x4b3318+a0_0x345d('0x4f')+_0x31ac59+a0_0x345d('0x60')+_0x3ad157+'}'));}assert[a0_0x345d('0x5a')](ssln[a0_0x345d('0x8')]['length'],0xc),assert['deepEqual'](ssln[a0_0x345d('0x8')][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});}),it(a0_0x345d('0x4e'),function(){ssln[a0_0x345d('0x51')](JSON[a0_0x345d('0x37')](a0_0x345d('0x35'))),ssln[a0_0x345d('0x51')](JSON[a0_0x345d('0x37')](a0_0x345d('0xe'))),assert[a0_0x345d('0x5a')](ssln['buffer'][a0_0x345d('0x5')],0xc);});});});