const a0_0x18dd=['keys','createAggregates','dimml|winbuf|86400000','../nodes/streamingEnergyNode.js','{\x22stampm\x22:\x201468493071000,\x20\x22pact\x22:\x200.0,\x20\x22dimml\x22:\x200\x20}','dimml|winbuf|604800000','parent','master\x20flag\x20set\x20correctly','getPartialFeatureVector','9\x20more\x20data\x20insertions','length','aggregates\x20initialized\x20-\x20key\x20names','parent\x20saved','pact|winbuf|86400000','pact|max|21600000','check\x20if\x20store\x20exists','assert','deleteObsoleteRows','variance','Empty\x20values\x20in\x20message\x20set\x20to\x200','removeFolder','initialization','connectToKafka','min','offsetExists','nodes','buffer','dimml|ma|604800000','callback\x20function\x20should\x20be\x20set','pact|ma|21600000','pact|max|86400000','{\x22stampm\x22:\x201468493072000,\x20\x22pact\x22:\x201.0,\x20\x22dimml\x22:\x201\x20}','checkDataAvailability','pact|tick','buffer\x20empty','pact|ma|21600','data\x20record\x20saved\x20correctly','master\x20set\x20correctly','setSlaveOffset\x20function\x20exists','createFolder','dimml|max|86400000','setSlaveOffset','fusionNodeI','fusionNodeI\x20correctly\x20saved','createAggregates\x20function\x20exists','base\x20saved','isMaster','base','pact|min|86400000','{\x22stampm\x22:\x201468493073000}','qminer','position','test','../nodes/streamingTimeValueNode.js','dimml|tick','dimml|ma|86400000','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','mqtt','data\x20insertion','pact|min|21600000','pact|winbuf|21600000','parse','slave\x20offset\x20set\x20correctly:\x20no\x20data','dimml','constructor','broadcastAggregates','value','return\x20/\x22\x20+\x20this\x20+\x20\x22/','setMasterOffset','dimml|winbuf|21600000','checkDataAvailability\x20function\x20exists','function','pact','float','Time','winbuf','stream\x20aggregates\x20calculated\x20correctly\x20for\x20#2\x20insertion','dimml|ma|21600000','dimml|max|21600000','./db4/','rawstore','datetime','smartlamp','createClean','aggregate','../nodes/streamingWeatherNode.js','pact|variance|86400000','apply','processRecord','max','config','dimml|min|86400000','aggregates\x20initialized\x20-\x20number','dimml|min|21600000','../common/utils/fileManager.js','Base','getOffsetTimestamp\x20function\x20exists','../nodes/streamingSmartLampNode.js','dimml|variance|86400000','pact|variance|21600000','setMasterOffset\x20function\x20exists','getOffsetTimestamp','getPartialFeatureVector\x20function\x20exists','processRecordCb','{\x22stampm\x22:','deepEqual','master\x20offset\x20set\x20correctly',',\x22dimml\x22:\x20','check\x20store\x20structure','equal','config\x20saved'];(function(_0x2a9a75,_0x18ddd4){const _0x1ef980=function(_0x5d3a43){while(--_0x5d3a43){_0x2a9a75['push'](_0x2a9a75['shift']());}},_0x4c06eb=function(){const _0x403ff4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4a3718,_0x19b2b7,_0xabcba5,_0xfc4e15){_0xfc4e15=_0xfc4e15||{};let _0xf708b2=_0x19b2b7+'='+_0xabcba5,_0x5bc280=0x0;for(let _0x2075f6=0x0,_0x128900=_0x4a3718['length'];_0x2075f6<_0x128900;_0x2075f6++){const _0x3a0d25=_0x4a3718[_0x2075f6];_0xf708b2+=';\x20'+_0x3a0d25;const _0x11428a=_0x4a3718[_0x3a0d25];_0x4a3718['push'](_0x11428a),_0x128900=_0x4a3718['length'],_0x11428a!==!![]&&(_0xf708b2+='='+_0x11428a);}_0xfc4e15['cookie']=_0xf708b2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4d14ee,_0x1501f8){_0x4d14ee=_0x4d14ee||function(_0xe7810b){return _0xe7810b;};const _0x32630a=_0x4d14ee(new RegExp('(?:^|;\x20)'+_0x1501f8['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4bc838=function(_0x332306,_0x421307){_0x332306(++_0x421307);};return _0x4bc838(_0x1ef980,_0x18ddd4),_0x32630a?decodeURIComponent(_0x32630a[0x1]):undefined;}},_0x1c3a38=function(){const _0x2cc980=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2cc980['test'](_0x403ff4['removeCookie']['toString']());};_0x403ff4['updateCookie']=_0x1c3a38;let _0x350688='';const _0xfa37ab=_0x403ff4['updateCookie']();if(!_0xfa37ab)_0x403ff4['setCookie'](['*'],'counter',0x1);else _0xfa37ab?_0x350688=_0x403ff4['getCookie'](null,'counter'):_0x403ff4['removeCookie']();};_0x4c06eb();}(a0_0x18dd,0x117));const a0_0x1ef9=function(_0x2a9a75,_0x18ddd4){_0x2a9a75=_0x2a9a75-0x0;let _0x1ef980=a0_0x18dd[_0x2a9a75];return _0x1ef980;};const a0_0xabcba5=function(){let _0x3e0372=!![];return function(_0x2833b0,_0x561307){const _0x39edda=_0x3e0372?function(){if(_0x561307){const _0x2b2f9f=_0x561307[a0_0x1ef9('0x1e')](_0x2833b0,arguments);return _0x561307=null,_0x2b2f9f;}}:function(){};return _0x3e0372=![],_0x39edda;};}(),a0_0x19b2b7=a0_0xabcba5(this,function(){const _0x315931=function(){const _0x2d7bc3=_0x315931['constructor'](a0_0x1ef9('0xa'))()[a0_0x1ef9('0x7')](a0_0x1ef9('0x6e'));return!_0x2d7bc3[a0_0x1ef9('0x6a')](a0_0x19b2b7);};return _0x315931();});a0_0x19b2b7();const streamingNode=require('../nodes/streamingNode.js'),streamingEnergyNode=require(a0_0x1ef9('0x39')),streamingWeatherNode=require(a0_0x1ef9('0x1c')),streamingStaticNode=require('../nodes/streamingStaticNode.js'),streamingTimeValueNode=require(a0_0x1ef9('0x6b')),streamingSmartLampNode=require(a0_0x1ef9('0x28')),fileManager=require(a0_0x1ef9('0x25')),qm=require(a0_0x1ef9('0x68')),fs=require('fs');var assert=require(a0_0x1ef9('0x46'));let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'smartlamp':[{'field':a0_0x1ef9('0x6'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x1ef9('0x4d')},{'type':'max'},{'type':a0_0x1ef9('0x48')}]},{'type':'winbuf','winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x1ef9('0x4d')},{'type':a0_0x1ef9('0x20')},{'type':a0_0x1ef9('0x48')}]},{'type':a0_0x1ef9('0x12'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]},{'field':a0_0x1ef9('0xf'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x1ef9('0x4d')},{'type':'max'},{'type':a0_0x1ef9('0x48')}]},{'type':a0_0x1ef9('0x12'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x1ef9('0x4d')},{'type':a0_0x1ef9('0x20')},{'type':a0_0x1ef9('0x48')}]},{'type':'winbuf','winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x1ef9('0x19'),'connection':{'type':a0_0x1ef9('0x0')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x1ef9('0x19'),'nodeid':a0_0x1ef9('0x19'),'aggrConfigId':a0_0x1ef9('0x19'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x1ef9('0x9'),'name':a0_0x1ef9('0x6')},{'type':a0_0x1ef9('0x9'),'name':a0_0x1ef9('0x59')},{'type':'value','name':a0_0x1ef9('0x6d')},{'type':a0_0x1ef9('0x9'),'name':a0_0x1ef9('0x22')},{'type':a0_0x1ef9('0x9'),'name':a0_0x1ef9('0x5e')},{'type':a0_0x1ef9('0x9'),'name':a0_0x1ef9('0x29')}]},{'time':-0x18*0x3c*0x3c*0x3e8,'attributes':[{'type':'value','name':a0_0x1ef9('0x6')},{'type':'value','name':a0_0x1ef9('0xf')},{'type':a0_0x1ef9('0x9'),'name':a0_0x1ef9('0x6d')},{'type':a0_0x1ef9('0x9'),'name':a0_0x1ef9('0x22')},{'type':a0_0x1ef9('0x9'),'name':a0_0x1ef9('0x5e')},{'type':a0_0x1ef9('0x9'),'name':a0_0x1ef9('0x29')}]}]}]};function processRecordDummyCb(_0x1bfcce,_0x55610d){return!![];}describe('streamingSmartLampNode',function(){let _0x2e4e8b,_0x45513e;before(function(){fileManager[a0_0x1ef9('0x4a')](a0_0x1ef9('0x16')),fileManager[a0_0x1ef9('0x5d')](a0_0x1ef9('0x16')),_0x2e4e8b=new qm[(a0_0x1ef9('0x26'))]({'dbPath':a0_0x1ef9('0x16'),'mode':a0_0x1ef9('0x1a')}),ssln=new streamingSmartLampNode(_0x2e4e8b,connectionConfig,fusionConfig[a0_0x1ef9('0x4f')][0x0],aggrConfigs,processRecordDummyCb,0x63,null);}),after(function(){_0x2e4e8b['close']();}),describe(a0_0x1ef9('0x4b'),function(){it(a0_0x1ef9('0x63'),function(){assert[a0_0x1ef9('0x34')](_0x2e4e8b,ssln[a0_0x1ef9('0x65')]);}),it(a0_0x1ef9('0x45'),function(){assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x17')]['name'],a0_0x1ef9('0x19'));}),it(a0_0x1ef9('0x33'),function(){assert[a0_0x1ef9('0x30')](ssln[a0_0x1ef9('0x17')]['fields'],[{'id':0x0,'name':a0_0x1ef9('0x11'),'type':a0_0x1ef9('0x18'),'nullable':![],'internal':![],'primary':![]},{'id':0x1,'name':a0_0x1ef9('0xf'),'type':a0_0x1ef9('0x10'),'nullable':![],'internal':![],'primary':![]},{'id':0x2,'name':a0_0x1ef9('0x6'),'type':a0_0x1ef9('0x10'),'nullable':![],'internal':![],'primary':![]}]);}),it(a0_0x1ef9('0x23'),function(){assert[a0_0x1ef9('0x34')](Object[a0_0x1ef9('0x36')](ssln[a0_0x1ef9('0x1b')])[a0_0x1ef9('0x40')],0x1a);}),it(a0_0x1ef9('0x41'),function(){assert[a0_0x1ef9('0x30')](Object[a0_0x1ef9('0x36')](ssln['aggregate']),[a0_0x1ef9('0x6c'),a0_0x1ef9('0xc'),a0_0x1ef9('0x14'),a0_0x1ef9('0x24'),a0_0x1ef9('0x15'),'dimml|variance|21600000',a0_0x1ef9('0x38'),a0_0x1ef9('0x6d'),a0_0x1ef9('0x22'),a0_0x1ef9('0x5e'),a0_0x1ef9('0x29'),a0_0x1ef9('0x3b'),a0_0x1ef9('0x51'),a0_0x1ef9('0x57'),a0_0x1ef9('0x3'),a0_0x1ef9('0x53'),a0_0x1ef9('0x2'),a0_0x1ef9('0x44'),a0_0x1ef9('0x2a'),a0_0x1ef9('0x43'),'pact|ma|86400000',a0_0x1ef9('0x66'),a0_0x1ef9('0x54'),a0_0x1ef9('0x1d'),'pact|winbuf|604800000','pact|ma|604800000']);}),it(a0_0x1ef9('0x35'),function(){assert['deepEqual'](ssln[a0_0x1ef9('0x21')],fusionConfig[a0_0x1ef9('0x4f')][0x0]);}),it(a0_0x1ef9('0x61'),function(){assert['equal'](ssln[a0_0x1ef9('0x60')],0x63);}),it(a0_0x1ef9('0x52'),function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x2e')],'function');}),it(a0_0x1ef9('0x42'),function(){assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x3c')],null);}),it(a0_0x1ef9('0x58'),function(){assert[a0_0x1ef9('0x30')](ssln['buffer'],[]);}),it('buffer\x20position\x20is\x200',function(){assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x69')],0x0);}),it(a0_0x1ef9('0x3d'),function(){assert[a0_0x1ef9('0x34')](ssln['master'],!![]);}),it('isMaster\x20function',function(){assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x64')](),!![]);}),it('connectToKafka\x20function\x20exists',function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x4c')],a0_0x1ef9('0xe'));}),it('broadcastAggregates\x20function\x20exists',function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x8')],a0_0x1ef9('0xe'));}),it(a0_0x1ef9('0x62'),function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x37')],a0_0x1ef9('0xe'));}),it('offsetExists\x20function\x20exists',function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x4e')],'function');}),it('deleteObsoleteRows\x20function\x20exists',function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x47')],a0_0x1ef9('0xe'));}),it(a0_0x1ef9('0xd'),function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x56')],a0_0x1ef9('0xe'));}),it(a0_0x1ef9('0x5c'),function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x5f')],a0_0x1ef9('0xe'));}),it(a0_0x1ef9('0x27'),function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x2c')],a0_0x1ef9('0xe'));}),it(a0_0x1ef9('0x2b'),function(){assert[a0_0x1ef9('0x34')](typeof ssln[a0_0x1ef9('0x2c')],a0_0x1ef9('0xe'));}),it('getAggregates\x20function\x20exists',function(){assert[a0_0x1ef9('0x34')](typeof ssln['getAggregates'],'function');}),it(a0_0x1ef9('0x2d'),function(){assert['equal'](typeof ssln[a0_0x1ef9('0x3e')],a0_0x1ef9('0xe'));}),it(a0_0x1ef9('0x5b'),function(){assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x64')](),!![]);}),it(a0_0x1ef9('0x31'),function(){ssln[a0_0x1ef9('0xb')](),assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x69')],-0x1);}),it(a0_0x1ef9('0x5'),function(){assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x5f')](0x0),![]);});}),describe(a0_0x1ef9('0x1'),function(){it(a0_0x1ef9('0x5a'),function(){ssln[a0_0x1ef9('0x1f')](JSON[a0_0x1ef9('0x4')](a0_0x1ef9('0x3a'))),ssln['processRecord'](JSON[a0_0x1ef9('0x4')](a0_0x1ef9('0x55'))),assert['equal'](ssln['buffer'][a0_0x1ef9('0x40')],0x2),assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x50')][0x0]['dimml'],0x0),assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x50')][0x1][a0_0x1ef9('0xf')],0x1);}),it(a0_0x1ef9('0x49'),function(){ssln[a0_0x1ef9('0x1f')](JSON[a0_0x1ef9('0x4')](a0_0x1ef9('0x67'))),assert[a0_0x1ef9('0x34')](ssln['buffer']['length'],0x3),assert[a0_0x1ef9('0x34')](ssln['buffer'][0x2][a0_0x1ef9('0x6')],0x0);}),it(a0_0x1ef9('0x13'),function(){assert['deepEqual'](ssln['buffer'][0x1],{'stampm':0x155e9020680,'dimml':0x1,'dimml|max|21600000':0x1,'dimml|max|86400000':0x1,'dimml|ma|21600000':0.5,'dimml|ma|604800000':0.5,'dimml|ma|86400000':0.5,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':0.5,'dimml|variance|86400000':0.5,'pact':0x1,'pact|max|21600000':0x1,'pact|max|86400000':0x1,'pact|ma|21600000':0.5,'pact|ma|604800000':0.5,'pact|ma|86400000':0.5,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':0.5,'pact|variance|86400000':0.5});}),it(a0_0x1ef9('0x3f'),function(){for(let _0x2fa0cc=0x1;_0x2fa0cc<=0x9;_0x2fa0cc++){let _0x4d8fc7=0x155e9020a68+_0x2fa0cc*0x3e8,_0x129a90=_0x2fa0cc+0x1,_0xcdf916=_0x2fa0cc+0x1;ssln[a0_0x1ef9('0x1f')](JSON[a0_0x1ef9('0x4')](a0_0x1ef9('0x2f')+_0x4d8fc7+a0_0x1ef9('0x32')+_0x129a90+',\x22pact\x22:\x20'+_0xcdf916+'}'));}assert[a0_0x1ef9('0x34')](ssln[a0_0x1ef9('0x50')]['length'],0xc),assert[a0_0x1ef9('0x30')](ssln[a0_0x1ef9('0x50')][0xb],{'stampm':0x155e9022d90,'dimml':0xa,'dimml|max|21600000':0xa,'dimml|max|86400000':0xa,'dimml|ma|21600000':4.583333333333333,'dimml|ma|604800000':4.583333333333333,'dimml|ma|86400000':4.583333333333333,'dimml|min|21600000':0x0,'dimml|min|86400000':0x0,'dimml|variance|21600000':12.083333333333336,'dimml|variance|86400000':12.083333333333336,'pact':0xa,'pact|max|21600000':0xa,'pact|max|86400000':0xa,'pact|ma|21600000':4.583333333333333,'pact|ma|604800000':4.583333333333333,'pact|ma|86400000':4.583333333333333,'pact|min|21600000':0x0,'pact|min|86400000':0x0,'pact|variance|21600000':12.083333333333336,'pact|variance|86400000':12.083333333333336});}),it('duplicate\x20insertions\x20test',function(){ssln[a0_0x1ef9('0x1f')](JSON['parse'](a0_0x1ef9('0x3a'))),ssln[a0_0x1ef9('0x1f')](JSON[a0_0x1ef9('0x4')](a0_0x1ef9('0x55'))),assert['equal'](ssln[a0_0x1ef9('0x50')]['length'],0xc);});});});