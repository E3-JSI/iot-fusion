const a0_0x95be=['fusionNodeI','deepEqual','hourOfDay','test','holidays','check\x20feature\x20vector','static\x20values\x20retrieved\x20correctly','value','removeFolder','config\x20saved','return\x20/\x22\x20+\x20this\x20+\x20\x22/','dayOfMonth','none','isMaster','min','timeDiff','processRecordCb','Base','2020-08-21','dayOfYear|min|604800000','value|max|86400000','staticCalculated','callback\x20function\x20should\x20be\x20set','setSlaveOffset','weekEnd|variance|604800000','max','parent\x20saved','processRecord','config','timevalue','weekEnd','dayOfYear','parse','winbuf','dayAfterHoliday','slave\x20offset\x20set\x20correctly:\x20no\x20data\x20needed','nodes','staticValue','staticCalculatedNode','buildFeatureVector','value|ma|86400000','setSlaveOffset\x20function\x20exists','checkDataAvailability','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}','variance','dayOfYear|max|604800000','setMasterOffset','assert','../common/utils/fileManager.js','checkDataAvailability\x20function\x20exists','equal','data\x20retrieval','createFolder','createClean','fusionNodeI\x20correctly\x20saved','dayBeforeHoliday','calculated','apply','close','function','calculateValue','calculated\x20values\x20retrieved\x20correctly','getPartialFeatureVector','fusion\x20with\x20static\x20vector','monthOfYear','parent','weekEnd|ma|604800000','../nodes/staticCalculatedNode.js','holiday','dayOfWeek','./db4/','master\x20set\x20correctly'];(function(_0x20ce20,_0x95be15){const _0x18cdb9=function(_0x24c947){while(--_0x24c947){_0x20ce20['push'](_0x20ce20['shift']());}},_0x2993d0=function(){const _0x5e44ed={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x512cfd,_0x42c05e,_0x303f0d,_0x27643b){_0x27643b=_0x27643b||{};let _0x12a3ad=_0x42c05e+'='+_0x303f0d,_0x5b0d24=0x0;for(let _0x238c69=0x0,_0x5e00c5=_0x512cfd['length'];_0x238c69<_0x5e00c5;_0x238c69++){const _0x48b0eb=_0x512cfd[_0x238c69];_0x12a3ad+=';\x20'+_0x48b0eb;const _0x2ef80d=_0x512cfd[_0x48b0eb];_0x512cfd['push'](_0x2ef80d),_0x5e00c5=_0x512cfd['length'],_0x2ef80d!==!![]&&(_0x12a3ad+='='+_0x2ef80d);}_0x27643b['cookie']=_0x12a3ad;},'removeCookie':function(){return'dev';},'getCookie':function(_0x76a289,_0x4f77a4){_0x76a289=_0x76a289||function(_0x32621d){return _0x32621d;};const _0x1c9fa0=_0x76a289(new RegExp('(?:^|;\x20)'+_0x4f77a4['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x589275=function(_0x4a0e3f,_0x44a726){_0x4a0e3f(++_0x44a726);};return _0x589275(_0x18cdb9,_0x95be15),_0x1c9fa0?decodeURIComponent(_0x1c9fa0[0x1]):undefined;}},_0x261f49=function(){const _0x5f32ab=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5f32ab['test'](_0x5e44ed['removeCookie']['toString']());};_0x5e44ed['updateCookie']=_0x261f49;let _0x295328='';const _0x19968e=_0x5e44ed['updateCookie']();if(!_0x19968e)_0x5e44ed['setCookie'](['*'],'counter',0x1);else _0x19968e?_0x295328=_0x5e44ed['getCookie'](null,'counter'):_0x5e44ed['removeCookie']();};_0x2993d0();}(a0_0x95be,0xed));const a0_0x18cd=function(_0x20ce20,_0x95be15){_0x20ce20=_0x20ce20-0x0;let _0x18cdb9=a0_0x95be[_0x20ce20];return _0x18cdb9;};const a0_0x303f0d=function(){let _0x352305=!![];return function(_0x4aecee,_0x2bfb61){const _0x3bd342=_0x352305?function(){if(_0x2bfb61){const _0x3d0486=_0x2bfb61[a0_0x18cd('0x24')](_0x4aecee,arguments);return _0x2bfb61=null,_0x3d0486;}}:function(){};return _0x352305=![],_0x3bd342;};}(),a0_0x42c05e=a0_0x303f0d(this,function(){const _0x12e82e=function(){const _0x9c40c5=_0x12e82e['constructor'](a0_0x18cd('0x3d'))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x9c40c5[a0_0x18cd('0x36')](a0_0x42c05e);};return _0x12e82e();});a0_0x42c05e();const staticCalculationNode=require(a0_0x18cd('0x2e')),StreamFusion=require('../streamFusion.js'),fileManager=require(a0_0x18cd('0x1b')),qm=require('qminer'),fs=require('fs');var assert=require(a0_0x18cd('0x1a'));let connectionConfig={'zookeeper':'192.168.85.98:2181'},aggrConfigs={'timevalue':[{'field':a0_0x18cd('0x3a'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x18cd('0xc'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x18cd('0x41')},{'type':a0_0x18cd('0x4')},{'type':a0_0x18cd('0x17')}]},{'type':a0_0x18cd('0xc'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x18cd('0x41')},{'type':a0_0x18cd('0x4')},{'type':a0_0x18cd('0x17')}]},{'type':a0_0x18cd('0xc'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x18cd('0x0'),'connection':{'type':a0_0x18cd('0x3f')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x18cd('0x8'),'nodeid':'timevalue','aggrConfigId':a0_0x18cd('0x8'),'master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':'value'},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x13')},{'type':'value','name':'value|min|86400000'},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x47')},{'type':'value','name':'value|variance|86400000'}]}]},{'type':a0_0x18cd('0x23'),'nodeid':a0_0x18cd('0x23'),'aggrConfigId':a0_0x18cd('0x23'),'nodeFrequency':0x36ee80,'fusionTick':0x36ee80,'master':![],'holidays':['2020-08-21','2020-08-19'],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':a0_0x18cd('0x35')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x30')},{'type':'value','name':a0_0x18cd('0xd')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x22')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0xa')},{'type':a0_0x18cd('0x3a'),'name':'dayOfMonth'},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x2f')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x2b')},{'type':'value','name':a0_0x18cd('0x9')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x2d')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x46')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x18')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x3')}]},{'time':-0x18,'attributes':[{'type':'value','name':a0_0x18cd('0xd')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x22')},{'type':'value','name':a0_0x18cd('0xa')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x3e')},{'type':a0_0x18cd('0x3a'),'name':a0_0x18cd('0x2f')},{'type':a0_0x18cd('0x42'),'name':'hourOfDay','interval':0x5}]}]}]};function processRecordDummyCb(_0x378f2d,_0x5c3523){return!![];}describe(a0_0x18cd('0x11'),function(){let _0x4cf17f,_0x5d141c;before(function(){fileManager[a0_0x18cd('0x3b')](a0_0x18cd('0x31')),fileManager[a0_0x18cd('0x1f')](a0_0x18cd('0x31')),_0x4cf17f=new qm[(a0_0x18cd('0x44'))]({'dbPath':a0_0x18cd('0x31'),'mode':a0_0x18cd('0x20')}),scn=new staticCalculationNode(_0x4cf17f,connectionConfig,fusionConfig['nodes'][0x1],aggrConfigs,processRecordDummyCb,0x63,null),fusion=new StreamFusion(connectionConfig,fusionConfig,aggrConfigs);}),after(function(){_0x4cf17f[a0_0x18cd('0x25')]();}),describe('initialization',function(){it('base\x20saved',function(){assert[a0_0x18cd('0x1d')](_0x4cf17f,scn['base']);}),it(a0_0x18cd('0x3c'),function(){assert['deepEqual'](scn[a0_0x18cd('0x7')],fusionConfig[a0_0x18cd('0xf')][0x1]);}),it(a0_0x18cd('0x21'),function(){assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x33')],0x63);}),it(a0_0x18cd('0x1'),function(){assert[a0_0x18cd('0x1d')](typeof scn[a0_0x18cd('0x43')],'function');}),it(a0_0x18cd('0x5'),function(){assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x2c')],null);}),it('isMaster\x20function',function(){assert['equal'](scn[a0_0x18cd('0x40')](),![]);}),it(a0_0x18cd('0x1c'),function(){assert['equal'](typeof scn[a0_0x18cd('0x15')],a0_0x18cd('0x26'));}),it(a0_0x18cd('0x14'),function(){assert[a0_0x18cd('0x1d')](typeof scn['setSlaveOffset'],a0_0x18cd('0x26'));}),it('getPartialFeatureVector\x20function\x20exists',function(){assert['equal'](typeof scn[a0_0x18cd('0x29')],'function');}),it(a0_0x18cd('0x32'),function(){assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x40')](),![]);}),it(a0_0x18cd('0xe'),function(){assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x2')](0x0),!![]);}),it('holidays',function(){assert['deepEqual'](scn[a0_0x18cd('0x37')],[a0_0x18cd('0x45'),'2020-08-19']);});}),describe(a0_0x18cd('0x1e'),function(){it(a0_0x18cd('0x39'),function(){const _0x226f85=0x1740c8f0439;assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x10')](_0x226f85,'hourOfDay'),0x11),assert[a0_0x18cd('0x1d')](scn['staticValue'](_0x226f85,a0_0x18cd('0x30')),0x4),assert['equal'](scn['staticValue'](_0x226f85,a0_0x18cd('0x3e')),0x14),assert['equal'](scn[a0_0x18cd('0x10')](_0x226f85,a0_0x18cd('0x2b')),0x8),assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x10')](_0x226f85,a0_0x18cd('0x9')),0x0),assert['equal'](scn[a0_0x18cd('0x10')](_0x226f85,'dayAfterHoliday'),0x1),assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x10')](_0x226f85,a0_0x18cd('0x2f')),0x0),assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x10')](_0x226f85,a0_0x18cd('0x22')),0x1);}),it(a0_0x18cd('0x28'),function(){const _0x3588d2=0x1740c8f0439+0x18*0x3c*0x3c*0x3e8;assert[a0_0x18cd('0x1d')](scn['calculateValue'](_0x3588d2,'hourOfDay'),0x11),assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x27')](_0x3588d2,a0_0x18cd('0x30')),0x5),assert['equal'](scn[a0_0x18cd('0x27')](_0x3588d2,'dayOfMonth'),0x15),assert['equal'](scn['calculateValue'](_0x3588d2,a0_0x18cd('0x2b')),0x8),assert['equal'](scn['calculateValue'](_0x3588d2,a0_0x18cd('0x9')),0x0),assert[a0_0x18cd('0x1d')](scn['calculateValue'](_0x3588d2,a0_0x18cd('0xd')),0x0),assert[a0_0x18cd('0x1d')](scn[a0_0x18cd('0x27')](_0x3588d2,'holiday'),0x1),assert[a0_0x18cd('0x1d')](scn['calculateValue'](_0x3588d2,a0_0x18cd('0x22')),0x0);}),it(a0_0x18cd('0x38'),function(){const _0x258df0=0x1740c8f0439;scn[a0_0x18cd('0x2')](_0x258df0),assert[a0_0x18cd('0x34')](scn[a0_0x18cd('0x29')](),[0x11,0x4,0x1,0x1,0xe9,0x14,0x0,0x8,0x0,0x2/0x7,0xe2,0xe9,0.2040816326530619,0x0,0x0,0xe8,0x13,0x1,0x5]);});}),describe('stream\x20fusion',function(){it(a0_0x18cd('0x2a'),function(){fusion[a0_0x18cd('0xf')][0x0]['processRecord'](JSON[a0_0x18cd('0xb')]('{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}')),fusion['nodes'][0x0][a0_0x18cd('0x6')](JSON[a0_0x18cd('0xb')](a0_0x18cd('0x16'))),fusion[a0_0x18cd('0xf')][0x0][a0_0x18cd('0x19')](),fusion[a0_0x18cd('0xf')][0x1][a0_0x18cd('0x2')](0x0),assert[a0_0x18cd('0x34')](fusion[a0_0x18cd('0x12')](),[0x14,0xf,0xa,0x14,0x32,0x1,0x4,0x0,0x0,0x1,0x1,0x0,0x1,0x0,0.2857142857142857,0x1,0x16d,0.2040816326530618,0x0,0x0,0x16d,0x1f,0x0,-0x13]);});});});