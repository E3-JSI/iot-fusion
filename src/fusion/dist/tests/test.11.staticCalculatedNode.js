const a0_0x11ec=['hourOfDay','parse','constructor','setMasterOffset','{\x22time\x22:\x201451606400,\x22value\x22:\x2010.0}','checkDataAvailability','calculateValue','getPartialFeatureVector','qminer','calculated','dayOfYear','dayOfMonth','192.168.85.98:2181','../common/utils/fileManager.js','Base','removeFolder','data\x20retrieval','monthOfYear','check\x20feature\x20vector','function','dayAfterHoliday','2020-08-21','none','getPartialFeatureVector\x20function\x20exists','staticValue','assert','parent','parent\x20saved','processRecord','fusionNodeI','./db4/','setSlaveOffset\x20function\x20exists','min','value|variance|86400000','checkDataAvailability\x20function\x20exists','isMaster','value|max|86400000','dayOfYear|max|604800000','dayBeforeHoliday','base','timevalue','value','equal','slave\x20offset\x20set\x20correctly:\x20no\x20data\x20needed','callback\x20function\x20should\x20be\x20set','winbuf','setSlaveOffset','weekEnd|variance|604800000','max','dayOfYear|min|604800000','2020-08-19','variance','nodes','holiday','../streamFusion.js','fusion\x20with\x20static\x20vector','timeDiff','master\x20set\x20correctly','processRecordCb','weekEnd','test','apply','config\x20saved','initialization','calculated\x20values\x20retrieved\x20correctly','dayOfWeek','deepEqual','holidays','config','return\x20/\x22\x20+\x20this\x20+\x20\x22/','staticCalculated','{\x22time\x22:\x201451610000,\x22value\x22:\x2020.0}'];(function(_0x411e59,_0x11ec6a){const _0x5683ba=function(_0x25950d){while(--_0x25950d){_0x411e59['push'](_0x411e59['shift']());}},_0x2b6931=function(){const _0x39730d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5584c9,_0xa17e62,_0x468ae9,_0x23836a){_0x23836a=_0x23836a||{};let _0x3c9e51=_0xa17e62+'='+_0x468ae9,_0x1e6799=0x0;for(let _0x256f0c=0x0,_0xed045d=_0x5584c9['length'];_0x256f0c<_0xed045d;_0x256f0c++){const _0x526966=_0x5584c9[_0x256f0c];_0x3c9e51+=';\x20'+_0x526966;const _0x2bcd84=_0x5584c9[_0x526966];_0x5584c9['push'](_0x2bcd84),_0xed045d=_0x5584c9['length'],_0x2bcd84!==!![]&&(_0x3c9e51+='='+_0x2bcd84);}_0x23836a['cookie']=_0x3c9e51;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5dc9a8,_0x1f48fe){_0x5dc9a8=_0x5dc9a8||function(_0x26b601){return _0x26b601;};const _0x6feebf=_0x5dc9a8(new RegExp('(?:^|;\x20)'+_0x1f48fe['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x16a77e=function(_0x34a588,_0x2cf8cb){_0x34a588(++_0x2cf8cb);};return _0x16a77e(_0x5683ba,_0x11ec6a),_0x6feebf?decodeURIComponent(_0x6feebf[0x1]):undefined;}},_0x4a64ac=function(){const _0x5a471c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5a471c['test'](_0x39730d['removeCookie']['toString']());};_0x39730d['updateCookie']=_0x4a64ac;let _0x34cde0='';const _0x3808e6=_0x39730d['updateCookie']();if(!_0x3808e6)_0x39730d['setCookie'](['*'],'counter',0x1);else _0x3808e6?_0x34cde0=_0x39730d['getCookie'](null,'counter'):_0x39730d['removeCookie']();};_0x2b6931();}(a0_0x11ec,0x175));const a0_0x5683=function(_0x411e59,_0x11ec6a){_0x411e59=_0x411e59-0x0;let _0x5683ba=a0_0x11ec[_0x411e59];return _0x5683ba;};const a0_0x468ae9=function(){let _0x4bca1b=!![];return function(_0x362f25,_0x4e7524){const _0x246e8=_0x4bca1b?function(){if(_0x4e7524){const _0x3227b1=_0x4e7524[a0_0x5683('0x30')](_0x362f25,arguments);return _0x4e7524=null,_0x3227b1;}}:function(){};return _0x4bca1b=![],_0x246e8;};}(),a0_0xa17e62=a0_0x468ae9(this,function(){const _0x4dcee6=function(){const _0x572223=_0x4dcee6[a0_0x5683('0x3d')](a0_0x5683('0x38'))()[a0_0x5683('0x3d')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x572223[a0_0x5683('0x2f')](a0_0xa17e62);};return _0x4dcee6();});a0_0xa17e62();const staticCalculationNode=require('../nodes/staticCalculatedNode.js'),StreamFusion=require(a0_0x5683('0x29')),fileManager=require(a0_0x5683('0x0')),qm=require(a0_0x5683('0x43')),fs=require('fs');var assert=require(a0_0x5683('0xc'));let connectionConfig={'zookeeper':a0_0x5683('0x47')},aggrConfigs={'timevalue':[{'field':a0_0x5683('0x1c'),'tick':[{'type':'winbuf','winsize':0x6*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]},{'type':a0_0x5683('0x20'),'winsize':0xc*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':a0_0x5683('0x13')},{'type':a0_0x5683('0x23')},{'type':'variance'}]},{'type':a0_0x5683('0x20'),'winsize':0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'},{'type':'min'},{'type':a0_0x5683('0x23')},{'type':a0_0x5683('0x26')}]},{'type':a0_0x5683('0x20'),'winsize':0x7*0x18*0x3c*0x3c*0x3e8,'sub':[{'type':'ma'}]}]}]},fusionConfig={'fusionModel':a0_0x5683('0x39'),'connection':{'type':a0_0x5683('0x9')},'fusionTick':0x3c*0x3c*0x3e8,'nodes':[{'type':a0_0x5683('0x1b'),'nodeid':a0_0x5683('0x1b'),'aggrConfigId':'timevalue','master':!![],'attributes':[{'time':0x0,'attributes':[{'type':'value','name':a0_0x5683('0x1c')},{'type':a0_0x5683('0x1c'),'name':'value|ma|86400000'},{'type':a0_0x5683('0x1c'),'name':'value|min|86400000'},{'type':'value','name':a0_0x5683('0x17')},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x14')}]}]},{'type':a0_0x5683('0x44'),'nodeid':a0_0x5683('0x44'),'aggrConfigId':'calculated','nodeFrequency':0x36ee80,'fusionTick':0x36ee80,'master':![],'holidays':[a0_0x5683('0x8'),a0_0x5683('0x25')],'attributes':[{'time':0x0,'attributes':[{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x3b')},{'type':a0_0x5683('0x1c'),'name':'dayOfWeek'},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x7')},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x19')},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x45')},{'type':a0_0x5683('0x1c'),'name':'dayOfMonth'},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x28')},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x4')},{'type':a0_0x5683('0x1c'),'name':'weekEnd'},{'type':a0_0x5683('0x1c'),'name':'weekEnd|ma|604800000'},{'type':'value','name':a0_0x5683('0x24')},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x18')},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x22')}]},{'time':-0x18,'attributes':[{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x7')},{'type':a0_0x5683('0x1c'),'name':'dayBeforeHoliday'},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x45')},{'type':a0_0x5683('0x1c'),'name':a0_0x5683('0x46')},{'type':a0_0x5683('0x1c'),'name':'holiday'},{'type':a0_0x5683('0x2b'),'name':a0_0x5683('0x3b'),'interval':0x5}]}]}]};function processRecordDummyCb(_0xa4968a,_0x33bbc2){return!![];}describe('staticCalculatedNode',function(){let _0x5852ee,_0x4b7c7c;before(function(){fileManager[a0_0x5683('0x2')](a0_0x5683('0x11')),fileManager['createFolder']('./db4/'),_0x5852ee=new qm[(a0_0x5683('0x1'))]({'dbPath':'./db4/','mode':'createClean'}),scn=new staticCalculationNode(_0x5852ee,connectionConfig,fusionConfig[a0_0x5683('0x27')][0x1],aggrConfigs,processRecordDummyCb,0x63,null),fusion=new StreamFusion(connectionConfig,fusionConfig,aggrConfigs);}),after(function(){_0x5852ee['close']();}),describe(a0_0x5683('0x32'),function(){it('base\x20saved',function(){assert[a0_0x5683('0x1d')](_0x5852ee,scn[a0_0x5683('0x1a')]);}),it(a0_0x5683('0x31'),function(){assert[a0_0x5683('0x35')](scn[a0_0x5683('0x37')],fusionConfig[a0_0x5683('0x27')][0x1]);}),it('fusionNodeI\x20correctly\x20saved',function(){assert[a0_0x5683('0x1d')](scn[a0_0x5683('0x10')],0x63);}),it(a0_0x5683('0x1f'),function(){assert['equal'](typeof scn[a0_0x5683('0x2d')],a0_0x5683('0x6'));}),it(a0_0x5683('0xe'),function(){assert[a0_0x5683('0x1d')](scn[a0_0x5683('0xd')],null);}),it('isMaster\x20function',function(){assert['equal'](scn[a0_0x5683('0x16')](),![]);}),it(a0_0x5683('0x15'),function(){assert[a0_0x5683('0x1d')](typeof scn[a0_0x5683('0x40')],a0_0x5683('0x6'));}),it(a0_0x5683('0x12'),function(){assert[a0_0x5683('0x1d')](typeof scn['setSlaveOffset'],a0_0x5683('0x6'));}),it(a0_0x5683('0xa'),function(){assert[a0_0x5683('0x1d')](typeof scn[a0_0x5683('0x42')],a0_0x5683('0x6'));}),it(a0_0x5683('0x2c'),function(){assert[a0_0x5683('0x1d')](scn['isMaster'](),![]);}),it(a0_0x5683('0x1e'),function(){assert[a0_0x5683('0x1d')](scn[a0_0x5683('0x21')](0x0),!![]);}),it(a0_0x5683('0x36'),function(){assert[a0_0x5683('0x35')](scn[a0_0x5683('0x36')],[a0_0x5683('0x8'),a0_0x5683('0x25')]);});}),describe(a0_0x5683('0x3'),function(){it('static\x20values\x20retrieved\x20correctly',function(){const _0x47dbe4=0x1740c8f0439;assert[a0_0x5683('0x1d')](scn[a0_0x5683('0xb')](_0x47dbe4,a0_0x5683('0x3b')),0x11),assert[a0_0x5683('0x1d')](scn[a0_0x5683('0xb')](_0x47dbe4,'dayOfWeek'),0x4),assert[a0_0x5683('0x1d')](scn[a0_0x5683('0xb')](_0x47dbe4,'dayOfMonth'),0x14),assert[a0_0x5683('0x1d')](scn[a0_0x5683('0xb')](_0x47dbe4,a0_0x5683('0x4')),0x8),assert[a0_0x5683('0x1d')](scn[a0_0x5683('0xb')](_0x47dbe4,a0_0x5683('0x2e')),0x0),assert[a0_0x5683('0x1d')](scn['staticValue'](_0x47dbe4,a0_0x5683('0x7')),0x1),assert[a0_0x5683('0x1d')](scn[a0_0x5683('0xb')](_0x47dbe4,'holiday'),0x0),assert['equal'](scn[a0_0x5683('0xb')](_0x47dbe4,'dayBeforeHoliday'),0x1);}),it(a0_0x5683('0x33'),function(){const _0x955e08=0x1740c8f0439+0x18*0x3c*0x3c*0x3e8;assert[a0_0x5683('0x1d')](scn[a0_0x5683('0x41')](_0x955e08,'hourOfDay'),0x11),assert['equal'](scn['calculateValue'](_0x955e08,a0_0x5683('0x34')),0x5),assert[a0_0x5683('0x1d')](scn['calculateValue'](_0x955e08,a0_0x5683('0x46')),0x15),assert[a0_0x5683('0x1d')](scn[a0_0x5683('0x41')](_0x955e08,a0_0x5683('0x4')),0x8),assert['equal'](scn[a0_0x5683('0x41')](_0x955e08,a0_0x5683('0x2e')),0x0),assert[a0_0x5683('0x1d')](scn[a0_0x5683('0x41')](_0x955e08,'dayAfterHoliday'),0x0),assert['equal'](scn[a0_0x5683('0x41')](_0x955e08,a0_0x5683('0x28')),0x1),assert[a0_0x5683('0x1d')](scn[a0_0x5683('0x41')](_0x955e08,a0_0x5683('0x19')),0x0);}),it(a0_0x5683('0x5'),function(){const _0x445bbf=0x1740c8f0439;scn[a0_0x5683('0x21')](_0x445bbf),assert['deepEqual'](scn[a0_0x5683('0x42')](),[0x11,0x4,0x1,0x1,0xe9,0x14,0x0,0x8,0x0,0x2/0x7,0xe2,0xe9,0.2040816326530619,0x0,0x0,0xe8,0x13,0x1,0x5]);});}),describe('stream\x20fusion',function(){it(a0_0x5683('0x2a'),function(){fusion[a0_0x5683('0x27')][0x0]['processRecord'](JSON['parse'](a0_0x5683('0x3f'))),fusion[a0_0x5683('0x27')][0x0][a0_0x5683('0xf')](JSON[a0_0x5683('0x3c')](a0_0x5683('0x3a'))),fusion[a0_0x5683('0x27')][0x0][a0_0x5683('0x3e')](),fusion[a0_0x5683('0x27')][0x1][a0_0x5683('0x21')](0x0),assert[a0_0x5683('0x35')](fusion['buildFeatureVector'](),[0x14,0xf,0xa,0x14,0x32,0x1,0x4,0x0,0x0,0x1,0x1,0x0,0x1,0x0,0.2857142857142857,0x1,0x16d,0.2040816326530618,0x0,0x0,0x16d,0x1f,0x0,-0x13]);});});});