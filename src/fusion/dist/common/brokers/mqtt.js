const a0_0x35c8=['message','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','parse','clientId','StreamFusion\x20MQTT\x20listener:\x20','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','./abstract.js','addListener','log','connect','mqtt','MQTT\x20Error','mqttEndpoint','topic','publishTopic','config','publish','apply','TOPIC:\x20','client','addPublisher','error'];(function(_0x22a662,_0x35c847){const _0xbfa977=function(_0x551af8){while(--_0x551af8){_0x22a662['push'](_0x22a662['shift']());}},_0x3b88a2=function(){const _0x5ccea8={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x854a4d,_0x26a46c,_0x3db1fd,_0x41233d){_0x41233d=_0x41233d||{};let _0x1c0053=_0x26a46c+'='+_0x3db1fd,_0x4b1230=0x0;for(let _0x1eb396=0x0,_0x4dcf12=_0x854a4d['length'];_0x1eb396<_0x4dcf12;_0x1eb396++){const _0x2a7067=_0x854a4d[_0x1eb396];_0x1c0053+=';\x20'+_0x2a7067;const _0x33f499=_0x854a4d[_0x2a7067];_0x854a4d['push'](_0x33f499),_0x4dcf12=_0x854a4d['length'],_0x33f499!==!![]&&(_0x1c0053+='='+_0x33f499);}_0x41233d['cookie']=_0x1c0053;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2d5a92,_0x19dc14){_0x2d5a92=_0x2d5a92||function(_0x40e6f2){return _0x40e6f2;};const _0x3db716=_0x2d5a92(new RegExp('(?:^|;\x20)'+_0x19dc14['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x55ba31=function(_0x3b64d7,_0x59803a){_0x3b64d7(++_0x59803a);};return _0x55ba31(_0xbfa977,_0x35c847),_0x3db716?decodeURIComponent(_0x3db716[0x1]):undefined;}},_0x2dd340=function(){const _0x67d993=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x67d993['test'](_0x5ccea8['removeCookie']['toString']());};_0x5ccea8['updateCookie']=_0x2dd340;let _0x2fbce0='';const _0xf09fb8=_0x5ccea8['updateCookie']();if(!_0xf09fb8)_0x5ccea8['setCookie'](['*'],'counter',0x1);else _0xf09fb8?_0x2fbce0=_0x5ccea8['getCookie'](null,'counter'):_0x5ccea8['removeCookie']();};_0x3b88a2();}(a0_0x35c8,0xf5));const a0_0xbfa9=function(_0x22a662,_0x35c847){_0x22a662=_0x22a662-0x0;let _0xbfa977=a0_0x35c8[_0x22a662];return _0xbfa977;};const a0_0x3db1fd=function(){let _0x4f9f24=!![];return function(_0x229851,_0x254363){const _0x16fea7=_0x4f9f24?function(){if(_0x254363){const _0x564aca=_0x254363[a0_0xbfa9('0x3')](_0x229851,arguments);return _0x254363=null,_0x564aca;}}:function(){};return _0x4f9f24=![],_0x16fea7;};}(),a0_0x26a46c=a0_0x3db1fd(this,function(){const _0x44beb8=function(){const _0x3e1246=_0x44beb8['constructor'](a0_0xbfa9('0xe'))()['constructor'](a0_0xbfa9('0x9'));return!_0x3e1246[a0_0xbfa9('0xd')](a0_0x26a46c);};return _0x44beb8();});a0_0x26a46c();let Broker=require(a0_0xbfa9('0xf'));const mqtt=require(a0_0xbfa9('0x13'));class MQTTBroker extends Broker{constructor(_0x2ddf36,_0x46cc5d,_0x1bc549){console[a0_0xbfa9('0x11')]('Constructor\x20MQTT\x20-\x20client\x20id:\x20'+_0x2ddf36[a0_0xbfa9('0xb')],_0x1bc549),super(_0x2ddf36,_0x46cc5d,_0x1bc549),this[a0_0xbfa9('0x1')]['clientId']=this[a0_0xbfa9('0x1')]['clientId']+_0x1bc549,this[a0_0xbfa9('0x5')]=mqtt[a0_0xbfa9('0x12')](this[a0_0xbfa9('0x1')][a0_0xbfa9('0x15')],this['config']),this['client']['on'](a0_0xbfa9('0x7'),function(_0x16d5d8){console['log'](a0_0xbfa9('0x14'),_0x16d5d8);});}[a0_0xbfa9('0x6')](){console['log']('StreamFusion\x20MQTT\x20producer:\x20'+this[a0_0xbfa9('0x16')]),this['publishTopic']=this['topic'];}[a0_0xbfa9('0x10')](_0x3071e1){console['log'](a0_0xbfa9('0xc')+this[a0_0xbfa9('0x16')]),this[a0_0xbfa9('0x5')]['subscribe'](this[a0_0xbfa9('0x16')],{'qos':0x2}),this['client']['on'](a0_0xbfa9('0x8'),function(_0x34e6fc,_0x2dff6c){try{_0x3071e1(JSON[a0_0xbfa9('0xa')](_0x2dff6c));}catch(_0x5e74f5){console['log'](_0x5e74f5);}});}[a0_0xbfa9('0x2')](_0x1e2afe){console[a0_0xbfa9('0x11')](a0_0xbfa9('0x4'),this[a0_0xbfa9('0x0')],'MESSAGE:\x20',_0x1e2afe),this['client']['publish'](this['publishTopic'],JSON['stringify'](_0x1e2afe));}}module['exports']=MQTTBroker;