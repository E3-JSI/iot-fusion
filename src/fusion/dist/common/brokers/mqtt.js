var _0x550c=['StreamFusion\x20MQTT\x20producer:\x20','topic','publishTopic','subscribe','message','publish','TOPIC:\x20','stringify','exports','./abstract.js','mqtt','log','Constructor\x20MQTT\x20-\x20client\x20id:\x20','clientId','config','client','connect','error','MQTT\x20Error','addPublisher'];(function(_0x4c13ae,_0x5b341e){var _0x478ac0=function(_0x4158f9){while(--_0x4158f9){_0x4c13ae['push'](_0x4c13ae['shift']());}};var _0x1539fa=function(){var _0x54a185={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5a5a50,_0x1399df,_0x2d4275,_0x1ad956){_0x1ad956=_0x1ad956||{};var _0x4fb3e0=_0x1399df+'='+_0x2d4275;var _0x3203fc=0x0;for(var _0x3203fc=0x0,_0x10b74a=_0x5a5a50['length'];_0x3203fc<_0x10b74a;_0x3203fc++){var _0x277659=_0x5a5a50[_0x3203fc];_0x4fb3e0+=';\x20'+_0x277659;var _0x1b53c7=_0x5a5a50[_0x277659];_0x5a5a50['push'](_0x1b53c7);_0x10b74a=_0x5a5a50['length'];if(_0x1b53c7!==!![]){_0x4fb3e0+='='+_0x1b53c7;}}_0x1ad956['cookie']=_0x4fb3e0;},'removeCookie':function(){return'dev';},'getCookie':function(_0x402b21,_0x23c240){_0x402b21=_0x402b21||function(_0x3da3f4){return _0x3da3f4;};var _0x4efedc=_0x402b21(new RegExp('(?:^|;\x20)'+_0x23c240['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x3fa482=function(_0x208924,_0x5e10c9){_0x208924(++_0x5e10c9);};_0x3fa482(_0x478ac0,_0x5b341e);return _0x4efedc?decodeURIComponent(_0x4efedc[0x1]):undefined;}};var _0x2106b1=function(){var _0x4093d7=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4093d7['test'](_0x54a185['removeCookie']['toString']());};_0x54a185['updateCookie']=_0x2106b1;var _0x81b17c='';var _0x2372ae=_0x54a185['updateCookie']();if(!_0x2372ae){_0x54a185['setCookie'](['*'],'counter',0x1);}else if(_0x2372ae){_0x81b17c=_0x54a185['getCookie'](null,'counter');}else{_0x54a185['removeCookie']();}};_0x1539fa();}(_0x550c,0xd1));var _0x56ae=function(_0x2a454d,_0x14bd56){_0x2a454d=_0x2a454d-0x0;var _0x2b6658=_0x550c[_0x2a454d];return _0x2b6658;};var _0x5be702=function(){var _0x4db9fc=!![];return function(_0x138e8f,_0x299eac){var _0x5cabbf=_0x4db9fc?function(){if(_0x299eac){var _0x8acfb5=_0x299eac['apply'](_0x138e8f,arguments);_0x299eac=null;return _0x8acfb5;}}:function(){};_0x4db9fc=![];return _0x5cabbf;};}();var _0x52a03d=_0x5be702(this,function(){var _0x414b2a=function(){return'\x64\x65\x76';},_0xeb04ac=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x1c7066=function(){var _0x1b834d=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1b834d['\x74\x65\x73\x74'](_0x414b2a['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1d968e=function(){var _0x18173b=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x18173b['\x74\x65\x73\x74'](_0xeb04ac['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x55c7c4=function(_0x416ae5){var _0x52fab6=~-0x1>>0x1+0xff%0x0;if(_0x416ae5['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x52fab6)){_0x1a8ed5(_0x416ae5);}};var _0x1a8ed5=function(_0x2f4245){var _0x14faa0=~-0x4>>0x1+0xff%0x0;if(_0x2f4245['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x14faa0){_0x55c7c4(_0x2f4245);}};if(!_0x1c7066()){if(!_0x1d968e()){_0x55c7c4('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x55c7c4('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x55c7c4('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x52a03d();let Broker=require(_0x56ae('0x0'));const mqtt=require(_0x56ae('0x1'));class MQTTBroker extends Broker{constructor(_0x33748d,_0x3e4c21,_0x5c685e){console[_0x56ae('0x2')](_0x56ae('0x3')+_0x33748d[_0x56ae('0x4')],_0x5c685e);super(_0x33748d,_0x3e4c21,_0x5c685e);this[_0x56ae('0x5')]['clientId']=this[_0x56ae('0x5')][_0x56ae('0x4')]+_0x5c685e;this[_0x56ae('0x6')]=mqtt[_0x56ae('0x7')](this['config']['mqttEndpoint'],this[_0x56ae('0x5')]);this['client']['on'](_0x56ae('0x8'),function(_0x432180){console[_0x56ae('0x2')](_0x56ae('0x9'),_0x432180);});}[_0x56ae('0xa')](){console['log'](_0x56ae('0xb')+this[_0x56ae('0xc')]);this[_0x56ae('0xd')]=this['topic'];}['addListener'](_0xe42b77){console['log']('StreamFusion\x20MQTT\x20listener:\x20'+this[_0x56ae('0xc')]);this[_0x56ae('0x6')][_0x56ae('0xe')](this[_0x56ae('0xc')],{'qos':0x2});this[_0x56ae('0x6')]['on'](_0x56ae('0xf'),function(_0x4a4c56,_0x50dfb2){try{_0xe42b77(JSON['parse'](_0x50dfb2));}catch(_0x4cfe67){console[_0x56ae('0x2')](_0x4cfe67);}});}[_0x56ae('0x10')](_0xd5b662){console[_0x56ae('0x2')](_0x56ae('0x11'),this[_0x56ae('0xd')],'MESSAGE:\x20',_0xd5b662);this[_0x56ae('0x6')][_0x56ae('0x10')](this[_0x56ae('0xd')],JSON[_0x56ae('0x12')](_0xd5b662));}}module[_0x56ae('0x13')]=MQTTBroker;