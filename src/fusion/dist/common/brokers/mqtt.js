var _0x550c=['StreamFusion\x20MQTT\x20producer:\x20','topic','publishTopic','subscribe','message','publish','TOPIC:\x20','stringify','exports','./abstract.js','mqtt','log','Constructor\x20MQTT\x20-\x20client\x20id:\x20','clientId','config','client','connect','error','MQTT\x20Error','addPublisher'];(function(_0xea4328,_0x1cf587){var _0xb7941b=function(_0x150309){while(--_0x150309){_0xea4328['push'](_0xea4328['shift']());}};var _0x3a83d4=function(){var _0x392bda={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x185502,_0x5a8ac2,_0x24221e,_0x1edc12){_0x1edc12=_0x1edc12||{};var _0x3e534a=_0x5a8ac2+'='+_0x24221e;var _0x6ecd29=0x0;for(var _0x6ecd29=0x0,_0x3fa88d=_0x185502['length'];_0x6ecd29<_0x3fa88d;_0x6ecd29++){var _0x423fa2=_0x185502[_0x6ecd29];_0x3e534a+=';\x20'+_0x423fa2;var _0x14b630=_0x185502[_0x423fa2];_0x185502['push'](_0x14b630);_0x3fa88d=_0x185502['length'];if(_0x14b630!==!![]){_0x3e534a+='='+_0x14b630;}}_0x1edc12['cookie']=_0x3e534a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3dc5a6,_0x4d057b){_0x3dc5a6=_0x3dc5a6||function(_0x306581){return _0x306581;};var _0x40bfbe=_0x3dc5a6(new RegExp('(?:^|;\x20)'+_0x4d057b['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x1303ce=function(_0x4bf8ee,_0x4c4f94){_0x4bf8ee(++_0x4c4f94);};_0x1303ce(_0xb7941b,_0x1cf587);return _0x40bfbe?decodeURIComponent(_0x40bfbe[0x1]):undefined;}};var _0x1e8b86=function(){var _0x116485=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x116485['test'](_0x392bda['removeCookie']['toString']());};_0x392bda['updateCookie']=_0x1e8b86;var _0x58f680='';var _0x30d279=_0x392bda['updateCookie']();if(!_0x30d279){_0x392bda['setCookie'](['*'],'counter',0x1);}else if(_0x30d279){_0x58f680=_0x392bda['getCookie'](null,'counter');}else{_0x392bda['removeCookie']();}};_0x3a83d4();}(_0x550c,0xd1));var _0x56ae=function(_0x2e0c72,_0x286222){_0x2e0c72=_0x2e0c72-0x0;var _0x5d5a59=_0x550c[_0x2e0c72];return _0x5d5a59;};var _0x5be702=function(){var _0x3794b5=!![];return function(_0xbb8a23,_0x55168a){var _0x105c44=_0x3794b5?function(){if(_0x55168a){var _0x30d656=_0x55168a['apply'](_0xbb8a23,arguments);_0x55168a=null;return _0x30d656;}}:function(){};_0x3794b5=![];return _0x105c44;};}();var _0x52a03d=_0x5be702(this,function(){var _0x186041=function(){return'\x64\x65\x76';},_0x29dc1a=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0xe79abf=function(){var _0xf6b52e=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0xf6b52e['\x74\x65\x73\x74'](_0x186041['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x492ca5=function(){var _0x4a68c5=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4a68c5['\x74\x65\x73\x74'](_0x29dc1a['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x569e13=function(_0x432810){var _0x22edb7=~-0x1>>0x1+0xff%0x0;if(_0x432810['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x22edb7)){_0x20af8d(_0x432810);}};var _0x20af8d=function(_0x1c6009){var _0x991860=~-0x4>>0x1+0xff%0x0;if(_0x1c6009['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x991860){_0x569e13(_0x1c6009);}};if(!_0xe79abf()){if(!_0x492ca5()){_0x569e13('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x569e13('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x569e13('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x52a03d();let Broker=require(_0x56ae('0x0'));const mqtt=require(_0x56ae('0x1'));class MQTTBroker extends Broker{constructor(_0x33748d,_0x3e4c21,_0x5c685e){console[_0x56ae('0x2')](_0x56ae('0x3')+_0x33748d[_0x56ae('0x4')],_0x5c685e);super(_0x33748d,_0x3e4c21,_0x5c685e);this[_0x56ae('0x5')]['clientId']=this[_0x56ae('0x5')][_0x56ae('0x4')]+_0x5c685e;this[_0x56ae('0x6')]=mqtt[_0x56ae('0x7')](this['config']['mqttEndpoint'],this[_0x56ae('0x5')]);this['client']['on'](_0x56ae('0x8'),function(_0x432180){console[_0x56ae('0x2')](_0x56ae('0x9'),_0x432180);});}[_0x56ae('0xa')](){console['log'](_0x56ae('0xb')+this[_0x56ae('0xc')]);this[_0x56ae('0xd')]=this['topic'];}['addListener'](_0xe42b77){console['log']('StreamFusion\x20MQTT\x20listener:\x20'+this[_0x56ae('0xc')]);this[_0x56ae('0x6')][_0x56ae('0xe')](this[_0x56ae('0xc')],{'qos':0x2});this[_0x56ae('0x6')]['on'](_0x56ae('0xf'),function(_0x4a4c56,_0x50dfb2){try{_0xe42b77(JSON['parse'](_0x50dfb2));}catch(_0x4cfe67){console[_0x56ae('0x2')](_0x4cfe67);}});}[_0x56ae('0x10')](_0xd5b662){console[_0x56ae('0x2')](_0x56ae('0x11'),this[_0x56ae('0xd')],'MESSAGE:\x20',_0xd5b662);this[_0x56ae('0x6')][_0x56ae('0x10')](this[_0x56ae('0xd')],JSON[_0x56ae('0x12')](_0xd5b662));}}module[_0x56ae('0x13')]=MQTTBroker;