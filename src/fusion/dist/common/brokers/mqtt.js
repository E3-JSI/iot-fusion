var _0x550c=['StreamFusion\x20MQTT\x20producer:\x20','topic','publishTopic','subscribe','message','publish','TOPIC:\x20','stringify','exports','./abstract.js','mqtt','log','Constructor\x20MQTT\x20-\x20client\x20id:\x20','clientId','config','client','connect','error','MQTT\x20Error','addPublisher'];(function(_0x2bd44b,_0x2122aa){var _0x333e0a=function(_0x5bb2d5){while(--_0x5bb2d5){_0x2bd44b['push'](_0x2bd44b['shift']());}};var _0x54d748=function(){var _0x50d04f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x114ce1,_0x5e7af8,_0xf3f250,_0x584409){_0x584409=_0x584409||{};var _0x32d394=_0x5e7af8+'='+_0xf3f250;var _0x59e244=0x0;for(var _0x59e244=0x0,_0x58cb20=_0x114ce1['length'];_0x59e244<_0x58cb20;_0x59e244++){var _0x3ba6f2=_0x114ce1[_0x59e244];_0x32d394+=';\x20'+_0x3ba6f2;var _0x2cc730=_0x114ce1[_0x3ba6f2];_0x114ce1['push'](_0x2cc730);_0x58cb20=_0x114ce1['length'];if(_0x2cc730!==!![]){_0x32d394+='='+_0x2cc730;}}_0x584409['cookie']=_0x32d394;},'removeCookie':function(){return'dev';},'getCookie':function(_0x211133,_0x2ca6c2){_0x211133=_0x211133||function(_0x37eb95){return _0x37eb95;};var _0x58eef3=_0x211133(new RegExp('(?:^|;\x20)'+_0x2ca6c2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x34df3e=function(_0x2c8f2e,_0x46534f){_0x2c8f2e(++_0x46534f);};_0x34df3e(_0x333e0a,_0x2122aa);return _0x58eef3?decodeURIComponent(_0x58eef3[0x1]):undefined;}};var _0x19066f=function(){var _0x2b37dd=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2b37dd['test'](_0x50d04f['removeCookie']['toString']());};_0x50d04f['updateCookie']=_0x19066f;var _0x2f53d4='';var _0x1b8ee5=_0x50d04f['updateCookie']();if(!_0x1b8ee5){_0x50d04f['setCookie'](['*'],'counter',0x1);}else if(_0x1b8ee5){_0x2f53d4=_0x50d04f['getCookie'](null,'counter');}else{_0x50d04f['removeCookie']();}};_0x54d748();}(_0x550c,0xd1));var _0x56ae=function(_0xd7e1c1,_0x313b9a){_0xd7e1c1=_0xd7e1c1-0x0;var _0x30fd20=_0x550c[_0xd7e1c1];return _0x30fd20;};var _0x5be702=function(){var _0x1ad0c7=!![];return function(_0x1e04cc,_0x54cafc){var _0x68cbef=_0x1ad0c7?function(){if(_0x54cafc){var _0x48e16d=_0x54cafc['apply'](_0x1e04cc,arguments);_0x54cafc=null;return _0x48e16d;}}:function(){};_0x1ad0c7=![];return _0x68cbef;};}();var _0x52a03d=_0x5be702(this,function(){var _0x3f4135=function(){return'\x64\x65\x76';},_0x2cf20f=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x1708aa=function(){var _0x1e4b99=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1e4b99['\x74\x65\x73\x74'](_0x3f4135['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2cde57=function(){var _0x4ca541=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4ca541['\x74\x65\x73\x74'](_0x2cf20f['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4ab978=function(_0x2196c6){var _0x3074d9=~-0x1>>0x1+0xff%0x0;if(_0x2196c6['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x3074d9)){_0x1c7673(_0x2196c6);}};var _0x1c7673=function(_0xef9001){var _0x167334=~-0x4>>0x1+0xff%0x0;if(_0xef9001['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x167334){_0x4ab978(_0xef9001);}};if(!_0x1708aa()){if(!_0x2cde57()){_0x4ab978('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x4ab978('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x4ab978('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x52a03d();let Broker=require(_0x56ae('0x0'));const mqtt=require(_0x56ae('0x1'));class MQTTBroker extends Broker{constructor(_0x33748d,_0x3e4c21,_0x5c685e){console[_0x56ae('0x2')](_0x56ae('0x3')+_0x33748d[_0x56ae('0x4')],_0x5c685e);super(_0x33748d,_0x3e4c21,_0x5c685e);this[_0x56ae('0x5')]['clientId']=this[_0x56ae('0x5')][_0x56ae('0x4')]+_0x5c685e;this[_0x56ae('0x6')]=mqtt[_0x56ae('0x7')](this['config']['mqttEndpoint'],this[_0x56ae('0x5')]);this['client']['on'](_0x56ae('0x8'),function(_0x432180){console[_0x56ae('0x2')](_0x56ae('0x9'),_0x432180);});}[_0x56ae('0xa')](){console['log'](_0x56ae('0xb')+this[_0x56ae('0xc')]);this[_0x56ae('0xd')]=this['topic'];}['addListener'](_0xe42b77){console['log']('StreamFusion\x20MQTT\x20listener:\x20'+this[_0x56ae('0xc')]);this[_0x56ae('0x6')][_0x56ae('0xe')](this[_0x56ae('0xc')],{'qos':0x2});this[_0x56ae('0x6')]['on'](_0x56ae('0xf'),function(_0x4a4c56,_0x50dfb2){try{_0xe42b77(JSON['parse'](_0x50dfb2));}catch(_0x4cfe67){console[_0x56ae('0x2')](_0x4cfe67);}});}[_0x56ae('0x10')](_0xd5b662){console[_0x56ae('0x2')](_0x56ae('0x11'),this[_0x56ae('0xd')],'MESSAGE:\x20',_0xd5b662);this[_0x56ae('0x6')][_0x56ae('0x10')](this[_0x56ae('0xd')],JSON[_0x56ae('0x12')](_0xd5b662));}}module[_0x56ae('0x13')]=MQTTBroker;