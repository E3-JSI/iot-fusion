const a0_0x5f53=['stringify','StreamFusion\x20MQTT\x20listener:\x20','connect','constructor','error','parse','config','StreamFusion\x20MQTT\x20producer:\x20','mqttEndpoint','mqtt','return\x20/\x22\x20+\x20this\x20+\x20\x22/','publishTopic','subscribe','client','./abstract.js','apply','topic','exports','log','publish'];(function(_0x30ff53,_0x5f53e1){const _0x4aa7f1=function(_0xc0d9c){while(--_0xc0d9c){_0x30ff53['push'](_0x30ff53['shift']());}},_0x1dda22=function(){const _0x7e2900={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x20808f,_0x56540e,_0xf14d4d,_0x2f486c){_0x2f486c=_0x2f486c||{};let _0x1c555f=_0x56540e+'='+_0xf14d4d,_0x4f5b52=0x0;for(let _0x3c356a=0x0,_0x4094f6=_0x20808f['length'];_0x3c356a<_0x4094f6;_0x3c356a++){const _0x56f5bb=_0x20808f[_0x3c356a];_0x1c555f+=';\x20'+_0x56f5bb;const _0x4a69bf=_0x20808f[_0x56f5bb];_0x20808f['push'](_0x4a69bf),_0x4094f6=_0x20808f['length'],_0x4a69bf!==!![]&&(_0x1c555f+='='+_0x4a69bf);}_0x2f486c['cookie']=_0x1c555f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1838db,_0x46fd6e){_0x1838db=_0x1838db||function(_0x529a77){return _0x529a77;};const _0x557730=_0x1838db(new RegExp('(?:^|;\x20)'+_0x46fd6e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4c5bc6=function(_0x1be6a4,_0x50efda){_0x1be6a4(++_0x50efda);};return _0x4c5bc6(_0x4aa7f1,_0x5f53e1),_0x557730?decodeURIComponent(_0x557730[0x1]):undefined;}},_0x13155c=function(){const _0xb3f2aa=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xb3f2aa['test'](_0x7e2900['removeCookie']['toString']());};_0x7e2900['updateCookie']=_0x13155c;let _0x5b7a16='';const _0x4e1c5a=_0x7e2900['updateCookie']();if(!_0x4e1c5a)_0x7e2900['setCookie'](['*'],'counter',0x1);else _0x4e1c5a?_0x5b7a16=_0x7e2900['getCookie'](null,'counter'):_0x7e2900['removeCookie']();};_0x1dda22();}(a0_0x5f53,0x132));const a0_0x4aa7=function(_0x30ff53,_0x5f53e1){_0x30ff53=_0x30ff53-0x0;let _0x4aa7f1=a0_0x5f53[_0x30ff53];return _0x4aa7f1;};const a0_0xf14d4d=function(){let _0x22e2b1=!![];return function(_0x38ac44,_0x5403f8){const _0xe28741=_0x22e2b1?function(){if(_0x5403f8){const _0x4ebe0e=_0x5403f8[a0_0x4aa7('0x9')](_0x38ac44,arguments);return _0x5403f8=null,_0x4ebe0e;}}:function(){};return _0x22e2b1=![],_0xe28741;};}(),a0_0x56540e=a0_0xf14d4d(this,function(){const _0x57305c=function(){const _0x3c4330=_0x57305c['constructor'](a0_0x4aa7('0x4'))()[a0_0x4aa7('0x11')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x3c4330['test'](a0_0x56540e);};return _0x57305c();});a0_0x56540e();let Broker=require(a0_0x4aa7('0x8'));const mqtt=require(a0_0x4aa7('0x3'));class MQTTBroker extends Broker{constructor(_0x3be825,_0x3d629b,_0x599047){console['log']('Constructor\x20MQTT\x20-\x20client\x20id:\x20'+_0x3be825['clientId'],_0x599047),super(_0x3be825,_0x3d629b,_0x599047),this[a0_0x4aa7('0x0')]['clientId']=this[a0_0x4aa7('0x0')]['clientId']+_0x599047,this[a0_0x4aa7('0x7')]=mqtt[a0_0x4aa7('0x10')](this[a0_0x4aa7('0x0')][a0_0x4aa7('0x2')],this[a0_0x4aa7('0x0')]),this[a0_0x4aa7('0x7')]['on'](a0_0x4aa7('0x12'),function(_0x39a1f6){console['log']('MQTT\x20Error',_0x39a1f6);});}['addPublisher'](){console[a0_0x4aa7('0xc')](a0_0x4aa7('0x1')+this[a0_0x4aa7('0xa')]),this[a0_0x4aa7('0x5')]=this['topic'];}['addListener'](_0x56425b){console[a0_0x4aa7('0xc')](a0_0x4aa7('0xf')+this[a0_0x4aa7('0xa')]),this[a0_0x4aa7('0x7')][a0_0x4aa7('0x6')](this[a0_0x4aa7('0xa')],{'qos':0x2}),this[a0_0x4aa7('0x7')]['on']('message',function(_0x30a3f3,_0x21082b){try{_0x56425b(JSON[a0_0x4aa7('0x13')](_0x21082b));}catch(_0xc46e48){console[a0_0x4aa7('0xc')](_0xc46e48);}});}[a0_0x4aa7('0xd')](_0xc49e4){console[a0_0x4aa7('0xc')]('TOPIC:\x20',this['publishTopic'],'MESSAGE:\x20',_0xc49e4),this['client']['publish'](this[a0_0x4aa7('0x5')],JSON[a0_0x4aa7('0xe')](_0xc49e4));}}module[a0_0x4aa7('0xb')]=MQTTBroker;