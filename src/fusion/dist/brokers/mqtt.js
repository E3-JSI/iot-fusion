var _0x550c=['StreamFusion\x20MQTT\x20producer:\x20','topic','publishTopic','subscribe','message','publish','TOPIC:\x20','stringify','exports','./abstract.js','mqtt','log','Constructor\x20MQTT\x20-\x20client\x20id:\x20','clientId','config','client','connect','error','MQTT\x20Error','addPublisher'];(function(_0x22bc46,_0x27a5bd){var _0x401d17=function(_0xde60a1){while(--_0xde60a1){_0x22bc46['push'](_0x22bc46['shift']());}};var _0x4da896=function(){var _0x243559={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xe95375,_0xb2b211,_0x5746bf,_0x496be2){_0x496be2=_0x496be2||{};var _0x4e7ff1=_0xb2b211+'='+_0x5746bf;var _0x4cff67=0x0;for(var _0x4cff67=0x0,_0x513d91=_0xe95375['length'];_0x4cff67<_0x513d91;_0x4cff67++){var _0x3ac005=_0xe95375[_0x4cff67];_0x4e7ff1+=';\x20'+_0x3ac005;var _0x51735b=_0xe95375[_0x3ac005];_0xe95375['push'](_0x51735b);_0x513d91=_0xe95375['length'];if(_0x51735b!==!![]){_0x4e7ff1+='='+_0x51735b;}}_0x496be2['cookie']=_0x4e7ff1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x25f531,_0x596be2){_0x25f531=_0x25f531||function(_0x526215){return _0x526215;};var _0x1c40b9=_0x25f531(new RegExp('(?:^|;\x20)'+_0x596be2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x1d9642=function(_0x1824f6,_0x4925d9){_0x1824f6(++_0x4925d9);};_0x1d9642(_0x401d17,_0x27a5bd);return _0x1c40b9?decodeURIComponent(_0x1c40b9[0x1]):undefined;}};var _0x131d15=function(){var _0x3a1255=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3a1255['test'](_0x243559['removeCookie']['toString']());};_0x243559['updateCookie']=_0x131d15;var _0x592092='';var _0x551766=_0x243559['updateCookie']();if(!_0x551766){_0x243559['setCookie'](['*'],'counter',0x1);}else if(_0x551766){_0x592092=_0x243559['getCookie'](null,'counter');}else{_0x243559['removeCookie']();}};_0x4da896();}(_0x550c,0xd1));var _0x56ae=function(_0x13e4e,_0x41f519){_0x13e4e=_0x13e4e-0x0;var _0x1c44bf=_0x550c[_0x13e4e];return _0x1c44bf;};var _0x5be702=function(){var _0x1fca32=!![];return function(_0x23208c,_0x14a004){var _0x597869=_0x1fca32?function(){if(_0x14a004){var _0x3749a5=_0x14a004['apply'](_0x23208c,arguments);_0x14a004=null;return _0x3749a5;}}:function(){};_0x1fca32=![];return _0x597869;};}();var _0x52a03d=_0x5be702(this,function(){var _0x383533=function(){return'\x64\x65\x76';},_0x430fd2=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x34ca5e=function(){var _0x4854f7=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x4854f7['\x74\x65\x73\x74'](_0x383533['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2d1c2b=function(){var _0x369bc5=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x369bc5['\x74\x65\x73\x74'](_0x430fd2['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1d6e92=function(_0x248f33){var _0x4b1d16=~-0x1>>0x1+0xff%0x0;if(_0x248f33['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x4b1d16)){_0x1a7e95(_0x248f33);}};var _0x1a7e95=function(_0x4b79ae){var _0x2c86fb=~-0x4>>0x1+0xff%0x0;if(_0x4b79ae['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x2c86fb){_0x1d6e92(_0x4b79ae);}};if(!_0x34ca5e()){if(!_0x2d1c2b()){_0x1d6e92('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1d6e92('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1d6e92('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x52a03d();let Broker=require(_0x56ae('0x0'));const mqtt=require(_0x56ae('0x1'));class MQTTBroker extends Broker{constructor(_0x33748d,_0x3e4c21,_0x5c685e){console[_0x56ae('0x2')](_0x56ae('0x3')+_0x33748d[_0x56ae('0x4')],_0x5c685e);super(_0x33748d,_0x3e4c21,_0x5c685e);this[_0x56ae('0x5')]['clientId']=this[_0x56ae('0x5')][_0x56ae('0x4')]+_0x5c685e;this[_0x56ae('0x6')]=mqtt[_0x56ae('0x7')](this['config']['mqttEndpoint'],this[_0x56ae('0x5')]);this['client']['on'](_0x56ae('0x8'),function(_0x432180){console[_0x56ae('0x2')](_0x56ae('0x9'),_0x432180);});}[_0x56ae('0xa')](){console['log'](_0x56ae('0xb')+this[_0x56ae('0xc')]);this[_0x56ae('0xd')]=this['topic'];}['addListener'](_0xe42b77){console['log']('StreamFusion\x20MQTT\x20listener:\x20'+this[_0x56ae('0xc')]);this[_0x56ae('0x6')][_0x56ae('0xe')](this[_0x56ae('0xc')],{'qos':0x2});this[_0x56ae('0x6')]['on'](_0x56ae('0xf'),function(_0x4a4c56,_0x50dfb2){try{_0xe42b77(JSON['parse'](_0x50dfb2));}catch(_0x4cfe67){console[_0x56ae('0x2')](_0x4cfe67);}});}[_0x56ae('0x10')](_0xd5b662){console[_0x56ae('0x2')](_0x56ae('0x11'),this[_0x56ae('0xd')],'MESSAGE:\x20',_0xd5b662);this[_0x56ae('0x6')][_0x56ae('0x10')](this[_0x56ae('0xd')],JSON[_0x56ae('0x12')](_0xd5b662));}}module[_0x56ae('0x13')]=MQTTBroker;