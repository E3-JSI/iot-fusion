var _0x2c3d=['parent','PROBLEM:\x20SubstationNode\x20timeline\x20problem.','exports','fusionNodeI','processRecordCb','nodeId','nodeid','buffer','position','MIN_SAFE_INTEGER','lastcurrent','createStore','Time','datetime','current','float','voltage','power','rawstore','store','currentTick','addStreamAggr','currentEMA','ema','previous','timeSeriesTick','voltageEMA','voltageTick','powerTick','powerEMA','createAggregates','aggrConfigId','postConstructor','timestamp','toISOString','getFloat','rawRecord','newRecord','triggerOnAddCallbacks','getAggregates','stampm','fusionTick','push'];(function(_0x2f184b,_0x150adb){var _0x66a54d=function(_0x51fe1d){while(--_0x51fe1d){_0x2f184b['push'](_0x2f184b['shift']());}};var _0x24e174=function(){var _0x3e7aea={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4e7625,_0x2112e6,_0xabda0d,_0x672f12){_0x672f12=_0x672f12||{};var _0x248277=_0x2112e6+'='+_0xabda0d;var _0x4c5bdc=0x0;for(var _0x4c5bdc=0x0,_0x4efb8a=_0x4e7625['length'];_0x4c5bdc<_0x4efb8a;_0x4c5bdc++){var _0x286ac2=_0x4e7625[_0x4c5bdc];_0x248277+=';\x20'+_0x286ac2;var _0x2a3620=_0x4e7625[_0x286ac2];_0x4e7625['push'](_0x2a3620);_0x4efb8a=_0x4e7625['length'];if(_0x2a3620!==!![]){_0x248277+='='+_0x2a3620;}}_0x672f12['cookie']=_0x248277;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1e212d,_0x263f79){_0x1e212d=_0x1e212d||function(_0x1688bc){return _0x1688bc;};var _0x4d2e72=_0x1e212d(new RegExp('(?:^|;\x20)'+_0x263f79['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x5a3e42=function(_0x232cc7,_0x1c383e){_0x232cc7(++_0x1c383e);};_0x5a3e42(_0x66a54d,_0x150adb);return _0x4d2e72?decodeURIComponent(_0x4d2e72[0x1]):undefined;}};var _0x2d3fa5=function(){var _0x39b8f3=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x39b8f3['test'](_0x3e7aea['removeCookie']['toString']());};_0x3e7aea['updateCookie']=_0x2d3fa5;var _0xe4c3c4='';var _0x335e24=_0x3e7aea['updateCookie']();if(!_0x335e24){_0x3e7aea['setCookie'](['*'],'counter',0x1);}else if(_0x335e24){_0xe4c3c4=_0x3e7aea['getCookie'](null,'counter');}else{_0x3e7aea['removeCookie']();}};_0x24e174();}(_0x2c3d,0x186));var _0x1c83=function(_0x1c2fb1,_0x401a98){_0x1c2fb1=_0x1c2fb1-0x0;var _0x4daf57=_0x2c3d[_0x1c2fb1];return _0x4daf57;};var _0x582e5a=function(){var _0x35abd0=!![];return function(_0x109559,_0x28a486){var _0x5657e7=_0x35abd0?function(){if(_0x28a486){var _0x4ab34a=_0x28a486['apply'](_0x109559,arguments);_0x28a486=null;return _0x4ab34a;}}:function(){};_0x35abd0=![];return _0x5657e7;};}();var _0x2c900f=_0x582e5a(this,function(){var _0x43065c=function(){return'\x64\x65\x76';},_0x2f76d7=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x120a82=function(){var _0x14c409=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x14c409['\x74\x65\x73\x74'](_0x43065c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4f806b=function(){var _0x3e1c4f=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3e1c4f['\x74\x65\x73\x74'](_0x2f76d7['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x59e9a7=function(_0x2478c5){var _0xbb7b2d=~-0x1>>0x1+0xff%0x0;if(_0x2478c5['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0xbb7b2d)){_0x392896(_0x2478c5);}};var _0x392896=function(_0x21f36a){var _0x40eef0=~-0x4>>0x1+0xff%0x0;if(_0x21f36a['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x40eef0){_0x59e9a7(_0x21f36a);}};if(!_0x120a82()){if(!_0x4f806b()){_0x59e9a7('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x59e9a7('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x59e9a7('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x2c900f();const streamingNode=require('./streamingNode.js');class streamingSubstationNode extends streamingNode{constructor(_0x1cff93,_0x44c3a8,_0x3d7fe4,_0x1cf681,_0x299864,_0x37f79d,_0x3ad80f){super(_0x1cff93,_0x44c3a8,_0x3d7fe4,_0x1cf681,_0x299864,_0x37f79d,_0x3ad80f);this[_0x1c83('0x0')]=_0x37f79d;this[_0x1c83('0x1')]=_0x299864;this['parent']=_0x3ad80f;this[_0x1c83('0x2')]=_0x3d7fe4[_0x1c83('0x3')];this[_0x1c83('0x4')]=[];this[_0x1c83('0x5')]=0x0;this['lastTimestamp']=Number[_0x1c83('0x6')];this[_0x1c83('0x7')]=0x0;this['lastvoltage']=0x0;this['base'][_0x1c83('0x8')]({'name':this[_0x1c83('0x2')],'fields':[{'name':_0x1c83('0x9'),'type':_0x1c83('0xa')},{'name':_0x1c83('0xb'),'type':_0x1c83('0xc')},{'name':_0x1c83('0xd'),'type':_0x1c83('0xc')},{'name':_0x1c83('0xe'),'type':'float'}]});this[_0x1c83('0xf')]=this['base'][_0x1c83('0x10')](this[_0x1c83('0x2')]);this[_0x1c83('0x11')]=this[_0x1c83('0xf')][_0x1c83('0x12')]({'type':'timeSeriesTick','timestamp':_0x1c83('0x9'),'value':'current'});this[_0x1c83('0x13')]=this['rawstore'][_0x1c83('0x12')]({'type':_0x1c83('0x14'),'inAggr':this[_0x1c83('0x11')],'emaType':_0x1c83('0x15'),'interval':0xf*0x3c*0x3e8,'initWindow':0x0});this['voltageTick']=this[_0x1c83('0xf')][_0x1c83('0x12')]({'type':_0x1c83('0x16'),'timestamp':'Time','value':_0x1c83('0xd')});this[_0x1c83('0x17')]=this[_0x1c83('0xf')]['addStreamAggr']({'type':'ema','inAggr':this[_0x1c83('0x18')],'emaType':'previous','interval':0xf*0x3c*0x3e8,'initWindow':0x0});this[_0x1c83('0x19')]=this['rawstore'][_0x1c83('0x12')]({'type':'timeSeriesTick','timestamp':'Time','value':'power'});this[_0x1c83('0x1a')]=this['rawstore'][_0x1c83('0x12')]({'type':_0x1c83('0x14'),'inAggr':this[_0x1c83('0x18')],'emaType':'previous','interval':0xf*0x3c*0x3e8,'initWindow':0x0});super[_0x1c83('0x1b')](_0x1cf681[_0x3d7fe4[_0x1c83('0x1c')]]);super[_0x1c83('0x1d')]();}['processRecord'](_0x1d9adf){let _0x27b8cd=_0x1d9adf[_0x1c83('0x1e')];if(this['lastTimestamp']<_0x27b8cd){let _0x12babc=new Date(_0x27b8cd);let _0x34f004;if(isNaN(_0x12babc)==!![]){_0x34f004=0x0;}else{_0x34f004=_0x12babc[_0x1c83('0x1f')]();}let _0x4ccc32=!('current'in _0x1d9adf)||isNaN(_0x1d9adf[_0x1c83('0xb')])||_0x1d9adf[_0x1c83('0xb')]==null;let _0x3b6903=!(_0x1c83('0xd')in _0x1d9adf)||isNaN(_0x1d9adf[_0x1c83('0xd')])||_0x1d9adf['voltage']==null;let _0x2d9dfe=_0x4ccc32?this[_0x1c83('0x13')][_0x1c83('0x20')]():_0x1d9adf['current'];let _0x578cd4=_0x3b6903?this[_0x1c83('0x17')][_0x1c83('0x20')]():_0x1d9adf[_0x1c83('0xd')];let _0x1822dc=_0x4ccc32&&_0x3b6903?this[_0x1c83('0x1a')][_0x1c83('0x20')]():_0x2d9dfe*_0x578cd4;this[_0x1c83('0x21')]=this[_0x1c83('0xf')][_0x1c83('0x22')]({'Time':_0x34f004,'current':_0x2d9dfe,'voltage':_0x578cd4,'power':_0x1822dc});this['rawstore'][_0x1c83('0x23')](this[_0x1c83('0x21')]);let _0x3e33ed=super[_0x1c83('0x24')]();let _0x3c2ba5=_0x3e33ed;_0x3c2ba5[_0x1c83('0x25')]=_0x27b8cd;_0x3c2ba5[_0x1c83('0xb')]=this[_0x1c83('0x7')];_0x3c2ba5[_0x1c83('0xd')]=this['lastvoltage'];if(_0x27b8cd%this[_0x1c83('0x26')]==0x0){this[_0x1c83('0x4')][_0x1c83('0x27')](_0x3c2ba5);super['broadcastAggregates'](_0x3e33ed);this[_0x1c83('0x1')](this[_0x1c83('0x0')],this[_0x1c83('0x28')]);};}else{console['log'](_0x1c83('0x29'));}}}module[_0x1c83('0x2a')]=streamingSubstationNode;