const a0_0x2cdc=['setSlaveOffset:\x20zeroIndex\x20is\x20not\x20a\x20whole\x20number\x20-\x20','test','Fusion\x20tick','partition','\x20-\x20','checkDataAvailability','getTimestamp','connectionConfig','ema','\x20-\x20(','addStreamAggr','consumer','max','master','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','min','nodeId','message','config','variance','\x0aDifference\x20(buffer\x20-\x20zero):\x20','type','Client','|min|','floor','log','Offset','deleteObsoleteRows','|variance|','ERROR','return\x20/\x22\x20+\x20this\x20+\x20\x22/','winbuf','Error','nodeid','\x20/\x20','Time','fusionNodeI','maxNum','setMasterOffset','|tick','aggregate','Consumer','PROBLEM:\x20No\x20parent\x20defined.\x20No\x20connection\x20(OK\x20for\x20tests).','push','shift','apply','client','getOffsetTimestamp','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','position','value','broker','interval','exports','Connecting\x20to\x20Kafka:\x20','\x0aNode:\x20','postConstructor','stringify','\x0a\x0a\x0a','../common/brokers/brokers.js','error','winsize','constructor','zookeeper','measurements_node_','buffer','length','bind','fusionTick','topic','getPartialFeatureVector','initWindow','previous','attributes','mqtt','PROBLEM:\x20No\x20connection\x20(OK\x20for\x20tests)!','maxNegativeOffset','indexOf','|winbuf|','processRecordCb','parse','Message\x20receieved.','outOfRange','fusion_id','getFloat','field','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','connection','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','offsetOutOfRange','Diff\x20ticks:','processRecord','kafka','|ma|','rawstore','time','timeSeriesWinBufVector','parent','):\x20','setSlaveOffset','stampm','broadcastAggregates','timeSeriesTick','tick','createAggregates','|ema|','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20'];(function(_0x25aa83,_0x2cdc3a){const _0x127707=function(_0x4d0e80){while(--_0x4d0e80){_0x25aa83['push'](_0x25aa83['shift']());}},_0x39e0a0=function(){const _0x3c46ee={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4684e0,_0x49cdf3,_0x4ee02f,_0x13c9ea){_0x13c9ea=_0x13c9ea||{};let _0x1a06e3=_0x49cdf3+'='+_0x4ee02f,_0x388559=0x0;for(let _0x3f3531=0x0,_0x244f29=_0x4684e0['length'];_0x3f3531<_0x244f29;_0x3f3531++){const _0x2a9360=_0x4684e0[_0x3f3531];_0x1a06e3+=';\x20'+_0x2a9360;const _0x6b758f=_0x4684e0[_0x2a9360];_0x4684e0['push'](_0x6b758f),_0x244f29=_0x4684e0['length'],_0x6b758f!==!![]&&(_0x1a06e3+='='+_0x6b758f);}_0x13c9ea['cookie']=_0x1a06e3;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1b03c1,_0x5a0a10){_0x1b03c1=_0x1b03c1||function(_0x2717ed){return _0x2717ed;};const _0x123586=_0x1b03c1(new RegExp('(?:^|;\x20)'+_0x5a0a10['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x158200=function(_0x35693e,_0x406112){_0x35693e(++_0x406112);};return _0x158200(_0x127707,_0x2cdc3a),_0x123586?decodeURIComponent(_0x123586[0x1]):undefined;}},_0x443fb2=function(){const _0x28096e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x28096e['test'](_0x3c46ee['removeCookie']['toString']());};_0x3c46ee['updateCookie']=_0x443fb2;let _0x5ded42='';const _0xdc32dc=_0x3c46ee['updateCookie']();if(!_0xdc32dc)_0x3c46ee['setCookie'](['*'],'counter',0x1);else _0xdc32dc?_0x5ded42=_0x3c46ee['getCookie'](null,'counter'):_0x3c46ee['removeCookie']();};_0x39e0a0();}(a0_0x2cdc,0x102));const a0_0x1277=function(_0x25aa83,_0x2cdc3a){_0x25aa83=_0x25aa83-0x0;let _0x127707=a0_0x2cdc[_0x25aa83];return _0x127707;};const a0_0x4ee02f=function(){let _0x288a80=!![];return function(_0xbee6e3,_0x1b42fe){const _0x4557d6=_0x288a80?function(){if(_0x1b42fe){const _0x4517fb=_0x1b42fe[a0_0x1277('0x1')](_0xbee6e3,arguments);return _0x1b42fe=null,_0x4517fb;}}:function(){};return _0x288a80=![],_0x4557d6;};}(),a0_0x49cdf3=a0_0x4ee02f(this,function(){const _0x580526=function(){const _0x35533b=_0x580526[a0_0x1277('0x12')](a0_0x1277('0x5d'))()[a0_0x1277('0x12')](a0_0x1277('0x2c'));return!_0x35533b[a0_0x1277('0x40')](a0_0x49cdf3);};return _0x580526();});a0_0x49cdf3();const {KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x1277('0xf'));class streamingNode{constructor(_0x156ea1,_0x453f50,_0x5e568f,_0x14c12b,_0x265683,_0x4b6b16,_0x26f866){this['base']=_0x156ea1,this[a0_0x1277('0x67')]={},this[a0_0x1277('0x4c')]=_0x5e568f[a0_0x1277('0x4c')],this[a0_0x1277('0x51')]=JSON[a0_0x1277('0x24')](JSON[a0_0x1277('0xd')](_0x5e568f)),this['connectionConfig']=JSON[a0_0x1277('0x24')](JSON[a0_0x1277('0xd')](_0x453f50)),this[a0_0x1277('0x19')]=a0_0x1277('0x14')+this[a0_0x1277('0x51')][a0_0x1277('0x60')],this[a0_0x1277('0x63')]=_0x4b6b16,this[a0_0x1277('0x23')]=_0x265683,this[a0_0x1277('0x35')]=_0x26f866,this['fusionTick']=_0x5e568f[a0_0x1277('0x18')],this[a0_0x1277('0x4f')]=_0x5e568f['nodeid'],this['buffer']=[],this[a0_0x1277('0x5')]=0x0;}[a0_0x1277('0xc')](){let _0x2138b3=this;if(this['parent']!=null){if(this['parent'][a0_0x1277('0x51')]['connection'][a0_0x1277('0x54')]==a0_0x1277('0x30'))this[a0_0x1277('0x7')]=new KafkaNodeBroker(this[a0_0x1277('0x46')],this[a0_0x1277('0x19')],a0_0x1277('0x2')+this[a0_0x1277('0x35')][a0_0x1277('0x27')]+this[a0_0x1277('0x4f')]),this['broker']['addListener'](_0x2138b3['processRecord'][a0_0x1277('0x17')](_0x2138b3));else this[a0_0x1277('0x35')][a0_0x1277('0x51')][a0_0x1277('0x2b')]['type']==a0_0x1277('0x1e')?(this['broker']=new MQTTBroker(this[a0_0x1277('0x46')],this[a0_0x1277('0x19')],a0_0x1277('0x2')+this['parent'][a0_0x1277('0x27')]+this['nodeId']),this[a0_0x1277('0x7')]['addListener'](_0x2138b3[a0_0x1277('0x2f')][a0_0x1277('0x17')](_0x2138b3))):console[a0_0x1277('0x58')](a0_0x1277('0x1f'));}else console[a0_0x1277('0x58')](a0_0x1277('0x69'));}['isMaster'](){return this[a0_0x1277('0x4c')];}['connectToKafka'](){console[a0_0x1277('0x58')](a0_0x1277('0xa')+this[a0_0x1277('0x19')]),this[a0_0x1277('0x68')]=kafka['Consumer'],this[a0_0x1277('0x2')]=new kafka[(a0_0x1277('0x55'))](this['connectionConfig'][a0_0x1277('0x13')],this['id']),this['offset']=new kafka[(a0_0x1277('0x59'))](this[a0_0x1277('0x2')]);let _0x3fb4a4=this;this['consumer']=new this[(a0_0x1277('0x68'))](this[a0_0x1277('0x2')],[{'topic':this[a0_0x1277('0x19')],'partition':0x0}],{'groupId':this['id']}),this[a0_0x1277('0x4a')]['on'](a0_0x1277('0x50'),function(_0x344d16){try{console[a0_0x1277('0x58')](a0_0x1277('0x25'));let _0x5367b5=JSON[a0_0x1277('0x24')](_0x344d16[a0_0x1277('0x6')]);_0x3fb4a4['processRecord'](_0x5367b5);}catch(_0x136768){console[a0_0x1277('0x58')](a0_0x1277('0x5c'),_0x136768);}}),this[a0_0x1277('0x4a')]['on'](a0_0x1277('0x10'),function(_0x337560){console[a0_0x1277('0x58')](a0_0x1277('0x5f'),_0x337560);}),this[a0_0x1277('0x4a')]['on'](a0_0x1277('0x2d'),function(_0x4efe24){console[a0_0x1277('0x58')](_0x3fb4a4['id'],a0_0x1277('0x26'),_0x4efe24),_0x4efe24[a0_0x1277('0x64')]=0x2,_0x3fb4a4['offset']['fetch']([_0x4efe24],function(_0x2ec2b6,_0x3d3b08){if(_0x2ec2b6)return console['error'](_0x2ec2b6);var _0x4ac89d=Math[a0_0x1277('0x4e')](_0x3d3b08[_0x4efe24[a0_0x1277('0x19')]][_0x4efe24[a0_0x1277('0x42')]]);console[a0_0x1277('0x58')](_0x3fb4a4),_0x3fb4a4[a0_0x1277('0x4a')]['setOffset'](_0x4efe24[a0_0x1277('0x19')],_0x4efe24[a0_0x1277('0x42')],_0x4ac89d);});});}[a0_0x1277('0x39')](_0x191805){}[a0_0x1277('0x65')](){this[a0_0x1277('0x5')]=this[a0_0x1277('0x15')]['length']-0x1;}[a0_0x1277('0x3')](){return this[a0_0x1277('0x15')][this[a0_0x1277('0x5')]][a0_0x1277('0x38')];}[a0_0x1277('0x37')](_0x164100){if(this['buffer']['length']==0x0)return console[a0_0x1277('0x58')]('setSlaveIndex:\x20there\x20is\x20no\x20data\x20-\x20'+this[a0_0x1277('0x4f')]),![];let _0x5d4b94=this[a0_0x1277('0x15')][a0_0x1277('0x16')]-0x1,_0x4dd29c=this['buffer'][_0x5d4b94]['stampm'],_0x9169c6=(_0x4dd29c-_0x164100)/this[a0_0x1277('0x18')];console[a0_0x1277('0x58')](a0_0x1277('0x41'),this[a0_0x1277('0x18')],a0_0x1277('0x2e'),_0x9169c6);let _0x137f36=_0x5d4b94-_0x9169c6;if(_0x137f36<0x0)return console[a0_0x1277('0x58')](a0_0x1277('0x4')+this[a0_0x1277('0x4f')]+'('+_0x137f36+'/'+_0x5d4b94+')@'+this[a0_0x1277('0x35')][a0_0x1277('0x27')]),![];else{if(_0x137f36>_0x5d4b94)return console[a0_0x1277('0x58')](a0_0x1277('0x3e')+this[a0_0x1277('0x4f')]+'('+_0x137f36+'/'+_0x5d4b94+')@'+this[a0_0x1277('0x35')][a0_0x1277('0x27')]),![];else _0x137f36!=Math[a0_0x1277('0x57')](_0x137f36)&&console[a0_0x1277('0x58')](a0_0x1277('0x3f')+_0x137f36);}return console[a0_0x1277('0x58')](_0x137f36),this['buffer'][_0x137f36][a0_0x1277('0x38')]!=_0x164100&&(console[a0_0x1277('0x58')]('\x0a\x0asetSlaveOffset:\x20ERROR\x20-\x20timestamps\x20DO\x20NOT\x20match!'),console['log'](a0_0x1277('0xb')+this[a0_0x1277('0x4f')]),console['log']('\x0aZero\x20index,\x20last\x20offset:\x20'+_0x137f36+',\x20'+_0x5d4b94),console['log'](a0_0x1277('0x53')+this[a0_0x1277('0x15')][_0x137f36]['stampm']+a0_0x1277('0x43')+_0x164100),console['log'](a0_0x1277('0xe'))),this['position']=_0x137f36,!![];}[a0_0x1277('0x44')](){let _0x5c0daf=!![];this[a0_0x1277('0x20')]=0x0;for(let _0x1b3c54 in this[a0_0x1277('0x51')][a0_0x1277('0x1d')]){let _0x193919=this[a0_0x1277('0x51')]['attributes'][_0x1b3c54][a0_0x1277('0x33')];if(_0x193919<this[a0_0x1277('0x20')])this['maxNegativeOffset']=_0x193919;if(!this['offsetExists'](_0x193919))_0x5c0daf=![];}return _0x5c0daf;}['offsetExists'](_0x4158a0){let _0x13d324=this[a0_0x1277('0x5')]+_0x4158a0,_0x1a0bd3=this[a0_0x1277('0x15')][a0_0x1277('0x16')]-0x1;if(_0x13d324<0x0)return console['log'](a0_0x1277('0x2a')+this[a0_0x1277('0x4f')]+'\x20-\x20('+_0x13d324+')'),![];else{if(_0x13d324>_0x1a0bd3)return console[a0_0x1277('0x58')](a0_0x1277('0x4d')+this[a0_0x1277('0x4f')]+this[a0_0x1277('0x4f')]+a0_0x1277('0x48')+_0x13d324+'/'+_0x1a0bd3+')'),![];}return!![];}[a0_0x1277('0x5a')](){let _0x26e42c=this[a0_0x1277('0x5')]+this[a0_0x1277('0x20')]-0x5;console['log']('Rows\x20to\x20delete\x20('+this[a0_0x1277('0x4f')]+',\x20'+this[a0_0x1277('0x35')][a0_0x1277('0x27')]+a0_0x1277('0x36')+_0x26e42c+a0_0x1277('0x61')+this[a0_0x1277('0x15')]['length']);for(let _0x28638d=0x1;_0x28638d<_0x26e42c;_0x28638d++)this[a0_0x1277('0x15')][a0_0x1277('0x0')]();}[a0_0x1277('0x3c')](_0x520345){for(let _0x476f50 in _0x520345){let _0x3a544e=_0x520345[_0x476f50],_0x1a14b6=_0x3a544e[a0_0x1277('0x29')],_0x57ccb7=_0x3a544e[a0_0x1277('0x3b')],_0x5d9811=this[a0_0x1277('0x32')][a0_0x1277('0x49')]({'type':a0_0x1277('0x3a'),'timestamp':a0_0x1277('0x62'),'value':_0x1a14b6}),_0x134151=_0x1a14b6+a0_0x1277('0x66');this['aggregate'][_0x134151]=_0x5d9811;for(let _0x262a87 in _0x57ccb7){let _0x40e3bc=_0x57ccb7[_0x262a87],_0x28a8ee=_0x40e3bc[a0_0x1277('0x54')];if(_0x28a8ee==a0_0x1277('0x47')){let _0x331940=_0x40e3bc['interval'],_0xd853af=_0x40e3bc[a0_0x1277('0x1b')],_0x293511=this[a0_0x1277('0x32')][a0_0x1277('0x49')]({'type':a0_0x1277('0x47'),'inAggr':this['aggregate'][_0x134151],'emaType':a0_0x1277('0x1c'),'interval':_0x331940,'initWindow':_0xd853af}),_0x1ce3b6=_0x1a14b6+a0_0x1277('0x3d')+_0x331940;this[a0_0x1277('0x67')][_0x1ce3b6]=_0x293511;}else{if(_0x28a8ee==a0_0x1277('0x5e')){let _0x288146=_0x40e3bc[a0_0x1277('0x11')],_0x175e10=this[a0_0x1277('0x32')]['addStreamAggr']({'type':a0_0x1277('0x34'),'inAggr':this[a0_0x1277('0x67')][_0x134151],'winsize':_0x288146}),_0x589046=_0x1a14b6+a0_0x1277('0x22')+_0x288146;this['aggregate'][_0x589046]=_0x175e10;let _0x30fac1=_0x40e3bc['sub'];for(var _0x20a6f3 in _0x30fac1){let _0xec215=_0x30fac1[_0x20a6f3],_0x179aea=_0xec215[a0_0x1277('0x54')];if(_0x179aea==a0_0x1277('0x52')){let _0x42ac7c=this[a0_0x1277('0x32')][a0_0x1277('0x49')]({'type':a0_0x1277('0x52'),'inAggr':this['aggregate'][_0x589046]}),_0x5bdfee=_0x1a14b6+a0_0x1277('0x5b')+_0x288146;this[a0_0x1277('0x67')][_0x5bdfee]=_0x42ac7c;}else{if(_0x179aea=='ma'){let _0xf9d462=this['rawstore'][a0_0x1277('0x49')]({'type':'ma','inAggr':this[a0_0x1277('0x67')][_0x589046]}),_0x3ae7b3=_0x1a14b6+a0_0x1277('0x31')+_0x288146;this[a0_0x1277('0x67')][_0x3ae7b3]=_0xf9d462;}else{if(_0x179aea=='min'){let _0xa6a2ee=this[a0_0x1277('0x32')][a0_0x1277('0x49')]({'type':'winBufMin','inAggr':this['aggregate'][_0x589046]}),_0x419181=_0x1a14b6+a0_0x1277('0x56')+_0x288146;this[a0_0x1277('0x67')][_0x419181]=_0xa6a2ee;}else{if(_0x179aea==a0_0x1277('0x4b')){let _0x43c6a5=this[a0_0x1277('0x32')][a0_0x1277('0x49')]({'type':'winBufMax','inAggr':this[a0_0x1277('0x67')][_0x589046]}),_0x5065f6=_0x1a14b6+'|max|'+_0x288146;this[a0_0x1277('0x67')][_0x5065f6]=_0x43c6a5;}}}}}}}}}}['getAggregates'](){var _0x57ce71={};for(let _0x3ea699 in this[a0_0x1277('0x67')]){!(_0x3ea699['indexOf'](a0_0x1277('0x3b'))>0x0||_0x3ea699[a0_0x1277('0x21')]('winbuf')>0x0)&&(_0x57ce71[_0x3ea699]=this[a0_0x1277('0x67')][_0x3ea699][a0_0x1277('0x28')](),_0x57ce71[a0_0x1277('0x38')]=this['aggregate'][_0x3ea699][a0_0x1277('0x45')]());;};return _0x57ce71;}[a0_0x1277('0x1a')](){let _0xf3c3f3=[];for(let _0x43fb64 in this['config'][a0_0x1277('0x1d')]){let _0x4f6bff=this[a0_0x1277('0x5')],_0xed073b=this[a0_0x1277('0x15')][_0x4f6bff][a0_0x1277('0x38')],_0x2464c6=this['config'][a0_0x1277('0x1d')][_0x43fb64][a0_0x1277('0x1d')],_0x187583=this[a0_0x1277('0x51')][a0_0x1277('0x1d')][_0x43fb64]['time'];_0x4f6bff=_0x4f6bff+_0x187583;let _0x2cfee6=_0xed073b+_0x187583*this['fusionTick'],_0x46d75f=this[a0_0x1277('0x15')][_0x4f6bff][a0_0x1277('0x38')];if(_0x2cfee6!=_0x46d75f){while(_0x46d75f-_0x2cfee6<0x0){_0x4f6bff++,_0x46d75f=this[a0_0x1277('0x15')][_0x4f6bff][a0_0x1277('0x38')];}if(_0x46d75f!=_0x2cfee6)_0x4f6bff--;}for(let _0x351330 in _0x2464c6){let _0x41b0a8=_0x2464c6[_0x351330][a0_0x1277('0x54')],_0x3da857=_0x2464c6[_0x351330]['name'];if(_0x41b0a8==a0_0x1277('0x6')){let _0xdef8d9=this[a0_0x1277('0x15')][_0x4f6bff][_0x3da857];_0xf3c3f3['push'](_0xdef8d9);}else{if(_0x41b0a8=='timeDiff'){let _0x16851b=_0x4f6bff-_0x2464c6[_0x351330][a0_0x1277('0x8')],_0x38c28c=this[a0_0x1277('0x15')][_0x16851b][_0x3da857]-this[a0_0x1277('0x15')][_0x4f6bff][_0x3da857];_0xf3c3f3[a0_0x1277('0x6a')](_0x38c28c);}}}}return _0xf3c3f3;}}module[a0_0x1277('0x9')]=streamingNode;