var _0x5c22=['Connecting\x20to\x20Kafka:\x20','Client','connectionConfig','zookeeper','offset','Offset','consumer','message','Message\x20receieved.','ERROR','error','Error','offsetOutOfRange','outOfRange','maxNum','min','partition','setOffset','broadcastAggregates','setMasterOffset','position','length','getOffsetTimestamp','stampm','setSlaveOffset','setSlaveIndex:\x20there\x20is\x20no\x20data\x20-\x20','Fusion\x20tick','Diff\x20ticks:','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','floor','setSlaveOffset:\x20zeroIndex\x20is\x20not\x20a\x20whole\x20number\x20-\x20','\x0a\x0asetSlaveOffset:\x20ERROR\x20-\x20timestamps\x20DO\x20NOT\x20match!','\x0aNode:\x20','\x0aZero\x20index,\x20last\x20offset:\x20','\x20-\x20','maxNegativeOffset','attributes','offsetExists','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','\x20-\x20(','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','Rows\x20to\x20delete\x20(','):\x20','\x20/\x20','shift','tick','rawstore','timeSeriesTick','Time','|tick','ema','interval','addStreamAggr','previous','winsize','timeSeriesWinBufVector','sub','variance','|variance|','|ma|','winBufMin','|min|','max','winBufMax','|max|','getAggregates','indexOf','winbuf','getFloat','getTimestamp','getPartialFeatureVector','name','value','push','timeDiff','exports','../common/brokers/brokers.js','base','aggregate','master','stringify','parse','topic','measurements_node_','nodeid','fusionNodeI','parent','fusionTick','nodeId','buffer','postConstructor','config','connection','type','kafka','broker','client','fusion_id','bind','mqtt','addListener','processRecord','log','PROBLEM:\x20No\x20connection\x20(OK\x20for\x20tests)!','PROBLEM:\x20No\x20parent\x20defined.\x20No\x20connection\x20(OK\x20for\x20tests).','isMaster','connectToKafka'];(function(_0x4fb800,_0x3afdae){var _0x3fcfe5=function(_0x302f4){while(--_0x302f4){_0x4fb800['push'](_0x4fb800['shift']());}};var _0x43bfe6=function(){var _0x196651={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x6c28bf,_0x433e9f,_0x14d450,_0x1a4741){_0x1a4741=_0x1a4741||{};var _0x295370=_0x433e9f+'='+_0x14d450;var _0x1bb497=0x0;for(var _0x1bb497=0x0,_0x25b0f5=_0x6c28bf['length'];_0x1bb497<_0x25b0f5;_0x1bb497++){var _0x23f73c=_0x6c28bf[_0x1bb497];_0x295370+=';\x20'+_0x23f73c;var _0xce4540=_0x6c28bf[_0x23f73c];_0x6c28bf['push'](_0xce4540);_0x25b0f5=_0x6c28bf['length'];if(_0xce4540!==!![]){_0x295370+='='+_0xce4540;}}_0x1a4741['cookie']=_0x295370;},'removeCookie':function(){return'dev';},'getCookie':function(_0x447083,_0x1d1926){_0x447083=_0x447083||function(_0x3c3a27){return _0x3c3a27;};var _0x222e84=_0x447083(new RegExp('(?:^|;\x20)'+_0x1d1926['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x27b5d8=function(_0x1ac097,_0x1adb6b){_0x1ac097(++_0x1adb6b);};_0x27b5d8(_0x3fcfe5,_0x3afdae);return _0x222e84?decodeURIComponent(_0x222e84[0x1]):undefined;}};var _0x3c0839=function(){var _0x1a2564=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1a2564['test'](_0x196651['removeCookie']['toString']());};_0x196651['updateCookie']=_0x3c0839;var _0x14b2b9='';var _0x5a8cf3=_0x196651['updateCookie']();if(!_0x5a8cf3){_0x196651['setCookie'](['*'],'counter',0x1);}else if(_0x5a8cf3){_0x14b2b9=_0x196651['getCookie'](null,'counter');}else{_0x196651['removeCookie']();}};_0x43bfe6();}(_0x5c22,0x122));var _0x4c8f=function(_0x16bceb,_0x15f372){_0x16bceb=_0x16bceb-0x0;var _0x5893b1=_0x5c22[_0x16bceb];return _0x5893b1;};var _0x24d6a3=function(){var _0x4cad19=!![];return function(_0x1b4b7b,_0x1942ef){var _0x46d81a=_0x4cad19?function(){if(_0x1942ef){var _0x2fa683=_0x1942ef['apply'](_0x1b4b7b,arguments);_0x1942ef=null;return _0x2fa683;}}:function(){};_0x4cad19=![];return _0x46d81a;};}();var _0xe74b5d=_0x24d6a3(this,function(){var _0x4ce21d=function(){return'\x64\x65\x76';},_0x16739f=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x11b1a9=function(){var _0x327ffc=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x327ffc['\x74\x65\x73\x74'](_0x4ce21d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3d1e5c=function(){var _0x4e510f=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4e510f['\x74\x65\x73\x74'](_0x16739f['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3c6446=function(_0x225daf){var _0x408082=~-0x1>>0x1+0xff%0x0;if(_0x225daf['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x408082)){_0x2a6925(_0x225daf);}};var _0x2a6925=function(_0x44f5cb){var _0x5ba419=~-0x4>>0x1+0xff%0x0;if(_0x44f5cb['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x5ba419){_0x3c6446(_0x44f5cb);}};if(!_0x11b1a9()){if(!_0x3d1e5c()){_0x3c6446('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x3c6446('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x3c6446('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0xe74b5d();const {KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(_0x4c8f('0x0'));class streamingNode{constructor(_0x2c50b1,_0x2f1090,_0x4179f1,_0x6568cc,_0x13897a,_0x5cd6dc,_0x16487d){this[_0x4c8f('0x1')]=_0x2c50b1;this[_0x4c8f('0x2')]={};this[_0x4c8f('0x3')]=_0x4179f1[_0x4c8f('0x3')];this['config']=JSON['parse'](JSON[_0x4c8f('0x4')](_0x4179f1));this['connectionConfig']=JSON[_0x4c8f('0x5')](JSON[_0x4c8f('0x4')](_0x2f1090));this[_0x4c8f('0x6')]=_0x4c8f('0x7')+this['config'][_0x4c8f('0x8')];this[_0x4c8f('0x9')]=_0x5cd6dc;this['processRecordCb']=_0x13897a;this[_0x4c8f('0xa')]=_0x16487d;this[_0x4c8f('0xb')]=_0x4179f1[_0x4c8f('0xb')];this[_0x4c8f('0xc')]=_0x4179f1[_0x4c8f('0x8')];this[_0x4c8f('0xd')]=[];this['position']=0x0;}[_0x4c8f('0xe')](){let _0x45c009=this;if(this[_0x4c8f('0xa')]!=null){if(this[_0x4c8f('0xa')][_0x4c8f('0xf')][_0x4c8f('0x10')][_0x4c8f('0x11')]==_0x4c8f('0x12')){this[_0x4c8f('0x13')]=new KafkaNodeBroker(this['connectionConfig'],this[_0x4c8f('0x6')],_0x4c8f('0x14')+this[_0x4c8f('0xa')][_0x4c8f('0x15')]+this['nodeId']);this[_0x4c8f('0x13')]['addListener'](_0x45c009['processRecord'][_0x4c8f('0x16')](_0x45c009));}else if(this['parent'][_0x4c8f('0xf')][_0x4c8f('0x10')]['type']==_0x4c8f('0x17')){this[_0x4c8f('0x13')]=new MQTTBroker(this['connectionConfig'],this[_0x4c8f('0x6')],_0x4c8f('0x14')+this[_0x4c8f('0xa')][_0x4c8f('0x15')]+this[_0x4c8f('0xc')]);this[_0x4c8f('0x13')][_0x4c8f('0x18')](_0x45c009[_0x4c8f('0x19')][_0x4c8f('0x16')](_0x45c009));}else{console[_0x4c8f('0x1a')](_0x4c8f('0x1b'));}}else{console['log'](_0x4c8f('0x1c'));}}[_0x4c8f('0x1d')](){return this[_0x4c8f('0x3')];}[_0x4c8f('0x1e')](){console['log'](_0x4c8f('0x1f')+this[_0x4c8f('0x6')]);this['Consumer']=kafka['Consumer'];this[_0x4c8f('0x14')]=new kafka[(_0x4c8f('0x20'))](this[_0x4c8f('0x21')][_0x4c8f('0x22')],this['id']);this[_0x4c8f('0x23')]=new kafka[(_0x4c8f('0x24'))](this[_0x4c8f('0x14')]);let _0x1f4220=this;this[_0x4c8f('0x25')]=new this['Consumer'](this[_0x4c8f('0x14')],[{'topic':this[_0x4c8f('0x6')],'partition':0x0}],{'groupId':this['id']});this[_0x4c8f('0x25')]['on'](_0x4c8f('0x26'),function(_0x21a9c){try{console[_0x4c8f('0x1a')](_0x4c8f('0x27'));let _0x20ae60=JSON['parse'](_0x21a9c['value']);_0x1f4220['processRecord'](_0x20ae60);}catch(_0x4d3717){console[_0x4c8f('0x1a')](_0x4c8f('0x28'),_0x4d3717);}});this[_0x4c8f('0x25')]['on'](_0x4c8f('0x29'),function(_0x34c5b3){console['log'](_0x4c8f('0x2a'),_0x34c5b3);});this['consumer']['on'](_0x4c8f('0x2b'),function(_0x7cf379){console[_0x4c8f('0x1a')](_0x1f4220['id'],_0x4c8f('0x2c'),_0x7cf379);_0x7cf379[_0x4c8f('0x2d')]=0x2;_0x1f4220[_0x4c8f('0x23')]['fetch']([_0x7cf379],function(_0xa0af16,_0x214069){if(_0xa0af16){return console['error'](_0xa0af16);}var _0x580a8a=Math[_0x4c8f('0x2e')](_0x214069[_0x7cf379[_0x4c8f('0x6')]][_0x7cf379[_0x4c8f('0x2f')]]);console['log'](_0x1f4220);_0x1f4220[_0x4c8f('0x25')][_0x4c8f('0x30')](_0x7cf379[_0x4c8f('0x6')],_0x7cf379[_0x4c8f('0x2f')],_0x580a8a);});});}[_0x4c8f('0x31')](_0x198286){}[_0x4c8f('0x32')](){this[_0x4c8f('0x33')]=this[_0x4c8f('0xd')][_0x4c8f('0x34')]-0x1;}[_0x4c8f('0x35')](){return this['buffer'][this[_0x4c8f('0x33')]][_0x4c8f('0x36')];}[_0x4c8f('0x37')](_0x3c6f78){if(this[_0x4c8f('0xd')]['length']==0x0){console[_0x4c8f('0x1a')](_0x4c8f('0x38')+this['nodeId']);return![];}let _0x3add04=this[_0x4c8f('0xd')][_0x4c8f('0x34')]-0x1;let _0x149cae=this[_0x4c8f('0xd')][_0x3add04][_0x4c8f('0x36')];let _0x345075=(_0x149cae-_0x3c6f78)/this[_0x4c8f('0xb')];console[_0x4c8f('0x1a')](_0x4c8f('0x39'),this['fusionTick'],_0x4c8f('0x3a'),_0x345075);let _0x53d34f=_0x3add04-_0x345075;if(_0x53d34f<0x0){console[_0x4c8f('0x1a')]('setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20'+this['nodeId']+'('+_0x53d34f+'/'+_0x3add04+')@'+this[_0x4c8f('0xa')][_0x4c8f('0x15')]);return![];}else if(_0x53d34f>_0x3add04){console['log'](_0x4c8f('0x3b')+this[_0x4c8f('0xc')]+'('+_0x53d34f+'/'+_0x3add04+')@'+this[_0x4c8f('0xa')][_0x4c8f('0x15')]);return![];}else if(_0x53d34f!=Math[_0x4c8f('0x3c')](_0x53d34f)){console['log'](_0x4c8f('0x3d')+_0x53d34f);}console['log'](_0x53d34f);if(this[_0x4c8f('0xd')][_0x53d34f][_0x4c8f('0x36')]!=_0x3c6f78){console['log'](_0x4c8f('0x3e'));console['log'](_0x4c8f('0x3f')+this[_0x4c8f('0xc')]);console[_0x4c8f('0x1a')](_0x4c8f('0x40')+_0x53d34f+',\x20'+_0x3add04);console['log']('\x0aDifference\x20(buffer\x20-\x20zero):\x20'+this['buffer'][_0x53d34f][_0x4c8f('0x36')]+_0x4c8f('0x41')+_0x3c6f78);console[_0x4c8f('0x1a')]('\x0a\x0a\x0a');}this[_0x4c8f('0x33')]=_0x53d34f;return!![];}['checkDataAvailability'](){let _0x31241f=!![];this[_0x4c8f('0x42')]=0x0;for(let _0x3d1cc9 in this['config'][_0x4c8f('0x43')]){let _0x446c28=this[_0x4c8f('0xf')][_0x4c8f('0x43')][_0x3d1cc9]['time'];if(_0x446c28<this['maxNegativeOffset'])this['maxNegativeOffset']=_0x446c28;if(!this[_0x4c8f('0x44')](_0x446c28))_0x31241f=![];}return _0x31241f;}[_0x4c8f('0x44')](_0x19093d){let _0xfd465=this['position']+_0x19093d;let _0x1e57f2=this[_0x4c8f('0xd')][_0x4c8f('0x34')]-0x1;if(_0xfd465<0x0){console[_0x4c8f('0x1a')](_0x4c8f('0x45')+this[_0x4c8f('0xc')]+_0x4c8f('0x46')+_0xfd465+')');return![];}else if(_0xfd465>_0x1e57f2){console[_0x4c8f('0x1a')](_0x4c8f('0x47')+this['nodeId']+this[_0x4c8f('0xc')]+'\x20-\x20('+_0xfd465+'/'+_0x1e57f2+')');return![];}return!![];}['deleteObsoleteRows'](){let _0x3cfa24=this[_0x4c8f('0x33')]+this[_0x4c8f('0x42')]-0x5;console['log'](_0x4c8f('0x48')+this[_0x4c8f('0xc')]+',\x20'+this[_0x4c8f('0xa')][_0x4c8f('0x15')]+_0x4c8f('0x49')+_0x3cfa24+_0x4c8f('0x4a')+this[_0x4c8f('0xd')][_0x4c8f('0x34')]);for(let _0xa7929d=0x1;_0xa7929d<_0x3cfa24;_0xa7929d++)this['buffer'][_0x4c8f('0x4b')]();}['createAggregates'](_0x1458e1){for(let _0x5ea719 in _0x1458e1){let _0x45c533=_0x1458e1[_0x5ea719];let _0x56939a=_0x45c533['field'];let _0x5aab87=_0x45c533[_0x4c8f('0x4c')];let _0x27ee0f=this[_0x4c8f('0x4d')]['addStreamAggr']({'type':_0x4c8f('0x4e'),'timestamp':_0x4c8f('0x4f'),'value':_0x56939a});let _0x20c7a9=_0x56939a+_0x4c8f('0x50');this[_0x4c8f('0x2')][_0x20c7a9]=_0x27ee0f;for(let _0x5b3900 in _0x5aab87){let _0x156f5a=_0x5aab87[_0x5b3900];let _0x178702=_0x156f5a[_0x4c8f('0x11')];if(_0x178702==_0x4c8f('0x51')){let _0x565dd3=_0x156f5a[_0x4c8f('0x52')];let _0x32b495=_0x156f5a['initWindow'];let _0x27ee0f=this[_0x4c8f('0x4d')][_0x4c8f('0x53')]({'type':_0x4c8f('0x51'),'inAggr':this[_0x4c8f('0x2')][_0x20c7a9],'emaType':_0x4c8f('0x54'),'interval':_0x565dd3,'initWindow':_0x32b495});let _0x1dcc6e=_0x56939a+'|ema|'+_0x565dd3;this[_0x4c8f('0x2')][_0x1dcc6e]=_0x27ee0f;}else if(_0x178702=='winbuf'){let _0x35183a=_0x156f5a[_0x4c8f('0x55')];let _0x27ee0f=this[_0x4c8f('0x4d')][_0x4c8f('0x53')]({'type':_0x4c8f('0x56'),'inAggr':this[_0x4c8f('0x2')][_0x20c7a9],'winsize':_0x35183a});let _0x42c63e=_0x56939a+'|winbuf|'+_0x35183a;this[_0x4c8f('0x2')][_0x42c63e]=_0x27ee0f;let _0xc1f88b=_0x156f5a[_0x4c8f('0x57')];for(var _0x1178d9 in _0xc1f88b){let _0x5e55bf=_0xc1f88b[_0x1178d9];let _0x1f00ff=_0x5e55bf[_0x4c8f('0x11')];if(_0x1f00ff==_0x4c8f('0x58')){let _0x27ee0f=this[_0x4c8f('0x4d')]['addStreamAggr']({'type':_0x4c8f('0x58'),'inAggr':this[_0x4c8f('0x2')][_0x42c63e]});let _0x53e1ed=_0x56939a+_0x4c8f('0x59')+_0x35183a;this[_0x4c8f('0x2')][_0x53e1ed]=_0x27ee0f;}else if(_0x1f00ff=='ma'){let _0x27ee0f=this[_0x4c8f('0x4d')][_0x4c8f('0x53')]({'type':'ma','inAggr':this[_0x4c8f('0x2')][_0x42c63e]});let _0x46afe0=_0x56939a+_0x4c8f('0x5a')+_0x35183a;this[_0x4c8f('0x2')][_0x46afe0]=_0x27ee0f;}else if(_0x1f00ff==_0x4c8f('0x2e')){let _0x27ee0f=this[_0x4c8f('0x4d')][_0x4c8f('0x53')]({'type':_0x4c8f('0x5b'),'inAggr':this[_0x4c8f('0x2')][_0x42c63e]});let _0x3334dd=_0x56939a+_0x4c8f('0x5c')+_0x35183a;this[_0x4c8f('0x2')][_0x3334dd]=_0x27ee0f;}else if(_0x1f00ff==_0x4c8f('0x5d')){let _0x27ee0f=this[_0x4c8f('0x4d')][_0x4c8f('0x53')]({'type':_0x4c8f('0x5e'),'inAggr':this[_0x4c8f('0x2')][_0x42c63e]});let _0x358266=_0x56939a+_0x4c8f('0x5f')+_0x35183a;this['aggregate'][_0x358266]=_0x27ee0f;}}}}}}[_0x4c8f('0x60')](){var _0x1702f1={};for(let _0x4e40a0 in this['aggregate']){if(!(_0x4e40a0['indexOf'](_0x4c8f('0x4c'))>0x0||_0x4e40a0[_0x4c8f('0x61')](_0x4c8f('0x62'))>0x0)){_0x1702f1[_0x4e40a0]=this[_0x4c8f('0x2')][_0x4e40a0][_0x4c8f('0x63')]();_0x1702f1[_0x4c8f('0x36')]=this['aggregate'][_0x4e40a0][_0x4c8f('0x64')]();};};return _0x1702f1;}[_0x4c8f('0x65')](){let _0x5d9a43=[];for(let _0x4df0a1 in this[_0x4c8f('0xf')][_0x4c8f('0x43')]){let _0x10991a=this[_0x4c8f('0x33')];let _0xbe74dd=this['buffer'][_0x10991a][_0x4c8f('0x36')];let _0x42e30b=this['config'][_0x4c8f('0x43')][_0x4df0a1][_0x4c8f('0x43')];let _0x276a70=this[_0x4c8f('0xf')][_0x4c8f('0x43')][_0x4df0a1]['time'];_0x10991a=_0x10991a+_0x276a70;let _0x1faac4=_0xbe74dd+_0x276a70*this[_0x4c8f('0xb')];let _0xdffbe7=this[_0x4c8f('0xd')][_0x10991a][_0x4c8f('0x36')];if(_0x1faac4!=_0xdffbe7){while(_0xdffbe7-_0x1faac4<0x0){_0x10991a++;_0xdffbe7=this[_0x4c8f('0xd')][_0x10991a]['stampm'];}if(_0xdffbe7!=_0x1faac4)_0x10991a--;}for(let _0x408b47 in _0x42e30b){let _0x4e5c7e=_0x42e30b[_0x408b47][_0x4c8f('0x11')];let _0x312a4b=_0x42e30b[_0x408b47][_0x4c8f('0x66')];if(_0x4e5c7e==_0x4c8f('0x67')){let _0x2c6e5e=this['buffer'][_0x10991a][_0x312a4b];_0x5d9a43[_0x4c8f('0x68')](_0x2c6e5e);}else if(_0x4e5c7e==_0x4c8f('0x69')){let _0x19e67f=_0x10991a-_0x42e30b[_0x408b47]['interval'];let _0x38cf5f=this[_0x4c8f('0xd')][_0x19e67f][_0x312a4b]-this[_0x4c8f('0xd')][_0x10991a][_0x312a4b];_0x5d9a43[_0x4c8f('0x68')](_0x38cf5f);}}}return _0x5d9a43;}}module[_0x4c8f('0x6a')]=streamingNode;