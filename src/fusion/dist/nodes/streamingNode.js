const a0_0x27c8=['client','connectToKafka','connectionConfig','|min|','|tick','broker','base','Rows\x20to\x20delete\x20(','mqtt','setSlaveIndex:\x20there\x20is\x20no\x20data\x20-\x20','tick','partition','nodeid','topic','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','Message\x20receieved.','maxNum','fusion_id','value','Client','isMaster','field','broadcastAggregates','rawstore','PROBLEM:\x20No\x20connection\x20(OK\x20for\x20tests)!','getOffsetTimestamp','bind','consumer','fusionNodeI','fusionTick','getAggregates','processRecord','constructor','offsetExists','indexOf','|ma|','name','maxNegativeOffset','Fusion\x20tick','aggregate','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','sub','winBufMax','fetch','buffer','apply','interval','outOfRange','setSlaveOffset','ema','master','position','addListener','max','parse','test','previous','postConstructor','setMasterOffset','parent','checkDataAvailability','exports','addStreamAggr','\x20-\x20','|ema|','kafka','\x0aNode:\x20','\x0aDifference\x20(buffer\x20-\x20zero):\x20','error','processRecordCb','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Consumer','measurements_node_','length','winBufMin','Time','PROBLEM:\x20No\x20parent\x20defined.\x20No\x20connection\x20(OK\x20for\x20tests).','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','setSlaveOffset:\x20zeroIndex\x20is\x20not\x20a\x20whole\x20number\x20-\x20','winbuf','getFloat','stampm','timeSeriesTick','type','stringify','nodeId','createAggregates','attributes','log','min','initWindow','offset','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','getPartialFeatureVector','zookeeper','push','../common/brokers/brokers.js','\x0a\x0asetSlaveOffset:\x20ERROR\x20-\x20timestamps\x20DO\x20NOT\x20match!','timeDiff','time','message','config'];(function(_0xe36e30,_0x27c859){const _0x69a932=function(_0x12bd38){while(--_0x12bd38){_0xe36e30['push'](_0xe36e30['shift']());}},_0x1fc2ad=function(){const _0x177d05={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x153607,_0x34f7e6,_0x103b4c,_0xe6972d){_0xe6972d=_0xe6972d||{};let _0x15a6d7=_0x34f7e6+'='+_0x103b4c,_0x3c247f=0x0;for(let _0xea0809=0x0,_0x246bfe=_0x153607['length'];_0xea0809<_0x246bfe;_0xea0809++){const _0x5ce318=_0x153607[_0xea0809];_0x15a6d7+=';\x20'+_0x5ce318;const _0x199c9a=_0x153607[_0x5ce318];_0x153607['push'](_0x199c9a),_0x246bfe=_0x153607['length'],_0x199c9a!==!![]&&(_0x15a6d7+='='+_0x199c9a);}_0xe6972d['cookie']=_0x15a6d7;},'removeCookie':function(){return'dev';},'getCookie':function(_0x22fb31,_0x3c1262){_0x22fb31=_0x22fb31||function(_0x1b7917){return _0x1b7917;};const _0x2d0812=_0x22fb31(new RegExp('(?:^|;\x20)'+_0x3c1262['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x34fa8d=function(_0x45fa14,_0x31eca6){_0x45fa14(++_0x31eca6);};return _0x34fa8d(_0x69a932,_0x27c859),_0x2d0812?decodeURIComponent(_0x2d0812[0x1]):undefined;}},_0x592a8b=function(){const _0x37650d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x37650d['test'](_0x177d05['removeCookie']['toString']());};_0x177d05['updateCookie']=_0x592a8b;let _0x359ab7='';const _0x51f969=_0x177d05['updateCookie']();if(!_0x51f969)_0x177d05['setCookie'](['*'],'counter',0x1);else _0x51f969?_0x359ab7=_0x177d05['getCookie'](null,'counter'):_0x177d05['removeCookie']();};_0x1fc2ad();}(a0_0x27c8,0x9f));const a0_0x69a9=function(_0xe36e30,_0x27c859){_0xe36e30=_0xe36e30-0x0;let _0x69a932=a0_0x27c8[_0xe36e30];return _0x69a932;};const a0_0x103b4c=function(){let _0x36aba5=!![];return function(_0x49d15b,_0x348e2b){const _0x158d65=_0x36aba5?function(){if(_0x348e2b){const _0x595824=_0x348e2b[a0_0x69a9('0x5a')](_0x49d15b,arguments);return _0x348e2b=null,_0x595824;}}:function(){};return _0x36aba5=![],_0x158d65;};}(),a0_0x34f7e6=a0_0x103b4c(this,function(){const _0x2e6dd5=function(){const _0x62e4ba=_0x2e6dd5[a0_0x69a9('0x4d')](a0_0x69a9('0xd'))()[a0_0x69a9('0x4d')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x62e4ba[a0_0x69a9('0x64')](a0_0x34f7e6);};return _0x2e6dd5();});a0_0x34f7e6();const {KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x69a9('0x27'));class streamingNode{constructor(_0x2aaa75,_0x628322,_0x1eaa4a,_0x46f1bf,_0x4ccd71,_0x1ebbc0,_0x569b37){this[a0_0x69a9('0x33')]=_0x2aaa75,this[a0_0x69a9('0x54')]={},this[a0_0x69a9('0x5f')]=_0x1eaa4a[a0_0x69a9('0x5f')],this[a0_0x69a9('0x2c')]=JSON[a0_0x69a9('0x63')](JSON[a0_0x69a9('0x1b')](_0x1eaa4a)),this[a0_0x69a9('0x2f')]=JSON[a0_0x69a9('0x63')](JSON[a0_0x69a9('0x1b')](_0x628322)),this[a0_0x69a9('0x3a')]=a0_0x69a9('0xf')+this[a0_0x69a9('0x2c')][a0_0x69a9('0x39')],this[a0_0x69a9('0x49')]=_0x1ebbc0,this[a0_0x69a9('0xc')]=_0x4ccd71,this[a0_0x69a9('0x2')]=_0x569b37,this[a0_0x69a9('0x4a')]=_0x1eaa4a[a0_0x69a9('0x4a')],this[a0_0x69a9('0x1c')]=_0x1eaa4a[a0_0x69a9('0x39')],this[a0_0x69a9('0x59')]=[],this[a0_0x69a9('0x60')]=0x0;}[a0_0x69a9('0x0')](){let _0x5d219b=this;if(this['parent']!=null){if(this[a0_0x69a9('0x2')]['config']['connection'][a0_0x69a9('0x1a')]==a0_0x69a9('0x8'))this[a0_0x69a9('0x32')]=new KafkaNodeBroker(this[a0_0x69a9('0x2f')],this[a0_0x69a9('0x3a')],a0_0x69a9('0x2d')+this[a0_0x69a9('0x2')]['fusion_id']+this[a0_0x69a9('0x1c')]),this[a0_0x69a9('0x32')][a0_0x69a9('0x61')](_0x5d219b['processRecord'][a0_0x69a9('0x47')](_0x5d219b));else this['parent'][a0_0x69a9('0x2c')]['connection'][a0_0x69a9('0x1a')]==a0_0x69a9('0x35')?(this[a0_0x69a9('0x32')]=new MQTTBroker(this[a0_0x69a9('0x2f')],this[a0_0x69a9('0x3a')],a0_0x69a9('0x2d')+this['parent'][a0_0x69a9('0x3e')]+this[a0_0x69a9('0x1c')]),this['broker']['addListener'](_0x5d219b[a0_0x69a9('0x4c')][a0_0x69a9('0x47')](_0x5d219b))):console[a0_0x69a9('0x1f')](a0_0x69a9('0x45'));}else console['log'](a0_0x69a9('0x13'));}[a0_0x69a9('0x41')](){return this[a0_0x69a9('0x5f')];}[a0_0x69a9('0x2e')](){console[a0_0x69a9('0x1f')]('Connecting\x20to\x20Kafka:\x20'+this[a0_0x69a9('0x3a')]),this[a0_0x69a9('0xe')]=kafka[a0_0x69a9('0xe')],this['client']=new kafka[(a0_0x69a9('0x40'))](this[a0_0x69a9('0x2f')][a0_0x69a9('0x25')],this['id']),this[a0_0x69a9('0x22')]=new kafka['Offset'](this[a0_0x69a9('0x2d')]);let _0xad94b7=this;this['consumer']=new this['Consumer'](this[a0_0x69a9('0x2d')],[{'topic':this[a0_0x69a9('0x3a')],'partition':0x0}],{'groupId':this['id']}),this[a0_0x69a9('0x48')]['on'](a0_0x69a9('0x2b'),function(_0x54a67d){try{console[a0_0x69a9('0x1f')](a0_0x69a9('0x3c'));let _0x540725=JSON['parse'](_0x54a67d['value']);_0xad94b7[a0_0x69a9('0x4c')](_0x540725);}catch(_0x78a48f){console[a0_0x69a9('0x1f')]('ERROR',_0x78a48f);}}),this[a0_0x69a9('0x48')]['on'](a0_0x69a9('0xb'),function(_0x5c55f2){console[a0_0x69a9('0x1f')]('Error',_0x5c55f2);}),this['consumer']['on']('offsetOutOfRange',function(_0x42f79d){console[a0_0x69a9('0x1f')](_0xad94b7['id'],a0_0x69a9('0x5c'),_0x42f79d),_0x42f79d[a0_0x69a9('0x3d')]=0x2,_0xad94b7['offset'][a0_0x69a9('0x58')]([_0x42f79d],function(_0x492328,_0x4e2a63){if(_0x492328)return console[a0_0x69a9('0xb')](_0x492328);var _0x13c080=Math[a0_0x69a9('0x20')](_0x4e2a63[_0x42f79d[a0_0x69a9('0x3a')]][_0x42f79d['partition']]);console['log'](_0xad94b7),_0xad94b7[a0_0x69a9('0x48')]['setOffset'](_0x42f79d[a0_0x69a9('0x3a')],_0x42f79d[a0_0x69a9('0x38')],_0x13c080);});});}[a0_0x69a9('0x43')](_0x359d80){}[a0_0x69a9('0x1')](){this[a0_0x69a9('0x60')]=this['buffer']['length']-0x1;}[a0_0x69a9('0x46')](){return this[a0_0x69a9('0x59')][this[a0_0x69a9('0x60')]][a0_0x69a9('0x18')];}[a0_0x69a9('0x5d')](_0x54bf4e){if(this[a0_0x69a9('0x59')][a0_0x69a9('0x10')]==0x0)return console['log'](a0_0x69a9('0x36')+this[a0_0x69a9('0x1c')]),![];let _0x2d6f3f=this[a0_0x69a9('0x59')][a0_0x69a9('0x10')]-0x1,_0x11690c=this['buffer'][_0x2d6f3f][a0_0x69a9('0x18')],_0xd6ae86=(_0x11690c-_0x54bf4e)/this[a0_0x69a9('0x4a')];console[a0_0x69a9('0x1f')](a0_0x69a9('0x53'),this[a0_0x69a9('0x4a')],'Diff\x20ticks:',_0xd6ae86);let _0xc90273=_0x2d6f3f-_0xd6ae86;if(_0xc90273<0x0)return console[a0_0x69a9('0x1f')](a0_0x69a9('0x55')+this['nodeId']+'('+_0xc90273+'/'+_0x2d6f3f+')@'+this[a0_0x69a9('0x2')]['fusion_id']),![];else{if(_0xc90273>_0x2d6f3f)return console[a0_0x69a9('0x1f')](a0_0x69a9('0x14')+this['nodeId']+'('+_0xc90273+'/'+_0x2d6f3f+')@'+this[a0_0x69a9('0x2')][a0_0x69a9('0x3e')]),![];else _0xc90273!=Math['floor'](_0xc90273)&&console[a0_0x69a9('0x1f')](a0_0x69a9('0x15')+_0xc90273);}return console[a0_0x69a9('0x1f')](_0xc90273),this[a0_0x69a9('0x59')][_0xc90273][a0_0x69a9('0x18')]!=_0x54bf4e&&(console['log'](a0_0x69a9('0x28')),console[a0_0x69a9('0x1f')](a0_0x69a9('0x9')+this['nodeId']),console[a0_0x69a9('0x1f')]('\x0aZero\x20index,\x20last\x20offset:\x20'+_0xc90273+',\x20'+_0x2d6f3f),console[a0_0x69a9('0x1f')](a0_0x69a9('0xa')+this[a0_0x69a9('0x59')][_0xc90273][a0_0x69a9('0x18')]+a0_0x69a9('0x6')+_0x54bf4e),console[a0_0x69a9('0x1f')]('\x0a\x0a\x0a')),this[a0_0x69a9('0x60')]=_0xc90273,!![];}[a0_0x69a9('0x3')](){let _0x4a93fc=!![];this[a0_0x69a9('0x52')]=0x0;for(let _0x415dde in this[a0_0x69a9('0x2c')]['attributes']){let _0xf2e7cc=this['config'][a0_0x69a9('0x1e')][_0x415dde][a0_0x69a9('0x2a')];if(_0xf2e7cc<this[a0_0x69a9('0x52')])this[a0_0x69a9('0x52')]=_0xf2e7cc;if(!this[a0_0x69a9('0x4e')](_0xf2e7cc))_0x4a93fc=![];}return _0x4a93fc;}['offsetExists'](_0x34e1ab){let _0x32739c=this[a0_0x69a9('0x60')]+_0x34e1ab,_0x45b351=this[a0_0x69a9('0x59')][a0_0x69a9('0x10')]-0x1;if(_0x32739c<0x0)return console[a0_0x69a9('0x1f')](a0_0x69a9('0x3b')+this['nodeId']+'\x20-\x20('+_0x32739c+')'),![];else{if(_0x32739c>_0x45b351)return console['log'](a0_0x69a9('0x23')+this[a0_0x69a9('0x1c')]+this[a0_0x69a9('0x1c')]+'\x20-\x20('+_0x32739c+'/'+_0x45b351+')'),![];}return!![];}['deleteObsoleteRows'](){let _0x45b2d9=this[a0_0x69a9('0x60')]+this[a0_0x69a9('0x52')]-0x5;console[a0_0x69a9('0x1f')](a0_0x69a9('0x34')+this['nodeId']+',\x20'+this[a0_0x69a9('0x2')][a0_0x69a9('0x3e')]+'):\x20'+_0x45b2d9+'\x20/\x20'+this[a0_0x69a9('0x59')][a0_0x69a9('0x10')]);for(let _0x4dfb5f=0x1;_0x4dfb5f<_0x45b2d9;_0x4dfb5f++)this[a0_0x69a9('0x59')]['shift']();}[a0_0x69a9('0x1d')](_0x84f90d){for(let _0x2ff289 in _0x84f90d){let _0x393517=_0x84f90d[_0x2ff289],_0x5c3e85=_0x393517[a0_0x69a9('0x42')],_0x230c17=_0x393517[a0_0x69a9('0x37')],_0x1fa509=this[a0_0x69a9('0x44')][a0_0x69a9('0x5')]({'type':a0_0x69a9('0x19'),'timestamp':a0_0x69a9('0x12'),'value':_0x5c3e85}),_0x1496f3=_0x5c3e85+a0_0x69a9('0x31');this[a0_0x69a9('0x54')][_0x1496f3]=_0x1fa509;for(let _0x225682 in _0x230c17){let _0xdd35fd=_0x230c17[_0x225682],_0x2fc3f4=_0xdd35fd[a0_0x69a9('0x1a')];if(_0x2fc3f4==a0_0x69a9('0x5e')){let _0x56361a=_0xdd35fd[a0_0x69a9('0x5b')],_0x1aab9b=_0xdd35fd[a0_0x69a9('0x21')],_0x2af09a=this[a0_0x69a9('0x44')]['addStreamAggr']({'type':'ema','inAggr':this[a0_0x69a9('0x54')][_0x1496f3],'emaType':a0_0x69a9('0x65'),'interval':_0x56361a,'initWindow':_0x1aab9b}),_0x1e4df5=_0x5c3e85+a0_0x69a9('0x7')+_0x56361a;this[a0_0x69a9('0x54')][_0x1e4df5]=_0x2af09a;}else{if(_0x2fc3f4==a0_0x69a9('0x16')){let _0x385e4f=_0xdd35fd['winsize'],_0x40e8f2=this[a0_0x69a9('0x44')][a0_0x69a9('0x5')]({'type':'timeSeriesWinBufVector','inAggr':this[a0_0x69a9('0x54')][_0x1496f3],'winsize':_0x385e4f}),_0x4e8e58=_0x5c3e85+'|winbuf|'+_0x385e4f;this[a0_0x69a9('0x54')][_0x4e8e58]=_0x40e8f2;let _0x2c8a20=_0xdd35fd[a0_0x69a9('0x56')];for(var _0x1f1aaf in _0x2c8a20){let _0x5c35dd=_0x2c8a20[_0x1f1aaf],_0x3acec7=_0x5c35dd[a0_0x69a9('0x1a')];if(_0x3acec7=='variance'){let _0x4a3eda=this['rawstore'][a0_0x69a9('0x5')]({'type':'variance','inAggr':this[a0_0x69a9('0x54')][_0x4e8e58]}),_0x358977=_0x5c3e85+'|variance|'+_0x385e4f;this[a0_0x69a9('0x54')][_0x358977]=_0x4a3eda;}else{if(_0x3acec7=='ma'){let _0xd4b52b=this[a0_0x69a9('0x44')][a0_0x69a9('0x5')]({'type':'ma','inAggr':this[a0_0x69a9('0x54')][_0x4e8e58]}),_0x34f20e=_0x5c3e85+a0_0x69a9('0x50')+_0x385e4f;this[a0_0x69a9('0x54')][_0x34f20e]=_0xd4b52b;}else{if(_0x3acec7==a0_0x69a9('0x20')){let _0x3edace=this[a0_0x69a9('0x44')][a0_0x69a9('0x5')]({'type':a0_0x69a9('0x11'),'inAggr':this[a0_0x69a9('0x54')][_0x4e8e58]}),_0x126dc4=_0x5c3e85+a0_0x69a9('0x30')+_0x385e4f;this['aggregate'][_0x126dc4]=_0x3edace;}else{if(_0x3acec7==a0_0x69a9('0x62')){let _0x4c45c0=this['rawstore'][a0_0x69a9('0x5')]({'type':a0_0x69a9('0x57'),'inAggr':this[a0_0x69a9('0x54')][_0x4e8e58]}),_0x2bdf5d=_0x5c3e85+'|max|'+_0x385e4f;this[a0_0x69a9('0x54')][_0x2bdf5d]=_0x4c45c0;}}}}}}}}}}[a0_0x69a9('0x4b')](){var _0x33347f={};for(let _0xda2f5 in this[a0_0x69a9('0x54')]){!(_0xda2f5['indexOf'](a0_0x69a9('0x37'))>0x0||_0xda2f5[a0_0x69a9('0x4f')]('winbuf')>0x0)&&(_0x33347f[_0xda2f5]=this['aggregate'][_0xda2f5][a0_0x69a9('0x17')](),_0x33347f['stampm']=this['aggregate'][_0xda2f5]['getTimestamp']());;};return _0x33347f;}[a0_0x69a9('0x24')](){let _0x4a6bf0=[];for(let _0x186bc4 in this['config'][a0_0x69a9('0x1e')]){let _0x51a829=this[a0_0x69a9('0x60')],_0x497140=this[a0_0x69a9('0x59')][_0x51a829][a0_0x69a9('0x18')],_0x3d45fd=this[a0_0x69a9('0x2c')][a0_0x69a9('0x1e')][_0x186bc4][a0_0x69a9('0x1e')],_0x5b794c=this[a0_0x69a9('0x2c')][a0_0x69a9('0x1e')][_0x186bc4][a0_0x69a9('0x2a')];_0x51a829=_0x51a829+_0x5b794c;let _0xe9e63=_0x497140+_0x5b794c*this[a0_0x69a9('0x4a')],_0x19241f=this[a0_0x69a9('0x59')][_0x51a829][a0_0x69a9('0x18')];if(_0xe9e63!=_0x19241f){while(_0x19241f-_0xe9e63<0x0){_0x51a829++,_0x19241f=this[a0_0x69a9('0x59')][_0x51a829][a0_0x69a9('0x18')];}if(_0x19241f!=_0xe9e63)_0x51a829--;}for(let _0x1d2387 in _0x3d45fd){let _0x2be874=_0x3d45fd[_0x1d2387]['type'],_0x122931=_0x3d45fd[_0x1d2387][a0_0x69a9('0x51')];if(_0x2be874==a0_0x69a9('0x3f')){let _0x107f8e=this[a0_0x69a9('0x59')][_0x51a829][_0x122931];_0x4a6bf0[a0_0x69a9('0x26')](_0x107f8e);}else{if(_0x2be874==a0_0x69a9('0x29')){let _0xf09d07=_0x51a829-_0x3d45fd[_0x1d2387][a0_0x69a9('0x5b')],_0x414ccd=this[a0_0x69a9('0x59')][_0xf09d07][_0x122931]-this['buffer'][_0x51a829][_0x122931];_0x4a6bf0[a0_0x69a9('0x26')](_0x414ccd);}}}}return _0x4a6bf0;}}module[a0_0x69a9('0x4')]=streamingNode;