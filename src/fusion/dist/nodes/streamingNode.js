const a0_0x57a0=['attributes','ema','../common/brokers/brokers.js','push','winBufMax','checkDataAvailability','Diff\x20ticks:','fusionNodeI','Rows\x20to\x20delete\x20(','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','maxNum','min','|tick','processRecord','getFloat','fetch','getPartialFeatureVector','\x20-\x20','nodeid','rawstore','deleteObsoleteRows','timeSeriesWinBufVector','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','indexOf','offsetOutOfRange','error','setOffset','stringify','master','sub','setMasterOffset','setSlaveOffset:\x20zeroIndex\x20is\x20not\x20a\x20whole\x20number\x20-\x20','partition','setSlaveIndex:\x20there\x20is\x20no\x20data\x20-\x20','position','value','tick','buffer','message','Offset','\x0a\x0a\x0a','|variance|','fusionTick','setSlaveOffset','floor','PROBLEM:\x20No\x20parent\x20defined.\x20No\x20connection\x20(OK\x20for\x20tests).','processRecordCb','\x0aZero\x20index,\x20last\x20offset:\x20','bind','nodeId','interval','addStreamAggr','offsetExists','fusion_id','mqtt','\x0aNode:\x20','client','connectToKafka','variance','ERROR','time','length','parent','|min|','maxNegativeOffset','config','\x20-\x20(','offset','apply','Consumer','winBufMin','shift','zookeeper','consumer','|ema|','postConstructor','broadcastAggregates','initWindow','topic','aggregate','type','createAggregates','PROBLEM:\x20No\x20connection\x20(OK\x20for\x20tests)!','test','isMaster','parse','winbuf','Time','|ma|','timeSeriesTick','Error','return\x20/\x22\x20+\x20this\x20+\x20\x22/','base','log','getAggregates','previous','timeDiff','max','stampm','addListener','Fusion\x20tick','field','Connecting\x20to\x20Kafka:\x20','kafka','|max|','getOffsetTimestamp','measurements_node_','connectionConfig'];(function(_0x16ee8a,_0x57a08a){const _0x192f0c=function(_0x3865b9){while(--_0x3865b9){_0x16ee8a['push'](_0x16ee8a['shift']());}},_0x56c7f2=function(){const _0x41ac53={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3704fa,_0x3bebc0,_0x5b3dff,_0xdc3b6e){_0xdc3b6e=_0xdc3b6e||{};let _0x3e79d6=_0x3bebc0+'='+_0x5b3dff,_0x5d27d4=0x0;for(let _0x2d5140=0x0,_0x4798fd=_0x3704fa['length'];_0x2d5140<_0x4798fd;_0x2d5140++){const _0x34857a=_0x3704fa[_0x2d5140];_0x3e79d6+=';\x20'+_0x34857a;const _0x270174=_0x3704fa[_0x34857a];_0x3704fa['push'](_0x270174),_0x4798fd=_0x3704fa['length'],_0x270174!==!![]&&(_0x3e79d6+='='+_0x270174);}_0xdc3b6e['cookie']=_0x3e79d6;},'removeCookie':function(){return'dev';},'getCookie':function(_0x30fac6,_0x2450dc){_0x30fac6=_0x30fac6||function(_0x4f7fe2){return _0x4f7fe2;};const _0x17dc03=_0x30fac6(new RegExp('(?:^|;\x20)'+_0x2450dc['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1f857d=function(_0x1689ee,_0x9b238f){_0x1689ee(++_0x9b238f);};return _0x1f857d(_0x192f0c,_0x57a08a),_0x17dc03?decodeURIComponent(_0x17dc03[0x1]):undefined;}},_0x397685=function(){const _0x82a678=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x82a678['test'](_0x41ac53['removeCookie']['toString']());};_0x41ac53['updateCookie']=_0x397685;let _0x498047='';const _0x2bfa85=_0x41ac53['updateCookie']();if(!_0x2bfa85)_0x41ac53['setCookie'](['*'],'counter',0x1);else _0x2bfa85?_0x498047=_0x41ac53['getCookie'](null,'counter'):_0x41ac53['removeCookie']();};_0x56c7f2();}(a0_0x57a0,0xc4));const a0_0x192f=function(_0x16ee8a,_0x57a08a){_0x16ee8a=_0x16ee8a-0x0;let _0x192f0c=a0_0x57a0[_0x16ee8a];return _0x192f0c;};const a0_0x5b3dff=function(){let _0x16dac2=!![];return function(_0x2c148d,_0x45d5e1){const _0x168b11=_0x16dac2?function(){if(_0x45d5e1){const _0x2363cc=_0x45d5e1[a0_0x192f('0x5e')](_0x2c148d,arguments);return _0x45d5e1=null,_0x2363cc;}}:function(){};return _0x16dac2=![],_0x168b11;};}(),a0_0x3bebc0=a0_0x5b3dff(this,function(){const _0x2843f9=function(){const _0x4c59bb=_0x2843f9['constructor'](a0_0x192f('0x7'))()['constructor'](a0_0x192f('0x30'));return!_0x4c59bb[a0_0x192f('0x6d')](a0_0x3bebc0);};return _0x2843f9();});a0_0x3bebc0();const {KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x192f('0x1a'));class streamingNode{constructor(_0x574831,_0x3c4b5a,_0x2317fb,_0x2974ff,_0x2ecf29,_0x5d688e,_0x22b710){this[a0_0x192f('0x8')]=_0x574831,this[a0_0x192f('0x69')]={},this[a0_0x192f('0x36')]=_0x2317fb['master'],this[a0_0x192f('0x5b')]=JSON[a0_0x192f('0x1')](JSON[a0_0x192f('0x35')](_0x2317fb)),this[a0_0x192f('0x17')]=JSON[a0_0x192f('0x1')](JSON['stringify'](_0x3c4b5a)),this[a0_0x192f('0x68')]=a0_0x192f('0x16')+this[a0_0x192f('0x5b')][a0_0x192f('0x2a')],this[a0_0x192f('0x1f')]=_0x5d688e,this[a0_0x192f('0x48')]=_0x2ecf29,this[a0_0x192f('0x58')]=_0x22b710,this[a0_0x192f('0x44')]=_0x2317fb['fusionTick'],this[a0_0x192f('0x4b')]=_0x2317fb[a0_0x192f('0x2a')],this[a0_0x192f('0x3f')]=[],this[a0_0x192f('0x3c')]=0x0;}[a0_0x192f('0x65')](){let _0x26ab57=this;if(this[a0_0x192f('0x58')]!=null){if(this[a0_0x192f('0x58')][a0_0x192f('0x5b')]['connection'][a0_0x192f('0x6a')]==a0_0x192f('0x13'))this['broker']=new KafkaNodeBroker(this[a0_0x192f('0x17')],this[a0_0x192f('0x68')],a0_0x192f('0x52')+this[a0_0x192f('0x58')]['fusion_id']+this[a0_0x192f('0x4b')]),this['broker'][a0_0x192f('0xf')](_0x26ab57[a0_0x192f('0x25')][a0_0x192f('0x4a')](_0x26ab57));else this[a0_0x192f('0x58')][a0_0x192f('0x5b')]['connection'][a0_0x192f('0x6a')]==a0_0x192f('0x50')?(this['broker']=new MQTTBroker(this[a0_0x192f('0x17')],this['topic'],a0_0x192f('0x52')+this[a0_0x192f('0x58')]['fusion_id']+this[a0_0x192f('0x4b')]),this['broker'][a0_0x192f('0xf')](_0x26ab57['processRecord'][a0_0x192f('0x4a')](_0x26ab57))):console['log'](a0_0x192f('0x6c'));}else console[a0_0x192f('0x9')](a0_0x192f('0x47'));}[a0_0x192f('0x0')](){return this[a0_0x192f('0x36')];}[a0_0x192f('0x53')](){console['log'](a0_0x192f('0x12')+this[a0_0x192f('0x68')]),this[a0_0x192f('0x5f')]=kafka[a0_0x192f('0x5f')],this[a0_0x192f('0x52')]=new kafka['Client'](this[a0_0x192f('0x17')][a0_0x192f('0x62')],this['id']),this[a0_0x192f('0x5d')]=new kafka[(a0_0x192f('0x41'))](this[a0_0x192f('0x52')]);let _0x13da49=this;this[a0_0x192f('0x63')]=new this['Consumer'](this[a0_0x192f('0x52')],[{'topic':this[a0_0x192f('0x68')],'partition':0x0}],{'groupId':this['id']}),this[a0_0x192f('0x63')]['on'](a0_0x192f('0x40'),function(_0x262bc7){try{console['log']('Message\x20receieved.');let _0x9527b4=JSON[a0_0x192f('0x1')](_0x262bc7[a0_0x192f('0x3d')]);_0x13da49[a0_0x192f('0x25')](_0x9527b4);}catch(_0x4dc25c){console['log'](a0_0x192f('0x55'),_0x4dc25c);}}),this['consumer']['on'](a0_0x192f('0x33'),function(_0x51bd46){console[a0_0x192f('0x9')](a0_0x192f('0x6'),_0x51bd46);}),this[a0_0x192f('0x63')]['on'](a0_0x192f('0x32'),function(_0x49d8e0){console[a0_0x192f('0x9')](_0x13da49['id'],'outOfRange',_0x49d8e0),_0x49d8e0[a0_0x192f('0x22')]=0x2,_0x13da49[a0_0x192f('0x5d')][a0_0x192f('0x27')]([_0x49d8e0],function(_0x5c8c34,_0x4c9fe8){if(_0x5c8c34)return console[a0_0x192f('0x33')](_0x5c8c34);var _0x375124=Math[a0_0x192f('0x23')](_0x4c9fe8[_0x49d8e0['topic']][_0x49d8e0[a0_0x192f('0x3a')]]);console[a0_0x192f('0x9')](_0x13da49),_0x13da49[a0_0x192f('0x63')][a0_0x192f('0x34')](_0x49d8e0['topic'],_0x49d8e0['partition'],_0x375124);});});}[a0_0x192f('0x66')](_0x2a2869){}[a0_0x192f('0x38')](){this[a0_0x192f('0x3c')]=this['buffer'][a0_0x192f('0x57')]-0x1;}[a0_0x192f('0x15')](){return this[a0_0x192f('0x3f')][this[a0_0x192f('0x3c')]]['stampm'];}[a0_0x192f('0x45')](_0x139aaa){if(this[a0_0x192f('0x3f')]['length']==0x0)return console['log'](a0_0x192f('0x3b')+this[a0_0x192f('0x4b')]),![];let _0x48322d=this['buffer'][a0_0x192f('0x57')]-0x1,_0x15eb12=this['buffer'][_0x48322d]['stampm'],_0x14a041=(_0x15eb12-_0x139aaa)/this[a0_0x192f('0x44')];console[a0_0x192f('0x9')](a0_0x192f('0x10'),this[a0_0x192f('0x44')],a0_0x192f('0x1e'),_0x14a041);let _0x5b27c7=_0x48322d-_0x14a041;if(_0x5b27c7<0x0)return console[a0_0x192f('0x9')](a0_0x192f('0x2e')+this[a0_0x192f('0x4b')]+'('+_0x5b27c7+'/'+_0x48322d+')@'+this['parent'][a0_0x192f('0x4f')]),![];else{if(_0x5b27c7>_0x48322d)return console[a0_0x192f('0x9')](a0_0x192f('0x21')+this[a0_0x192f('0x4b')]+'('+_0x5b27c7+'/'+_0x48322d+')@'+this['parent'][a0_0x192f('0x4f')]),![];else _0x5b27c7!=Math[a0_0x192f('0x46')](_0x5b27c7)&&console[a0_0x192f('0x9')](a0_0x192f('0x39')+_0x5b27c7);}return console[a0_0x192f('0x9')](_0x5b27c7),this[a0_0x192f('0x3f')][_0x5b27c7][a0_0x192f('0xe')]!=_0x139aaa&&(console[a0_0x192f('0x9')]('\x0a\x0asetSlaveOffset:\x20ERROR\x20-\x20timestamps\x20DO\x20NOT\x20match!'),console[a0_0x192f('0x9')](a0_0x192f('0x51')+this[a0_0x192f('0x4b')]),console[a0_0x192f('0x9')](a0_0x192f('0x49')+_0x5b27c7+',\x20'+_0x48322d),console['log']('\x0aDifference\x20(buffer\x20-\x20zero):\x20'+this[a0_0x192f('0x3f')][_0x5b27c7][a0_0x192f('0xe')]+a0_0x192f('0x29')+_0x139aaa),console[a0_0x192f('0x9')](a0_0x192f('0x42'))),this['position']=_0x5b27c7,!![];}[a0_0x192f('0x1d')](){let _0x370ad3=!![];this[a0_0x192f('0x5a')]=0x0;for(let _0x418ae2 in this['config'][a0_0x192f('0x18')]){let _0x24fafc=this[a0_0x192f('0x5b')][a0_0x192f('0x18')][_0x418ae2][a0_0x192f('0x56')];if(_0x24fafc<this[a0_0x192f('0x5a')])this['maxNegativeOffset']=_0x24fafc;if(!this[a0_0x192f('0x4e')](_0x24fafc))_0x370ad3=![];}return _0x370ad3;}[a0_0x192f('0x4e')](_0x5edc3b){let _0x1b4c95=this[a0_0x192f('0x3c')]+_0x5edc3b,_0x4b9463=this[a0_0x192f('0x3f')][a0_0x192f('0x57')]-0x1;if(_0x1b4c95<0x0)return console['log'](a0_0x192f('0x2f')+this[a0_0x192f('0x4b')]+a0_0x192f('0x5c')+_0x1b4c95+')'),![];else{if(_0x1b4c95>_0x4b9463)return console[a0_0x192f('0x9')]('offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20'+this['nodeId']+this[a0_0x192f('0x4b')]+'\x20-\x20('+_0x1b4c95+'/'+_0x4b9463+')'),![];}return!![];}[a0_0x192f('0x2c')](){let _0x42ac81=this['position']+this['maxNegativeOffset']-0x5;console[a0_0x192f('0x9')](a0_0x192f('0x20')+this[a0_0x192f('0x4b')]+',\x20'+this['parent'][a0_0x192f('0x4f')]+'):\x20'+_0x42ac81+'\x20/\x20'+this[a0_0x192f('0x3f')]['length']);for(let _0x3b17e0=0x1;_0x3b17e0<_0x42ac81;_0x3b17e0++)this['buffer'][a0_0x192f('0x61')]();}[a0_0x192f('0x6b')](_0x4aa710){for(let _0x1b2715 in _0x4aa710){let _0x35dcf7=_0x4aa710[_0x1b2715],_0x3f7175=_0x35dcf7[a0_0x192f('0x11')],_0xf9e76f=_0x35dcf7[a0_0x192f('0x3e')],_0x44471b=this['rawstore']['addStreamAggr']({'type':a0_0x192f('0x5'),'timestamp':a0_0x192f('0x3'),'value':_0x3f7175}),_0xfa3dd3=_0x3f7175+a0_0x192f('0x24');this['aggregate'][_0xfa3dd3]=_0x44471b;for(let _0x54a98c in _0xf9e76f){let _0x27b4f6=_0xf9e76f[_0x54a98c],_0x5301d3=_0x27b4f6[a0_0x192f('0x6a')];if(_0x5301d3==a0_0x192f('0x19')){let _0x2b38ae=_0x27b4f6[a0_0x192f('0x4c')],_0x319025=_0x27b4f6[a0_0x192f('0x67')],_0x39a09a=this[a0_0x192f('0x2b')][a0_0x192f('0x4d')]({'type':a0_0x192f('0x19'),'inAggr':this['aggregate'][_0xfa3dd3],'emaType':a0_0x192f('0xb'),'interval':_0x2b38ae,'initWindow':_0x319025}),_0x10baa8=_0x3f7175+a0_0x192f('0x64')+_0x2b38ae;this[a0_0x192f('0x69')][_0x10baa8]=_0x39a09a;}else{if(_0x5301d3==a0_0x192f('0x2')){let _0x5d5dd5=_0x27b4f6['winsize'],_0x397c17=this[a0_0x192f('0x2b')][a0_0x192f('0x4d')]({'type':a0_0x192f('0x2d'),'inAggr':this[a0_0x192f('0x69')][_0xfa3dd3],'winsize':_0x5d5dd5}),_0x271cfe=_0x3f7175+'|winbuf|'+_0x5d5dd5;this['aggregate'][_0x271cfe]=_0x397c17;let _0x537116=_0x27b4f6[a0_0x192f('0x37')];for(var _0x4641be in _0x537116){let _0x391c52=_0x537116[_0x4641be],_0x24c5a2=_0x391c52['type'];if(_0x24c5a2==a0_0x192f('0x54')){let _0xf45342=this[a0_0x192f('0x2b')][a0_0x192f('0x4d')]({'type':a0_0x192f('0x54'),'inAggr':this[a0_0x192f('0x69')][_0x271cfe]}),_0x4d0393=_0x3f7175+a0_0x192f('0x43')+_0x5d5dd5;this['aggregate'][_0x4d0393]=_0xf45342;}else{if(_0x24c5a2=='ma'){let _0x1111c6=this[a0_0x192f('0x2b')][a0_0x192f('0x4d')]({'type':'ma','inAggr':this['aggregate'][_0x271cfe]}),_0x5abcc1=_0x3f7175+a0_0x192f('0x4')+_0x5d5dd5;this['aggregate'][_0x5abcc1]=_0x1111c6;}else{if(_0x24c5a2==a0_0x192f('0x23')){let _0x2ee137=this[a0_0x192f('0x2b')][a0_0x192f('0x4d')]({'type':a0_0x192f('0x60'),'inAggr':this[a0_0x192f('0x69')][_0x271cfe]}),_0x4b6b09=_0x3f7175+a0_0x192f('0x59')+_0x5d5dd5;this['aggregate'][_0x4b6b09]=_0x2ee137;}else{if(_0x24c5a2==a0_0x192f('0xd')){let _0x214ea3=this[a0_0x192f('0x2b')][a0_0x192f('0x4d')]({'type':a0_0x192f('0x1c'),'inAggr':this[a0_0x192f('0x69')][_0x271cfe]}),_0x4d45bd=_0x3f7175+a0_0x192f('0x14')+_0x5d5dd5;this[a0_0x192f('0x69')][_0x4d45bd]=_0x214ea3;}}}}}}}}}}[a0_0x192f('0xa')](){var _0x3c49ad={};for(let _0x3accb0 in this[a0_0x192f('0x69')]){!(_0x3accb0['indexOf'](a0_0x192f('0x3e'))>0x0||_0x3accb0[a0_0x192f('0x31')]('winbuf')>0x0)&&(_0x3c49ad[_0x3accb0]=this[a0_0x192f('0x69')][_0x3accb0][a0_0x192f('0x26')](),_0x3c49ad[a0_0x192f('0xe')]=this[a0_0x192f('0x69')][_0x3accb0]['getTimestamp']());;};return _0x3c49ad;}[a0_0x192f('0x28')](){let _0x381a1e=[];for(let _0x249ca9 in this['config'][a0_0x192f('0x18')]){let _0x41830c=this[a0_0x192f('0x3c')],_0x5d39cf=this[a0_0x192f('0x3f')][_0x41830c][a0_0x192f('0xe')],_0x2baf13=this[a0_0x192f('0x5b')][a0_0x192f('0x18')][_0x249ca9]['attributes'],_0x6f3b3b=this[a0_0x192f('0x5b')][a0_0x192f('0x18')][_0x249ca9][a0_0x192f('0x56')];_0x41830c=_0x41830c+_0x6f3b3b;let _0x1320b3=_0x5d39cf+_0x6f3b3b*this['fusionTick'],_0xb22274=this[a0_0x192f('0x3f')][_0x41830c][a0_0x192f('0xe')];if(_0x1320b3!=_0xb22274){while(_0xb22274-_0x1320b3<0x0){_0x41830c++,_0xb22274=this[a0_0x192f('0x3f')][_0x41830c]['stampm'];}if(_0xb22274!=_0x1320b3)_0x41830c--;}for(let _0x2f185a in _0x2baf13){let _0x15b941=_0x2baf13[_0x2f185a][a0_0x192f('0x6a')],_0x509195=_0x2baf13[_0x2f185a]['name'];if(_0x15b941==a0_0x192f('0x3d')){let _0x278228=this['buffer'][_0x41830c][_0x509195];_0x381a1e[a0_0x192f('0x1b')](_0x278228);}else{if(_0x15b941==a0_0x192f('0xc')){let _0x4a603f=_0x41830c-_0x2baf13[_0x2f185a][a0_0x192f('0x4c')],_0x48bb9e=this['buffer'][_0x4a603f][_0x509195]-this[a0_0x192f('0x3f')][_0x41830c][_0x509195];_0x381a1e['push'](_0x48bb9e);}}}}return _0x381a1e;}}module['exports']=streamingNode;