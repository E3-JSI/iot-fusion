const a0_0x4162=['initWindow','|ma|','offset','bind','|winbuf|','kafka','Client','position','../common/brokers/brokers.js','parent','Connecting\x20to\x20Kafka:\x20','winBufMax','log','getAggregates','ERROR','getPartialFeatureVector','checkDataAvailability','mqtt','consumer','processRecord','|variance|','isMaster','apply','setSlaveOffset:\x20zeroIndex\x20is\x20not\x20a\x20whole\x20number\x20-\x20','connectionConfig','min','tick','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','previous','Message\x20receieved.','stampm','push','name','|min|','client','error','measurements_node_','addStreamAggr','outOfRange','\x20/\x20','stringify','maxNum','PROBLEM:\x20No\x20connection\x20(OK\x20for\x20tests)!','createAggregates','\x20-\x20(','value','type','shift','rawstore','sub','topic','floor','\x0aDifference\x20(buffer\x20-\x20zero):\x20','addListener','setMasterOffset','nodeid','):\x20','setSlaveIndex:\x20there\x20is\x20no\x20data\x20-\x20','timeSeriesWinBufVector','broker','ema','deleteObsoleteRows','aggregate','master','nodeId','broadcastAggregates','fusionNodeI','field','setSlaveOffset','processRecordCb','winsize','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','time','offsetExists','attributes','|ema|','Time','length','connection','winbuf','\x0aNode:\x20','message','config','getFloat','maxNegativeOffset','offsetOutOfRange','interval','\x0a\x0asetSlaveOffset:\x20ERROR\x20-\x20timestamps\x20DO\x20NOT\x20match!','setOffset','partition','buffer','fusionTick','|max|','fetch','\x0aZero\x20index,\x20last\x20offset:\x20','fusion_id','return\x20/\x22\x20+\x20this\x20+\x20\x22/','\x0a\x0a\x0a','Rows\x20to\x20delete\x20(','parse','Error','Consumer'];(function(_0x206287,_0x416215){const _0x321522=function(_0x5ebe3f){while(--_0x5ebe3f){_0x206287['push'](_0x206287['shift']());}},_0x602835=function(){const _0x340feb={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2fbc03,_0x5a5422,_0x313760,_0x2be51d){_0x2be51d=_0x2be51d||{};let _0x30ea23=_0x5a5422+'='+_0x313760,_0x5318dd=0x0;for(let _0x388c39=0x0,_0x4f31ea=_0x2fbc03['length'];_0x388c39<_0x4f31ea;_0x388c39++){const _0x4ab15c=_0x2fbc03[_0x388c39];_0x30ea23+=';\x20'+_0x4ab15c;const _0x47a2ea=_0x2fbc03[_0x4ab15c];_0x2fbc03['push'](_0x47a2ea),_0x4f31ea=_0x2fbc03['length'],_0x47a2ea!==!![]&&(_0x30ea23+='='+_0x47a2ea);}_0x2be51d['cookie']=_0x30ea23;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2b94ac,_0x49c519){_0x2b94ac=_0x2b94ac||function(_0x2bdd4c){return _0x2bdd4c;};const _0x7dd9fa=_0x2b94ac(new RegExp('(?:^|;\x20)'+_0x49c519['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x48932e=function(_0x5db323,_0x17fde5){_0x5db323(++_0x17fde5);};return _0x48932e(_0x321522,_0x416215),_0x7dd9fa?decodeURIComponent(_0x7dd9fa[0x1]):undefined;}},_0x3cb271=function(){const _0x3f8d98=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3f8d98['test'](_0x340feb['removeCookie']['toString']());};_0x340feb['updateCookie']=_0x3cb271;let _0x4c64ab='';const _0x38a666=_0x340feb['updateCookie']();if(!_0x38a666)_0x340feb['setCookie'](['*'],'counter',0x1);else _0x38a666?_0x4c64ab=_0x340feb['getCookie'](null,'counter'):_0x340feb['removeCookie']();};_0x602835();}(a0_0x4162,0xec));const a0_0x3215=function(_0x206287,_0x416215){_0x206287=_0x206287-0x0;let _0x321522=a0_0x4162[_0x206287];return _0x321522;};const a0_0x313760=function(){let _0x3b15eb=!![];return function(_0x38d425,_0x57cab8){const _0x20c06f=_0x3b15eb?function(){if(_0x57cab8){const _0x59cb2c=_0x57cab8[a0_0x3215('0x5c')](_0x38d425,arguments);return _0x57cab8=null,_0x59cb2c;}}:function(){};return _0x3b15eb=![],_0x20c06f;};}(),a0_0x5a5422=a0_0x313760(this,function(){const _0x361d61=function(){const _0x272edd=_0x361d61['constructor'](a0_0x3215('0x40'))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x272edd['test'](a0_0x5a5422);};return _0x361d61();});a0_0x5a5422();const {KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x3215('0x4e'));class streamingNode{constructor(_0x190a70,_0x124f1f,_0x253e94,_0x24f107,_0x1f7375,_0x2bdf48,_0x30b606){this['base']=_0x190a70,this[a0_0x3215('0x1e')]={},this['master']=_0x253e94[a0_0x3215('0x1f')],this['config']=JSON[a0_0x3215('0x43')](JSON[a0_0x3215('0x8')](_0x253e94)),this[a0_0x3215('0x5e')]=JSON['parse'](JSON['stringify'](_0x124f1f)),this[a0_0x3215('0x12')]=a0_0x3215('0x4')+this['config'][a0_0x3215('0x17')],this[a0_0x3215('0x22')]=_0x2bdf48,this[a0_0x3215('0x25')]=_0x1f7375,this['parent']=_0x30b606,this[a0_0x3215('0x3b')]=_0x253e94[a0_0x3215('0x3b')],this[a0_0x3215('0x20')]=_0x253e94[a0_0x3215('0x17')],this[a0_0x3215('0x3a')]=[],this[a0_0x3215('0x4d')]=0x0;}['postConstructor'](){let _0x4a877e=this;if(this[a0_0x3215('0x4f')]!=null){if(this[a0_0x3215('0x4f')]['config'][a0_0x3215('0x2e')][a0_0x3215('0xe')]==a0_0x3215('0x4b'))this[a0_0x3215('0x1b')]=new KafkaNodeBroker(this[a0_0x3215('0x5e')],this[a0_0x3215('0x12')],a0_0x3215('0x2')+this[a0_0x3215('0x4f')][a0_0x3215('0x3f')]+this[a0_0x3215('0x20')]),this[a0_0x3215('0x1b')]['addListener'](_0x4a877e['processRecord'][a0_0x3215('0x49')](_0x4a877e));else this[a0_0x3215('0x4f')][a0_0x3215('0x32')][a0_0x3215('0x2e')][a0_0x3215('0xe')]==a0_0x3215('0x57')?(this[a0_0x3215('0x1b')]=new MQTTBroker(this['connectionConfig'],this[a0_0x3215('0x12')],a0_0x3215('0x2')+this[a0_0x3215('0x4f')][a0_0x3215('0x3f')]+this['nodeId']),this[a0_0x3215('0x1b')][a0_0x3215('0x15')](_0x4a877e['processRecord']['bind'](_0x4a877e))):console[a0_0x3215('0x52')](a0_0x3215('0xa'));}else console[a0_0x3215('0x52')]('PROBLEM:\x20No\x20parent\x20defined.\x20No\x20connection\x20(OK\x20for\x20tests).');}[a0_0x3215('0x5b')](){return this[a0_0x3215('0x1f')];}['connectToKafka'](){console['log'](a0_0x3215('0x50')+this['topic']),this[a0_0x3215('0x45')]=kafka['Consumer'],this[a0_0x3215('0x2')]=new kafka[(a0_0x3215('0x4c'))](this[a0_0x3215('0x5e')]['zookeeper'],this['id']),this[a0_0x3215('0x48')]=new kafka['Offset'](this[a0_0x3215('0x2')]);let _0x4a8ccf=this;this[a0_0x3215('0x58')]=new this[(a0_0x3215('0x45'))](this[a0_0x3215('0x2')],[{'topic':this['topic'],'partition':0x0}],{'groupId':this['id']}),this[a0_0x3215('0x58')]['on'](a0_0x3215('0x31'),function(_0x36aa93){try{console[a0_0x3215('0x52')](a0_0x3215('0x63'));let _0x1835c5=JSON['parse'](_0x36aa93[a0_0x3215('0xd')]);_0x4a8ccf[a0_0x3215('0x59')](_0x1835c5);}catch(_0x24d373){console[a0_0x3215('0x52')](a0_0x3215('0x54'),_0x24d373);}}),this['consumer']['on'](a0_0x3215('0x3'),function(_0x142d73){console['log'](a0_0x3215('0x44'),_0x142d73);}),this['consumer']['on'](a0_0x3215('0x35'),function(_0x425f9d){console['log'](_0x4a8ccf['id'],a0_0x3215('0x6'),_0x425f9d),_0x425f9d[a0_0x3215('0x9')]=0x2,_0x4a8ccf[a0_0x3215('0x48')][a0_0x3215('0x3d')]([_0x425f9d],function(_0x3ff6e0,_0x4c774a){if(_0x3ff6e0)return console[a0_0x3215('0x3')](_0x3ff6e0);var _0x5db707=Math[a0_0x3215('0x5f')](_0x4c774a[_0x425f9d['topic']][_0x425f9d['partition']]);console['log'](_0x4a8ccf),_0x4a8ccf[a0_0x3215('0x58')][a0_0x3215('0x38')](_0x425f9d[a0_0x3215('0x12')],_0x425f9d[a0_0x3215('0x39')],_0x5db707);});});}[a0_0x3215('0x21')](_0x3ee6c1){}[a0_0x3215('0x16')](){this[a0_0x3215('0x4d')]=this[a0_0x3215('0x3a')][a0_0x3215('0x2d')]-0x1;}['getOffsetTimestamp'](){return this[a0_0x3215('0x3a')][this[a0_0x3215('0x4d')]]['stampm'];}[a0_0x3215('0x24')](_0x3287d9){if(this[a0_0x3215('0x3a')][a0_0x3215('0x2d')]==0x0)return console['log'](a0_0x3215('0x19')+this['nodeId']),![];let _0x54e7b=this['buffer'][a0_0x3215('0x2d')]-0x1,_0x310d19=this[a0_0x3215('0x3a')][_0x54e7b][a0_0x3215('0x64')],_0x5ecae9=(_0x310d19-_0x3287d9)/this['fusionTick'];console[a0_0x3215('0x52')]('Fusion\x20tick',this['fusionTick'],'Diff\x20ticks:',_0x5ecae9);let _0x8ebf12=_0x54e7b-_0x5ecae9;if(_0x8ebf12<0x0)return console['log']('setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20'+this['nodeId']+'('+_0x8ebf12+'/'+_0x54e7b+')@'+this[a0_0x3215('0x4f')]['fusion_id']),![];else{if(_0x8ebf12>_0x54e7b)return console[a0_0x3215('0x52')](a0_0x3215('0x27')+this[a0_0x3215('0x20')]+'('+_0x8ebf12+'/'+_0x54e7b+')@'+this[a0_0x3215('0x4f')][a0_0x3215('0x3f')]),![];else _0x8ebf12!=Math[a0_0x3215('0x13')](_0x8ebf12)&&console[a0_0x3215('0x52')](a0_0x3215('0x5d')+_0x8ebf12);}return console['log'](_0x8ebf12),this[a0_0x3215('0x3a')][_0x8ebf12][a0_0x3215('0x64')]!=_0x3287d9&&(console['log'](a0_0x3215('0x37')),console[a0_0x3215('0x52')](a0_0x3215('0x30')+this['nodeId']),console['log'](a0_0x3215('0x3e')+_0x8ebf12+',\x20'+_0x54e7b),console[a0_0x3215('0x52')](a0_0x3215('0x14')+this['buffer'][_0x8ebf12]['stampm']+'\x20-\x20'+_0x3287d9),console[a0_0x3215('0x52')](a0_0x3215('0x41'))),this[a0_0x3215('0x4d')]=_0x8ebf12,!![];}[a0_0x3215('0x56')](){let _0x44df0a=!![];this[a0_0x3215('0x34')]=0x0;for(let _0x1614a9 in this[a0_0x3215('0x32')]['attributes']){let _0x3ad7ed=this[a0_0x3215('0x32')][a0_0x3215('0x2a')][_0x1614a9][a0_0x3215('0x28')];if(_0x3ad7ed<this['maxNegativeOffset'])this['maxNegativeOffset']=_0x3ad7ed;if(!this['offsetExists'](_0x3ad7ed))_0x44df0a=![];}return _0x44df0a;}[a0_0x3215('0x29')](_0x1167d2){let _0x4befd1=this[a0_0x3215('0x4d')]+_0x1167d2,_0x1afec7=this['buffer'][a0_0x3215('0x2d')]-0x1;if(_0x4befd1<0x0)return console[a0_0x3215('0x52')](a0_0x3215('0x61')+this[a0_0x3215('0x20')]+a0_0x3215('0xc')+_0x4befd1+')'),![];else{if(_0x4befd1>_0x1afec7)return console['log']('offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20'+this[a0_0x3215('0x20')]+this[a0_0x3215('0x20')]+'\x20-\x20('+_0x4befd1+'/'+_0x1afec7+')'),![];}return!![];}[a0_0x3215('0x1d')](){let _0x243845=this[a0_0x3215('0x4d')]+this['maxNegativeOffset']-0x5;console[a0_0x3215('0x52')](a0_0x3215('0x42')+this[a0_0x3215('0x20')]+',\x20'+this['parent'][a0_0x3215('0x3f')]+a0_0x3215('0x18')+_0x243845+a0_0x3215('0x7')+this[a0_0x3215('0x3a')]['length']);for(let _0x5ef073=0x1;_0x5ef073<_0x243845;_0x5ef073++)this[a0_0x3215('0x3a')][a0_0x3215('0xf')]();}[a0_0x3215('0xb')](_0x39f3e9){for(let _0x51793c in _0x39f3e9){let _0x5d6a15=_0x39f3e9[_0x51793c],_0x1334dd=_0x5d6a15[a0_0x3215('0x23')],_0xf0f8f=_0x5d6a15['tick'],_0x4bf7a2=this[a0_0x3215('0x10')][a0_0x3215('0x5')]({'type':'timeSeriesTick','timestamp':a0_0x3215('0x2c'),'value':_0x1334dd}),_0x418374=_0x1334dd+'|tick';this['aggregate'][_0x418374]=_0x4bf7a2;for(let _0x55860a in _0xf0f8f){let _0x30c1bc=_0xf0f8f[_0x55860a],_0xbd22bd=_0x30c1bc[a0_0x3215('0xe')];if(_0xbd22bd=='ema'){let _0x263ffe=_0x30c1bc[a0_0x3215('0x36')],_0x29a540=_0x30c1bc[a0_0x3215('0x46')],_0x43385d=this[a0_0x3215('0x10')][a0_0x3215('0x5')]({'type':a0_0x3215('0x1c'),'inAggr':this[a0_0x3215('0x1e')][_0x418374],'emaType':a0_0x3215('0x62'),'interval':_0x263ffe,'initWindow':_0x29a540}),_0xbf4d53=_0x1334dd+a0_0x3215('0x2b')+_0x263ffe;this['aggregate'][_0xbf4d53]=_0x43385d;}else{if(_0xbd22bd==a0_0x3215('0x2f')){let _0x127063=_0x30c1bc[a0_0x3215('0x26')],_0x299f6a=this[a0_0x3215('0x10')][a0_0x3215('0x5')]({'type':a0_0x3215('0x1a'),'inAggr':this[a0_0x3215('0x1e')][_0x418374],'winsize':_0x127063}),_0x11d289=_0x1334dd+a0_0x3215('0x4a')+_0x127063;this[a0_0x3215('0x1e')][_0x11d289]=_0x299f6a;let _0x25d2b2=_0x30c1bc[a0_0x3215('0x11')];for(var _0x5194c0 in _0x25d2b2){let _0x110b97=_0x25d2b2[_0x5194c0],_0x35601a=_0x110b97[a0_0x3215('0xe')];if(_0x35601a=='variance'){let _0x13904c=this[a0_0x3215('0x10')][a0_0x3215('0x5')]({'type':'variance','inAggr':this[a0_0x3215('0x1e')][_0x11d289]}),_0x5a4457=_0x1334dd+a0_0x3215('0x5a')+_0x127063;this[a0_0x3215('0x1e')][_0x5a4457]=_0x13904c;}else{if(_0x35601a=='ma'){let _0x2bd02b=this[a0_0x3215('0x10')][a0_0x3215('0x5')]({'type':'ma','inAggr':this[a0_0x3215('0x1e')][_0x11d289]}),_0x41cb1f=_0x1334dd+a0_0x3215('0x47')+_0x127063;this[a0_0x3215('0x1e')][_0x41cb1f]=_0x2bd02b;}else{if(_0x35601a==a0_0x3215('0x5f')){let _0x4ceacf=this[a0_0x3215('0x10')][a0_0x3215('0x5')]({'type':'winBufMin','inAggr':this[a0_0x3215('0x1e')][_0x11d289]}),_0x66adfb=_0x1334dd+a0_0x3215('0x1')+_0x127063;this[a0_0x3215('0x1e')][_0x66adfb]=_0x4ceacf;}else{if(_0x35601a=='max'){let _0x49be3d=this[a0_0x3215('0x10')][a0_0x3215('0x5')]({'type':a0_0x3215('0x51'),'inAggr':this[a0_0x3215('0x1e')][_0x11d289]}),_0x26d6fe=_0x1334dd+a0_0x3215('0x3c')+_0x127063;this[a0_0x3215('0x1e')][_0x26d6fe]=_0x49be3d;}}}}}}}}}}[a0_0x3215('0x53')](){var _0x232fe1={};for(let _0x6349b4 in this[a0_0x3215('0x1e')]){!(_0x6349b4['indexOf'](a0_0x3215('0x60'))>0x0||_0x6349b4['indexOf'](a0_0x3215('0x2f'))>0x0)&&(_0x232fe1[_0x6349b4]=this[a0_0x3215('0x1e')][_0x6349b4][a0_0x3215('0x33')](),_0x232fe1[a0_0x3215('0x64')]=this[a0_0x3215('0x1e')][_0x6349b4]['getTimestamp']());;};return _0x232fe1;}[a0_0x3215('0x55')](){let _0xf1bccf=[];for(let _0x1d8c1b in this[a0_0x3215('0x32')][a0_0x3215('0x2a')]){let _0x3cd1a0=this[a0_0x3215('0x4d')],_0x17e4b4=this[a0_0x3215('0x3a')][_0x3cd1a0]['stampm'],_0x574581=this['config'][a0_0x3215('0x2a')][_0x1d8c1b]['attributes'],_0x1d2e8d=this[a0_0x3215('0x32')][a0_0x3215('0x2a')][_0x1d8c1b][a0_0x3215('0x28')];_0x3cd1a0=_0x3cd1a0+_0x1d2e8d;let _0x396455=_0x17e4b4+_0x1d2e8d*this[a0_0x3215('0x3b')],_0x166cca=this[a0_0x3215('0x3a')][_0x3cd1a0][a0_0x3215('0x64')];if(_0x396455!=_0x166cca){while(_0x166cca-_0x396455<0x0){_0x3cd1a0++,_0x166cca=this[a0_0x3215('0x3a')][_0x3cd1a0][a0_0x3215('0x64')];}if(_0x166cca!=_0x396455)_0x3cd1a0--;}for(let _0x19ff2b in _0x574581){let _0x9a9e26=_0x574581[_0x19ff2b][a0_0x3215('0xe')],_0x125ff1=_0x574581[_0x19ff2b][a0_0x3215('0x0')];if(_0x9a9e26=='value'){let _0x2a8dbb=this[a0_0x3215('0x3a')][_0x3cd1a0][_0x125ff1];_0xf1bccf[a0_0x3215('0x65')](_0x2a8dbb);}else{if(_0x9a9e26=='timeDiff'){let _0x181a36=_0x3cd1a0-_0x574581[_0x19ff2b][a0_0x3215('0x36')],_0x2cd2fa=this[a0_0x3215('0x3a')][_0x181a36][_0x125ff1]-this[a0_0x3215('0x3a')][_0x3cd1a0][_0x125ff1];_0xf1bccf[a0_0x3215('0x65')](_0x2cd2fa);}}}}return _0xf1bccf;}}module['exports']=streamingNode;