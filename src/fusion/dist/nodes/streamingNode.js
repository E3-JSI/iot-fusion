const a0_0x471c=['parse','connection','nodeid','getOffsetTimestamp','winbuf','\x20/\x20','shift','partition','Consumer','parent','getTimestamp','Time','|tick','Message\x20receieved.','fusionTick','time','postConstructor','initWindow','addStreamAggr','maxNum','\x20-\x20(','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','fusion_id','timeSeriesWinBufVector','test','sub','zookeeper','position','variance','\x0a\x0a\x0a','\x20-\x20','|variance|','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','setSlaveIndex:\x20there\x20is\x20no\x20data\x20-\x20','connectToKafka','error','rawstore','winBufMin','client','config','broker','|ma|','checkDataAvailability','value','processRecordCb','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','previous','Offset','../common/brokers/brokers.js','type','offset','Rows\x20to\x20delete\x20(','winsize','length','PROBLEM:\x20No\x20connection\x20(OK\x20for\x20tests)!','setMasterOffset','setOffset','\x0aDifference\x20(buffer\x20-\x20zero):\x20','kafka','connectionConfig','floor','\x0aNode:\x20','master','log','tick','timeDiff','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','maxNegativeOffset','offsetExists','interval','processRecord','buffer','exports','topic','ema','aggregate','setSlaveOffset:\x20zeroIndex\x20is\x20not\x20a\x20whole\x20number\x20-\x20','stringify','bind','\x0aZero\x20index,\x20last\x20offset:\x20','timeSeriesTick','|max|','Diff\x20ticks:','constructor','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','addListener','|min|','indexOf','|ema|','field','setSlaveOffset','isMaster','ERROR','attributes','consumer','getAggregates','deleteObsoleteRows','offsetOutOfRange','):\x20','push','stampm','nodeId','Client'];(function(_0x280216,_0x471c31){const _0x1d40cf=function(_0x53df82){while(--_0x53df82){_0x280216['push'](_0x280216['shift']());}},_0x142acb=function(){const _0x36ac77={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2b684a,_0x2ac4ad,_0x10ba40,_0xf3a103){_0xf3a103=_0xf3a103||{};let _0x5e1c21=_0x2ac4ad+'='+_0x10ba40,_0x5aa9b4=0x0;for(let _0x58f5f5=0x0,_0x32d388=_0x2b684a['length'];_0x58f5f5<_0x32d388;_0x58f5f5++){const _0x1e9844=_0x2b684a[_0x58f5f5];_0x5e1c21+=';\x20'+_0x1e9844;const _0x860baa=_0x2b684a[_0x1e9844];_0x2b684a['push'](_0x860baa),_0x32d388=_0x2b684a['length'],_0x860baa!==!![]&&(_0x5e1c21+='='+_0x860baa);}_0xf3a103['cookie']=_0x5e1c21;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5bcf99,_0x4e9d34){_0x5bcf99=_0x5bcf99||function(_0x47ef98){return _0x47ef98;};const _0x4ca971=_0x5bcf99(new RegExp('(?:^|;\x20)'+_0x4e9d34['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xf45d8b=function(_0x4341e5,_0x4244cd){_0x4341e5(++_0x4244cd);};return _0xf45d8b(_0x1d40cf,_0x471c31),_0x4ca971?decodeURIComponent(_0x4ca971[0x1]):undefined;}},_0x1d6fbb=function(){const _0x477155=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x477155['test'](_0x36ac77['removeCookie']['toString']());};_0x36ac77['updateCookie']=_0x1d6fbb;let _0xcc42f0='';const _0xba8d88=_0x36ac77['updateCookie']();if(!_0xba8d88)_0x36ac77['setCookie'](['*'],'counter',0x1);else _0xba8d88?_0xcc42f0=_0x36ac77['getCookie'](null,'counter'):_0x36ac77['removeCookie']();};_0x142acb();}(a0_0x471c,0x10c));const a0_0x1d40=function(_0x280216,_0x471c31){_0x280216=_0x280216-0x0;let _0x1d40cf=a0_0x471c[_0x280216];return _0x1d40cf;};const a0_0x10ba40=function(){let _0x2a2fe5=!![];return function(_0x2fddbb,_0x5cf80c){const _0x346a5c=_0x2a2fe5?function(){if(_0x5cf80c){const _0x1799a0=_0x5cf80c['apply'](_0x2fddbb,arguments);return _0x5cf80c=null,_0x1799a0;}}:function(){};return _0x2a2fe5=![],_0x346a5c;};}(),a0_0x2ac4ad=a0_0x10ba40(this,function(){const _0x189764=function(){const _0x34b6de=_0x189764['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a0_0x1d40('0x15')](a0_0x1d40('0x3e'));return!_0x34b6de[a0_0x1d40('0x41')](a0_0x2ac4ad);};return _0x189764();});a0_0x2ac4ad();const {KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x1d40('0x59'));class streamingNode{constructor(_0x32c29c,_0x1aecb0,_0x5b86b6,_0xac6fe2,_0xa34fdd,_0x516183,_0x5dd109){this['base']=_0x32c29c,this['aggregate']={},this[a0_0x1d40('0x0')]=_0x5b86b6['master'],this[a0_0x1d40('0x50')]=JSON[a0_0x1d40('0x29')](JSON[a0_0x1d40('0xf')](_0x5b86b6)),this[a0_0x1d40('0x64')]=JSON[a0_0x1d40('0x29')](JSON[a0_0x1d40('0xf')](_0x1aecb0)),this[a0_0x1d40('0xb')]='measurements_node_'+this[a0_0x1d40('0x50')][a0_0x1d40('0x2b')],this['fusionNodeI']=_0x516183,this[a0_0x1d40('0x55')]=_0xa34fdd,this[a0_0x1d40('0x32')]=_0x5dd109,this[a0_0x1d40('0x37')]=_0x5b86b6[a0_0x1d40('0x37')],this['nodeId']=_0x5b86b6[a0_0x1d40('0x2b')],this['buffer']=[],this[a0_0x1d40('0x44')]=0x0;}[a0_0x1d40('0x39')](){let _0x55acf1=this;if(this[a0_0x1d40('0x32')]!=null){if(this[a0_0x1d40('0x32')]['config']['connection'][a0_0x1d40('0x5a')]==a0_0x1d40('0x63'))this[a0_0x1d40('0x51')]=new KafkaNodeBroker(this[a0_0x1d40('0x64')],this['topic'],a0_0x1d40('0x4f')+this[a0_0x1d40('0x32')]['fusion_id']+this['nodeId']),this[a0_0x1d40('0x51')][a0_0x1d40('0x17')](_0x55acf1[a0_0x1d40('0x8')][a0_0x1d40('0x10')](_0x55acf1));else this[a0_0x1d40('0x32')][a0_0x1d40('0x50')][a0_0x1d40('0x2a')]['type']=='mqtt'?(this[a0_0x1d40('0x51')]=new MQTTBroker(this[a0_0x1d40('0x64')],this['topic'],'client'+this[a0_0x1d40('0x32')][a0_0x1d40('0x3f')]+this['nodeId']),this[a0_0x1d40('0x51')][a0_0x1d40('0x17')](_0x55acf1[a0_0x1d40('0x8')][a0_0x1d40('0x10')](_0x55acf1))):console[a0_0x1d40('0x1')](a0_0x1d40('0x5f'));}else console[a0_0x1d40('0x1')]('PROBLEM:\x20No\x20parent\x20defined.\x20No\x20connection\x20(OK\x20for\x20tests).');}[a0_0x1d40('0x1d')](){return this['master'];}[a0_0x1d40('0x4b')](){console[a0_0x1d40('0x1')]('Connecting\x20to\x20Kafka:\x20'+this[a0_0x1d40('0xb')]),this[a0_0x1d40('0x31')]=kafka[a0_0x1d40('0x31')],this[a0_0x1d40('0x4f')]=new kafka[(a0_0x1d40('0x28'))](this['connectionConfig'][a0_0x1d40('0x43')],this['id']),this['offset']=new kafka[(a0_0x1d40('0x58'))](this[a0_0x1d40('0x4f')]);let _0x54197a=this;this[a0_0x1d40('0x20')]=new this[(a0_0x1d40('0x31'))](this[a0_0x1d40('0x4f')],[{'topic':this[a0_0x1d40('0xb')],'partition':0x0}],{'groupId':this['id']}),this['consumer']['on']('message',function(_0x5a2642){try{console['log'](a0_0x1d40('0x36'));let _0x5a56c9=JSON[a0_0x1d40('0x29')](_0x5a2642[a0_0x1d40('0x54')]);_0x54197a[a0_0x1d40('0x8')](_0x5a56c9);}catch(_0x3e4629){console[a0_0x1d40('0x1')](a0_0x1d40('0x1e'),_0x3e4629);}}),this[a0_0x1d40('0x20')]['on']('error',function(_0x220a71){console[a0_0x1d40('0x1')]('Error',_0x220a71);}),this[a0_0x1d40('0x20')]['on'](a0_0x1d40('0x23'),function(_0x4a0e39){console[a0_0x1d40('0x1')](_0x54197a['id'],'outOfRange',_0x4a0e39),_0x4a0e39[a0_0x1d40('0x3c')]=0x2,_0x54197a[a0_0x1d40('0x5b')]['fetch']([_0x4a0e39],function(_0x4e3735,_0x2000bf){if(_0x4e3735)return console[a0_0x1d40('0x4c')](_0x4e3735);var _0x4ccbb1=Math['min'](_0x2000bf[_0x4a0e39[a0_0x1d40('0xb')]][_0x4a0e39['partition']]);console[a0_0x1d40('0x1')](_0x54197a),_0x54197a[a0_0x1d40('0x20')][a0_0x1d40('0x61')](_0x4a0e39['topic'],_0x4a0e39[a0_0x1d40('0x30')],_0x4ccbb1);});});}['broadcastAggregates'](_0x5eef0b){}[a0_0x1d40('0x60')](){this['position']=this[a0_0x1d40('0x9')]['length']-0x1;}[a0_0x1d40('0x2c')](){return this['buffer'][this[a0_0x1d40('0x44')]][a0_0x1d40('0x26')];}[a0_0x1d40('0x1c')](_0x15f05d){if(this[a0_0x1d40('0x9')][a0_0x1d40('0x5e')]==0x0)return console[a0_0x1d40('0x1')](a0_0x1d40('0x4a')+this['nodeId']),![];let _0x4a56e9=this[a0_0x1d40('0x9')]['length']-0x1,_0x4d2b4a=this[a0_0x1d40('0x9')][_0x4a56e9][a0_0x1d40('0x26')],_0x47109e=(_0x4d2b4a-_0x15f05d)/this[a0_0x1d40('0x37')];console[a0_0x1d40('0x1')]('Fusion\x20tick',this[a0_0x1d40('0x37')],a0_0x1d40('0x14'),_0x47109e);let _0x4b408f=_0x4a56e9-_0x47109e;if(_0x4b408f<0x0)return console['log'](a0_0x1d40('0x16')+this[a0_0x1d40('0x27')]+'('+_0x4b408f+'/'+_0x4a56e9+')@'+this[a0_0x1d40('0x32')][a0_0x1d40('0x3f')]),![];else{if(_0x4b408f>_0x4a56e9)return console[a0_0x1d40('0x1')](a0_0x1d40('0x4')+this['nodeId']+'('+_0x4b408f+'/'+_0x4a56e9+')@'+this[a0_0x1d40('0x32')][a0_0x1d40('0x3f')]),![];else _0x4b408f!=Math[a0_0x1d40('0x65')](_0x4b408f)&&console[a0_0x1d40('0x1')](a0_0x1d40('0xe')+_0x4b408f);}return console[a0_0x1d40('0x1')](_0x4b408f),this[a0_0x1d40('0x9')][_0x4b408f][a0_0x1d40('0x26')]!=_0x15f05d&&(console['log']('\x0a\x0asetSlaveOffset:\x20ERROR\x20-\x20timestamps\x20DO\x20NOT\x20match!'),console[a0_0x1d40('0x1')](a0_0x1d40('0x66')+this['nodeId']),console[a0_0x1d40('0x1')](a0_0x1d40('0x11')+_0x4b408f+',\x20'+_0x4a56e9),console[a0_0x1d40('0x1')](a0_0x1d40('0x62')+this[a0_0x1d40('0x9')][_0x4b408f][a0_0x1d40('0x26')]+a0_0x1d40('0x47')+_0x15f05d),console[a0_0x1d40('0x1')](a0_0x1d40('0x46'))),this[a0_0x1d40('0x44')]=_0x4b408f,!![];}[a0_0x1d40('0x53')](){let _0x1f3f23=!![];this[a0_0x1d40('0x5')]=0x0;for(let _0x3d606b in this[a0_0x1d40('0x50')][a0_0x1d40('0x1f')]){let _0x14638e=this[a0_0x1d40('0x50')][a0_0x1d40('0x1f')][_0x3d606b][a0_0x1d40('0x38')];if(_0x14638e<this[a0_0x1d40('0x5')])this['maxNegativeOffset']=_0x14638e;if(!this[a0_0x1d40('0x6')](_0x14638e))_0x1f3f23=![];}return _0x1f3f23;}[a0_0x1d40('0x6')](_0x12526c){let _0x38dcc9=this[a0_0x1d40('0x44')]+_0x12526c,_0x5cf8cb=this[a0_0x1d40('0x9')][a0_0x1d40('0x5e')]-0x1;if(_0x38dcc9<0x0)return console[a0_0x1d40('0x1')](a0_0x1d40('0x56')+this[a0_0x1d40('0x27')]+a0_0x1d40('0x3d')+_0x38dcc9+')'),![];else{if(_0x38dcc9>_0x5cf8cb)return console[a0_0x1d40('0x1')](a0_0x1d40('0x49')+this[a0_0x1d40('0x27')]+this[a0_0x1d40('0x27')]+a0_0x1d40('0x3d')+_0x38dcc9+'/'+_0x5cf8cb+')'),![];}return!![];}[a0_0x1d40('0x22')](){let _0x127bf9=this['position']+this[a0_0x1d40('0x5')]-0x5;console[a0_0x1d40('0x1')](a0_0x1d40('0x5c')+this['nodeId']+',\x20'+this['parent'][a0_0x1d40('0x3f')]+a0_0x1d40('0x24')+_0x127bf9+a0_0x1d40('0x2e')+this[a0_0x1d40('0x9')][a0_0x1d40('0x5e')]);for(let _0x2def0f=0x1;_0x2def0f<_0x127bf9;_0x2def0f++)this['buffer'][a0_0x1d40('0x2f')]();}['createAggregates'](_0x5f30ff){for(let _0xe8b11a in _0x5f30ff){let _0x4a28ce=_0x5f30ff[_0xe8b11a],_0x5a7573=_0x4a28ce[a0_0x1d40('0x1b')],_0x6ed80f=_0x4a28ce[a0_0x1d40('0x2')],_0x2a120b=this[a0_0x1d40('0x4d')][a0_0x1d40('0x3b')]({'type':a0_0x1d40('0x12'),'timestamp':a0_0x1d40('0x34'),'value':_0x5a7573}),_0x519d13=_0x5a7573+a0_0x1d40('0x35');this[a0_0x1d40('0xd')][_0x519d13]=_0x2a120b;for(let _0x5eac95 in _0x6ed80f){let _0x1cf3a6=_0x6ed80f[_0x5eac95],_0x145066=_0x1cf3a6[a0_0x1d40('0x5a')];if(_0x145066==a0_0x1d40('0xc')){let _0x163248=_0x1cf3a6[a0_0x1d40('0x7')],_0x409bb8=_0x1cf3a6[a0_0x1d40('0x3a')],_0x135802=this[a0_0x1d40('0x4d')][a0_0x1d40('0x3b')]({'type':a0_0x1d40('0xc'),'inAggr':this[a0_0x1d40('0xd')][_0x519d13],'emaType':a0_0x1d40('0x57'),'interval':_0x163248,'initWindow':_0x409bb8}),_0x433fde=_0x5a7573+a0_0x1d40('0x1a')+_0x163248;this['aggregate'][_0x433fde]=_0x135802;}else{if(_0x145066==a0_0x1d40('0x2d')){let _0x370357=_0x1cf3a6[a0_0x1d40('0x5d')],_0x52f743=this[a0_0x1d40('0x4d')][a0_0x1d40('0x3b')]({'type':a0_0x1d40('0x40'),'inAggr':this[a0_0x1d40('0xd')][_0x519d13],'winsize':_0x370357}),_0x57a653=_0x5a7573+'|winbuf|'+_0x370357;this['aggregate'][_0x57a653]=_0x52f743;let _0x4c0dd8=_0x1cf3a6[a0_0x1d40('0x42')];for(var _0x168ed2 in _0x4c0dd8){let _0x1fe418=_0x4c0dd8[_0x168ed2],_0x2a72d0=_0x1fe418[a0_0x1d40('0x5a')];if(_0x2a72d0=='variance'){let _0x34e107=this[a0_0x1d40('0x4d')]['addStreamAggr']({'type':a0_0x1d40('0x45'),'inAggr':this[a0_0x1d40('0xd')][_0x57a653]}),_0x5be4f2=_0x5a7573+a0_0x1d40('0x48')+_0x370357;this['aggregate'][_0x5be4f2]=_0x34e107;}else{if(_0x2a72d0=='ma'){let _0x50f307=this['rawstore'][a0_0x1d40('0x3b')]({'type':'ma','inAggr':this[a0_0x1d40('0xd')][_0x57a653]}),_0x449ed6=_0x5a7573+a0_0x1d40('0x52')+_0x370357;this[a0_0x1d40('0xd')][_0x449ed6]=_0x50f307;}else{if(_0x2a72d0=='min'){let _0x4ee926=this['rawstore'][a0_0x1d40('0x3b')]({'type':a0_0x1d40('0x4e'),'inAggr':this[a0_0x1d40('0xd')][_0x57a653]}),_0xbf5cb7=_0x5a7573+a0_0x1d40('0x18')+_0x370357;this[a0_0x1d40('0xd')][_0xbf5cb7]=_0x4ee926;}else{if(_0x2a72d0=='max'){let _0x3c64a=this[a0_0x1d40('0x4d')][a0_0x1d40('0x3b')]({'type':'winBufMax','inAggr':this[a0_0x1d40('0xd')][_0x57a653]}),_0xee6f4d=_0x5a7573+a0_0x1d40('0x13')+_0x370357;this[a0_0x1d40('0xd')][_0xee6f4d]=_0x3c64a;}}}}}}}}}}[a0_0x1d40('0x21')](){var _0x2142b9={};for(let _0x30198e in this['aggregate']){!(_0x30198e[a0_0x1d40('0x19')](a0_0x1d40('0x2'))>0x0||_0x30198e[a0_0x1d40('0x19')]('winbuf')>0x0)&&(_0x2142b9[_0x30198e]=this[a0_0x1d40('0xd')][_0x30198e]['getFloat'](),_0x2142b9[a0_0x1d40('0x26')]=this[a0_0x1d40('0xd')][_0x30198e][a0_0x1d40('0x33')]());;};return _0x2142b9;}['getPartialFeatureVector'](){let _0x3e8ba0=[];for(let _0x49e843 in this[a0_0x1d40('0x50')][a0_0x1d40('0x1f')]){let _0x147e3e=this['position'],_0x580d03=this[a0_0x1d40('0x9')][_0x147e3e][a0_0x1d40('0x26')],_0x2f1478=this[a0_0x1d40('0x50')][a0_0x1d40('0x1f')][_0x49e843][a0_0x1d40('0x1f')],_0x3bb244=this['config'][a0_0x1d40('0x1f')][_0x49e843][a0_0x1d40('0x38')];_0x147e3e=_0x147e3e+_0x3bb244;let _0x272920=_0x580d03+_0x3bb244*this[a0_0x1d40('0x37')],_0x30811a=this[a0_0x1d40('0x9')][_0x147e3e]['stampm'];if(_0x272920!=_0x30811a){while(_0x30811a-_0x272920<0x0){_0x147e3e++,_0x30811a=this['buffer'][_0x147e3e][a0_0x1d40('0x26')];}if(_0x30811a!=_0x272920)_0x147e3e--;}for(let _0x19c33e in _0x2f1478){let _0x24f172=_0x2f1478[_0x19c33e][a0_0x1d40('0x5a')],_0x74c49a=_0x2f1478[_0x19c33e]['name'];if(_0x24f172=='value'){let _0x3091b6=this[a0_0x1d40('0x9')][_0x147e3e][_0x74c49a];_0x3e8ba0[a0_0x1d40('0x25')](_0x3091b6);}else{if(_0x24f172==a0_0x1d40('0x3')){let _0x5655d1=_0x147e3e-_0x2f1478[_0x19c33e][a0_0x1d40('0x7')],_0x26ca1e=this[a0_0x1d40('0x9')][_0x5655d1][_0x74c49a]-this[a0_0x1d40('0x9')][_0x147e3e][_0x74c49a];_0x3e8ba0['push'](_0x26ca1e);}}}}return _0x3e8ba0;}}module[a0_0x1d40('0xa')]=streamingNode;