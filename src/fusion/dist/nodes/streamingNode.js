const a0_0x3d72=['Connecting\x20to\x20Kafka:\x20','field','setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20','|ma|','fusionTick','nodeid','parse','fusionNodeI','aggregate','client','name','length','timeSeriesTick','Error','topic','|winbuf|','\x0aZero\x20index,\x20last\x20offset:\x20','isMaster','outOfRange','fusion_id','type','parent','tick','):\x20','\x20-\x20','push','variance','value','offsetOutOfRange','offset','setOffset','indexOf','setSlaveOffset','\x0aDifference\x20(buffer\x20-\x20zero):\x20','sub','getAggregates','processRecordCb','maxNegativeOffset','log','config','apply','partition','initWindow','getOffsetTimestamp','offsetExists','createAggregates','rawstore','\x20-\x20(','|max|','winbuf','getFloat','floor','setSlaveOffset:\x20zeroIndex\x20is\x20not\x20a\x20whole\x20number\x20-\x20','|ema|','master','PROBLEM:\x20No\x20parent\x20defined.\x20No\x20connection\x20(OK\x20for\x20tests).','shift','constructor','getTimestamp','buffer','postConstructor','stringify','Fusion\x20tick','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','checkDataAvailability','nodeId','processRecord','Consumer','|tick','stampm','addStreamAggr','timeSeriesWinBufVector','max','error','broker','\x20/\x20','\x0a\x0a\x0a','setMasterOffset','PROBLEM:\x20No\x20connection\x20(OK\x20for\x20tests)!','position','ema','winsize','Time','getPartialFeatureVector','attributes','time','../common/brokers/brokers.js','previous','bind','\x0aNode:\x20','min','connectionConfig','consumer','mqtt','addListener','offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20','Diff\x20ticks:','broadcastAggregates','Rows\x20to\x20delete\x20(','kafka','|min|','connection','interval'];(function(_0x4d0f5a,_0x3d7298){const _0x3a709c=function(_0xc21264){while(--_0xc21264){_0x4d0f5a['push'](_0x4d0f5a['shift']());}},_0x42e933=function(){const _0x1a9f85={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x319c74,_0x20556c,_0x4fa87e,_0x3bf930){_0x3bf930=_0x3bf930||{};let _0x1d5556=_0x20556c+'='+_0x4fa87e,_0x24010b=0x0;for(let _0x4c56fc=0x0,_0x4c5c02=_0x319c74['length'];_0x4c56fc<_0x4c5c02;_0x4c56fc++){const _0x2f59ca=_0x319c74[_0x4c56fc];_0x1d5556+=';\x20'+_0x2f59ca;const _0x4ac24a=_0x319c74[_0x2f59ca];_0x319c74['push'](_0x4ac24a),_0x4c5c02=_0x319c74['length'],_0x4ac24a!==!![]&&(_0x1d5556+='='+_0x4ac24a);}_0x3bf930['cookie']=_0x1d5556;},'removeCookie':function(){return'dev';},'getCookie':function(_0x411b48,_0x502e54){_0x411b48=_0x411b48||function(_0x45ed70){return _0x45ed70;};const _0x22262e=_0x411b48(new RegExp('(?:^|;\x20)'+_0x502e54['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4857b7=function(_0x24e442,_0x366983){_0x24e442(++_0x366983);};return _0x4857b7(_0x3a709c,_0x3d7298),_0x22262e?decodeURIComponent(_0x22262e[0x1]):undefined;}},_0x1c509a=function(){const _0x44f800=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x44f800['test'](_0x1a9f85['removeCookie']['toString']());};_0x1a9f85['updateCookie']=_0x1c509a;let _0x326d05='';const _0x3b625f=_0x1a9f85['updateCookie']();if(!_0x3b625f)_0x1a9f85['setCookie'](['*'],'counter',0x1);else _0x3b625f?_0x326d05=_0x1a9f85['getCookie'](null,'counter'):_0x1a9f85['removeCookie']();};_0x42e933();}(a0_0x3d72,0x1a8));const a0_0x3a70=function(_0x4d0f5a,_0x3d7298){_0x4d0f5a=_0x4d0f5a-0x0;let _0x3a709c=a0_0x3d72[_0x4d0f5a];return _0x3a709c;};const a0_0x4fa87e=function(){let _0x38c40b=!![];return function(_0x4747a8,_0x29a456){const _0x10d894=_0x38c40b?function(){if(_0x29a456){const _0x550f9d=_0x29a456[a0_0x3a70('0x1c')](_0x4747a8,arguments);return _0x29a456=null,_0x550f9d;}}:function(){};return _0x38c40b=![],_0x10d894;};}(),a0_0x20556c=a0_0x4fa87e(this,function(){const _0x749a35=function(){const _0x259190=_0x749a35[a0_0x3a70('0x2d')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](a0_0x3a70('0x33'));return!_0x259190['test'](a0_0x20556c);};return _0x749a35();});a0_0x20556c();const {KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x3a70('0x4a'));class streamingNode{constructor(_0x26766e,_0x9f1162,_0x4b047e,_0x3ec7c5,_0x5b892c,_0x59a011,_0x52a243){this['base']=_0x26766e,this[a0_0x3a70('0x63')]={},this['master']=_0x4b047e[a0_0x3a70('0x2a')],this[a0_0x3a70('0x1b')]=JSON[a0_0x3a70('0x61')](JSON[a0_0x3a70('0x31')](_0x4b047e)),this[a0_0x3a70('0x4f')]=JSON[a0_0x3a70('0x61')](JSON['stringify'](_0x9f1162)),this[a0_0x3a70('0x2')]='measurements_node_'+this[a0_0x3a70('0x1b')][a0_0x3a70('0x60')],this[a0_0x3a70('0x62')]=_0x59a011,this[a0_0x3a70('0x18')]=_0x5b892c,this[a0_0x3a70('0x9')]=_0x52a243,this[a0_0x3a70('0x5f')]=_0x4b047e['fusionTick'],this[a0_0x3a70('0x35')]=_0x4b047e[a0_0x3a70('0x60')],this[a0_0x3a70('0x2f')]=[],this[a0_0x3a70('0x43')]=0x0;}[a0_0x3a70('0x30')](){let _0xf807a4=this;if(this[a0_0x3a70('0x9')]!=null){if(this[a0_0x3a70('0x9')][a0_0x3a70('0x1b')][a0_0x3a70('0x59')][a0_0x3a70('0x8')]==a0_0x3a70('0x57'))this[a0_0x3a70('0x3e')]=new KafkaNodeBroker(this[a0_0x3a70('0x4f')],this[a0_0x3a70('0x2')],'client'+this[a0_0x3a70('0x9')][a0_0x3a70('0x7')]+this[a0_0x3a70('0x35')]),this[a0_0x3a70('0x3e')][a0_0x3a70('0x52')](_0xf807a4['processRecord'][a0_0x3a70('0x4c')](_0xf807a4));else this[a0_0x3a70('0x9')][a0_0x3a70('0x1b')][a0_0x3a70('0x59')][a0_0x3a70('0x8')]==a0_0x3a70('0x51')?(this[a0_0x3a70('0x3e')]=new MQTTBroker(this[a0_0x3a70('0x4f')],this[a0_0x3a70('0x2')],a0_0x3a70('0x64')+this[a0_0x3a70('0x9')]['fusion_id']+this[a0_0x3a70('0x35')]),this[a0_0x3a70('0x3e')][a0_0x3a70('0x52')](_0xf807a4[a0_0x3a70('0x36')][a0_0x3a70('0x4c')](_0xf807a4))):console[a0_0x3a70('0x1a')](a0_0x3a70('0x42'));}else console[a0_0x3a70('0x1a')](a0_0x3a70('0x2b'));}[a0_0x3a70('0x5')](){return this[a0_0x3a70('0x2a')];}['connectToKafka'](){console['log'](a0_0x3a70('0x5b')+this[a0_0x3a70('0x2')]),this[a0_0x3a70('0x37')]=kafka[a0_0x3a70('0x37')],this[a0_0x3a70('0x64')]=new kafka['Client'](this['connectionConfig']['zookeeper'],this['id']),this[a0_0x3a70('0x11')]=new kafka['Offset'](this[a0_0x3a70('0x64')]);let _0x5d6bfe=this;this['consumer']=new this['Consumer'](this[a0_0x3a70('0x64')],[{'topic':this[a0_0x3a70('0x2')],'partition':0x0}],{'groupId':this['id']}),this['consumer']['on']('message',function(_0x2eb395){try{console[a0_0x3a70('0x1a')]('Message\x20receieved.');let _0x169ca1=JSON[a0_0x3a70('0x61')](_0x2eb395[a0_0x3a70('0xf')]);_0x5d6bfe[a0_0x3a70('0x36')](_0x169ca1);}catch(_0x32c93c){console[a0_0x3a70('0x1a')]('ERROR',_0x32c93c);}}),this[a0_0x3a70('0x50')]['on']('error',function(_0x38efeb){console['log'](a0_0x3a70('0x1'),_0x38efeb);}),this[a0_0x3a70('0x50')]['on'](a0_0x3a70('0x10'),function(_0x3b374c){console[a0_0x3a70('0x1a')](_0x5d6bfe['id'],a0_0x3a70('0x6'),_0x3b374c),_0x3b374c['maxNum']=0x2,_0x5d6bfe[a0_0x3a70('0x11')]['fetch']([_0x3b374c],function(_0x3341fc,_0x498646){if(_0x3341fc)return console[a0_0x3a70('0x3d')](_0x3341fc);var _0xe525bb=Math[a0_0x3a70('0x4e')](_0x498646[_0x3b374c[a0_0x3a70('0x2')]][_0x3b374c[a0_0x3a70('0x1d')]]);console[a0_0x3a70('0x1a')](_0x5d6bfe),_0x5d6bfe[a0_0x3a70('0x50')][a0_0x3a70('0x12')](_0x3b374c[a0_0x3a70('0x2')],_0x3b374c[a0_0x3a70('0x1d')],_0xe525bb);});});}[a0_0x3a70('0x55')](_0x1dc38e){}[a0_0x3a70('0x41')](){this['position']=this[a0_0x3a70('0x2f')][a0_0x3a70('0x66')]-0x1;}[a0_0x3a70('0x1f')](){return this[a0_0x3a70('0x2f')][this[a0_0x3a70('0x43')]][a0_0x3a70('0x39')];}[a0_0x3a70('0x14')](_0x2011c4){if(this['buffer']['length']==0x0)return console[a0_0x3a70('0x1a')]('setSlaveIndex:\x20there\x20is\x20no\x20data\x20-\x20'+this[a0_0x3a70('0x35')]),![];let _0xd87db8=this[a0_0x3a70('0x2f')][a0_0x3a70('0x66')]-0x1,_0xce4f76=this['buffer'][_0xd87db8][a0_0x3a70('0x39')],_0x5deec6=(_0xce4f76-_0x2011c4)/this[a0_0x3a70('0x5f')];console[a0_0x3a70('0x1a')](a0_0x3a70('0x32'),this[a0_0x3a70('0x5f')],a0_0x3a70('0x54'),_0x5deec6);let _0x299b77=_0xd87db8-_0x5deec6;if(_0x299b77<0x0)return console[a0_0x3a70('0x1a')]('setSlaveOffset:\x20index\x20does\x20not\x20exist\x20(too\x20small)\x20-\x20'+this[a0_0x3a70('0x35')]+'('+_0x299b77+'/'+_0xd87db8+')@'+this[a0_0x3a70('0x9')][a0_0x3a70('0x7')]),![];else{if(_0x299b77>_0xd87db8)return console[a0_0x3a70('0x1a')](a0_0x3a70('0x5d')+this[a0_0x3a70('0x35')]+'('+_0x299b77+'/'+_0xd87db8+')@'+this[a0_0x3a70('0x9')][a0_0x3a70('0x7')]),![];else _0x299b77!=Math[a0_0x3a70('0x27')](_0x299b77)&&console[a0_0x3a70('0x1a')](a0_0x3a70('0x28')+_0x299b77);}return console[a0_0x3a70('0x1a')](_0x299b77),this[a0_0x3a70('0x2f')][_0x299b77][a0_0x3a70('0x39')]!=_0x2011c4&&(console[a0_0x3a70('0x1a')]('\x0a\x0asetSlaveOffset:\x20ERROR\x20-\x20timestamps\x20DO\x20NOT\x20match!'),console[a0_0x3a70('0x1a')](a0_0x3a70('0x4d')+this[a0_0x3a70('0x35')]),console['log'](a0_0x3a70('0x4')+_0x299b77+',\x20'+_0xd87db8),console['log'](a0_0x3a70('0x15')+this[a0_0x3a70('0x2f')][_0x299b77][a0_0x3a70('0x39')]+a0_0x3a70('0xc')+_0x2011c4),console[a0_0x3a70('0x1a')](a0_0x3a70('0x40'))),this[a0_0x3a70('0x43')]=_0x299b77,!![];}[a0_0x3a70('0x34')](){let _0x3002c5=!![];this[a0_0x3a70('0x19')]=0x0;for(let _0x26bf6f in this[a0_0x3a70('0x1b')][a0_0x3a70('0x48')]){let _0x44f7a4=this[a0_0x3a70('0x1b')][a0_0x3a70('0x48')][_0x26bf6f][a0_0x3a70('0x49')];if(_0x44f7a4<this[a0_0x3a70('0x19')])this[a0_0x3a70('0x19')]=_0x44f7a4;if(!this[a0_0x3a70('0x20')](_0x44f7a4))_0x3002c5=![];}return _0x3002c5;}[a0_0x3a70('0x20')](_0x10af7b){let _0x1d7a4c=this[a0_0x3a70('0x43')]+_0x10af7b,_0x33e8b5=this[a0_0x3a70('0x2f')]['length']-0x1;if(_0x1d7a4c<0x0)return console[a0_0x3a70('0x1a')](a0_0x3a70('0x53')+this[a0_0x3a70('0x35')]+a0_0x3a70('0x23')+_0x1d7a4c+')'),![];else{if(_0x1d7a4c>_0x33e8b5)return console[a0_0x3a70('0x1a')]('offsetExists:\x20index\x20does\x20not\x20exist\x20(too\x20big)\x20-\x20'+this[a0_0x3a70('0x35')]+this[a0_0x3a70('0x35')]+a0_0x3a70('0x23')+_0x1d7a4c+'/'+_0x33e8b5+')'),![];}return!![];}['deleteObsoleteRows'](){let _0x8b57f8=this[a0_0x3a70('0x43')]+this[a0_0x3a70('0x19')]-0x5;console[a0_0x3a70('0x1a')](a0_0x3a70('0x56')+this['nodeId']+',\x20'+this[a0_0x3a70('0x9')]['fusion_id']+a0_0x3a70('0xb')+_0x8b57f8+a0_0x3a70('0x3f')+this[a0_0x3a70('0x2f')][a0_0x3a70('0x66')]);for(let _0x2978bf=0x1;_0x2978bf<_0x8b57f8;_0x2978bf++)this[a0_0x3a70('0x2f')][a0_0x3a70('0x2c')]();}[a0_0x3a70('0x21')](_0x4aac75){for(let _0x42f22b in _0x4aac75){let _0xd4ebb6=_0x4aac75[_0x42f22b],_0x27c741=_0xd4ebb6[a0_0x3a70('0x5c')],_0x2cd8a9=_0xd4ebb6[a0_0x3a70('0xa')],_0x3591ed=this[a0_0x3a70('0x22')][a0_0x3a70('0x3a')]({'type':a0_0x3a70('0x0'),'timestamp':a0_0x3a70('0x46'),'value':_0x27c741}),_0x359f2b=_0x27c741+a0_0x3a70('0x38');this[a0_0x3a70('0x63')][_0x359f2b]=_0x3591ed;for(let _0x135049 in _0x2cd8a9){let _0x3c6ceb=_0x2cd8a9[_0x135049],_0x1a02c7=_0x3c6ceb['type'];if(_0x1a02c7==a0_0x3a70('0x44')){let _0x1672ff=_0x3c6ceb[a0_0x3a70('0x5a')],_0x12e3b0=_0x3c6ceb[a0_0x3a70('0x1e')],_0x2a11ff=this[a0_0x3a70('0x22')][a0_0x3a70('0x3a')]({'type':a0_0x3a70('0x44'),'inAggr':this[a0_0x3a70('0x63')][_0x359f2b],'emaType':a0_0x3a70('0x4b'),'interval':_0x1672ff,'initWindow':_0x12e3b0}),_0x2e87ef=_0x27c741+a0_0x3a70('0x29')+_0x1672ff;this['aggregate'][_0x2e87ef]=_0x2a11ff;}else{if(_0x1a02c7==a0_0x3a70('0x25')){let _0x1b004=_0x3c6ceb[a0_0x3a70('0x45')],_0x683c8e=this[a0_0x3a70('0x22')][a0_0x3a70('0x3a')]({'type':a0_0x3a70('0x3b'),'inAggr':this[a0_0x3a70('0x63')][_0x359f2b],'winsize':_0x1b004}),_0x456905=_0x27c741+a0_0x3a70('0x3')+_0x1b004;this[a0_0x3a70('0x63')][_0x456905]=_0x683c8e;let _0xa38e12=_0x3c6ceb[a0_0x3a70('0x16')];for(var _0x1b61ed in _0xa38e12){let _0x20a157=_0xa38e12[_0x1b61ed],_0x2bba9e=_0x20a157['type'];if(_0x2bba9e==a0_0x3a70('0xe')){let _0x1de042=this[a0_0x3a70('0x22')]['addStreamAggr']({'type':'variance','inAggr':this[a0_0x3a70('0x63')][_0x456905]}),_0x54aa22=_0x27c741+'|variance|'+_0x1b004;this[a0_0x3a70('0x63')][_0x54aa22]=_0x1de042;}else{if(_0x2bba9e=='ma'){let _0x5525b5=this['rawstore'][a0_0x3a70('0x3a')]({'type':'ma','inAggr':this[a0_0x3a70('0x63')][_0x456905]}),_0x457fca=_0x27c741+a0_0x3a70('0x5e')+_0x1b004;this['aggregate'][_0x457fca]=_0x5525b5;}else{if(_0x2bba9e==a0_0x3a70('0x4e')){let _0x421cc3=this['rawstore']['addStreamAggr']({'type':'winBufMin','inAggr':this['aggregate'][_0x456905]}),_0x2474d1=_0x27c741+a0_0x3a70('0x58')+_0x1b004;this['aggregate'][_0x2474d1]=_0x421cc3;}else{if(_0x2bba9e==a0_0x3a70('0x3c')){let _0x2a842e=this[a0_0x3a70('0x22')]['addStreamAggr']({'type':'winBufMax','inAggr':this[a0_0x3a70('0x63')][_0x456905]}),_0x27fe76=_0x27c741+a0_0x3a70('0x24')+_0x1b004;this['aggregate'][_0x27fe76]=_0x2a842e;}}}}}}}}}}[a0_0x3a70('0x17')](){var _0x16fc3d={};for(let _0x327883 in this[a0_0x3a70('0x63')]){!(_0x327883[a0_0x3a70('0x13')](a0_0x3a70('0xa'))>0x0||_0x327883[a0_0x3a70('0x13')](a0_0x3a70('0x25'))>0x0)&&(_0x16fc3d[_0x327883]=this[a0_0x3a70('0x63')][_0x327883][a0_0x3a70('0x26')](),_0x16fc3d[a0_0x3a70('0x39')]=this[a0_0x3a70('0x63')][_0x327883][a0_0x3a70('0x2e')]());;};return _0x16fc3d;}[a0_0x3a70('0x47')](){let _0x4769fa=[];for(let _0xc03fd5 in this[a0_0x3a70('0x1b')][a0_0x3a70('0x48')]){let _0x3ab6c7=this[a0_0x3a70('0x43')],_0x34816d=this[a0_0x3a70('0x2f')][_0x3ab6c7][a0_0x3a70('0x39')],_0x56864b=this[a0_0x3a70('0x1b')]['attributes'][_0xc03fd5][a0_0x3a70('0x48')],_0x1d4e83=this[a0_0x3a70('0x1b')][a0_0x3a70('0x48')][_0xc03fd5][a0_0x3a70('0x49')];_0x3ab6c7=_0x3ab6c7+_0x1d4e83;let _0x4b1bd5=_0x34816d+_0x1d4e83*this[a0_0x3a70('0x5f')],_0x9a50ff=this['buffer'][_0x3ab6c7][a0_0x3a70('0x39')];if(_0x4b1bd5!=_0x9a50ff){while(_0x9a50ff-_0x4b1bd5<0x0){_0x3ab6c7++,_0x9a50ff=this[a0_0x3a70('0x2f')][_0x3ab6c7][a0_0x3a70('0x39')];}if(_0x9a50ff!=_0x4b1bd5)_0x3ab6c7--;}for(let _0x3107fa in _0x56864b){let _0xa5cf60=_0x56864b[_0x3107fa]['type'],_0x1264cd=_0x56864b[_0x3107fa][a0_0x3a70('0x65')];if(_0xa5cf60=='value'){let _0x569271=this[a0_0x3a70('0x2f')][_0x3ab6c7][_0x1264cd];_0x4769fa[a0_0x3a70('0xd')](_0x569271);}else{if(_0xa5cf60=='timeDiff'){let _0x1b9852=_0x3ab6c7-_0x56864b[_0x3107fa][a0_0x3a70('0x5a')],_0x5767c4=this[a0_0x3a70('0x2f')][_0x1b9852][_0x1264cd]-this[a0_0x3a70('0x2f')][_0x3ab6c7][_0x1264cd];_0x4769fa[a0_0x3a70('0xd')](_0x5767c4);}}}}return _0x4769fa;}}module['exports']=streamingNode;