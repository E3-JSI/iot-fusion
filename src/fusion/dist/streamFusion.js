const a0_0x1b61=['trafficcounter','masterNodeId','return\x20/\x22\x20+\x20this\x20+\x20\x22/','log','./nodes/streamingTrainNode.js','calculated','checkDataAvailability','exports','train','./nodes/streamingTrafficCounterNode.js','broadcastFeatureVector','uknown','./nodes/streamingStaticNode.js','./nodes/streamingAirQualityNode.js','timevalue','connectionConfig','concat','substation','addPublisher','Created\x20','push','./data/','smartlamp','getOffsetTimestamp','stringify','masterSatisfied','options','lastFeatureVector','method','./common/brokers/brokers.js','master','save','Base','broadcastPrediction','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','nodes','publish','./nodes/streamingEnergyNode.js','./db/','buildFeatureVector','base','./db','processRecordHook','config','attributes','fusion_id','value','length','ERROR:\x20Streaming\x20node\x20type\x20not\x20found!','broker','apply','dbPath','streamModel','./nodes/streamingNode.js','fusionTick','lastTimestamp','buffer','mkdirSync','parse','\x20nodes.','type','predictions_','allNodesAvailable','constructor','./models/IncrementalLearning.js','connection','topic','appendFileSync','name','energy','model','Can\x20not\x20be\x20generated!','kafka','mqtt','static','cleanupData','updateStream','isMaster','existsSync'];(function(_0x2c6fe0,_0x1b6197){const _0x5a6ce4=function(_0x594882){while(--_0x594882){_0x2c6fe0['push'](_0x2c6fe0['shift']());}},_0x159739=function(){const _0x2ec400={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x23c55b,_0x557f6f,_0x4a60e9,_0x5a76a9){_0x5a76a9=_0x5a76a9||{};let _0xce9223=_0x557f6f+'='+_0x4a60e9,_0x499f49=0x0;for(let _0x24d47a=0x0,_0x17ed30=_0x23c55b['length'];_0x24d47a<_0x17ed30;_0x24d47a++){const _0xc91ed3=_0x23c55b[_0x24d47a];_0xce9223+=';\x20'+_0xc91ed3;const _0x5aadf6=_0x23c55b[_0xc91ed3];_0x23c55b['push'](_0x5aadf6),_0x17ed30=_0x23c55b['length'],_0x5aadf6!==!![]&&(_0xce9223+='='+_0x5aadf6);}_0x5a76a9['cookie']=_0xce9223;},'removeCookie':function(){return'dev';},'getCookie':function(_0x577ad3,_0x46a51c){_0x577ad3=_0x577ad3||function(_0x22e761){return _0x22e761;};const _0x3c5852=_0x577ad3(new RegExp('(?:^|;\x20)'+_0x46a51c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5ae4d0=function(_0x5a7c24,_0x5c38ea){_0x5a7c24(++_0x5c38ea);};return _0x5ae4d0(_0x5a6ce4,_0x1b6197),_0x3c5852?decodeURIComponent(_0x3c5852[0x1]):undefined;}},_0xe4ee6=function(){const _0x1dd0d2=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1dd0d2['test'](_0x2ec400['removeCookie']['toString']());};_0x2ec400['updateCookie']=_0xe4ee6;let _0x2f2bf2='';const _0x179473=_0x2ec400['updateCookie']();if(!_0x179473)_0x2ec400['setCookie'](['*'],'counter',0x1);else _0x179473?_0x2f2bf2=_0x2ec400['getCookie'](null,'counter'):_0x2ec400['removeCookie']();};_0x159739();}(a0_0x1b61,0x11e));const a0_0x5a6c=function(_0x2c6fe0,_0x1b6197){_0x2c6fe0=_0x2c6fe0-0x0;let _0x5a6ce4=a0_0x1b61[_0x2c6fe0];return _0x5a6ce4;};const a0_0x4a60e9=function(){let _0x3f367d=!![];return function(_0x276c17,_0x3d896e){const _0x3f39b6=_0x3f367d?function(){if(_0x3d896e){const _0x4d47da=_0x3d896e[a0_0x5a6c('0x1')](_0x276c17,arguments);return _0x3d896e=null,_0x4d47da;}}:function(){};return _0x3f367d=![],_0x3f39b6;};}(),a0_0x557f6f=a0_0x4a60e9(this,function(){const _0x174a1a=function(){const _0x386c1e=_0x174a1a['constructor'](a0_0x5a6c('0x20'))()[a0_0x5a6c('0xe')](a0_0x5a6c('0x40'));return!_0x386c1e['test'](a0_0x557f6f);};return _0x174a1a();});a0_0x557f6f();const qm=require('qminer'),fs=require('fs'),streamingNode=require(a0_0x5a6c('0x4')),streamingEnergyNode=require(a0_0x5a6c('0x43')),streamingSubstationNode=require('./nodes/streamingSubstationNode.js'),streamingTrainNode=require(a0_0x5a6c('0x22')),streamingTimeValueNode=require('./nodes/streamingTimeValueNode.js'),streamingSmartLampNode=require('./nodes/streamingSmartLampNode.js'),streamingTrafficCounterNode=require(a0_0x5a6c('0x27')),streamingAirQualityNode=require(a0_0x5a6c('0x2b')),streamingWeatherNode=require('./nodes/streamingWeatherNode.js'),streamingStaticNode=require(a0_0x5a6c('0x2a')),staticCalculatedNode=require('./nodes/staticCalculatedNode.js'),IncrementalLearning=require(a0_0x5a6c('0xf')),{AbstractBroker,KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x5a6c('0x3b'));class streamFusion{constructor(_0x3ea857,_0x843828,_0x51f4dd){let _0x325524=this;this[a0_0x5a6c('0x49')]=JSON['parse'](JSON['stringify'](_0x843828)),this[a0_0x5a6c('0x2d')]=JSON[a0_0x5a6c('0x9')](JSON['stringify'](_0x3ea857)),this[a0_0x5a6c('0x41')]=[],this[a0_0x5a6c('0x1f')]=-0x1,this[a0_0x5a6c('0x37')]=!![],this[a0_0x5a6c('0x6')]=0x0,this[a0_0x5a6c('0x39')]=[],this[a0_0x5a6c('0xd')]=![],this[a0_0x5a6c('0x4b')]=_0x843828['fusionModel'],this[a0_0x5a6c('0x11')]='features_'+this[a0_0x5a6c('0x4b')],this['fusionTick']=_0x843828[a0_0x5a6c('0x5')],this['dbPath']=a0_0x5a6c('0x44')+this[a0_0x5a6c('0x4b')];!fs['existsSync'](a0_0x5a6c('0x47'))&&fs[a0_0x5a6c('0x8')](a0_0x5a6c('0x47'));!fs[a0_0x5a6c('0x1d')](this[a0_0x5a6c('0x2')])&&fs[a0_0x5a6c('0x8')](this[a0_0x5a6c('0x2')]);this[a0_0x5a6c('0x46')]=new qm[(a0_0x5a6c('0x3e'))]({'dbPath':this[a0_0x5a6c('0x2')],'mode':'createClean'});for(let _0x144398 in _0x843828[a0_0x5a6c('0x41')]){let _0x3846a4=_0x843828[a0_0x5a6c('0x41')][_0x144398];_0x3846a4[a0_0x5a6c('0x5')]=this[a0_0x5a6c('0x5')];if(_0x3846a4[a0_0x5a6c('0x3c')]==!![])this[a0_0x5a6c('0x1f')]=_0x144398;if(_0x3846a4[a0_0x5a6c('0xb')]=='airquality')this[a0_0x5a6c('0x41')][a0_0x5a6c('0x32')](new streamingAirQualityNode(this[a0_0x5a6c('0x46')],this['connectionConfig'],_0x3846a4,_0x51f4dd,_0x325524[a0_0x5a6c('0x48')],_0x144398,_0x325524));else{if(_0x3846a4[a0_0x5a6c('0xb')]==a0_0x5a6c('0x1e'))this[a0_0x5a6c('0x41')][a0_0x5a6c('0x32')](new streamingTrafficCounterNode(this['base'],this[a0_0x5a6c('0x2d')],_0x3846a4,_0x51f4dd,_0x325524[a0_0x5a6c('0x48')],_0x144398,_0x325524));else{if(_0x3846a4[a0_0x5a6c('0xb')]==a0_0x5a6c('0x34'))this[a0_0x5a6c('0x41')]['push'](new streamingSmartLampNode(this['base'],this[a0_0x5a6c('0x2d')],_0x3846a4,_0x51f4dd,_0x325524['processRecordHook'],_0x144398,_0x325524));else{if(_0x3846a4[a0_0x5a6c('0xb')]==a0_0x5a6c('0x2c'))this[a0_0x5a6c('0x41')][a0_0x5a6c('0x32')](new streamingTimeValueNode(this[a0_0x5a6c('0x46')],this[a0_0x5a6c('0x2d')],_0x3846a4,_0x51f4dd,_0x325524[a0_0x5a6c('0x48')],_0x144398,_0x325524));else{if(_0x3846a4['type']==a0_0x5a6c('0x2f'))this[a0_0x5a6c('0x41')][a0_0x5a6c('0x32')](new streamingSubstationNode(this[a0_0x5a6c('0x46')],this[a0_0x5a6c('0x2d')],_0x3846a4,_0x51f4dd,_0x325524[a0_0x5a6c('0x48')],_0x144398,_0x325524));else{if(_0x3846a4[a0_0x5a6c('0xb')]==a0_0x5a6c('0x14'))this[a0_0x5a6c('0x41')]['push'](new streamingEnergyNode(this[a0_0x5a6c('0x46')],this[a0_0x5a6c('0x2d')],_0x3846a4,_0x51f4dd,_0x325524['processRecordHook'],_0x144398,_0x325524));else{if(_0x3846a4[a0_0x5a6c('0xb')]==a0_0x5a6c('0x26'))this[a0_0x5a6c('0x41')][a0_0x5a6c('0x32')](new streamingTrainNode(this[a0_0x5a6c('0x46')],this['connectionConfig'],_0x3846a4,_0x51f4dd,_0x325524[a0_0x5a6c('0x48')],_0x144398,_0x325524));else{if(_0x3846a4['type']==a0_0x5a6c('0x19'))this['nodes']['push'](new streamingStaticNode(this[a0_0x5a6c('0x46')],this[a0_0x5a6c('0x2d')],_0x3846a4,_0x51f4dd,_0x325524[a0_0x5a6c('0x48')],_0x144398,_0x325524));else{if(_0x3846a4['type']==a0_0x5a6c('0x23'))this['nodes'][a0_0x5a6c('0x32')](new staticCalculatedNode(this[a0_0x5a6c('0x46')],this[a0_0x5a6c('0x2d')],_0x3846a4,_0x51f4dd,_0x325524[a0_0x5a6c('0x48')],_0x144398,_0x325524));else _0x3846a4[a0_0x5a6c('0xb')]=='weather'?this[a0_0x5a6c('0x41')]['push'](new streamingWeatherNode(this[a0_0x5a6c('0x46')],this[a0_0x5a6c('0x2d')],_0x3846a4,_0x51f4dd,_0x325524[a0_0x5a6c('0x48')],_0x144398,_0x325524)):console[a0_0x5a6c('0x21')](a0_0x5a6c('0x4e'));}}}}}}}}}console[a0_0x5a6c('0x21')](a0_0x5a6c('0x31')+this[a0_0x5a6c('0x41')][a0_0x5a6c('0x4d')]+a0_0x5a6c('0xa'));a0_0x5a6c('0x15')in _0x843828&&(this['streamModel']=new IncrementalLearning(_0x843828,_0x325524),this['topic']=a0_0x5a6c('0xc')+this[a0_0x5a6c('0x4b')],_0x843828[a0_0x5a6c('0x15')][a0_0x5a6c('0x11')]!==undefined&&(this[a0_0x5a6c('0x11')]=_0x843828[a0_0x5a6c('0x15')][a0_0x5a6c('0x11')]));if(a0_0x5a6c('0x10')in _0x843828){if(_0x843828[a0_0x5a6c('0x10')][a0_0x5a6c('0xb')]==a0_0x5a6c('0x17'))this[a0_0x5a6c('0x0')]=new KafkaNodeBroker(this[a0_0x5a6c('0x2d')],this[a0_0x5a6c('0x11')],this[a0_0x5a6c('0x4b')]),this[a0_0x5a6c('0x0')][a0_0x5a6c('0x30')]();else _0x843828[a0_0x5a6c('0x10')][a0_0x5a6c('0xb')]==a0_0x5a6c('0x18')?(this[a0_0x5a6c('0x0')]=new MQTTBroker(this[a0_0x5a6c('0x2d')],this['topic'],this[a0_0x5a6c('0x4b')]),this[a0_0x5a6c('0x0')][a0_0x5a6c('0x30')]()):this[a0_0x5a6c('0x0')]=new AbstractBroker(this[a0_0x5a6c('0x2d')],this[a0_0x5a6c('0x11')],this['fusion_id']);}}['processRecordHook'](_0x30942f,_0x23adf6){if(!_0x23adf6['allNodesAvailable']){for(let _0x534672 in _0x23adf6['nodes']){if(_0x23adf6[a0_0x5a6c('0x41')][_0x534672][a0_0x5a6c('0x7')]['length']==0x0)return null;}_0x23adf6[a0_0x5a6c('0xd')]=!![];}_0x23adf6['nodes'][_0x23adf6[a0_0x5a6c('0x1f')]][a0_0x5a6c('0x7')][a0_0x5a6c('0x4d')]>0x0&&_0x23adf6['masterSatisfied']==![]&&(_0x30942f=_0x23adf6['masterNodeId']);;if(_0x23adf6['nodes'][_0x30942f][a0_0x5a6c('0x1c')]()==!![]){_0x23adf6[a0_0x5a6c('0x41')][_0x30942f]['setMasterOffset']();let _0x24ce7f=_0x23adf6[a0_0x5a6c('0x41')][_0x30942f][a0_0x5a6c('0x35')](),_0x3d40ba=!![];for(let _0x7012b6 in _0x23adf6[a0_0x5a6c('0x41')]){_0x7012b6!=_0x30942f&&(_0x23adf6['nodes'][_0x7012b6]['setSlaveOffset'](_0x24ce7f)?!_0x23adf6[a0_0x5a6c('0x41')][_0x7012b6][a0_0x5a6c('0x24')]()&&(_0x3d40ba=![]):_0x3d40ba=![]);}if(_0x3d40ba&&_0x23adf6[a0_0x5a6c('0x6')]!=_0x24ce7f){_0x23adf6[a0_0x5a6c('0x37')]=!![];let _0x46b4e3=_0x23adf6['buildFeatureVector']();if(a0_0x5a6c('0x15')in _0x23adf6[a0_0x5a6c('0x49')]){let _0x2011b6;if(_0x46b4e3[a0_0x5a6c('0x4d')]!=0x0){_0x2011b6=_0x23adf6[a0_0x5a6c('0x3')][a0_0x5a6c('0x1b')](_0x46b4e3,_0x24ce7f);const _0x5dac98=_0x23adf6[a0_0x5a6c('0x49')][a0_0x5a6c('0x41')][0x0]['attributes'][0x0][a0_0x5a6c('0x4a')][0x0][a0_0x5a6c('0x13')]!==undefined?_0x23adf6[a0_0x5a6c('0x49')][a0_0x5a6c('0x41')][0x0]['attributes'][0x0][a0_0x5a6c('0x4a')][0x0][a0_0x5a6c('0x13')]:a0_0x5a6c('0x29'),_0x3aeb21=_0x23adf6[a0_0x5a6c('0x49')]['model'][a0_0x5a6c('0x38')][a0_0x5a6c('0x3a')]!==undefined?_0x23adf6['config']['model']['options']['method']:'unknown';_0x23adf6['broadcastPrediction'](_0x2011b6['ts'],_0x2011b6[a0_0x5a6c('0x4c')],_0x2011b6['horizon'],_0x5dac98,_0x3aeb21);}}else _0x23adf6[a0_0x5a6c('0x28')](_0x24ce7f,_0x46b4e3);_0x23adf6[a0_0x5a6c('0x6')]=_0x24ce7f,_0x23adf6[a0_0x5a6c('0x39')]=_0x46b4e3,_0x23adf6['cleanupData']();}else console['log']('Data\x20not\x20available.'),_0x23adf6[a0_0x5a6c('0x37')]=![];}else{if(!_0x23adf6[a0_0x5a6c('0x37')]){}}}[a0_0x5a6c('0x45')](){let _0x4538d6=[];for(let _0x39bde2 in this[a0_0x5a6c('0x41')]){let _0x28fa4a=this[a0_0x5a6c('0x41')][_0x39bde2]['checkDataAvailability']();if(_0x28fa4a==![])return console[a0_0x5a6c('0x21')](a0_0x5a6c('0x16')),[];let _0x56c2ca=this[a0_0x5a6c('0x41')][_0x39bde2]['getPartialFeatureVector']();_0x4538d6=_0x4538d6[a0_0x5a6c('0x2e')](_0x56c2ca);}return _0x4538d6;}[a0_0x5a6c('0x28')](_0x2cbb5e,_0x19b55c){let _0x5d6040=JSON[a0_0x5a6c('0x36')]({'timestamp':_0x2cbb5e,'ftr_vector':_0x19b55c});if(_0x19b55c!=[])fs[a0_0x5a6c('0x12')](a0_0x5a6c('0x33')+this[a0_0x5a6c('0x4b')]+'.json',_0x5d6040+'\x0a');this[a0_0x5a6c('0x0')][a0_0x5a6c('0x42')](_0x5d6040);}[a0_0x5a6c('0x3f')](_0x5b35aa,_0x1536f6,_0x4fb81d,_0x28aa67,_0x50b3c3){let _0x51c577=JSON[a0_0x5a6c('0x36')]({'stampm':_0x5b35aa,'value':_0x1536f6,'sensor_id':_0x28aa67,'method':_0x50b3c3,'horizon':_0x4fb81d});this[a0_0x5a6c('0x0')][a0_0x5a6c('0x42')](_0x51c577);}[a0_0x5a6c('0x1a')](){for(let _0x23c064 in this[a0_0x5a6c('0x41')]){this['nodes'][_0x23c064]['deleteObsoleteRows']();}}[a0_0x5a6c('0x3d')](){}}module[a0_0x5a6c('0x25')]=streamFusion;