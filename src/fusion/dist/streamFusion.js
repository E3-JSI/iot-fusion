const a0_0x581d=['master','broadcastFeatureVector','value','dbPath','getPartialFeatureVector','substation','./common/brokers/brokers.js','constructor','appendFileSync','./nodes/streamingAirQualityNode.js','./models/IncrementalLearning.js','type','./nodes/streamingTrafficCounterNode.js','parse','./db','broadcastPrediction','processRecordHook','createClean','model','fusionTick','connectionConfig','length','topic','masterNodeId','fusionModel','exports','smartlamp','apply','log','push','cleanupData','energy','./nodes/streamingWeatherNode.js','allNodesAvailable','fusion_id','mqtt','Created\x20','./nodes/streamingSmartLampNode.js','ERROR:\x20Streaming\x20node\x20type\x20not\x20found!','getOffsetTimestamp','buffer','./nodes/streamingTrainNode.js','stringify','mkdirSync','horizon','setSlaveOffset','concat','timevalue','Base','publish','lastTimestamp','connection','lastFeatureVector','nodes','streamModel','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','save','existsSync','checkDataAvailability','qminer','deleteObsoleteRows','static','base','broker','./data/','config','buildFeatureVector','predictions_','test','./nodes/streamingTimeValueNode.js','setMasterOffset','masterSatisfied','./nodes/streamingStaticNode.js','Data\x20not\x20available.','./nodes/streamingSubstationNode.js','features_','updateStream','return\x20/\x22\x20+\x20this\x20+\x20\x22/','addPublisher','./nodes/streamingNode.js','weather'];(function(_0x502033,_0x581dfc){const _0x2e1892=function(_0x59e62d){while(--_0x59e62d){_0x502033['push'](_0x502033['shift']());}},_0x1a45e5=function(){const _0x484306={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x544748,_0x2341d1,_0x4e41f,_0x8d5457){_0x8d5457=_0x8d5457||{};let _0x577134=_0x2341d1+'='+_0x4e41f,_0xf879d3=0x0;for(let _0x263000=0x0,_0x391526=_0x544748['length'];_0x263000<_0x391526;_0x263000++){const _0x183b79=_0x544748[_0x263000];_0x577134+=';\x20'+_0x183b79;const _0xcc75f6=_0x544748[_0x183b79];_0x544748['push'](_0xcc75f6),_0x391526=_0x544748['length'],_0xcc75f6!==!![]&&(_0x577134+='='+_0xcc75f6);}_0x8d5457['cookie']=_0x577134;},'removeCookie':function(){return'dev';},'getCookie':function(_0xdf2b04,_0x3c9d7d){_0xdf2b04=_0xdf2b04||function(_0x4047a2){return _0x4047a2;};const _0x5451f1=_0xdf2b04(new RegExp('(?:^|;\x20)'+_0x3c9d7d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x94ade2=function(_0x3ca87f,_0x18d550){_0x3ca87f(++_0x18d550);};return _0x94ade2(_0x2e1892,_0x581dfc),_0x5451f1?decodeURIComponent(_0x5451f1[0x1]):undefined;}},_0x1272db=function(){const _0x38a1dd=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x38a1dd['test'](_0x484306['removeCookie']['toString']());};_0x484306['updateCookie']=_0x1272db;let _0x561fe6='';const _0x338d91=_0x484306['updateCookie']();if(!_0x338d91)_0x484306['setCookie'](['*'],'counter',0x1);else _0x338d91?_0x561fe6=_0x484306['getCookie'](null,'counter'):_0x484306['removeCookie']();};_0x1a45e5();}(a0_0x581d,0x1b4));const a0_0x2e18=function(_0x502033,_0x581dfc){_0x502033=_0x502033-0x0;let _0x2e1892=a0_0x581d[_0x502033];return _0x2e1892;};const a0_0x4e41f=function(){let _0x1deae2=!![];return function(_0x4cc377,_0x38fb6f){const _0x4b9309=_0x1deae2?function(){if(_0x38fb6f){const _0x8bf22f=_0x38fb6f[a0_0x2e18('0x4d')](_0x4cc377,arguments);return _0x38fb6f=null,_0x8bf22f;}}:function(){};return _0x1deae2=![],_0x4b9309;};}(),a0_0x2341d1=a0_0x4e41f(this,function(){const _0x5a737c=function(){const _0x465dcf=_0x5a737c[a0_0x2e18('0x39')](a0_0x2e18('0x2e'))()[a0_0x2e18('0x39')](a0_0x2e18('0x18'));return!_0x465dcf[a0_0x2e18('0x25')](a0_0x2341d1);};return _0x5a737c();});a0_0x2341d1();const qm=require(a0_0x2e18('0x1c')),fs=require('fs'),streamingNode=require(a0_0x2e18('0x30')),streamingEnergyNode=require('./nodes/streamingEnergyNode.js'),streamingSubstationNode=require(a0_0x2e18('0x2b')),streamingTrainNode=require(a0_0x2e18('0xa')),streamingTimeValueNode=require(a0_0x2e18('0x26')),streamingSmartLampNode=require(a0_0x2e18('0x6')),streamingTrafficCounterNode=require(a0_0x2e18('0x3e')),streamingAirQualityNode=require(a0_0x2e18('0x3b')),streamingWeatherNode=require(a0_0x2e18('0x1')),streamingStaticNode=require(a0_0x2e18('0x29')),IncrementalLearning=require(a0_0x2e18('0x3c')),{AbstractBroker,KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x2e18('0x38'));class streamFusion{constructor(_0x4779c9,_0x4922cc,_0x57b2dc){let _0x3721d0=this;this[a0_0x2e18('0x22')]=JSON[a0_0x2e18('0x3f')](JSON[a0_0x2e18('0xb')](_0x4922cc)),this[a0_0x2e18('0x46')]=JSON[a0_0x2e18('0x3f')](JSON[a0_0x2e18('0xb')](_0x4779c9)),this['nodes']=[],this[a0_0x2e18('0x49')]=-0x1,this[a0_0x2e18('0x28')]=!![],this[a0_0x2e18('0x13')]=0x0,this[a0_0x2e18('0x15')]=[],this[a0_0x2e18('0x2')]=![],this['fusion_id']=_0x4922cc[a0_0x2e18('0x4a')],this[a0_0x2e18('0x48')]=a0_0x2e18('0x2c')+this[a0_0x2e18('0x3')],this[a0_0x2e18('0x45')]=_0x4922cc[a0_0x2e18('0x45')],this[a0_0x2e18('0x35')]='./db/'+this[a0_0x2e18('0x3')];!fs[a0_0x2e18('0x1a')](a0_0x2e18('0x40'))&&fs[a0_0x2e18('0xc')](a0_0x2e18('0x40'));!fs[a0_0x2e18('0x1a')](this[a0_0x2e18('0x35')])&&fs[a0_0x2e18('0xc')](this[a0_0x2e18('0x35')]);this[a0_0x2e18('0x1f')]=new qm[(a0_0x2e18('0x11'))]({'dbPath':this['dbPath'],'mode':a0_0x2e18('0x43')});for(let _0x1b276a in _0x4922cc[a0_0x2e18('0x16')]){let _0x3e876e=_0x4922cc[a0_0x2e18('0x16')][_0x1b276a];_0x3e876e[a0_0x2e18('0x45')]=this[a0_0x2e18('0x45')];if(_0x3e876e[a0_0x2e18('0x32')]==!![])this['masterNodeId']=_0x1b276a;if(_0x3e876e[a0_0x2e18('0x3d')]=='airquality')this[a0_0x2e18('0x16')][a0_0x2e18('0x4f')](new streamingAirQualityNode(this['base'],this[a0_0x2e18('0x46')],_0x3e876e,_0x57b2dc,_0x3721d0['processRecordHook'],_0x1b276a,_0x3721d0));else{if(_0x3e876e[a0_0x2e18('0x3d')]=='trafficcounter')this['nodes'][a0_0x2e18('0x4f')](new streamingTrafficCounterNode(this[a0_0x2e18('0x1f')],this[a0_0x2e18('0x46')],_0x3e876e,_0x57b2dc,_0x3721d0[a0_0x2e18('0x42')],_0x1b276a,_0x3721d0));else{if(_0x3e876e['type']==a0_0x2e18('0x4c'))this[a0_0x2e18('0x16')][a0_0x2e18('0x4f')](new streamingSmartLampNode(this['base'],this[a0_0x2e18('0x46')],_0x3e876e,_0x57b2dc,_0x3721d0['processRecordHook'],_0x1b276a,_0x3721d0));else{if(_0x3e876e['type']==a0_0x2e18('0x10'))this['nodes']['push'](new streamingTimeValueNode(this[a0_0x2e18('0x1f')],this[a0_0x2e18('0x46')],_0x3e876e,_0x57b2dc,_0x3721d0[a0_0x2e18('0x42')],_0x1b276a,_0x3721d0));else{if(_0x3e876e[a0_0x2e18('0x3d')]==a0_0x2e18('0x37'))this[a0_0x2e18('0x16')][a0_0x2e18('0x4f')](new streamingSubstationNode(this['base'],this[a0_0x2e18('0x46')],_0x3e876e,_0x57b2dc,_0x3721d0[a0_0x2e18('0x42')],_0x1b276a,_0x3721d0));else{if(_0x3e876e[a0_0x2e18('0x3d')]==a0_0x2e18('0x0'))this[a0_0x2e18('0x16')]['push'](new streamingEnergyNode(this[a0_0x2e18('0x1f')],this[a0_0x2e18('0x46')],_0x3e876e,_0x57b2dc,_0x3721d0[a0_0x2e18('0x42')],_0x1b276a,_0x3721d0));else{if(_0x3e876e[a0_0x2e18('0x3d')]=='train')this['nodes']['push'](new streamingTrainNode(this[a0_0x2e18('0x1f')],this[a0_0x2e18('0x46')],_0x3e876e,_0x57b2dc,_0x3721d0['processRecordHook'],_0x1b276a,_0x3721d0));else{if(_0x3e876e[a0_0x2e18('0x3d')]==a0_0x2e18('0x1e'))this['nodes']['push'](new streamingStaticNode(this[a0_0x2e18('0x1f')],this[a0_0x2e18('0x46')],_0x3e876e,_0x57b2dc,_0x3721d0['processRecordHook'],_0x1b276a,_0x3721d0));else _0x3e876e[a0_0x2e18('0x3d')]==a0_0x2e18('0x31')?this[a0_0x2e18('0x16')][a0_0x2e18('0x4f')](new streamingWeatherNode(this[a0_0x2e18('0x1f')],this['connectionConfig'],_0x3e876e,_0x57b2dc,_0x3721d0[a0_0x2e18('0x42')],_0x1b276a,_0x3721d0)):console[a0_0x2e18('0x4e')](a0_0x2e18('0x7'));}}}}}}}}console['log'](a0_0x2e18('0x5')+this[a0_0x2e18('0x16')][a0_0x2e18('0x47')]+'\x20nodes.');a0_0x2e18('0x44')in _0x4922cc&&(this[a0_0x2e18('0x17')]=new IncrementalLearning(_0x4922cc,_0x3721d0),this[a0_0x2e18('0x48')]=a0_0x2e18('0x24')+this['fusion_id']);if('connection'in _0x4922cc){if(_0x4922cc[a0_0x2e18('0x14')][a0_0x2e18('0x3d')]=='kafka')this['broker']=new KafkaNodeBroker(this['connectionConfig'],this[a0_0x2e18('0x48')],this[a0_0x2e18('0x3')]),this[a0_0x2e18('0x20')]['addPublisher']();else _0x4922cc[a0_0x2e18('0x14')][a0_0x2e18('0x3d')]==a0_0x2e18('0x4')?(this['broker']=new MQTTBroker(this[a0_0x2e18('0x46')],this[a0_0x2e18('0x48')],this[a0_0x2e18('0x3')]),this[a0_0x2e18('0x20')][a0_0x2e18('0x2f')]()):this[a0_0x2e18('0x20')]=new AbstractBroker(this[a0_0x2e18('0x46')],this['topic'],this['fusion_id']);}}['processRecordHook'](_0x2be751,_0x404792){if(!_0x404792['allNodesAvailable']){for(let _0xdd5dc1 in _0x404792[a0_0x2e18('0x16')]){if(_0x404792[a0_0x2e18('0x16')][_0xdd5dc1][a0_0x2e18('0x9')][a0_0x2e18('0x47')]==0x0)return null;}_0x404792[a0_0x2e18('0x2')]=!![];}_0x404792[a0_0x2e18('0x16')][_0x404792[a0_0x2e18('0x49')]][a0_0x2e18('0x9')][a0_0x2e18('0x47')]>0x0&&_0x404792[a0_0x2e18('0x28')]==![]&&(_0x2be751=_0x404792[a0_0x2e18('0x49')]);;if(_0x404792[a0_0x2e18('0x16')][_0x2be751]['isMaster']()==!![]){_0x404792[a0_0x2e18('0x16')][_0x2be751][a0_0x2e18('0x27')]();let _0x21a23c=_0x404792['nodes'][_0x2be751][a0_0x2e18('0x8')](),_0x496315=!![];for(let _0x54ec94 in _0x404792['nodes']){_0x54ec94!=_0x2be751&&(_0x404792['nodes'][_0x54ec94][a0_0x2e18('0xe')](_0x21a23c)?!_0x404792[a0_0x2e18('0x16')][_0x54ec94]['checkDataAvailability']()&&(_0x496315=![]):_0x496315=![]);}if(_0x496315&&_0x404792[a0_0x2e18('0x13')]!=_0x21a23c){_0x404792[a0_0x2e18('0x28')]=!![];let _0x27c39c=_0x404792[a0_0x2e18('0x23')]();if('model'in _0x404792[a0_0x2e18('0x22')]){let _0x3c0236;_0x27c39c[a0_0x2e18('0x47')]!=0x0&&(_0x3c0236=_0x404792['streamModel'][a0_0x2e18('0x2d')](_0x27c39c,_0x21a23c),_0x404792[a0_0x2e18('0x41')](_0x3c0236['ts'],_0x3c0236[a0_0x2e18('0x34')],_0x3c0236[a0_0x2e18('0xd')]));}else _0x404792[a0_0x2e18('0x33')](_0x21a23c,_0x27c39c);_0x404792[a0_0x2e18('0x13')]=_0x21a23c,_0x404792[a0_0x2e18('0x15')]=_0x27c39c,_0x404792['cleanupData']();}else console['log'](a0_0x2e18('0x2a')),_0x404792[a0_0x2e18('0x28')]=![];}else{if(!_0x404792[a0_0x2e18('0x28')]){}}}[a0_0x2e18('0x23')](){let _0x4e7db4=[];for(let _0x23bdaf in this['nodes']){let _0xcd5340=this[a0_0x2e18('0x16')][_0x23bdaf][a0_0x2e18('0x1b')]();if(_0xcd5340==![])return console[a0_0x2e18('0x4e')]('Can\x20not\x20be\x20generated!'),[];let _0x235178=this['nodes'][_0x23bdaf][a0_0x2e18('0x36')]();_0x4e7db4=_0x4e7db4[a0_0x2e18('0xf')](_0x235178);}return _0x4e7db4;}[a0_0x2e18('0x33')](_0x22a076,_0xb255b4){let _0x24eaab=JSON[a0_0x2e18('0xb')]({'timestamp':_0x22a076,'ftr_vector':_0xb255b4});if(_0xb255b4!=[])fs[a0_0x2e18('0x3a')](a0_0x2e18('0x21')+this['fusion_id']+'.json',_0x24eaab+'\x0a');this[a0_0x2e18('0x20')][a0_0x2e18('0x12')](_0x24eaab);}[a0_0x2e18('0x41')](_0x4ae47f,_0x14fd3e,_0x1a7695){let _0x2f827c=JSON[a0_0x2e18('0xb')]({'stampm':_0x4ae47f,'value':_0x14fd3e,'horizon':_0x1a7695});this['broker'][a0_0x2e18('0x12')](_0x2f827c);}[a0_0x2e18('0x50')](){for(let _0x4a5c54 in this['nodes']){this[a0_0x2e18('0x16')][_0x4a5c54][a0_0x2e18('0x1d')]();}}[a0_0x2e18('0x19')](){}}module[a0_0x2e18('0x4b')]=streamFusion;