const a0_0x5fb6=['./nodes/streamingTrainNode.js','masterSatisfied','kafka','appendFileSync','./nodes/streamingSmartLampNode.js','Data\x20not\x20available.','./nodes/streamingNode.js','./models/IncrementalLearning.js','./nodes/streamingTrafficCounterNode.js','type','checkDataAvailability','cleanupData','mkdirSync','./nodes/streamingAirQualityNode.js','deleteObsoleteRows','features_','processRecordHook','./db','substation','concat','fusion_id','connection','length','stringify','./nodes/streamingWeatherNode.js','constructor','weather','publish','allNodesAvailable','test','./nodes/streamingTimeValueNode.js','broadcastFeatureVector','connectionConfig','smartlamp','broker','./nodes/streamingEnergyNode.js','./db/','timevalue','./nodes/streamingStaticNode.js','./nodes/streamingSubstationNode.js','exports','save','setMasterOffset','lastFeatureVector','value','topic','config','\x20nodes.','buildFeatureVector','Can\x20not\x20be\x20generated!','buffer','existsSync','apply','fusionTick','ERROR:\x20Streaming\x20node\x20type\x20not\x20found!','dbPath','masterNodeId','.json','getPartialFeatureVector','Base','static','master','energy','base','trafficcounter','log','addPublisher','broadcastPrediction','streamModel','push','lastTimestamp','nodes','updateStream','predictions_','model','isMaster'];(function(_0x1ab66a,_0x5fb679){const _0x9a1055=function(_0x38da9e){while(--_0x38da9e){_0x1ab66a['push'](_0x1ab66a['shift']());}},_0x2000f4=function(){const _0x3161d6={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x36eda8,_0xe25479,_0x13c404,_0x9e216c){_0x9e216c=_0x9e216c||{};let _0x20b811=_0xe25479+'='+_0x13c404,_0x1d8d3b=0x0;for(let _0x549e2e=0x0,_0xf65bf2=_0x36eda8['length'];_0x549e2e<_0xf65bf2;_0x549e2e++){const _0x584c77=_0x36eda8[_0x549e2e];_0x20b811+=';\x20'+_0x584c77;const _0x1162a1=_0x36eda8[_0x584c77];_0x36eda8['push'](_0x1162a1),_0xf65bf2=_0x36eda8['length'],_0x1162a1!==!![]&&(_0x20b811+='='+_0x1162a1);}_0x9e216c['cookie']=_0x20b811;},'removeCookie':function(){return'dev';},'getCookie':function(_0x49b0ac,_0x267880){_0x49b0ac=_0x49b0ac||function(_0x1085cb){return _0x1085cb;};const _0xab3bab=_0x49b0ac(new RegExp('(?:^|;\x20)'+_0x267880['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1d742b=function(_0x8f10f1,_0x29eb3e){_0x8f10f1(++_0x29eb3e);};return _0x1d742b(_0x9a1055,_0x5fb679),_0xab3bab?decodeURIComponent(_0xab3bab[0x1]):undefined;}},_0x35561b=function(){const _0x12bc07=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x12bc07['test'](_0x3161d6['removeCookie']['toString']());};_0x3161d6['updateCookie']=_0x35561b;let _0x202cec='';const _0x1ee346=_0x3161d6['updateCookie']();if(!_0x1ee346)_0x3161d6['setCookie'](['*'],'counter',0x1);else _0x1ee346?_0x202cec=_0x3161d6['getCookie'](null,'counter'):_0x3161d6['removeCookie']();};_0x2000f4();}(a0_0x5fb6,0xd4));const a0_0x9a10=function(_0x1ab66a,_0x5fb679){_0x1ab66a=_0x1ab66a-0x0;let _0x9a1055=a0_0x5fb6[_0x1ab66a];return _0x9a1055;};const a0_0x13c404=function(){let _0x5a2c78=!![];return function(_0x3e6cfb,_0x27fc04){const _0x3be628=_0x5a2c78?function(){if(_0x27fc04){const _0x575f86=_0x27fc04[a0_0x9a10('0x44')](_0x3e6cfb,arguments);return _0x27fc04=null,_0x575f86;}}:function(){};return _0x5a2c78=![],_0x3be628;};}(),a0_0xe25479=a0_0x13c404(this,function(){const _0x5d6a48=function(){const _0x1637bc=_0x5d6a48[a0_0x9a10('0x29')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a0_0x9a10('0x29')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1637bc[a0_0x9a10('0x2d')](a0_0xe25479);};return _0x5d6a48();});a0_0xe25479();const qm=require('qminer'),fs=require('fs'),streamingNode=require(a0_0x9a10('0x16')),streamingEnergyNode=require(a0_0x9a10('0x33')),streamingSubstationNode=require(a0_0x9a10('0x37')),streamingTrainNode=require(a0_0x9a10('0x10')),streamingTimeValueNode=require(a0_0x9a10('0x2e')),streamingSmartLampNode=require(a0_0x9a10('0x14')),streamingTrafficCounterNode=require(a0_0x9a10('0x18')),streamingAirQualityNode=require(a0_0x9a10('0x1d')),streamingWeatherNode=require(a0_0x9a10('0x28')),streamingStaticNode=require(a0_0x9a10('0x36')),IncrementalLearning=require(a0_0x9a10('0x17')),{AbstractBroker,KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require('./common/brokers/brokers.js');class streamFusion{constructor(_0x3c4f00,_0x6303f7,_0x445c5f){let _0x404009=this;this[a0_0x9a10('0x3e')]=JSON['parse'](JSON['stringify'](_0x6303f7)),this[a0_0x9a10('0x30')]=JSON['parse'](JSON['stringify'](_0x3c4f00)),this['nodes']=[],this[a0_0x9a10('0x48')]=-0x1,this[a0_0x9a10('0x11')]=!![],this['lastTimestamp']=0x0,this[a0_0x9a10('0x3b')]=[],this[a0_0x9a10('0x2c')]=![],this[a0_0x9a10('0x24')]=_0x6303f7['fusionModel'],this[a0_0x9a10('0x3d')]=a0_0x9a10('0x1f')+this[a0_0x9a10('0x24')],this[a0_0x9a10('0x45')]=_0x6303f7[a0_0x9a10('0x45')],this[a0_0x9a10('0x47')]=a0_0x9a10('0x34')+this[a0_0x9a10('0x24')];!fs[a0_0x9a10('0x43')](a0_0x9a10('0x21'))&&fs['mkdirSync'](a0_0x9a10('0x21'));!fs[a0_0x9a10('0x43')](this[a0_0x9a10('0x47')])&&fs[a0_0x9a10('0x1c')](this['dbPath']);this[a0_0x9a10('0x3')]=new qm[(a0_0x9a10('0x4b'))]({'dbPath':this[a0_0x9a10('0x47')],'mode':'createClean'});for(let _0x7bdbd0 in _0x6303f7['nodes']){let _0xeb2224=_0x6303f7[a0_0x9a10('0xb')][_0x7bdbd0];_0xeb2224[a0_0x9a10('0x45')]=this[a0_0x9a10('0x45')];if(_0xeb2224[a0_0x9a10('0x1')]==!![])this[a0_0x9a10('0x48')]=_0x7bdbd0;if(_0xeb2224[a0_0x9a10('0x19')]=='airquality')this[a0_0x9a10('0xb')][a0_0x9a10('0x9')](new streamingAirQualityNode(this[a0_0x9a10('0x3')],this[a0_0x9a10('0x30')],_0xeb2224,_0x445c5f,_0x404009[a0_0x9a10('0x20')],_0x7bdbd0,_0x404009));else{if(_0xeb2224['type']==a0_0x9a10('0x4'))this[a0_0x9a10('0xb')][a0_0x9a10('0x9')](new streamingTrafficCounterNode(this[a0_0x9a10('0x3')],this[a0_0x9a10('0x30')],_0xeb2224,_0x445c5f,_0x404009['processRecordHook'],_0x7bdbd0,_0x404009));else{if(_0xeb2224[a0_0x9a10('0x19')]==a0_0x9a10('0x31'))this['nodes'][a0_0x9a10('0x9')](new streamingSmartLampNode(this['base'],this[a0_0x9a10('0x30')],_0xeb2224,_0x445c5f,_0x404009['processRecordHook'],_0x7bdbd0,_0x404009));else{if(_0xeb2224['type']==a0_0x9a10('0x35'))this[a0_0x9a10('0xb')][a0_0x9a10('0x9')](new streamingTimeValueNode(this[a0_0x9a10('0x3')],this[a0_0x9a10('0x30')],_0xeb2224,_0x445c5f,_0x404009[a0_0x9a10('0x20')],_0x7bdbd0,_0x404009));else{if(_0xeb2224[a0_0x9a10('0x19')]==a0_0x9a10('0x22'))this[a0_0x9a10('0xb')][a0_0x9a10('0x9')](new streamingSubstationNode(this[a0_0x9a10('0x3')],this[a0_0x9a10('0x30')],_0xeb2224,_0x445c5f,_0x404009[a0_0x9a10('0x20')],_0x7bdbd0,_0x404009));else{if(_0xeb2224['type']==a0_0x9a10('0x2'))this[a0_0x9a10('0xb')][a0_0x9a10('0x9')](new streamingEnergyNode(this['base'],this['connectionConfig'],_0xeb2224,_0x445c5f,_0x404009[a0_0x9a10('0x20')],_0x7bdbd0,_0x404009));else{if(_0xeb2224[a0_0x9a10('0x19')]=='train')this['nodes'][a0_0x9a10('0x9')](new streamingTrainNode(this[a0_0x9a10('0x3')],this[a0_0x9a10('0x30')],_0xeb2224,_0x445c5f,_0x404009[a0_0x9a10('0x20')],_0x7bdbd0,_0x404009));else{if(_0xeb2224[a0_0x9a10('0x19')]==a0_0x9a10('0x0'))this[a0_0x9a10('0xb')][a0_0x9a10('0x9')](new streamingStaticNode(this[a0_0x9a10('0x3')],this[a0_0x9a10('0x30')],_0xeb2224,_0x445c5f,_0x404009['processRecordHook'],_0x7bdbd0,_0x404009));else _0xeb2224[a0_0x9a10('0x19')]==a0_0x9a10('0x2a')?this[a0_0x9a10('0xb')][a0_0x9a10('0x9')](new streamingWeatherNode(this[a0_0x9a10('0x3')],this[a0_0x9a10('0x30')],_0xeb2224,_0x445c5f,_0x404009[a0_0x9a10('0x20')],_0x7bdbd0,_0x404009)):console[a0_0x9a10('0x5')](a0_0x9a10('0x46'));}}}}}}}}console[a0_0x9a10('0x5')]('Created\x20'+this[a0_0x9a10('0xb')][a0_0x9a10('0x26')]+a0_0x9a10('0x3f'));a0_0x9a10('0xe')in _0x6303f7&&(this[a0_0x9a10('0x8')]=new IncrementalLearning(_0x6303f7,_0x404009),this[a0_0x9a10('0x3d')]=a0_0x9a10('0xd')+this['fusion_id']);if(a0_0x9a10('0x25')in _0x6303f7){if(_0x6303f7[a0_0x9a10('0x25')][a0_0x9a10('0x19')]==a0_0x9a10('0x12'))this[a0_0x9a10('0x32')]=new KafkaNodeBroker(this[a0_0x9a10('0x30')],this[a0_0x9a10('0x3d')],this['fusion_id']),this['broker']['addPublisher']();else _0x6303f7[a0_0x9a10('0x25')][a0_0x9a10('0x19')]=='mqtt'?(this[a0_0x9a10('0x32')]=new MQTTBroker(this[a0_0x9a10('0x30')],this['topic'],this[a0_0x9a10('0x24')]),this['broker'][a0_0x9a10('0x6')]()):this[a0_0x9a10('0x32')]=new AbstractBroker(this[a0_0x9a10('0x30')],this[a0_0x9a10('0x3d')],this['fusion_id']);}}['processRecordHook'](_0x5bfecd,_0x49ec11){if(!_0x49ec11[a0_0x9a10('0x2c')]){for(let _0x5bc50f in _0x49ec11[a0_0x9a10('0xb')]){if(_0x49ec11['nodes'][_0x5bc50f][a0_0x9a10('0x42')]['length']==0x0)return null;}_0x49ec11['allNodesAvailable']=!![];}_0x49ec11[a0_0x9a10('0xb')][_0x49ec11[a0_0x9a10('0x48')]][a0_0x9a10('0x42')][a0_0x9a10('0x26')]>0x0&&_0x49ec11['masterSatisfied']==![]&&(_0x5bfecd=_0x49ec11[a0_0x9a10('0x48')]);;if(_0x49ec11['nodes'][_0x5bfecd][a0_0x9a10('0xf')]()==!![]){_0x49ec11[a0_0x9a10('0xb')][_0x5bfecd][a0_0x9a10('0x3a')]();let _0x2667ab=_0x49ec11[a0_0x9a10('0xb')][_0x5bfecd]['getOffsetTimestamp'](),_0x334270=!![];for(let _0x1bb753 in _0x49ec11[a0_0x9a10('0xb')]){_0x1bb753!=_0x5bfecd&&(_0x49ec11[a0_0x9a10('0xb')][_0x1bb753]['setSlaveOffset'](_0x2667ab)?!_0x49ec11['nodes'][_0x1bb753]['checkDataAvailability']()&&(_0x334270=![]):_0x334270=![]);}if(_0x334270&&_0x49ec11[a0_0x9a10('0xa')]!=_0x2667ab){_0x49ec11[a0_0x9a10('0x11')]=!![];let _0x532310=_0x49ec11[a0_0x9a10('0x40')]();if(a0_0x9a10('0xe')in _0x49ec11['config']){let _0xcd99d1;_0x532310[a0_0x9a10('0x26')]!=0x0&&(_0xcd99d1=_0x49ec11[a0_0x9a10('0x8')][a0_0x9a10('0xc')](_0x532310,_0x2667ab),_0x49ec11[a0_0x9a10('0x7')](_0xcd99d1['ts'],_0xcd99d1[a0_0x9a10('0x3c')],_0xcd99d1['horizon']));}else _0x49ec11[a0_0x9a10('0x2f')](_0x2667ab,_0x532310);_0x49ec11['lastTimestamp']=_0x2667ab,_0x49ec11[a0_0x9a10('0x3b')]=_0x532310,_0x49ec11['cleanupData']();}else console[a0_0x9a10('0x5')](a0_0x9a10('0x15')),_0x49ec11[a0_0x9a10('0x11')]=![];}else{if(!_0x49ec11['masterSatisfied']){}}}[a0_0x9a10('0x40')](){let _0x33bb79=[];for(let _0x251216 in this[a0_0x9a10('0xb')]){let _0x154629=this[a0_0x9a10('0xb')][_0x251216][a0_0x9a10('0x1a')]();if(_0x154629==![])return console[a0_0x9a10('0x5')](a0_0x9a10('0x41')),[];let _0x3dcde7=this[a0_0x9a10('0xb')][_0x251216][a0_0x9a10('0x4a')]();_0x33bb79=_0x33bb79[a0_0x9a10('0x23')](_0x3dcde7);}return _0x33bb79;}[a0_0x9a10('0x2f')](_0x3da5be,_0x589dfa){let _0x205985=JSON['stringify']({'timestamp':_0x3da5be,'ftr_vector':_0x589dfa});if(_0x589dfa!=[])fs[a0_0x9a10('0x13')]('./data/'+this[a0_0x9a10('0x24')]+a0_0x9a10('0x49'),_0x205985+'\x0a');this['broker'][a0_0x9a10('0x2b')](_0x205985);}[a0_0x9a10('0x7')](_0x32ce05,_0x252d5b,_0x511d98){let _0x4e8d4b=JSON[a0_0x9a10('0x27')]({'timestamp':_0x32ce05,'value':_0x252d5b,'horizon':_0x511d98});this[a0_0x9a10('0x32')][a0_0x9a10('0x2b')](_0x4e8d4b);}[a0_0x9a10('0x1b')](){for(let _0x4408c6 in this[a0_0x9a10('0xb')]){this[a0_0x9a10('0xb')][_0x4408c6][a0_0x9a10('0x1e')]();}}[a0_0x9a10('0x39')](){}}module[a0_0x9a10('0x38')]=streamFusion;