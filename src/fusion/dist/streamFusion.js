const a0_0x13ea=['./nodes/streamingTrainNode.js','cleanupData','value','masterNodeId','fusion_id','streamModel','publish','length','lastFeatureVector','energy','predictions_','./common/brokers/brokers.js','./nodes/streamingSmartLampNode.js','features_','stringify','qminer','lastTimestamp','appendFileSync','buildFeatureVector','./nodes/streamingWeatherNode.js','Base','connectionConfig','masterSatisfied','createClean','return\x20/\x22\x20+\x20this\x20+\x20\x22/','buffer','addPublisher','existsSync','fusionModel','config','./nodes/streamingTimeValueNode.js','Created\x20','updateStream','horizon','ERROR:\x20Streaming\x20node\x20type\x20not\x20found!','deleteObsoleteRows','./nodes/streamingTrafficCounterNode.js','airquality','\x20nodes.','connection','smartlamp','./nodes/streamingStaticNode.js','nodes','processRecordHook','trafficcounter','broadcastPrediction','mkdirSync','train','base','checkDataAvailability','topic','setSlaveOffset','Data\x20not\x20available.','fusionTick','push','./nodes/streamingAirQualityNode.js','kafka','constructor','broker','allNodesAvailable','./nodes/streamingEnergyNode.js','setMasterOffset','weather','broadcastFeatureVector','dbPath','getPartialFeatureVector','./data/','log','parse','save','type','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}'];(function(_0x1bf062,_0x13ea82){const _0x561be4=function(_0x125857){while(--_0x125857){_0x1bf062['push'](_0x1bf062['shift']());}},_0x1a4cbb=function(){const _0x344825={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3b531e,_0x2e6458,_0x4952a0,_0x53a845){_0x53a845=_0x53a845||{};let _0x5c9d77=_0x2e6458+'='+_0x4952a0,_0x4a951e=0x0;for(let _0x36787d=0x0,_0x2925e7=_0x3b531e['length'];_0x36787d<_0x2925e7;_0x36787d++){const _0x1c3ccb=_0x3b531e[_0x36787d];_0x5c9d77+=';\x20'+_0x1c3ccb;const _0x57efa0=_0x3b531e[_0x1c3ccb];_0x3b531e['push'](_0x57efa0),_0x2925e7=_0x3b531e['length'],_0x57efa0!==!![]&&(_0x5c9d77+='='+_0x57efa0);}_0x53a845['cookie']=_0x5c9d77;},'removeCookie':function(){return'dev';},'getCookie':function(_0x116137,_0x4c6475){_0x116137=_0x116137||function(_0x249454){return _0x249454;};const _0x119ee8=_0x116137(new RegExp('(?:^|;\x20)'+_0x4c6475['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x525b4f=function(_0x21d687,_0x38a1b5){_0x21d687(++_0x38a1b5);};return _0x525b4f(_0x561be4,_0x13ea82),_0x119ee8?decodeURIComponent(_0x119ee8[0x1]):undefined;}},_0x3f4e5b=function(){const _0x8b0df6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x8b0df6['test'](_0x344825['removeCookie']['toString']());};_0x344825['updateCookie']=_0x3f4e5b;let _0x359330='';const _0x18ed99=_0x344825['updateCookie']();if(!_0x18ed99)_0x344825['setCookie'](['*'],'counter',0x1);else _0x18ed99?_0x359330=_0x344825['getCookie'](null,'counter'):_0x344825['removeCookie']();};_0x1a4cbb();}(a0_0x13ea,0xd9));const a0_0x561b=function(_0x1bf062,_0x13ea82){_0x1bf062=_0x1bf062-0x0;let _0x561be4=a0_0x13ea[_0x1bf062];return _0x561be4;};const a0_0x4952a0=function(){let _0x2419cd=!![];return function(_0x587b1d,_0x19a4d1){const _0x5c28e1=_0x2419cd?function(){if(_0x19a4d1){const _0x4725bc=_0x19a4d1['apply'](_0x587b1d,arguments);return _0x19a4d1=null,_0x4725bc;}}:function(){};return _0x2419cd=![],_0x5c28e1;};}(),a0_0x2e6458=a0_0x4952a0(this,function(){const _0x1015fc=function(){const _0x3287d9=_0x1015fc['constructor'](a0_0x561b('0x17'))()[a0_0x561b('0x38')](a0_0x561b('0x46'));return!_0x3287d9['test'](a0_0x2e6458);};return _0x1015fc();});a0_0x2e6458();const qm=require(a0_0x561b('0xe')),fs=require('fs'),streamingNode=require('./nodes/streamingNode.js'),streamingEnergyNode=require(a0_0x561b('0x3b')),streamingSubstationNode=require('./nodes/streamingSubstationNode.js'),streamingTrainNode=require(a0_0x561b('0x47')),streamingTimeValueNode=require(a0_0x561b('0x1d')),streamingSmartLampNode=require(a0_0x561b('0xb')),streamingTrafficCounterNode=require(a0_0x561b('0x23')),streamingAirQualityNode=require(a0_0x561b('0x36')),streamingWeatherNode=require(a0_0x561b('0x12')),streamingStaticNode=require(a0_0x561b('0x28')),IncrementalLearning=require('./models/IncrementalLearning.js'),{AbstractBroker,KafkaNodeBroker,MQTTBroker,KafkaRDBroker}=require(a0_0x561b('0xa'));class streamFusion{constructor(_0x1984d8,_0x552fbd,_0x4d2d1a){let _0x2a8089=this;this['config']=JSON[a0_0x561b('0x43')](JSON[a0_0x561b('0xd')](_0x552fbd)),this['connectionConfig']=JSON[a0_0x561b('0x43')](JSON[a0_0x561b('0xd')](_0x1984d8)),this[a0_0x561b('0x29')]=[],this[a0_0x561b('0x2')]=-0x1,this['masterSatisfied']=!![],this['lastTimestamp']=0x0,this['lastFeatureVector']=[],this[a0_0x561b('0x3a')]=![],this[a0_0x561b('0x3')]=_0x552fbd[a0_0x561b('0x1b')],this[a0_0x561b('0x31')]=a0_0x561b('0xc')+this[a0_0x561b('0x3')],this[a0_0x561b('0x34')]=_0x552fbd[a0_0x561b('0x34')],this['dbPath']='./db/'+this[a0_0x561b('0x3')];!fs[a0_0x561b('0x1a')]('./db')&&fs[a0_0x561b('0x2d')]('./db');!fs['existsSync'](this[a0_0x561b('0x3f')])&&fs[a0_0x561b('0x2d')](this['dbPath']);this[a0_0x561b('0x2f')]=new qm[(a0_0x561b('0x13'))]({'dbPath':this[a0_0x561b('0x3f')],'mode':a0_0x561b('0x16')});for(let _0x1b9302 in _0x552fbd[a0_0x561b('0x29')]){let _0xfe1085=_0x552fbd[a0_0x561b('0x29')][_0x1b9302];_0xfe1085[a0_0x561b('0x34')]=this[a0_0x561b('0x34')];if(_0xfe1085['master']==!![])this['masterNodeId']=_0x1b9302;if(_0xfe1085[a0_0x561b('0x45')]==a0_0x561b('0x24'))this[a0_0x561b('0x29')][a0_0x561b('0x35')](new streamingAirQualityNode(this[a0_0x561b('0x2f')],this[a0_0x561b('0x14')],_0xfe1085,_0x4d2d1a,_0x2a8089[a0_0x561b('0x2a')],_0x1b9302,_0x2a8089));else{if(_0xfe1085[a0_0x561b('0x45')]==a0_0x561b('0x2b'))this['nodes'][a0_0x561b('0x35')](new streamingTrafficCounterNode(this[a0_0x561b('0x2f')],this[a0_0x561b('0x14')],_0xfe1085,_0x4d2d1a,_0x2a8089[a0_0x561b('0x2a')],_0x1b9302,_0x2a8089));else{if(_0xfe1085[a0_0x561b('0x45')]==a0_0x561b('0x27'))this[a0_0x561b('0x29')]['push'](new streamingSmartLampNode(this[a0_0x561b('0x2f')],this['connectionConfig'],_0xfe1085,_0x4d2d1a,_0x2a8089[a0_0x561b('0x2a')],_0x1b9302,_0x2a8089));else{if(_0xfe1085[a0_0x561b('0x45')]=='timevalue')this[a0_0x561b('0x29')][a0_0x561b('0x35')](new streamingTimeValueNode(this[a0_0x561b('0x2f')],this[a0_0x561b('0x14')],_0xfe1085,_0x4d2d1a,_0x2a8089[a0_0x561b('0x2a')],_0x1b9302,_0x2a8089));else{if(_0xfe1085[a0_0x561b('0x45')]=='substation')this[a0_0x561b('0x29')][a0_0x561b('0x35')](new streamingSubstationNode(this['base'],this[a0_0x561b('0x14')],_0xfe1085,_0x4d2d1a,_0x2a8089[a0_0x561b('0x2a')],_0x1b9302,_0x2a8089));else{if(_0xfe1085[a0_0x561b('0x45')]==a0_0x561b('0x8'))this[a0_0x561b('0x29')][a0_0x561b('0x35')](new streamingEnergyNode(this[a0_0x561b('0x2f')],this[a0_0x561b('0x14')],_0xfe1085,_0x4d2d1a,_0x2a8089[a0_0x561b('0x2a')],_0x1b9302,_0x2a8089));else{if(_0xfe1085['type']==a0_0x561b('0x2e'))this['nodes'][a0_0x561b('0x35')](new streamingTrainNode(this[a0_0x561b('0x2f')],this['connectionConfig'],_0xfe1085,_0x4d2d1a,_0x2a8089[a0_0x561b('0x2a')],_0x1b9302,_0x2a8089));else{if(_0xfe1085[a0_0x561b('0x45')]=='static')this[a0_0x561b('0x29')][a0_0x561b('0x35')](new streamingStaticNode(this[a0_0x561b('0x2f')],this[a0_0x561b('0x14')],_0xfe1085,_0x4d2d1a,_0x2a8089['processRecordHook'],_0x1b9302,_0x2a8089));else _0xfe1085['type']==a0_0x561b('0x3d')?this[a0_0x561b('0x29')][a0_0x561b('0x35')](new streamingWeatherNode(this[a0_0x561b('0x2f')],this[a0_0x561b('0x14')],_0xfe1085,_0x4d2d1a,_0x2a8089['processRecordHook'],_0x1b9302,_0x2a8089)):console[a0_0x561b('0x42')](a0_0x561b('0x21'));}}}}}}}}console[a0_0x561b('0x42')](a0_0x561b('0x1e')+this['nodes'][a0_0x561b('0x6')]+a0_0x561b('0x25'));'model'in _0x552fbd&&(this[a0_0x561b('0x4')]=new IncrementalLearning(_0x552fbd,_0x2a8089),this[a0_0x561b('0x31')]=a0_0x561b('0x9')+this['fusion_id']);if(a0_0x561b('0x26')in _0x552fbd){if(_0x552fbd[a0_0x561b('0x26')][a0_0x561b('0x45')]==a0_0x561b('0x37'))this[a0_0x561b('0x39')]=new KafkaNodeBroker(this[a0_0x561b('0x14')],this[a0_0x561b('0x31')],this['fusion_id']),this[a0_0x561b('0x39')][a0_0x561b('0x19')]();else _0x552fbd[a0_0x561b('0x26')][a0_0x561b('0x45')]=='mqtt'?(this[a0_0x561b('0x39')]=new MQTTBroker(this['connectionConfig'],this[a0_0x561b('0x31')],this[a0_0x561b('0x3')]),this[a0_0x561b('0x39')][a0_0x561b('0x19')]()):this[a0_0x561b('0x39')]=new AbstractBroker(this['connectionConfig'],this[a0_0x561b('0x31')],this[a0_0x561b('0x3')]);}}['processRecordHook'](_0x5da461,_0x4724d5){if(!_0x4724d5[a0_0x561b('0x3a')]){for(let _0x1ffc34 in _0x4724d5['nodes']){if(_0x4724d5['nodes'][_0x1ffc34][a0_0x561b('0x18')][a0_0x561b('0x6')]==0x0)return null;}_0x4724d5[a0_0x561b('0x3a')]=!![];}_0x4724d5['nodes'][_0x4724d5[a0_0x561b('0x2')]][a0_0x561b('0x18')][a0_0x561b('0x6')]>0x0&&_0x4724d5['masterSatisfied']==![]&&(_0x5da461=_0x4724d5[a0_0x561b('0x2')]);;if(_0x4724d5['nodes'][_0x5da461]['isMaster']()==!![]){_0x4724d5[a0_0x561b('0x29')][_0x5da461][a0_0x561b('0x3c')]();let _0x1cf0d4=_0x4724d5[a0_0x561b('0x29')][_0x5da461]['getOffsetTimestamp'](),_0x3a4272=!![];for(let _0x43b878 in _0x4724d5['nodes']){_0x43b878!=_0x5da461&&(_0x4724d5[a0_0x561b('0x29')][_0x43b878][a0_0x561b('0x32')](_0x1cf0d4)?!_0x4724d5[a0_0x561b('0x29')][_0x43b878]['checkDataAvailability']()&&(_0x3a4272=![]):_0x3a4272=![]);}if(_0x3a4272&&_0x4724d5[a0_0x561b('0xf')]!=_0x1cf0d4){_0x4724d5[a0_0x561b('0x15')]=!![];let _0x467fdf=_0x4724d5['buildFeatureVector']();if('model'in _0x4724d5[a0_0x561b('0x1c')]){let _0x1dd94e;_0x467fdf[a0_0x561b('0x6')]!=0x0&&(_0x1dd94e=_0x4724d5[a0_0x561b('0x4')][a0_0x561b('0x1f')](_0x467fdf,_0x1cf0d4),_0x4724d5['broadcastPrediction'](_0x1dd94e['ts'],_0x1dd94e[a0_0x561b('0x1')],_0x1dd94e[a0_0x561b('0x20')]));}else _0x4724d5[a0_0x561b('0x3e')](_0x1cf0d4,_0x467fdf);_0x4724d5['lastTimestamp']=_0x1cf0d4,_0x4724d5[a0_0x561b('0x7')]=_0x467fdf,_0x4724d5[a0_0x561b('0x0')]();}else console['log'](a0_0x561b('0x33')),_0x4724d5[a0_0x561b('0x15')]=![];}else{if(!_0x4724d5['masterSatisfied']){}}}[a0_0x561b('0x11')](){let _0x1dfab9=[];for(let _0x2263c8 in this[a0_0x561b('0x29')]){let _0xd12d26=this[a0_0x561b('0x29')][_0x2263c8][a0_0x561b('0x30')]();if(_0xd12d26==![])return console[a0_0x561b('0x42')]('Can\x20not\x20be\x20generated!'),[];let _0x235274=this[a0_0x561b('0x29')][_0x2263c8][a0_0x561b('0x40')]();_0x1dfab9=_0x1dfab9['concat'](_0x235274);}return _0x1dfab9;}[a0_0x561b('0x3e')](_0x50cdac,_0x959700){let _0x4fe998=JSON['stringify']({'timestamp':_0x50cdac,'ftr_vector':_0x959700});if(_0x959700!=[])fs[a0_0x561b('0x10')](a0_0x561b('0x41')+this[a0_0x561b('0x3')]+'.json',_0x4fe998+'\x0a');this[a0_0x561b('0x39')]['publish'](_0x4fe998);}[a0_0x561b('0x2c')](_0x6b9d19,_0x3ec766,_0x1e1c10){let _0x31b4d3={'timestamp':_0x6b9d19,'value':_0x3ec766,'horizon':_0x1e1c10};this[a0_0x561b('0x39')][a0_0x561b('0x5')](_0x31b4d3);}[a0_0x561b('0x0')](){for(let _0x2a2e47 in this[a0_0x561b('0x29')]){this[a0_0x561b('0x29')][_0x2a2e47][a0_0x561b('0x22')]();}}[a0_0x561b('0x44')](){}}module['exports']=streamFusion;